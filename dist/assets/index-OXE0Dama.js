var u6=Object.defineProperty;var TE=r=>{throw TypeError(r)};var d6=(r,e,t)=>e in r?u6(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Mr=(r,e,t)=>d6(r,typeof e!="symbol"?e+"":e,t),vw=(r,e,t)=>e.has(r)||TE("Cannot "+t);var Se=(r,e,t)=>(vw(r,e,"read from private field"),t?t.call(r):e.get(r)),Ut=(r,e,t)=>e.has(r)?TE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Ct=(r,e,t,n)=>(vw(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),on=(r,e,t)=>(vw(r,e,"access private method"),t);var fm=(r,e,t,n)=>({set _(s){Ct(r,e,s,t)},get _(){return Se(r,e,n)}});function h6(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function I0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function f6(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var ww={exports:{}},Zd={},xw={exports:{}},Tt={},NE;function p6(){if(NE)return Tt;NE=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=f&&F[f]||F["@@iterator"],typeof F=="function"?F:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function x(F,q,oe){this.props=F,this.context=q,this.refs=w,this.updater=oe||m}x.prototype.isReactComponent={},x.prototype.setState=function(F,q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,q,"setState")},x.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=x.prototype;function C(F,q,oe){this.props=F,this.context=q,this.refs=w,this.updater=oe||m}var A=C.prototype=new _;A.constructor=C,v(A,x.prototype),A.isPureReactComponent=!0;var T=Array.isArray,P=Object.prototype.hasOwnProperty,O={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function M(F,q,oe){var re,ee={},ye=null,ve=null;if(q!=null)for(re in q.ref!==void 0&&(ve=q.ref),q.key!==void 0&&(ye=""+q.key),q)P.call(q,re)&&!z.hasOwnProperty(re)&&(ee[re]=q[re]);var he=arguments.length-2;if(he===1)ee.children=oe;else if(1<he){for(var xe=Array(he),Ce=0;Ce<he;Ce++)xe[Ce]=arguments[Ce+2];ee.children=xe}if(F&&F.defaultProps)for(re in he=F.defaultProps,he)ee[re]===void 0&&(ee[re]=he[re]);return{$$typeof:r,type:F,key:ye,ref:ve,props:ee,_owner:O.current}}function D(F,q){return{$$typeof:r,type:F.type,key:q,ref:F.ref,props:F.props,_owner:F._owner}}function H(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function Z(F){var q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(oe){return q[oe]})}var R=/\/+/g;function U(F,q){return typeof F=="object"&&F!==null&&F.key!=null?Z(""+F.key):q.toString(36)}function k(F,q,oe,re,ee){var ye=typeof F;(ye==="undefined"||ye==="boolean")&&(F=null);var ve=!1;if(F===null)ve=!0;else switch(ye){case"string":case"number":ve=!0;break;case"object":switch(F.$$typeof){case r:case e:ve=!0}}if(ve)return ve=F,ee=ee(ve),F=re===""?"."+U(ve,0):re,T(ee)?(oe="",F!=null&&(oe=F.replace(R,"$&/")+"/"),k(ee,q,oe,"",function(Ce){return Ce})):ee!=null&&(H(ee)&&(ee=D(ee,oe+(!ee.key||ve&&ve.key===ee.key?"":(""+ee.key).replace(R,"$&/")+"/")+F)),q.push(ee)),1;if(ve=0,re=re===""?".":re+":",T(F))for(var he=0;he<F.length;he++){ye=F[he];var xe=re+U(ye,he);ve+=k(ye,q,oe,xe,ee)}else if(xe=p(F),typeof xe=="function")for(F=xe.call(F),he=0;!(ye=F.next()).done;)ye=ye.value,xe=re+U(ye,he++),ve+=k(ye,q,oe,xe,ee);else if(ye==="object")throw q=String(F),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ve}function W(F,q,oe){if(F==null)return F;var re=[],ee=0;return k(F,re,"","",function(ye){return q.call(oe,ye,ee++)}),re}function B(F){if(F._status===-1){var q=F._result;q=q(),q.then(function(oe){(F._status===0||F._status===-1)&&(F._status=1,F._result=oe)},function(oe){(F._status===0||F._status===-1)&&(F._status=2,F._result=oe)}),F._status===-1&&(F._status=0,F._result=q)}if(F._status===1)return F._result.default;throw F._result}var I={current:null},G={transition:null},V={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:G,ReactCurrentOwner:O};function X(){throw Error("act(...) is not supported in production builds of React.")}return Tt.Children={map:W,forEach:function(F,q,oe){W(F,function(){q.apply(this,arguments)},oe)},count:function(F){var q=0;return W(F,function(){q++}),q},toArray:function(F){return W(F,function(q){return q})||[]},only:function(F){if(!H(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Tt.Component=x,Tt.Fragment=t,Tt.Profiler=s,Tt.PureComponent=C,Tt.StrictMode=n,Tt.Suspense=l,Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Tt.act=X,Tt.cloneElement=function(F,q,oe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var re=v({},F.props),ee=F.key,ye=F.ref,ve=F._owner;if(q!=null){if(q.ref!==void 0&&(ye=q.ref,ve=O.current),q.key!==void 0&&(ee=""+q.key),F.type&&F.type.defaultProps)var he=F.type.defaultProps;for(xe in q)P.call(q,xe)&&!z.hasOwnProperty(xe)&&(re[xe]=q[xe]===void 0&&he!==void 0?he[xe]:q[xe])}var xe=arguments.length-2;if(xe===1)re.children=oe;else if(1<xe){he=Array(xe);for(var Ce=0;Ce<xe;Ce++)he[Ce]=arguments[Ce+2];re.children=he}return{$$typeof:r,type:F.type,key:ee,ref:ye,props:re,_owner:ve}},Tt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:i,_context:F},F.Consumer=F},Tt.createElement=M,Tt.createFactory=function(F){var q=M.bind(null,F);return q.type=F,q},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(F){return{$$typeof:a,render:F}},Tt.isValidElement=H,Tt.lazy=function(F){return{$$typeof:u,_payload:{_status:-1,_result:F},_init:B}},Tt.memo=function(F,q){return{$$typeof:d,type:F,compare:q===void 0?null:q}},Tt.startTransition=function(F){var q=G.transition;G.transition={};try{F()}finally{G.transition=q}},Tt.unstable_act=X,Tt.useCallback=function(F,q){return I.current.useCallback(F,q)},Tt.useContext=function(F){return I.current.useContext(F)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(F){return I.current.useDeferredValue(F)},Tt.useEffect=function(F,q){return I.current.useEffect(F,q)},Tt.useId=function(){return I.current.useId()},Tt.useImperativeHandle=function(F,q,oe){return I.current.useImperativeHandle(F,q,oe)},Tt.useInsertionEffect=function(F,q){return I.current.useInsertionEffect(F,q)},Tt.useLayoutEffect=function(F,q){return I.current.useLayoutEffect(F,q)},Tt.useMemo=function(F,q){return I.current.useMemo(F,q)},Tt.useReducer=function(F,q,oe){return I.current.useReducer(F,q,oe)},Tt.useRef=function(F){return I.current.useRef(F)},Tt.useState=function(F){return I.current.useState(F)},Tt.useSyncExternalStore=function(F,q,oe){return I.current.useSyncExternalStore(F,q,oe)},Tt.useTransition=function(){return I.current.useTransition()},Tt.version="18.3.1",Tt}var jE;function z1(){return jE||(jE=1,xw.exports=p6()),xw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function m6(){if(PE)return Zd;PE=1;var r=z1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,d){var u,f={},p=null,m=null;d!==void 0&&(p=""+d),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)n.call(l,u)&&!i.hasOwnProperty(u)&&(f[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:a,key:p,ref:m,props:f,_owner:s.current}}return Zd.Fragment=t,Zd.jsx=o,Zd.jsxs=o,Zd}var RE;function g6(){return RE||(RE=1,ww.exports=m6()),ww.exports}var g=g6(),pm={},bw={exports:{}},Mn={},_w={exports:{}},kw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function y6(){return OE||(OE=1,function(r){function e(G,V){var X=G.length;G.push(V);e:for(;0<X;){var F=X-1>>>1,q=G[F];if(0<s(q,V))G[F]=V,G[X]=q,X=F;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var V=G[0],X=G.pop();if(X!==V){G[0]=X;e:for(var F=0,q=G.length,oe=q>>>1;F<oe;){var re=2*(F+1)-1,ee=G[re],ye=re+1,ve=G[ye];if(0>s(ee,X))ye<q&&0>s(ve,ee)?(G[F]=ve,G[ye]=X,F=ye):(G[F]=ee,G[re]=X,F=re);else if(ye<q&&0>s(ve,X))G[F]=ve,G[ye]=X,F=ye;else break e}}return V}function s(G,V){var X=G.sortIndex-V.sortIndex;return X!==0?X:G.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],d=[],u=1,f=null,p=3,m=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var V=t(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=G)n(d),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(d)}}function T(G){if(w=!1,A(G),!v)if(t(l)!==null)v=!0,B(P);else{var V=t(d);V!==null&&I(T,V.startTime-G)}}function P(G,V){v=!1,w&&(w=!1,_(M),M=-1),m=!0;var X=p;try{for(A(V),f=t(l);f!==null&&(!(f.expirationTime>V)||G&&!Z());){var F=f.callback;if(typeof F=="function"){f.callback=null,p=f.priorityLevel;var q=F(f.expirationTime<=V);V=r.unstable_now(),typeof q=="function"?f.callback=q:f===t(l)&&n(l),A(V)}else n(l);f=t(l)}if(f!==null)var oe=!0;else{var re=t(d);re!==null&&I(T,re.startTime-V),oe=!1}return oe}finally{f=null,p=X,m=!1}}var O=!1,z=null,M=-1,D=5,H=-1;function Z(){return!(r.unstable_now()-H<D)}function R(){if(z!==null){var G=r.unstable_now();H=G;var V=!0;try{V=z(!0,G)}finally{V?U():(O=!1,z=null)}}else O=!1}var U;if(typeof C=="function")U=function(){C(R)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,W=k.port2;k.port1.onmessage=R,U=function(){W.postMessage(null)}}else U=function(){x(R,0)};function B(G){z=G,O||(O=!0,U())}function I(G,V){M=x(function(){G(r.unstable_now())},V)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){v||m||(v=!0,B(P))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return p},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(G){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var X=p;p=V;try{return G()}finally{p=X}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,V){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var X=p;p=G;try{return V()}finally{p=X}},r.unstable_scheduleCallback=function(G,V,X){var F=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?F+X:F):X=F,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=X+q,G={id:u++,callback:V,priorityLevel:G,startTime:X,expirationTime:q,sortIndex:-1},X>F?(G.sortIndex=X,e(d,G),t(l)===null&&G===t(d)&&(w?(_(M),M=-1):w=!0,I(T,X-F))):(G.sortIndex=q,e(l,G),v||m||(v=!0,B(P))),G},r.unstable_shouldYield=Z,r.unstable_wrapCallback=function(G){var V=p;return function(){var X=p;p=V;try{return G.apply(this,arguments)}finally{p=X}}}}(kw)),kw}var ME;function v6(){return ME||(ME=1,_w.exports=y6()),_w.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function w6(){if(DE)return Mn;DE=1;var r=z1(),e=v6();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(s[c]=h,c=0;c<h.length;c++)n.add(h[c])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function p(c){return l.call(f,c)?!0:l.call(u,c)?!1:d.test(c)?f[c]=!0:(u[c]=!0,!1)}function m(c,h,y,b){if(y!==null&&y.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return b?!1:y!==null?!y.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,y,b){if(h===null||typeof h>"u"||m(c,h,y,b))return!0;if(b)return!1;if(y!==null)switch(y.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function w(c,h,y,b,E,j,K){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=b,this.attributeNamespace=E,this.mustUseProperty=y,this.propertyName=c,this.type=h,this.sanitizeURL=j,this.removeEmptyString=K}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){x[c]=new w(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];x[h]=new w(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){x[c]=new w(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){x[c]=new w(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){x[c]=new w(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){x[c]=new w(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){x[c]=new w(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){x[c]=new w(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){x[c]=new w(c,5,!1,c.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(_,C);x[h]=new w(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(_,C);x[h]=new w(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(_,C);x[h]=new w(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){x[c]=new w(c,1,!1,c.toLowerCase(),null,!1,!1)}),x.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){x[c]=new w(c,1,!1,c.toLowerCase(),null,!0,!0)});function A(c,h,y,b){var E=x.hasOwnProperty(h)?x[h]:null;(E!==null?E.type!==0:b||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,y,E,b)&&(y=null),b||E===null?p(h)&&(y===null?c.removeAttribute(h):c.setAttribute(h,""+y)):E.mustUseProperty?c[E.propertyName]=y===null?E.type===3?!1:"":y:(h=E.attributeName,b=E.attributeNamespace,y===null?c.removeAttribute(h):(E=E.type,y=E===3||E===4&&y===!0?"":""+y,b?c.setAttributeNS(b,h,y):c.setAttribute(h,y))))}var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),O=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),Z=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),G=Symbol.iterator;function V(c){return c===null||typeof c!="object"?null:(c=G&&c[G]||c["@@iterator"],typeof c=="function"?c:null)}var X=Object.assign,F;function q(c){if(F===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);F=h&&h[1]||""}return`
`+F+c}var oe=!1;function re(c,h){if(!c||oe)return"";oe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(we){var b=we}Reflect.construct(c,[],h)}else{try{h.call()}catch(we){b=we}c.call(h.prototype)}else{try{throw Error()}catch(we){b=we}c()}}catch(we){if(we&&b&&typeof we.stack=="string"){for(var E=we.stack.split(`
`),j=b.stack.split(`
`),K=E.length-1,se=j.length-1;1<=K&&0<=se&&E[K]!==j[se];)se--;for(;1<=K&&0<=se;K--,se--)if(E[K]!==j[se]){if(K!==1||se!==1)do if(K--,se--,0>se||E[K]!==j[se]){var ae=`
`+E[K].replace(" at new "," at ");return c.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",c.displayName)),ae}while(1<=K&&0<=se);break}}}finally{oe=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?q(c):""}function ee(c){switch(c.tag){case 5:return q(c.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return c=re(c.type,!1),c;case 11:return c=re(c.type.render,!1),c;case 1:return c=re(c.type,!0),c;default:return""}}function ye(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case z:return"Fragment";case O:return"Portal";case D:return"Profiler";case M:return"StrictMode";case U:return"Suspense";case k:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case Z:return(c.displayName||"Context")+".Consumer";case H:return(c._context.displayName||"Context")+".Provider";case R:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case W:return h=c.displayName||null,h!==null?h:ye(c.type)||"Memo";case B:h=c._payload,c=c._init;try{return ye(c(h))}catch{}}return null}function ve(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(h);case 8:return h===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function he(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function xe(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ce(c){var h=xe(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),b=""+c[h];if(!c.hasOwnProperty(h)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,j=y.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return E.call(this)},set:function(K){b=""+K,j.call(this,K)}}),Object.defineProperty(c,h,{enumerable:y.enumerable}),{getValue:function(){return b},setValue:function(K){b=""+K},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function ue(c){c._valueTracker||(c._valueTracker=Ce(c))}function _e(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var y=h.getValue(),b="";return c&&(b=xe(c)?c.checked?"true":"false":c.value),c=b,c!==y?(h.setValue(c),!0):!1}function Ie(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function $(c,h){var y=h.checked;return X({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:y??c._wrapperState.initialChecked})}function me(c,h){var y=h.defaultValue==null?"":h.defaultValue,b=h.checked!=null?h.checked:h.defaultChecked;y=he(h.value!=null?h.value:y),c._wrapperState={initialChecked:b,initialValue:y,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function te(c,h){h=h.checked,h!=null&&A(c,"checked",h,!1)}function Y(c,h){te(c,h);var y=he(h.value),b=h.type;if(y!=null)b==="number"?(y===0&&c.value===""||c.value!=y)&&(c.value=""+y):c.value!==""+y&&(c.value=""+y);else if(b==="submit"||b==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?L(c,h.type,y):h.hasOwnProperty("defaultValue")&&L(c,h.type,he(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function N(c,h,y){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var b=h.type;if(!(b!=="submit"&&b!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,y||h===c.value||(c.value=h),c.defaultValue=h}y=c.name,y!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,y!==""&&(c.name=y)}function L(c,h,y){(h!=="number"||Ie(c.ownerDocument)!==c)&&(y==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+y&&(c.defaultValue=""+y))}var J=Array.isArray;function ne(c,h,y,b){if(c=c.options,h){h={};for(var E=0;E<y.length;E++)h["$"+y[E]]=!0;for(y=0;y<c.length;y++)E=h.hasOwnProperty("$"+c[y].value),c[y].selected!==E&&(c[y].selected=E),E&&b&&(c[y].defaultSelected=!0)}else{for(y=""+he(y),h=null,E=0;E<c.length;E++){if(c[E].value===y){c[E].selected=!0,b&&(c[E].defaultSelected=!0);return}h!==null||c[E].disabled||(h=c[E])}h!==null&&(h.selected=!0)}}function Q(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function ie(c,h){var y=h.value;if(y==null){if(y=h.children,h=h.defaultValue,y!=null){if(h!=null)throw Error(t(92));if(J(y)){if(1<y.length)throw Error(t(93));y=y[0]}h=y}h==null&&(h=""),y=h}c._wrapperState={initialValue:he(y)}}function le(c,h){var y=he(h.value),b=he(h.defaultValue);y!=null&&(y=""+y,y!==c.value&&(c.value=y),h.defaultValue==null&&c.defaultValue!==y&&(c.defaultValue=y)),b!=null&&(c.defaultValue=""+b)}function de(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function ke(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Te(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?ke(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var De,ot=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,y,b,E){MSApp.execUnsafeLocalFunction(function(){return c(h,y,b,E)})}:c}(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(De=De||document.createElement("div"),De.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=De.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function yt(c,h){if(h){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=h;return}}c.textContent=h}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zt=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(c){zt.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),St[h]=St[c]})});function gt(c,h,y){return h==null||typeof h=="boolean"||h===""?"":y||typeof h!="number"||h===0||St.hasOwnProperty(c)&&St[c]?(""+h).trim():h+"px"}function Gt(c,h){c=c.style;for(var y in h)if(h.hasOwnProperty(y)){var b=y.indexOf("--")===0,E=gt(y,h[y],b);y==="float"&&(y="cssFloat"),b?c.setProperty(y,E):c[y]=E}}var nr=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ft(c,h){if(h){if(nr[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function Re(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function Xe(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var $e=null,nt=null,st=null;function wt(c){if(c=Id(c)){if(typeof $e!="function")throw Error(t(280));var h=c.stateNode;h&&(h=Tp(h),$e(c.stateNode,c.type,h))}}function ur(c){nt?st?st.push(c):st=[c]:nt=c}function en(){if(nt){var c=nt,h=st;if(st=nt=null,wt(c),h)for(c=0;c<h.length;c++)wt(h[c])}}function Po(c,h){return c(h)}function ls(){}var Kn=!1;function ap(c,h,y){if(Kn)return c(h,y);Kn=!0;try{return Po(c,h,y)}finally{Kn=!1,(nt!==null||st!==null)&&(ls(),en())}}function rl(c,h){var y=c.stateNode;if(y===null)return null;var b=Tp(y);if(b===null)return null;y=b[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(t(231,h,typeof y));return y}var ac=!1;if(a)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){ac=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{ac=!1}function lc(c,h,y,b,E,j,K,se,ae){var we=Array.prototype.slice.call(arguments,3);try{h.apply(y,we)}catch(Ne){this.onError(Ne)}}var sl=!1,il=null,cc=!1,ol=null,lp={onError:function(c){sl=!0,il=c}};function Ly(c,h,y,b,E,j,K,se,ae){sl=!1,il=null,lc.apply(lp,arguments)}function md(c,h,y,b,E,j,K,se,ae){if(Ly.apply(this,arguments),sl){if(sl){var we=il;sl=!1,il=null}else throw Error(t(198));cc||(cc=!0,ol=we)}}function Gi(c){var h=c,y=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(y=h.return),c=h.return;while(c)}return h.tag===3?y:null}function gd(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function uc(c){if(Gi(c)!==c)throw Error(t(188))}function Fy(c){var h=c.alternate;if(!h){if(h=Gi(c),h===null)throw Error(t(188));return h!==c?null:c}for(var y=c,b=h;;){var E=y.return;if(E===null)break;var j=E.alternate;if(j===null){if(b=E.return,b!==null){y=b;continue}break}if(E.child===j.child){for(j=E.child;j;){if(j===y)return uc(E),c;if(j===b)return uc(E),h;j=j.sibling}throw Error(t(188))}if(y.return!==b.return)y=E,b=j;else{for(var K=!1,se=E.child;se;){if(se===y){K=!0,y=E,b=j;break}if(se===b){K=!0,b=E,y=j;break}se=se.sibling}if(!K){for(se=j.child;se;){if(se===y){K=!0,y=j,b=E;break}if(se===b){K=!0,b=j,y=E;break}se=se.sibling}if(!K)throw Error(t(189))}}if(y.alternate!==b)throw Error(t(190))}if(y.tag!==3)throw Error(t(188));return y.stateNode.current===y?c:h}function Ro(c){return c=Fy(c),c!==null?cp(c):null}function cp(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=cp(c);if(h!==null)return h;c=c.sibling}return null}var yd=e.unstable_scheduleCallback,pe=e.unstable_cancelCallback,Ue=e.unstable_shouldYield,dt=e.unstable_requestPaint,Ke=e.unstable_now,At=e.unstable_getCurrentPriorityLevel,Rt=e.unstable_ImmediatePriority,Br=e.unstable_UserBlockingPriority,dr=e.unstable_NormalPriority,Pr=e.unstable_LowPriority,Oo=e.unstable_IdlePriority,dc=null,li=null;function CF(c){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(dc,c,void 0,(c.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:TF,EF=Math.log,AF=Math.LN2;function TF(c){return c>>>=0,c===0?32:31-(EF(c)/AF|0)|0}var up=64,dp=4194304;function vd(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function hp(c,h){var y=c.pendingLanes;if(y===0)return 0;var b=0,E=c.suspendedLanes,j=c.pingedLanes,K=y&268435455;if(K!==0){var se=K&~E;se!==0?b=vd(se):(j&=K,j!==0&&(b=vd(j)))}else K=y&~E,K!==0?b=vd(K):j!==0&&(b=vd(j));if(b===0)return 0;if(h!==0&&h!==b&&(h&E)===0&&(E=b&-b,j=h&-h,E>=j||E===16&&(j&4194240)!==0))return h;if((b&4)!==0&&(b|=y&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=b;0<h;)y=31-Rs(h),E=1<<y,b|=c[y],h&=~E;return b}function NF(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jF(c,h){for(var y=c.suspendedLanes,b=c.pingedLanes,E=c.expirationTimes,j=c.pendingLanes;0<j;){var K=31-Rs(j),se=1<<K,ae=E[K];ae===-1?((se&y)===0||(se&b)!==0)&&(E[K]=NF(se,h)):ae<=h&&(c.expiredLanes|=se),j&=~se}}function By(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function iS(){var c=up;return up<<=1,(up&4194240)===0&&(up=64),c}function $y(c){for(var h=[],y=0;31>y;y++)h.push(c);return h}function wd(c,h,y){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Rs(h),c[h]=y}function PF(c,h){var y=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<y;){var E=31-Rs(y),j=1<<E;h[E]=0,b[E]=-1,c[E]=-1,y&=~j}}function zy(c,h){var y=c.entangledLanes|=h;for(c=c.entanglements;y;){var b=31-Rs(y),E=1<<b;E&h|c[b]&h&&(c[b]|=h),y&=~E}}var qt=0;function oS(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var aS,Uy,lS,cS,uS,Vy=!1,fp=[],Mo=null,Do=null,Io=null,xd=new Map,bd=new Map,Lo=[],RF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dS(c,h){switch(c){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":xd.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":bd.delete(h.pointerId)}}function _d(c,h,y,b,E,j){return c===null||c.nativeEvent!==j?(c={blockedOn:h,domEventName:y,eventSystemFlags:b,nativeEvent:j,targetContainers:[E]},h!==null&&(h=Id(h),h!==null&&Uy(h)),c):(c.eventSystemFlags|=b,h=c.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),c)}function OF(c,h,y,b,E){switch(h){case"focusin":return Mo=_d(Mo,c,h,y,b,E),!0;case"dragenter":return Do=_d(Do,c,h,y,b,E),!0;case"mouseover":return Io=_d(Io,c,h,y,b,E),!0;case"pointerover":var j=E.pointerId;return xd.set(j,_d(xd.get(j)||null,c,h,y,b,E)),!0;case"gotpointercapture":return j=E.pointerId,bd.set(j,_d(bd.get(j)||null,c,h,y,b,E)),!0}return!1}function hS(c){var h=al(c.target);if(h!==null){var y=Gi(h);if(y!==null){if(h=y.tag,h===13){if(h=gd(y),h!==null){c.blockedOn=h,uS(c.priority,function(){lS(y)});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function pp(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var y=Hy(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(y===null){y=c.nativeEvent;var b=new y.constructor(y.type,y);Ee=b,y.target.dispatchEvent(b),Ee=null}else return h=Id(y),h!==null&&Uy(h),c.blockedOn=y,!1;h.shift()}return!0}function fS(c,h,y){pp(c)&&y.delete(h)}function MF(){Vy=!1,Mo!==null&&pp(Mo)&&(Mo=null),Do!==null&&pp(Do)&&(Do=null),Io!==null&&pp(Io)&&(Io=null),xd.forEach(fS),bd.forEach(fS)}function kd(c,h){c.blockedOn===h&&(c.blockedOn=null,Vy||(Vy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,MF)))}function Sd(c){function h(E){return kd(E,c)}if(0<fp.length){kd(fp[0],c);for(var y=1;y<fp.length;y++){var b=fp[y];b.blockedOn===c&&(b.blockedOn=null)}}for(Mo!==null&&kd(Mo,c),Do!==null&&kd(Do,c),Io!==null&&kd(Io,c),xd.forEach(h),bd.forEach(h),y=0;y<Lo.length;y++)b=Lo[y],b.blockedOn===c&&(b.blockedOn=null);for(;0<Lo.length&&(y=Lo[0],y.blockedOn===null);)hS(y),y.blockedOn===null&&Lo.shift()}var hc=T.ReactCurrentBatchConfig,mp=!0;function DF(c,h,y,b){var E=qt,j=hc.transition;hc.transition=null;try{qt=1,Wy(c,h,y,b)}finally{qt=E,hc.transition=j}}function IF(c,h,y,b){var E=qt,j=hc.transition;hc.transition=null;try{qt=4,Wy(c,h,y,b)}finally{qt=E,hc.transition=j}}function Wy(c,h,y,b){if(mp){var E=Hy(c,h,y,b);if(E===null)lv(c,h,b,gp,y),dS(c,b);else if(OF(E,c,h,y,b))b.stopPropagation();else if(dS(c,b),h&4&&-1<RF.indexOf(c)){for(;E!==null;){var j=Id(E);if(j!==null&&aS(j),j=Hy(c,h,y,b),j===null&&lv(c,h,b,gp,y),j===E)break;E=j}E!==null&&b.stopPropagation()}else lv(c,h,b,null,y)}}var gp=null;function Hy(c,h,y,b){if(gp=null,c=Xe(b),c=al(c),c!==null)if(h=Gi(c),h===null)c=null;else if(y=h.tag,y===13){if(c=gd(h),c!==null)return c;c=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return gp=c,null}function pS(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(At()){case Rt:return 1;case Br:return 4;case dr:case Pr:return 16;case Oo:return 536870912;default:return 16}default:return 16}}var Fo=null,qy=null,yp=null;function mS(){if(yp)return yp;var c,h=qy,y=h.length,b,E="value"in Fo?Fo.value:Fo.textContent,j=E.length;for(c=0;c<y&&h[c]===E[c];c++);var K=y-c;for(b=1;b<=K&&h[y-b]===E[j-b];b++);return yp=E.slice(c,1<b?1-b:void 0)}function vp(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function wp(){return!0}function gS(){return!1}function Gn(c){function h(y,b,E,j,K){this._reactName=y,this._targetInst=E,this.type=b,this.nativeEvent=j,this.target=K,this.currentTarget=null;for(var se in c)c.hasOwnProperty(se)&&(y=c[se],this[se]=y?y(j):j[se]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?wp:gS,this.isPropagationStopped=gS,this}return X(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=wp)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=wp)},persist:function(){},isPersistent:wp}),h}var fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ky=Gn(fc),Cd=X({},fc,{view:0,detail:0}),LF=Gn(Cd),Gy,Yy,Ed,xp=X({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zy,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ed&&(Ed&&c.type==="mousemove"?(Gy=c.screenX-Ed.screenX,Yy=c.screenY-Ed.screenY):Yy=Gy=0,Ed=c),Gy)},movementY:function(c){return"movementY"in c?c.movementY:Yy}}),yS=Gn(xp),FF=X({},xp,{dataTransfer:0}),BF=Gn(FF),$F=X({},Cd,{relatedTarget:0}),Jy=Gn($F),zF=X({},fc,{animationName:0,elapsedTime:0,pseudoElement:0}),UF=Gn(zF),VF=X({},fc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),WF=Gn(VF),HF=X({},fc,{data:0}),vS=Gn(HF),qF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YF(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=GF[c])?!!h[c]:!1}function Zy(){return YF}var JF=X({},Cd,{key:function(c){if(c.key){var h=qF[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=vp(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?KF[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zy,charCode:function(c){return c.type==="keypress"?vp(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?vp(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ZF=Gn(JF),XF=X({},xp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wS=Gn(XF),QF=X({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zy}),e8=Gn(QF),t8=X({},fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),r8=Gn(t8),n8=X({},xp,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),s8=Gn(n8),i8=[9,13,27,32],Xy=a&&"CompositionEvent"in window,Ad=null;a&&"documentMode"in document&&(Ad=document.documentMode);var o8=a&&"TextEvent"in window&&!Ad,xS=a&&(!Xy||Ad&&8<Ad&&11>=Ad),bS=" ",_S=!1;function kS(c,h){switch(c){case"keyup":return i8.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SS(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var pc=!1;function a8(c,h){switch(c){case"compositionend":return SS(h);case"keypress":return h.which!==32?null:(_S=!0,bS);case"textInput":return c=h.data,c===bS&&_S?null:c;default:return null}}function l8(c,h){if(pc)return c==="compositionend"||!Xy&&kS(c,h)?(c=mS(),yp=qy=Fo=null,pc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return xS&&h.locale!=="ko"?null:h.data;default:return null}}var c8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CS(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!c8[c.type]:h==="textarea"}function ES(c,h,y,b){ur(b),h=Cp(h,"onChange"),0<h.length&&(y=new Ky("onChange","change",null,y,b),c.push({event:y,listeners:h}))}var Td=null,Nd=null;function u8(c){WS(c,0)}function bp(c){var h=wc(c);if(_e(h))return c}function d8(c,h){if(c==="change")return h}var AS=!1;if(a){var Qy;if(a){var ev="oninput"in document;if(!ev){var TS=document.createElement("div");TS.setAttribute("oninput","return;"),ev=typeof TS.oninput=="function"}Qy=ev}else Qy=!1;AS=Qy&&(!document.documentMode||9<document.documentMode)}function NS(){Td&&(Td.detachEvent("onpropertychange",jS),Nd=Td=null)}function jS(c){if(c.propertyName==="value"&&bp(Nd)){var h=[];ES(h,Nd,c,Xe(c)),ap(u8,h)}}function h8(c,h,y){c==="focusin"?(NS(),Td=h,Nd=y,Td.attachEvent("onpropertychange",jS)):c==="focusout"&&NS()}function f8(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return bp(Nd)}function p8(c,h){if(c==="click")return bp(h)}function m8(c,h){if(c==="input"||c==="change")return bp(h)}function g8(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Os=typeof Object.is=="function"?Object.is:g8;function jd(c,h){if(Os(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var y=Object.keys(c),b=Object.keys(h);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var E=y[b];if(!l.call(h,E)||!Os(c[E],h[E]))return!1}return!0}function PS(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function RS(c,h){var y=PS(c);c=0;for(var b;y;){if(y.nodeType===3){if(b=c+y.textContent.length,c<=h&&b>=h)return{node:y,offset:h-c};c=b}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=PS(y)}}function OS(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?OS(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function MS(){for(var c=window,h=Ie();h instanceof c.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)c=h.contentWindow;else break;h=Ie(c.document)}return h}function tv(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function y8(c){var h=MS(),y=c.focusedElem,b=c.selectionRange;if(h!==y&&y&&y.ownerDocument&&OS(y.ownerDocument.documentElement,y)){if(b!==null&&tv(y)){if(h=b.start,c=b.end,c===void 0&&(c=h),"selectionStart"in y)y.selectionStart=h,y.selectionEnd=Math.min(c,y.value.length);else if(c=(h=y.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var E=y.textContent.length,j=Math.min(b.start,E);b=b.end===void 0?j:Math.min(b.end,E),!c.extend&&j>b&&(E=b,b=j,j=E),E=RS(y,j);var K=RS(y,b);E&&K&&(c.rangeCount!==1||c.anchorNode!==E.node||c.anchorOffset!==E.offset||c.focusNode!==K.node||c.focusOffset!==K.offset)&&(h=h.createRange(),h.setStart(E.node,E.offset),c.removeAllRanges(),j>b?(c.addRange(h),c.extend(K.node,K.offset)):(h.setEnd(K.node,K.offset),c.addRange(h)))}}for(h=[],c=y;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<h.length;y++)c=h[y],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var v8=a&&"documentMode"in document&&11>=document.documentMode,mc=null,rv=null,Pd=null,nv=!1;function DS(c,h,y){var b=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;nv||mc==null||mc!==Ie(b)||(b=mc,"selectionStart"in b&&tv(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Pd&&jd(Pd,b)||(Pd=b,b=Cp(rv,"onSelect"),0<b.length&&(h=new Ky("onSelect","select",null,h,y),c.push({event:h,listeners:b}),h.target=mc)))}function _p(c,h){var y={};return y[c.toLowerCase()]=h.toLowerCase(),y["Webkit"+c]="webkit"+h,y["Moz"+c]="moz"+h,y}var gc={animationend:_p("Animation","AnimationEnd"),animationiteration:_p("Animation","AnimationIteration"),animationstart:_p("Animation","AnimationStart"),transitionend:_p("Transition","TransitionEnd")},sv={},IS={};a&&(IS=document.createElement("div").style,"AnimationEvent"in window||(delete gc.animationend.animation,delete gc.animationiteration.animation,delete gc.animationstart.animation),"TransitionEvent"in window||delete gc.transitionend.transition);function kp(c){if(sv[c])return sv[c];if(!gc[c])return c;var h=gc[c],y;for(y in h)if(h.hasOwnProperty(y)&&y in IS)return sv[c]=h[y];return c}var LS=kp("animationend"),FS=kp("animationiteration"),BS=kp("animationstart"),$S=kp("transitionend"),zS=new Map,US="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(c,h){zS.set(c,h),i(h,[c])}for(var iv=0;iv<US.length;iv++){var ov=US[iv],w8=ov.toLowerCase(),x8=ov[0].toUpperCase()+ov.slice(1);Bo(w8,"on"+x8)}Bo(LS,"onAnimationEnd"),Bo(FS,"onAnimationIteration"),Bo(BS,"onAnimationStart"),Bo("dblclick","onDoubleClick"),Bo("focusin","onFocus"),Bo("focusout","onBlur"),Bo($S,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rd));function VS(c,h,y){var b=c.type||"unknown-event";c.currentTarget=y,md(b,h,void 0,c),c.currentTarget=null}function WS(c,h){h=(h&4)!==0;for(var y=0;y<c.length;y++){var b=c[y],E=b.event;b=b.listeners;e:{var j=void 0;if(h)for(var K=b.length-1;0<=K;K--){var se=b[K],ae=se.instance,we=se.currentTarget;if(se=se.listener,ae!==j&&E.isPropagationStopped())break e;VS(E,se,we),j=ae}else for(K=0;K<b.length;K++){if(se=b[K],ae=se.instance,we=se.currentTarget,se=se.listener,ae!==j&&E.isPropagationStopped())break e;VS(E,se,we),j=ae}}}if(cc)throw c=ol,cc=!1,ol=null,c}function sr(c,h){var y=h[pv];y===void 0&&(y=h[pv]=new Set);var b=c+"__bubble";y.has(b)||(HS(h,c,2,!1),y.add(b))}function av(c,h,y){var b=0;h&&(b|=4),HS(y,c,b,h)}var Sp="_reactListening"+Math.random().toString(36).slice(2);function Od(c){if(!c[Sp]){c[Sp]=!0,n.forEach(function(y){y!=="selectionchange"&&(b8.has(y)||av(y,!1,c),av(y,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Sp]||(h[Sp]=!0,av("selectionchange",!1,h))}}function HS(c,h,y,b){switch(pS(h)){case 1:var E=DF;break;case 4:E=IF;break;default:E=Wy}y=E.bind(null,h,y,c),E=void 0,!ac||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),b?E!==void 0?c.addEventListener(h,y,{capture:!0,passive:E}):c.addEventListener(h,y,!0):E!==void 0?c.addEventListener(h,y,{passive:E}):c.addEventListener(h,y,!1)}function lv(c,h,y,b,E){var j=b;if((h&1)===0&&(h&2)===0&&b!==null)e:for(;;){if(b===null)return;var K=b.tag;if(K===3||K===4){var se=b.stateNode.containerInfo;if(se===E||se.nodeType===8&&se.parentNode===E)break;if(K===4)for(K=b.return;K!==null;){var ae=K.tag;if((ae===3||ae===4)&&(ae=K.stateNode.containerInfo,ae===E||ae.nodeType===8&&ae.parentNode===E))return;K=K.return}for(;se!==null;){if(K=al(se),K===null)return;if(ae=K.tag,ae===5||ae===6){b=j=K;continue e}se=se.parentNode}}b=b.return}ap(function(){var we=j,Ne=Xe(y),je=[];e:{var Ae=zS.get(c);if(Ae!==void 0){var We=Ky,Ze=c;switch(c){case"keypress":if(vp(y)===0)break e;case"keydown":case"keyup":We=ZF;break;case"focusin":Ze="focus",We=Jy;break;case"focusout":Ze="blur",We=Jy;break;case"beforeblur":case"afterblur":We=Jy;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":We=yS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":We=BF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":We=e8;break;case LS:case FS:case BS:We=UF;break;case $S:We=r8;break;case"scroll":We=LF;break;case"wheel":We=s8;break;case"copy":case"cut":case"paste":We=WF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":We=wS}var Qe=(h&4)!==0,br=!Qe&&c==="scroll",fe=Qe?Ae!==null?Ae+"Capture":null:Ae;Qe=[];for(var ce=we,ge;ce!==null;){ge=ce;var Me=ge.stateNode;if(ge.tag===5&&Me!==null&&(ge=Me,fe!==null&&(Me=rl(ce,fe),Me!=null&&Qe.push(Md(ce,Me,ge)))),br)break;ce=ce.return}0<Qe.length&&(Ae=new We(Ae,Ze,null,y,Ne),je.push({event:Ae,listeners:Qe}))}}if((h&7)===0){e:{if(Ae=c==="mouseover"||c==="pointerover",We=c==="mouseout"||c==="pointerout",Ae&&y!==Ee&&(Ze=y.relatedTarget||y.fromElement)&&(al(Ze)||Ze[Yi]))break e;if((We||Ae)&&(Ae=Ne.window===Ne?Ne:(Ae=Ne.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,We?(Ze=y.relatedTarget||y.toElement,We=we,Ze=Ze?al(Ze):null,Ze!==null&&(br=Gi(Ze),Ze!==br||Ze.tag!==5&&Ze.tag!==6)&&(Ze=null)):(We=null,Ze=we),We!==Ze)){if(Qe=yS,Me="onMouseLeave",fe="onMouseEnter",ce="mouse",(c==="pointerout"||c==="pointerover")&&(Qe=wS,Me="onPointerLeave",fe="onPointerEnter",ce="pointer"),br=We==null?Ae:wc(We),ge=Ze==null?Ae:wc(Ze),Ae=new Qe(Me,ce+"leave",We,y,Ne),Ae.target=br,Ae.relatedTarget=ge,Me=null,al(Ne)===we&&(Qe=new Qe(fe,ce+"enter",Ze,y,Ne),Qe.target=ge,Qe.relatedTarget=br,Me=Qe),br=Me,We&&Ze)t:{for(Qe=We,fe=Ze,ce=0,ge=Qe;ge;ge=yc(ge))ce++;for(ge=0,Me=fe;Me;Me=yc(Me))ge++;for(;0<ce-ge;)Qe=yc(Qe),ce--;for(;0<ge-ce;)fe=yc(fe),ge--;for(;ce--;){if(Qe===fe||fe!==null&&Qe===fe.alternate)break t;Qe=yc(Qe),fe=yc(fe)}Qe=null}else Qe=null;We!==null&&qS(je,Ae,We,Qe,!1),Ze!==null&&br!==null&&qS(je,br,Ze,Qe,!0)}}e:{if(Ae=we?wc(we):window,We=Ae.nodeName&&Ae.nodeName.toLowerCase(),We==="select"||We==="input"&&Ae.type==="file")var et=d8;else if(CS(Ae))if(AS)et=m8;else{et=f8;var lt=h8}else(We=Ae.nodeName)&&We.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(et=p8);if(et&&(et=et(c,we))){ES(je,et,y,Ne);break e}lt&&lt(c,Ae,we),c==="focusout"&&(lt=Ae._wrapperState)&&lt.controlled&&Ae.type==="number"&&L(Ae,"number",Ae.value)}switch(lt=we?wc(we):window,c){case"focusin":(CS(lt)||lt.contentEditable==="true")&&(mc=lt,rv=we,Pd=null);break;case"focusout":Pd=rv=mc=null;break;case"mousedown":nv=!0;break;case"contextmenu":case"mouseup":case"dragend":nv=!1,DS(je,y,Ne);break;case"selectionchange":if(v8)break;case"keydown":case"keyup":DS(je,y,Ne)}var ct;if(Xy)e:{switch(c){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else pc?kS(c,y)&&(mt="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(mt="onCompositionStart");mt&&(xS&&y.locale!=="ko"&&(pc||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&pc&&(ct=mS()):(Fo=Ne,qy="value"in Fo?Fo.value:Fo.textContent,pc=!0)),lt=Cp(we,mt),0<lt.length&&(mt=new vS(mt,c,null,y,Ne),je.push({event:mt,listeners:lt}),ct?mt.data=ct:(ct=SS(y),ct!==null&&(mt.data=ct)))),(ct=o8?a8(c,y):l8(c,y))&&(we=Cp(we,"onBeforeInput"),0<we.length&&(Ne=new vS("onBeforeInput","beforeinput",null,y,Ne),je.push({event:Ne,listeners:we}),Ne.data=ct))}WS(je,h)})}function Md(c,h,y){return{instance:c,listener:h,currentTarget:y}}function Cp(c,h){for(var y=h+"Capture",b=[];c!==null;){var E=c,j=E.stateNode;E.tag===5&&j!==null&&(E=j,j=rl(c,y),j!=null&&b.unshift(Md(c,j,E)),j=rl(c,h),j!=null&&b.push(Md(c,j,E))),c=c.return}return b}function yc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function qS(c,h,y,b,E){for(var j=h._reactName,K=[];y!==null&&y!==b;){var se=y,ae=se.alternate,we=se.stateNode;if(ae!==null&&ae===b)break;se.tag===5&&we!==null&&(se=we,E?(ae=rl(y,j),ae!=null&&K.unshift(Md(y,ae,se))):E||(ae=rl(y,j),ae!=null&&K.push(Md(y,ae,se)))),y=y.return}K.length!==0&&c.push({event:h,listeners:K})}var _8=/\r\n?/g,k8=/\u0000|\uFFFD/g;function KS(c){return(typeof c=="string"?c:""+c).replace(_8,`
`).replace(k8,"")}function Ep(c,h,y){if(h=KS(h),KS(c)!==h&&y)throw Error(t(425))}function Ap(){}var cv=null,uv=null;function dv(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var hv=typeof setTimeout=="function"?setTimeout:void 0,S8=typeof clearTimeout=="function"?clearTimeout:void 0,GS=typeof Promise=="function"?Promise:void 0,C8=typeof queueMicrotask=="function"?queueMicrotask:typeof GS<"u"?function(c){return GS.resolve(null).then(c).catch(E8)}:hv;function E8(c){setTimeout(function(){throw c})}function fv(c,h){var y=h,b=0;do{var E=y.nextSibling;if(c.removeChild(y),E&&E.nodeType===8)if(y=E.data,y==="/$"){if(b===0){c.removeChild(E),Sd(h);return}b--}else y!=="$"&&y!=="$?"&&y!=="$!"||b++;y=E}while(y);Sd(h)}function $o(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function YS(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(h===0)return c;h--}else y==="/$"&&h++}c=c.previousSibling}return null}var vc=Math.random().toString(36).slice(2),ci="__reactFiber$"+vc,Dd="__reactProps$"+vc,Yi="__reactContainer$"+vc,pv="__reactEvents$"+vc,A8="__reactListeners$"+vc,T8="__reactHandles$"+vc;function al(c){var h=c[ci];if(h)return h;for(var y=c.parentNode;y;){if(h=y[Yi]||y[ci]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(c=YS(c);c!==null;){if(y=c[ci])return y;c=YS(c)}return h}c=y,y=c.parentNode}return null}function Id(c){return c=c[ci]||c[Yi],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function wc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function Tp(c){return c[Dd]||null}var mv=[],xc=-1;function zo(c){return{current:c}}function ir(c){0>xc||(c.current=mv[xc],mv[xc]=null,xc--)}function tr(c,h){xc++,mv[xc]=c.current,c.current=h}var Uo={},tn=zo(Uo),Nn=zo(!1),ll=Uo;function bc(c,h){var y=c.type.contextTypes;if(!y)return Uo;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var E={},j;for(j in y)E[j]=h[j];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=E),E}function jn(c){return c=c.childContextTypes,c!=null}function Np(){ir(Nn),ir(tn)}function JS(c,h,y){if(tn.current!==Uo)throw Error(t(168));tr(tn,h),tr(Nn,y)}function ZS(c,h,y){var b=c.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return y;b=b.getChildContext();for(var E in b)if(!(E in h))throw Error(t(108,ve(c)||"Unknown",E));return X({},y,b)}function jp(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Uo,ll=tn.current,tr(tn,c),tr(Nn,Nn.current),!0}function XS(c,h,y){var b=c.stateNode;if(!b)throw Error(t(169));y?(c=ZS(c,h,ll),b.__reactInternalMemoizedMergedChildContext=c,ir(Nn),ir(tn),tr(tn,c)):ir(Nn),tr(Nn,y)}var Ji=null,Pp=!1,gv=!1;function QS(c){Ji===null?Ji=[c]:Ji.push(c)}function N8(c){Pp=!0,QS(c)}function Vo(){if(!gv&&Ji!==null){gv=!0;var c=0,h=qt;try{var y=Ji;for(qt=1;c<y.length;c++){var b=y[c];do b=b(!0);while(b!==null)}Ji=null,Pp=!1}catch(E){throw Ji!==null&&(Ji=Ji.slice(c+1)),yd(Rt,Vo),E}finally{qt=h,gv=!1}}return null}var _c=[],kc=0,Rp=null,Op=0,cs=[],us=0,cl=null,Zi=1,Xi="";function ul(c,h){_c[kc++]=Op,_c[kc++]=Rp,Rp=c,Op=h}function eC(c,h,y){cs[us++]=Zi,cs[us++]=Xi,cs[us++]=cl,cl=c;var b=Zi;c=Xi;var E=32-Rs(b)-1;b&=~(1<<E),y+=1;var j=32-Rs(h)+E;if(30<j){var K=E-E%5;j=(b&(1<<K)-1).toString(32),b>>=K,E-=K,Zi=1<<32-Rs(h)+E|y<<E|b,Xi=j+c}else Zi=1<<j|y<<E|b,Xi=c}function yv(c){c.return!==null&&(ul(c,1),eC(c,1,0))}function vv(c){for(;c===Rp;)Rp=_c[--kc],_c[kc]=null,Op=_c[--kc],_c[kc]=null;for(;c===cl;)cl=cs[--us],cs[us]=null,Xi=cs[--us],cs[us]=null,Zi=cs[--us],cs[us]=null}var Yn=null,Jn=null,lr=!1,Ms=null;function tC(c,h){var y=ps(5,null,null,0);y.elementType="DELETED",y.stateNode=h,y.return=c,h=c.deletions,h===null?(c.deletions=[y],c.flags|=16):h.push(y)}function rC(c,h){switch(c.tag){case 5:var y=c.type;return h=h.nodeType!==1||y.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Yn=c,Jn=$o(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Yn=c,Jn=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(y=cl!==null?{id:Zi,overflow:Xi}:null,c.memoizedState={dehydrated:h,treeContext:y,retryLane:1073741824},y=ps(18,null,null,0),y.stateNode=h,y.return=c,c.child=y,Yn=c,Jn=null,!0):!1;default:return!1}}function wv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function xv(c){if(lr){var h=Jn;if(h){var y=h;if(!rC(c,h)){if(wv(c))throw Error(t(418));h=$o(y.nextSibling);var b=Yn;h&&rC(c,h)?tC(b,y):(c.flags=c.flags&-4097|2,lr=!1,Yn=c)}}else{if(wv(c))throw Error(t(418));c.flags=c.flags&-4097|2,lr=!1,Yn=c}}}function nC(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Yn=c}function Mp(c){if(c!==Yn)return!1;if(!lr)return nC(c),lr=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!dv(c.type,c.memoizedProps)),h&&(h=Jn)){if(wv(c))throw sC(),Error(t(418));for(;h;)tC(c,h),h=$o(h.nextSibling)}if(nC(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var y=c.data;if(y==="/$"){if(h===0){Jn=$o(c.nextSibling);break e}h--}else y!=="$"&&y!=="$!"&&y!=="$?"||h++}c=c.nextSibling}Jn=null}}else Jn=Yn?$o(c.stateNode.nextSibling):null;return!0}function sC(){for(var c=Jn;c;)c=$o(c.nextSibling)}function Sc(){Jn=Yn=null,lr=!1}function bv(c){Ms===null?Ms=[c]:Ms.push(c)}var j8=T.ReactCurrentBatchConfig;function Ld(c,h,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(t(309));var b=y.stateNode}if(!b)throw Error(t(147,c));var E=b,j=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===j?h.ref:(h=function(K){var se=E.refs;K===null?delete se[j]:se[j]=K},h._stringRef=j,h)}if(typeof c!="string")throw Error(t(284));if(!y._owner)throw Error(t(290,c))}return c}function Dp(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function iC(c){var h=c._init;return h(c._payload)}function oC(c){function h(fe,ce){if(c){var ge=fe.deletions;ge===null?(fe.deletions=[ce],fe.flags|=16):ge.push(ce)}}function y(fe,ce){if(!c)return null;for(;ce!==null;)h(fe,ce),ce=ce.sibling;return null}function b(fe,ce){for(fe=new Map;ce!==null;)ce.key!==null?fe.set(ce.key,ce):fe.set(ce.index,ce),ce=ce.sibling;return fe}function E(fe,ce){return fe=Zo(fe,ce),fe.index=0,fe.sibling=null,fe}function j(fe,ce,ge){return fe.index=ge,c?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<ce?(fe.flags|=2,ce):ge):(fe.flags|=2,ce)):(fe.flags|=1048576,ce)}function K(fe){return c&&fe.alternate===null&&(fe.flags|=2),fe}function se(fe,ce,ge,Me){return ce===null||ce.tag!==6?(ce=hw(ge,fe.mode,Me),ce.return=fe,ce):(ce=E(ce,ge),ce.return=fe,ce)}function ae(fe,ce,ge,Me){var et=ge.type;return et===z?Ne(fe,ce,ge.props.children,Me,ge.key):ce!==null&&(ce.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===B&&iC(et)===ce.type)?(Me=E(ce,ge.props),Me.ref=Ld(fe,ce,ge),Me.return=fe,Me):(Me=im(ge.type,ge.key,ge.props,null,fe.mode,Me),Me.ref=Ld(fe,ce,ge),Me.return=fe,Me)}function we(fe,ce,ge,Me){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ge.containerInfo||ce.stateNode.implementation!==ge.implementation?(ce=fw(ge,fe.mode,Me),ce.return=fe,ce):(ce=E(ce,ge.children||[]),ce.return=fe,ce)}function Ne(fe,ce,ge,Me,et){return ce===null||ce.tag!==7?(ce=vl(ge,fe.mode,Me,et),ce.return=fe,ce):(ce=E(ce,ge),ce.return=fe,ce)}function je(fe,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=hw(""+ce,fe.mode,ge),ce.return=fe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case P:return ge=im(ce.type,ce.key,ce.props,null,fe.mode,ge),ge.ref=Ld(fe,null,ce),ge.return=fe,ge;case O:return ce=fw(ce,fe.mode,ge),ce.return=fe,ce;case B:var Me=ce._init;return je(fe,Me(ce._payload),ge)}if(J(ce)||V(ce))return ce=vl(ce,fe.mode,ge,null),ce.return=fe,ce;Dp(fe,ce)}return null}function Ae(fe,ce,ge,Me){var et=ce!==null?ce.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return et!==null?null:se(fe,ce,""+ge,Me);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:return ge.key===et?ae(fe,ce,ge,Me):null;case O:return ge.key===et?we(fe,ce,ge,Me):null;case B:return et=ge._init,Ae(fe,ce,et(ge._payload),Me)}if(J(ge)||V(ge))return et!==null?null:Ne(fe,ce,ge,Me,null);Dp(fe,ge)}return null}function We(fe,ce,ge,Me,et){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return fe=fe.get(ge)||null,se(ce,fe,""+Me,et);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case P:return fe=fe.get(Me.key===null?ge:Me.key)||null,ae(ce,fe,Me,et);case O:return fe=fe.get(Me.key===null?ge:Me.key)||null,we(ce,fe,Me,et);case B:var lt=Me._init;return We(fe,ce,ge,lt(Me._payload),et)}if(J(Me)||V(Me))return fe=fe.get(ge)||null,Ne(ce,fe,Me,et,null);Dp(ce,Me)}return null}function Ze(fe,ce,ge,Me){for(var et=null,lt=null,ct=ce,mt=ce=0,Ur=null;ct!==null&&mt<ge.length;mt++){ct.index>mt?(Ur=ct,ct=null):Ur=ct.sibling;var Bt=Ae(fe,ct,ge[mt],Me);if(Bt===null){ct===null&&(ct=Ur);break}c&&ct&&Bt.alternate===null&&h(fe,ct),ce=j(Bt,ce,mt),lt===null?et=Bt:lt.sibling=Bt,lt=Bt,ct=Ur}if(mt===ge.length)return y(fe,ct),lr&&ul(fe,mt),et;if(ct===null){for(;mt<ge.length;mt++)ct=je(fe,ge[mt],Me),ct!==null&&(ce=j(ct,ce,mt),lt===null?et=ct:lt.sibling=ct,lt=ct);return lr&&ul(fe,mt),et}for(ct=b(fe,ct);mt<ge.length;mt++)Ur=We(ct,fe,mt,ge[mt],Me),Ur!==null&&(c&&Ur.alternate!==null&&ct.delete(Ur.key===null?mt:Ur.key),ce=j(Ur,ce,mt),lt===null?et=Ur:lt.sibling=Ur,lt=Ur);return c&&ct.forEach(function(Xo){return h(fe,Xo)}),lr&&ul(fe,mt),et}function Qe(fe,ce,ge,Me){var et=V(ge);if(typeof et!="function")throw Error(t(150));if(ge=et.call(ge),ge==null)throw Error(t(151));for(var lt=et=null,ct=ce,mt=ce=0,Ur=null,Bt=ge.next();ct!==null&&!Bt.done;mt++,Bt=ge.next()){ct.index>mt?(Ur=ct,ct=null):Ur=ct.sibling;var Xo=Ae(fe,ct,Bt.value,Me);if(Xo===null){ct===null&&(ct=Ur);break}c&&ct&&Xo.alternate===null&&h(fe,ct),ce=j(Xo,ce,mt),lt===null?et=Xo:lt.sibling=Xo,lt=Xo,ct=Ur}if(Bt.done)return y(fe,ct),lr&&ul(fe,mt),et;if(ct===null){for(;!Bt.done;mt++,Bt=ge.next())Bt=je(fe,Bt.value,Me),Bt!==null&&(ce=j(Bt,ce,mt),lt===null?et=Bt:lt.sibling=Bt,lt=Bt);return lr&&ul(fe,mt),et}for(ct=b(fe,ct);!Bt.done;mt++,Bt=ge.next())Bt=We(ct,fe,mt,Bt.value,Me),Bt!==null&&(c&&Bt.alternate!==null&&ct.delete(Bt.key===null?mt:Bt.key),ce=j(Bt,ce,mt),lt===null?et=Bt:lt.sibling=Bt,lt=Bt);return c&&ct.forEach(function(c6){return h(fe,c6)}),lr&&ul(fe,mt),et}function br(fe,ce,ge,Me){if(typeof ge=="object"&&ge!==null&&ge.type===z&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:e:{for(var et=ge.key,lt=ce;lt!==null;){if(lt.key===et){if(et=ge.type,et===z){if(lt.tag===7){y(fe,lt.sibling),ce=E(lt,ge.props.children),ce.return=fe,fe=ce;break e}}else if(lt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===B&&iC(et)===lt.type){y(fe,lt.sibling),ce=E(lt,ge.props),ce.ref=Ld(fe,lt,ge),ce.return=fe,fe=ce;break e}y(fe,lt);break}else h(fe,lt);lt=lt.sibling}ge.type===z?(ce=vl(ge.props.children,fe.mode,Me,ge.key),ce.return=fe,fe=ce):(Me=im(ge.type,ge.key,ge.props,null,fe.mode,Me),Me.ref=Ld(fe,ce,ge),Me.return=fe,fe=Me)}return K(fe);case O:e:{for(lt=ge.key;ce!==null;){if(ce.key===lt)if(ce.tag===4&&ce.stateNode.containerInfo===ge.containerInfo&&ce.stateNode.implementation===ge.implementation){y(fe,ce.sibling),ce=E(ce,ge.children||[]),ce.return=fe,fe=ce;break e}else{y(fe,ce);break}else h(fe,ce);ce=ce.sibling}ce=fw(ge,fe.mode,Me),ce.return=fe,fe=ce}return K(fe);case B:return lt=ge._init,br(fe,ce,lt(ge._payload),Me)}if(J(ge))return Ze(fe,ce,ge,Me);if(V(ge))return Qe(fe,ce,ge,Me);Dp(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ce!==null&&ce.tag===6?(y(fe,ce.sibling),ce=E(ce,ge),ce.return=fe,fe=ce):(y(fe,ce),ce=hw(ge,fe.mode,Me),ce.return=fe,fe=ce),K(fe)):y(fe,ce)}return br}var Cc=oC(!0),aC=oC(!1),Ip=zo(null),Lp=null,Ec=null,_v=null;function kv(){_v=Ec=Lp=null}function Sv(c){var h=Ip.current;ir(Ip),c._currentValue=h}function Cv(c,h,y){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===y)break;c=c.return}}function Ac(c,h){Lp=c,_v=Ec=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(Pn=!0),c.firstContext=null)}function ds(c){var h=c._currentValue;if(_v!==c)if(c={context:c,memoizedValue:h,next:null},Ec===null){if(Lp===null)throw Error(t(308));Ec=c,Lp.dependencies={lanes:0,firstContext:c}}else Ec=Ec.next=c;return h}var dl=null;function Ev(c){dl===null?dl=[c]:dl.push(c)}function lC(c,h,y,b){var E=h.interleaved;return E===null?(y.next=y,Ev(h)):(y.next=E.next,E.next=y),h.interleaved=y,Qi(c,b)}function Qi(c,h){c.lanes|=h;var y=c.alternate;for(y!==null&&(y.lanes|=h),y=c,c=c.return;c!==null;)c.childLanes|=h,y=c.alternate,y!==null&&(y.childLanes|=h),y=c,c=c.return;return y.tag===3?y.stateNode:null}var Wo=!1;function Av(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cC(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function eo(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function Ho(c,h,y){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(Dt&2)!==0){var E=b.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),b.pending=h,Qi(c,y)}return E=b.interleaved,E===null?(h.next=h,Ev(b)):(h.next=E.next,E.next=h),b.interleaved=h,Qi(c,y)}function Fp(c,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194240)!==0)){var b=h.lanes;b&=c.pendingLanes,y|=b,h.lanes=y,zy(c,y)}}function uC(c,h){var y=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var E=null,j=null;if(y=y.firstBaseUpdate,y!==null){do{var K={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};j===null?E=j=K:j=j.next=K,y=y.next}while(y!==null);j===null?E=j=h:j=j.next=h}else E=j=h;y={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:j,shared:b.shared,effects:b.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=h:c.next=h,y.lastBaseUpdate=h}function Bp(c,h,y,b){var E=c.updateQueue;Wo=!1;var j=E.firstBaseUpdate,K=E.lastBaseUpdate,se=E.shared.pending;if(se!==null){E.shared.pending=null;var ae=se,we=ae.next;ae.next=null,K===null?j=we:K.next=we,K=ae;var Ne=c.alternate;Ne!==null&&(Ne=Ne.updateQueue,se=Ne.lastBaseUpdate,se!==K&&(se===null?Ne.firstBaseUpdate=we:se.next=we,Ne.lastBaseUpdate=ae))}if(j!==null){var je=E.baseState;K=0,Ne=we=ae=null,se=j;do{var Ae=se.lane,We=se.eventTime;if((b&Ae)===Ae){Ne!==null&&(Ne=Ne.next={eventTime:We,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var Ze=c,Qe=se;switch(Ae=h,We=y,Qe.tag){case 1:if(Ze=Qe.payload,typeof Ze=="function"){je=Ze.call(We,je,Ae);break e}je=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=Qe.payload,Ae=typeof Ze=="function"?Ze.call(We,je,Ae):Ze,Ae==null)break e;je=X({},je,Ae);break e;case 2:Wo=!0}}se.callback!==null&&se.lane!==0&&(c.flags|=64,Ae=E.effects,Ae===null?E.effects=[se]:Ae.push(se))}else We={eventTime:We,lane:Ae,tag:se.tag,payload:se.payload,callback:se.callback,next:null},Ne===null?(we=Ne=We,ae=je):Ne=Ne.next=We,K|=Ae;if(se=se.next,se===null){if(se=E.shared.pending,se===null)break;Ae=se,se=Ae.next,Ae.next=null,E.lastBaseUpdate=Ae,E.shared.pending=null}}while(!0);if(Ne===null&&(ae=je),E.baseState=ae,E.firstBaseUpdate=we,E.lastBaseUpdate=Ne,h=E.shared.interleaved,h!==null){E=h;do K|=E.lane,E=E.next;while(E!==h)}else j===null&&(E.shared.lanes=0);pl|=K,c.lanes=K,c.memoizedState=je}}function dC(c,h,y){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var b=c[h],E=b.callback;if(E!==null){if(b.callback=null,b=y,typeof E!="function")throw Error(t(191,E));E.call(b)}}}var Fd={},ui=zo(Fd),Bd=zo(Fd),$d=zo(Fd);function hl(c){if(c===Fd)throw Error(t(174));return c}function Tv(c,h){switch(tr($d,h),tr(Bd,c),tr(ui,Fd),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Te(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Te(h,c)}ir(ui),tr(ui,h)}function Tc(){ir(ui),ir(Bd),ir($d)}function hC(c){hl($d.current);var h=hl(ui.current),y=Te(h,c.type);h!==y&&(tr(Bd,c),tr(ui,y))}function Nv(c){Bd.current===c&&(ir(ui),ir(Bd))}var hr=zo(0);function $p(c){for(var h=c;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||y.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var jv=[];function Pv(){for(var c=0;c<jv.length;c++)jv[c]._workInProgressVersionPrimary=null;jv.length=0}var zp=T.ReactCurrentDispatcher,Rv=T.ReactCurrentBatchConfig,fl=0,fr=null,Rr=null,$r=null,Up=!1,zd=!1,Ud=0,P8=0;function rn(){throw Error(t(321))}function Ov(c,h){if(h===null)return!1;for(var y=0;y<h.length&&y<c.length;y++)if(!Os(c[y],h[y]))return!1;return!0}function Mv(c,h,y,b,E,j){if(fl=j,fr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,zp.current=c===null||c.memoizedState===null?D8:I8,c=y(b,E),zd){j=0;do{if(zd=!1,Ud=0,25<=j)throw Error(t(301));j+=1,$r=Rr=null,h.updateQueue=null,zp.current=L8,c=y(b,E)}while(zd)}if(zp.current=Hp,h=Rr!==null&&Rr.next!==null,fl=0,$r=Rr=fr=null,Up=!1,h)throw Error(t(300));return c}function Dv(){var c=Ud!==0;return Ud=0,c}function di(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?fr.memoizedState=$r=c:$r=$r.next=c,$r}function hs(){if(Rr===null){var c=fr.alternate;c=c!==null?c.memoizedState:null}else c=Rr.next;var h=$r===null?fr.memoizedState:$r.next;if(h!==null)$r=h,Rr=c;else{if(c===null)throw Error(t(310));Rr=c,c={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},$r===null?fr.memoizedState=$r=c:$r=$r.next=c}return $r}function Vd(c,h){return typeof h=="function"?h(c):h}function Iv(c){var h=hs(),y=h.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=c;var b=Rr,E=b.baseQueue,j=y.pending;if(j!==null){if(E!==null){var K=E.next;E.next=j.next,j.next=K}b.baseQueue=E=j,y.pending=null}if(E!==null){j=E.next,b=b.baseState;var se=K=null,ae=null,we=j;do{var Ne=we.lane;if((fl&Ne)===Ne)ae!==null&&(ae=ae.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),b=we.hasEagerState?we.eagerState:c(b,we.action);else{var je={lane:Ne,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};ae===null?(se=ae=je,K=b):ae=ae.next=je,fr.lanes|=Ne,pl|=Ne}we=we.next}while(we!==null&&we!==j);ae===null?K=b:ae.next=se,Os(b,h.memoizedState)||(Pn=!0),h.memoizedState=b,h.baseState=K,h.baseQueue=ae,y.lastRenderedState=b}if(c=y.interleaved,c!==null){E=c;do j=E.lane,fr.lanes|=j,pl|=j,E=E.next;while(E!==c)}else E===null&&(y.lanes=0);return[h.memoizedState,y.dispatch]}function Lv(c){var h=hs(),y=h.queue;if(y===null)throw Error(t(311));y.lastRenderedReducer=c;var b=y.dispatch,E=y.pending,j=h.memoizedState;if(E!==null){y.pending=null;var K=E=E.next;do j=c(j,K.action),K=K.next;while(K!==E);Os(j,h.memoizedState)||(Pn=!0),h.memoizedState=j,h.baseQueue===null&&(h.baseState=j),y.lastRenderedState=j}return[j,b]}function fC(){}function pC(c,h){var y=fr,b=hs(),E=h(),j=!Os(b.memoizedState,E);if(j&&(b.memoizedState=E,Pn=!0),b=b.queue,Fv(yC.bind(null,y,b,c),[c]),b.getSnapshot!==h||j||$r!==null&&$r.memoizedState.tag&1){if(y.flags|=2048,Wd(9,gC.bind(null,y,b,E,h),void 0,null),zr===null)throw Error(t(349));(fl&30)!==0||mC(y,h,E)}return E}function mC(c,h,y){c.flags|=16384,c={getSnapshot:h,value:y},h=fr.updateQueue,h===null?(h={lastEffect:null,stores:null},fr.updateQueue=h,h.stores=[c]):(y=h.stores,y===null?h.stores=[c]:y.push(c))}function gC(c,h,y,b){h.value=y,h.getSnapshot=b,vC(h)&&wC(c)}function yC(c,h,y){return y(function(){vC(h)&&wC(c)})}function vC(c){var h=c.getSnapshot;c=c.value;try{var y=h();return!Os(c,y)}catch{return!0}}function wC(c){var h=Qi(c,1);h!==null&&Fs(h,c,1,-1)}function xC(c){var h=di();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:c},h.queue=c,c=c.dispatch=M8.bind(null,fr,c),[h.memoizedState,c]}function Wd(c,h,y,b){return c={tag:c,create:h,destroy:y,deps:b,next:null},h=fr.updateQueue,h===null?(h={lastEffect:null,stores:null},fr.updateQueue=h,h.lastEffect=c.next=c):(y=h.lastEffect,y===null?h.lastEffect=c.next=c:(b=y.next,y.next=c,c.next=b,h.lastEffect=c)),c}function bC(){return hs().memoizedState}function Vp(c,h,y,b){var E=di();fr.flags|=c,E.memoizedState=Wd(1|h,y,void 0,b===void 0?null:b)}function Wp(c,h,y,b){var E=hs();b=b===void 0?null:b;var j=void 0;if(Rr!==null){var K=Rr.memoizedState;if(j=K.destroy,b!==null&&Ov(b,K.deps)){E.memoizedState=Wd(h,y,j,b);return}}fr.flags|=c,E.memoizedState=Wd(1|h,y,j,b)}function _C(c,h){return Vp(8390656,8,c,h)}function Fv(c,h){return Wp(2048,8,c,h)}function kC(c,h){return Wp(4,2,c,h)}function SC(c,h){return Wp(4,4,c,h)}function CC(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function EC(c,h,y){return y=y!=null?y.concat([c]):null,Wp(4,4,CC.bind(null,h,c),y)}function Bv(){}function AC(c,h){var y=hs();h=h===void 0?null:h;var b=y.memoizedState;return b!==null&&h!==null&&Ov(h,b[1])?b[0]:(y.memoizedState=[c,h],c)}function TC(c,h){var y=hs();h=h===void 0?null:h;var b=y.memoizedState;return b!==null&&h!==null&&Ov(h,b[1])?b[0]:(c=c(),y.memoizedState=[c,h],c)}function NC(c,h,y){return(fl&21)===0?(c.baseState&&(c.baseState=!1,Pn=!0),c.memoizedState=y):(Os(y,h)||(y=iS(),fr.lanes|=y,pl|=y,c.baseState=!0),h)}function R8(c,h){var y=qt;qt=y!==0&&4>y?y:4,c(!0);var b=Rv.transition;Rv.transition={};try{c(!1),h()}finally{qt=y,Rv.transition=b}}function jC(){return hs().memoizedState}function O8(c,h,y){var b=Yo(c);if(y={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null},PC(c))RC(h,y);else if(y=lC(c,h,y,b),y!==null){var E=vn();Fs(y,c,b,E),OC(y,h,b)}}function M8(c,h,y){var b=Yo(c),E={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null};if(PC(c))RC(h,E);else{var j=c.alternate;if(c.lanes===0&&(j===null||j.lanes===0)&&(j=h.lastRenderedReducer,j!==null))try{var K=h.lastRenderedState,se=j(K,y);if(E.hasEagerState=!0,E.eagerState=se,Os(se,K)){var ae=h.interleaved;ae===null?(E.next=E,Ev(h)):(E.next=ae.next,ae.next=E),h.interleaved=E;return}}catch{}finally{}y=lC(c,h,E,b),y!==null&&(E=vn(),Fs(y,c,b,E),OC(y,h,b))}}function PC(c){var h=c.alternate;return c===fr||h!==null&&h===fr}function RC(c,h){zd=Up=!0;var y=c.pending;y===null?h.next=h:(h.next=y.next,y.next=h),c.pending=h}function OC(c,h,y){if((y&4194240)!==0){var b=h.lanes;b&=c.pendingLanes,y|=b,h.lanes=y,zy(c,y)}}var Hp={readContext:ds,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},D8={readContext:ds,useCallback:function(c,h){return di().memoizedState=[c,h===void 0?null:h],c},useContext:ds,useEffect:_C,useImperativeHandle:function(c,h,y){return y=y!=null?y.concat([c]):null,Vp(4194308,4,CC.bind(null,h,c),y)},useLayoutEffect:function(c,h){return Vp(4194308,4,c,h)},useInsertionEffect:function(c,h){return Vp(4,2,c,h)},useMemo:function(c,h){var y=di();return h=h===void 0?null:h,c=c(),y.memoizedState=[c,h],c},useReducer:function(c,h,y){var b=di();return h=y!==void 0?y(h):h,b.memoizedState=b.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},b.queue=c,c=c.dispatch=O8.bind(null,fr,c),[b.memoizedState,c]},useRef:function(c){var h=di();return c={current:c},h.memoizedState=c},useState:xC,useDebugValue:Bv,useDeferredValue:function(c){return di().memoizedState=c},useTransition:function(){var c=xC(!1),h=c[0];return c=R8.bind(null,c[1]),di().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,y){var b=fr,E=di();if(lr){if(y===void 0)throw Error(t(407));y=y()}else{if(y=h(),zr===null)throw Error(t(349));(fl&30)!==0||mC(b,h,y)}E.memoizedState=y;var j={value:y,getSnapshot:h};return E.queue=j,_C(yC.bind(null,b,j,c),[c]),b.flags|=2048,Wd(9,gC.bind(null,b,j,y,h),void 0,null),y},useId:function(){var c=di(),h=zr.identifierPrefix;if(lr){var y=Xi,b=Zi;y=(b&~(1<<32-Rs(b)-1)).toString(32)+y,h=":"+h+"R"+y,y=Ud++,0<y&&(h+="H"+y.toString(32)),h+=":"}else y=P8++,h=":"+h+"r"+y.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},I8={readContext:ds,useCallback:AC,useContext:ds,useEffect:Fv,useImperativeHandle:EC,useInsertionEffect:kC,useLayoutEffect:SC,useMemo:TC,useReducer:Iv,useRef:bC,useState:function(){return Iv(Vd)},useDebugValue:Bv,useDeferredValue:function(c){var h=hs();return NC(h,Rr.memoizedState,c)},useTransition:function(){var c=Iv(Vd)[0],h=hs().memoizedState;return[c,h]},useMutableSource:fC,useSyncExternalStore:pC,useId:jC,unstable_isNewReconciler:!1},L8={readContext:ds,useCallback:AC,useContext:ds,useEffect:Fv,useImperativeHandle:EC,useInsertionEffect:kC,useLayoutEffect:SC,useMemo:TC,useReducer:Lv,useRef:bC,useState:function(){return Lv(Vd)},useDebugValue:Bv,useDeferredValue:function(c){var h=hs();return Rr===null?h.memoizedState=c:NC(h,Rr.memoizedState,c)},useTransition:function(){var c=Lv(Vd)[0],h=hs().memoizedState;return[c,h]},useMutableSource:fC,useSyncExternalStore:pC,useId:jC,unstable_isNewReconciler:!1};function Ds(c,h){if(c&&c.defaultProps){h=X({},h),c=c.defaultProps;for(var y in c)h[y]===void 0&&(h[y]=c[y]);return h}return h}function $v(c,h,y,b){h=c.memoizedState,y=y(b,h),y=y==null?h:X({},h,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var qp={isMounted:function(c){return(c=c._reactInternals)?Gi(c)===c:!1},enqueueSetState:function(c,h,y){c=c._reactInternals;var b=vn(),E=Yo(c),j=eo(b,E);j.payload=h,y!=null&&(j.callback=y),h=Ho(c,j,E),h!==null&&(Fs(h,c,E,b),Fp(h,c,E))},enqueueReplaceState:function(c,h,y){c=c._reactInternals;var b=vn(),E=Yo(c),j=eo(b,E);j.tag=1,j.payload=h,y!=null&&(j.callback=y),h=Ho(c,j,E),h!==null&&(Fs(h,c,E,b),Fp(h,c,E))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var y=vn(),b=Yo(c),E=eo(y,b);E.tag=2,h!=null&&(E.callback=h),h=Ho(c,E,b),h!==null&&(Fs(h,c,b,y),Fp(h,c,b))}};function MC(c,h,y,b,E,j,K){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,j,K):h.prototype&&h.prototype.isPureReactComponent?!jd(y,b)||!jd(E,j):!0}function DC(c,h,y){var b=!1,E=Uo,j=h.contextType;return typeof j=="object"&&j!==null?j=ds(j):(E=jn(h)?ll:tn.current,b=h.contextTypes,j=(b=b!=null)?bc(c,E):Uo),h=new h(y,j),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=qp,c.stateNode=h,h._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=j),h}function IC(c,h,y,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,b),h.state!==c&&qp.enqueueReplaceState(h,h.state,null)}function zv(c,h,y,b){var E=c.stateNode;E.props=y,E.state=c.memoizedState,E.refs={},Av(c);var j=h.contextType;typeof j=="object"&&j!==null?E.context=ds(j):(j=jn(h)?ll:tn.current,E.context=bc(c,j)),E.state=c.memoizedState,j=h.getDerivedStateFromProps,typeof j=="function"&&($v(c,h,j,y),E.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&qp.enqueueReplaceState(E,E.state,null),Bp(c,y,E,b),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}function Nc(c,h){try{var y="",b=h;do y+=ee(b),b=b.return;while(b);var E=y}catch(j){E=`
Error generating stack: `+j.message+`
`+j.stack}return{value:c,source:h,stack:E,digest:null}}function Uv(c,h,y){return{value:c,source:null,stack:y??null,digest:h??null}}function Vv(c,h){try{console.error(h.value)}catch(y){setTimeout(function(){throw y})}}var F8=typeof WeakMap=="function"?WeakMap:Map;function LC(c,h,y){y=eo(-1,y),y.tag=3,y.payload={element:null};var b=h.value;return y.callback=function(){Qp||(Qp=!0,sw=b),Vv(c,h)},y}function FC(c,h,y){y=eo(-1,y),y.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var E=h.value;y.payload=function(){return b(E)},y.callback=function(){Vv(c,h)}}var j=c.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(y.callback=function(){Vv(c,h),typeof b!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var K=h.stack;this.componentDidCatch(h.value,{componentStack:K!==null?K:""})}),y}function BC(c,h,y){var b=c.pingCache;if(b===null){b=c.pingCache=new F8;var E=new Set;b.set(h,E)}else E=b.get(h),E===void 0&&(E=new Set,b.set(h,E));E.has(y)||(E.add(y),c=X8.bind(null,c,h,y),h.then(c,c))}function $C(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function zC(c,h,y,b,E){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(h=eo(-1,1),h.tag=2,Ho(y,h,1))),y.lanes|=1),c):(c.flags|=65536,c.lanes=E,c)}var B8=T.ReactCurrentOwner,Pn=!1;function yn(c,h,y,b){h.child=c===null?aC(h,null,y,b):Cc(h,c.child,y,b)}function UC(c,h,y,b,E){y=y.render;var j=h.ref;return Ac(h,E),b=Mv(c,h,y,b,j,E),y=Dv(),c!==null&&!Pn?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~E,to(c,h,E)):(lr&&y&&yv(h),h.flags|=1,yn(c,h,b,E),h.child)}function VC(c,h,y,b,E){if(c===null){var j=y.type;return typeof j=="function"&&!dw(j)&&j.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(h.tag=15,h.type=j,WC(c,h,j,b,E)):(c=im(y.type,null,b,h,h.mode,E),c.ref=h.ref,c.return=h,h.child=c)}if(j=c.child,(c.lanes&E)===0){var K=j.memoizedProps;if(y=y.compare,y=y!==null?y:jd,y(K,b)&&c.ref===h.ref)return to(c,h,E)}return h.flags|=1,c=Zo(j,b),c.ref=h.ref,c.return=h,h.child=c}function WC(c,h,y,b,E){if(c!==null){var j=c.memoizedProps;if(jd(j,b)&&c.ref===h.ref)if(Pn=!1,h.pendingProps=b=j,(c.lanes&E)!==0)(c.flags&131072)!==0&&(Pn=!0);else return h.lanes=c.lanes,to(c,h,E)}return Wv(c,h,y,b,E)}function HC(c,h,y){var b=h.pendingProps,E=b.children,j=c!==null?c.memoizedState:null;if(b.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(Pc,Zn),Zn|=y;else{if((y&1073741824)===0)return c=j!==null?j.baseLanes|y:y,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,tr(Pc,Zn),Zn|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=j!==null?j.baseLanes:y,tr(Pc,Zn),Zn|=b}else j!==null?(b=j.baseLanes|y,h.memoizedState=null):b=y,tr(Pc,Zn),Zn|=b;return yn(c,h,E,y),h.child}function qC(c,h){var y=h.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(h.flags|=512,h.flags|=2097152)}function Wv(c,h,y,b,E){var j=jn(y)?ll:tn.current;return j=bc(h,j),Ac(h,E),y=Mv(c,h,y,b,j,E),b=Dv(),c!==null&&!Pn?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~E,to(c,h,E)):(lr&&b&&yv(h),h.flags|=1,yn(c,h,y,E),h.child)}function KC(c,h,y,b,E){if(jn(y)){var j=!0;jp(h)}else j=!1;if(Ac(h,E),h.stateNode===null)Gp(c,h),DC(h,y,b),zv(h,y,b,E),b=!0;else if(c===null){var K=h.stateNode,se=h.memoizedProps;K.props=se;var ae=K.context,we=y.contextType;typeof we=="object"&&we!==null?we=ds(we):(we=jn(y)?ll:tn.current,we=bc(h,we));var Ne=y.getDerivedStateFromProps,je=typeof Ne=="function"||typeof K.getSnapshotBeforeUpdate=="function";je||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(se!==b||ae!==we)&&IC(h,K,b,we),Wo=!1;var Ae=h.memoizedState;K.state=Ae,Bp(h,b,K,E),ae=h.memoizedState,se!==b||Ae!==ae||Nn.current||Wo?(typeof Ne=="function"&&($v(h,y,Ne,b),ae=h.memoizedState),(se=Wo||MC(h,y,se,b,Ae,ae,we))?(je||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(h.flags|=4194308)):(typeof K.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=ae),K.props=b,K.state=ae,K.context=we,b=se):(typeof K.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{K=h.stateNode,cC(c,h),se=h.memoizedProps,we=h.type===h.elementType?se:Ds(h.type,se),K.props=we,je=h.pendingProps,Ae=K.context,ae=y.contextType,typeof ae=="object"&&ae!==null?ae=ds(ae):(ae=jn(y)?ll:tn.current,ae=bc(h,ae));var We=y.getDerivedStateFromProps;(Ne=typeof We=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(se!==je||Ae!==ae)&&IC(h,K,b,ae),Wo=!1,Ae=h.memoizedState,K.state=Ae,Bp(h,b,K,E);var Ze=h.memoizedState;se!==je||Ae!==Ze||Nn.current||Wo?(typeof We=="function"&&($v(h,y,We,b),Ze=h.memoizedState),(we=Wo||MC(h,y,we,b,Ae,Ze,ae)||!1)?(Ne||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(b,Ze,ae),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(b,Ze,ae)),typeof K.componentDidUpdate=="function"&&(h.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof K.componentDidUpdate!="function"||se===c.memoizedProps&&Ae===c.memoizedState||(h.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&Ae===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=Ze),K.props=b,K.state=Ze,K.context=ae,b=we):(typeof K.componentDidUpdate!="function"||se===c.memoizedProps&&Ae===c.memoizedState||(h.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&Ae===c.memoizedState||(h.flags|=1024),b=!1)}return Hv(c,h,y,b,j,E)}function Hv(c,h,y,b,E,j){qC(c,h);var K=(h.flags&128)!==0;if(!b&&!K)return E&&XS(h,y,!1),to(c,h,j);b=h.stateNode,B8.current=h;var se=K&&typeof y.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,c!==null&&K?(h.child=Cc(h,c.child,null,j),h.child=Cc(h,null,se,j)):yn(c,h,se,j),h.memoizedState=b.state,E&&XS(h,y,!0),h.child}function GC(c){var h=c.stateNode;h.pendingContext?JS(c,h.pendingContext,h.pendingContext!==h.context):h.context&&JS(c,h.context,!1),Tv(c,h.containerInfo)}function YC(c,h,y,b,E){return Sc(),bv(E),h.flags|=256,yn(c,h,y,b),h.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Kv(c){return{baseLanes:c,cachePool:null,transitions:null}}function JC(c,h,y){var b=h.pendingProps,E=hr.current,j=!1,K=(h.flags&128)!==0,se;if((se=K)||(se=c!==null&&c.memoizedState===null?!1:(E&2)!==0),se?(j=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),tr(hr,E&1),c===null)return xv(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(K=b.children,c=b.fallback,j?(b=h.mode,j=h.child,K={mode:"hidden",children:K},(b&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=K):j=om(K,b,0,null),c=vl(c,b,y,null),j.return=h,c.return=h,j.sibling=c,h.child=j,h.child.memoizedState=Kv(y),h.memoizedState=qv,c):Gv(h,K));if(E=c.memoizedState,E!==null&&(se=E.dehydrated,se!==null))return $8(c,h,K,b,se,E,y);if(j){j=b.fallback,K=h.mode,E=c.child,se=E.sibling;var ae={mode:"hidden",children:b.children};return(K&1)===0&&h.child!==E?(b=h.child,b.childLanes=0,b.pendingProps=ae,h.deletions=null):(b=Zo(E,ae),b.subtreeFlags=E.subtreeFlags&14680064),se!==null?j=Zo(se,j):(j=vl(j,K,y,null),j.flags|=2),j.return=h,b.return=h,b.sibling=j,h.child=b,b=j,j=h.child,K=c.child.memoizedState,K=K===null?Kv(y):{baseLanes:K.baseLanes|y,cachePool:null,transitions:K.transitions},j.memoizedState=K,j.childLanes=c.childLanes&~y,h.memoizedState=qv,b}return j=c.child,c=j.sibling,b=Zo(j,{mode:"visible",children:b.children}),(h.mode&1)===0&&(b.lanes=y),b.return=h,b.sibling=null,c!==null&&(y=h.deletions,y===null?(h.deletions=[c],h.flags|=16):y.push(c)),h.child=b,h.memoizedState=null,b}function Gv(c,h){return h=om({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function Kp(c,h,y,b){return b!==null&&bv(b),Cc(h,c.child,null,y),c=Gv(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function $8(c,h,y,b,E,j,K){if(y)return h.flags&256?(h.flags&=-257,b=Uv(Error(t(422))),Kp(c,h,K,b)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(j=b.fallback,E=h.mode,b=om({mode:"visible",children:b.children},E,0,null),j=vl(j,E,K,null),j.flags|=2,b.return=h,j.return=h,b.sibling=j,h.child=b,(h.mode&1)!==0&&Cc(h,c.child,null,K),h.child.memoizedState=Kv(K),h.memoizedState=qv,j);if((h.mode&1)===0)return Kp(c,h,K,null);if(E.data==="$!"){if(b=E.nextSibling&&E.nextSibling.dataset,b)var se=b.dgst;return b=se,j=Error(t(419)),b=Uv(j,b,void 0),Kp(c,h,K,b)}if(se=(K&c.childLanes)!==0,Pn||se){if(b=zr,b!==null){switch(K&-K){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(b.suspendedLanes|K))!==0?0:E,E!==0&&E!==j.retryLane&&(j.retryLane=E,Qi(c,E),Fs(b,c,E,-1))}return uw(),b=Uv(Error(t(421))),Kp(c,h,K,b)}return E.data==="$?"?(h.flags|=128,h.child=c.child,h=Q8.bind(null,c),E._reactRetry=h,null):(c=j.treeContext,Jn=$o(E.nextSibling),Yn=h,lr=!0,Ms=null,c!==null&&(cs[us++]=Zi,cs[us++]=Xi,cs[us++]=cl,Zi=c.id,Xi=c.overflow,cl=h),h=Gv(h,b.children),h.flags|=4096,h)}function ZC(c,h,y){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),Cv(c.return,h,y)}function Yv(c,h,y,b,E){var j=c.memoizedState;j===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:E}:(j.isBackwards=h,j.rendering=null,j.renderingStartTime=0,j.last=b,j.tail=y,j.tailMode=E)}function XC(c,h,y){var b=h.pendingProps,E=b.revealOrder,j=b.tail;if(yn(c,h,b.children,y),b=hr.current,(b&2)!==0)b=b&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&ZC(c,y,h);else if(c.tag===19)ZC(c,y,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(tr(hr,b),(h.mode&1)===0)h.memoizedState=null;else switch(E){case"forwards":for(y=h.child,E=null;y!==null;)c=y.alternate,c!==null&&$p(c)===null&&(E=y),y=y.sibling;y=E,y===null?(E=h.child,h.child=null):(E=y.sibling,y.sibling=null),Yv(h,!1,E,y,j);break;case"backwards":for(y=null,E=h.child,h.child=null;E!==null;){if(c=E.alternate,c!==null&&$p(c)===null){h.child=E;break}c=E.sibling,E.sibling=y,y=E,E=c}Yv(h,!0,y,null,j);break;case"together":Yv(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Gp(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function to(c,h,y){if(c!==null&&(h.dependencies=c.dependencies),pl|=h.lanes,(y&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,y=Zo(c,c.pendingProps),h.child=y,y.return=h;c.sibling!==null;)c=c.sibling,y=y.sibling=Zo(c,c.pendingProps),y.return=h;y.sibling=null}return h.child}function z8(c,h,y){switch(h.tag){case 3:GC(h),Sc();break;case 5:hC(h);break;case 1:jn(h.type)&&jp(h);break;case 4:Tv(h,h.stateNode.containerInfo);break;case 10:var b=h.type._context,E=h.memoizedProps.value;tr(Ip,b._currentValue),b._currentValue=E;break;case 13:if(b=h.memoizedState,b!==null)return b.dehydrated!==null?(tr(hr,hr.current&1),h.flags|=128,null):(y&h.child.childLanes)!==0?JC(c,h,y):(tr(hr,hr.current&1),c=to(c,h,y),c!==null?c.sibling:null);tr(hr,hr.current&1);break;case 19:if(b=(y&h.childLanes)!==0,(c.flags&128)!==0){if(b)return XC(c,h,y);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),tr(hr,hr.current),b)break;return null;case 22:case 23:return h.lanes=0,HC(c,h,y)}return to(c,h,y)}var QC,Jv,eE,tE;QC=function(c,h){for(var y=h.child;y!==null;){if(y.tag===5||y.tag===6)c.appendChild(y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===h)break;for(;y.sibling===null;){if(y.return===null||y.return===h)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Jv=function(){},eE=function(c,h,y,b){var E=c.memoizedProps;if(E!==b){c=h.stateNode,hl(ui.current);var j=null;switch(y){case"input":E=$(c,E),b=$(c,b),j=[];break;case"select":E=X({},E,{value:void 0}),b=X({},b,{value:void 0}),j=[];break;case"textarea":E=Q(c,E),b=Q(c,b),j=[];break;default:typeof E.onClick!="function"&&typeof b.onClick=="function"&&(c.onclick=Ap)}Ft(y,b);var K;y=null;for(we in E)if(!b.hasOwnProperty(we)&&E.hasOwnProperty(we)&&E[we]!=null)if(we==="style"){var se=E[we];for(K in se)se.hasOwnProperty(K)&&(y||(y={}),y[K]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(s.hasOwnProperty(we)?j||(j=[]):(j=j||[]).push(we,null));for(we in b){var ae=b[we];if(se=E!=null?E[we]:void 0,b.hasOwnProperty(we)&&ae!==se&&(ae!=null||se!=null))if(we==="style")if(se){for(K in se)!se.hasOwnProperty(K)||ae&&ae.hasOwnProperty(K)||(y||(y={}),y[K]="");for(K in ae)ae.hasOwnProperty(K)&&se[K]!==ae[K]&&(y||(y={}),y[K]=ae[K])}else y||(j||(j=[]),j.push(we,y)),y=ae;else we==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,se=se?se.__html:void 0,ae!=null&&se!==ae&&(j=j||[]).push(we,ae)):we==="children"?typeof ae!="string"&&typeof ae!="number"||(j=j||[]).push(we,""+ae):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(s.hasOwnProperty(we)?(ae!=null&&we==="onScroll"&&sr("scroll",c),j||se===ae||(j=[])):(j=j||[]).push(we,ae))}y&&(j=j||[]).push("style",y);var we=j;(h.updateQueue=we)&&(h.flags|=4)}},tE=function(c,h,y,b){y!==b&&(h.flags|=4)};function Hd(c,h){if(!lr)switch(c.tailMode){case"hidden":h=c.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function nn(c){var h=c.alternate!==null&&c.alternate.child===c.child,y=0,b=0;if(h)for(var E=c.child;E!==null;)y|=E.lanes|E.childLanes,b|=E.subtreeFlags&14680064,b|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)y|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=b,c.childLanes=y,h}function U8(c,h,y){var b=h.pendingProps;switch(vv(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(h),null;case 1:return jn(h.type)&&Np(),nn(h),null;case 3:return b=h.stateNode,Tc(),ir(Nn),ir(tn),Pv(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Mp(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ms!==null&&(aw(Ms),Ms=null))),Jv(c,h),nn(h),null;case 5:Nv(h);var E=hl($d.current);if(y=h.type,c!==null&&h.stateNode!=null)eE(c,h,y,b,E),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(t(166));return nn(h),null}if(c=hl(ui.current),Mp(h)){b=h.stateNode,y=h.type;var j=h.memoizedProps;switch(b[ci]=h,b[Dd]=j,c=(h.mode&1)!==0,y){case"dialog":sr("cancel",b),sr("close",b);break;case"iframe":case"object":case"embed":sr("load",b);break;case"video":case"audio":for(E=0;E<Rd.length;E++)sr(Rd[E],b);break;case"source":sr("error",b);break;case"img":case"image":case"link":sr("error",b),sr("load",b);break;case"details":sr("toggle",b);break;case"input":me(b,j),sr("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!j.multiple},sr("invalid",b);break;case"textarea":ie(b,j),sr("invalid",b)}Ft(y,j),E=null;for(var K in j)if(j.hasOwnProperty(K)){var se=j[K];K==="children"?typeof se=="string"?b.textContent!==se&&(j.suppressHydrationWarning!==!0&&Ep(b.textContent,se,c),E=["children",se]):typeof se=="number"&&b.textContent!==""+se&&(j.suppressHydrationWarning!==!0&&Ep(b.textContent,se,c),E=["children",""+se]):s.hasOwnProperty(K)&&se!=null&&K==="onScroll"&&sr("scroll",b)}switch(y){case"input":ue(b),N(b,j,!0);break;case"textarea":ue(b),de(b);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(b.onclick=Ap)}b=E,h.updateQueue=b,b!==null&&(h.flags|=4)}else{K=E.nodeType===9?E:E.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=ke(y)),c==="http://www.w3.org/1999/xhtml"?y==="script"?(c=K.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof b.is=="string"?c=K.createElement(y,{is:b.is}):(c=K.createElement(y),y==="select"&&(K=c,b.multiple?K.multiple=!0:b.size&&(K.size=b.size))):c=K.createElementNS(c,y),c[ci]=h,c[Dd]=b,QC(c,h,!1,!1),h.stateNode=c;e:{switch(K=Re(y,b),y){case"dialog":sr("cancel",c),sr("close",c),E=b;break;case"iframe":case"object":case"embed":sr("load",c),E=b;break;case"video":case"audio":for(E=0;E<Rd.length;E++)sr(Rd[E],c);E=b;break;case"source":sr("error",c),E=b;break;case"img":case"image":case"link":sr("error",c),sr("load",c),E=b;break;case"details":sr("toggle",c),E=b;break;case"input":me(c,b),E=$(c,b),sr("invalid",c);break;case"option":E=b;break;case"select":c._wrapperState={wasMultiple:!!b.multiple},E=X({},b,{value:void 0}),sr("invalid",c);break;case"textarea":ie(c,b),E=Q(c,b),sr("invalid",c);break;default:E=b}Ft(y,E),se=E;for(j in se)if(se.hasOwnProperty(j)){var ae=se[j];j==="style"?Gt(c,ae):j==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&ot(c,ae)):j==="children"?typeof ae=="string"?(y!=="textarea"||ae!=="")&&yt(c,ae):typeof ae=="number"&&yt(c,""+ae):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(s.hasOwnProperty(j)?ae!=null&&j==="onScroll"&&sr("scroll",c):ae!=null&&A(c,j,ae,K))}switch(y){case"input":ue(c),N(c,b,!1);break;case"textarea":ue(c),de(c);break;case"option":b.value!=null&&c.setAttribute("value",""+he(b.value));break;case"select":c.multiple=!!b.multiple,j=b.value,j!=null?ne(c,!!b.multiple,j,!1):b.defaultValue!=null&&ne(c,!!b.multiple,b.defaultValue,!0);break;default:typeof E.onClick=="function"&&(c.onclick=Ap)}switch(y){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return nn(h),null;case 6:if(c&&h.stateNode!=null)tE(c,h,c.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(t(166));if(y=hl($d.current),hl(ui.current),Mp(h)){if(b=h.stateNode,y=h.memoizedProps,b[ci]=h,(j=b.nodeValue!==y)&&(c=Yn,c!==null))switch(c.tag){case 3:Ep(b.nodeValue,y,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Ep(b.nodeValue,y,(c.mode&1)!==0)}j&&(h.flags|=4)}else b=(y.nodeType===9?y:y.ownerDocument).createTextNode(b),b[ci]=h,h.stateNode=b}return nn(h),null;case 13:if(ir(hr),b=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(lr&&Jn!==null&&(h.mode&1)!==0&&(h.flags&128)===0)sC(),Sc(),h.flags|=98560,j=!1;else if(j=Mp(h),b!==null&&b.dehydrated!==null){if(c===null){if(!j)throw Error(t(318));if(j=h.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[ci]=h}else Sc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;nn(h),j=!1}else Ms!==null&&(aw(Ms),Ms=null),j=!0;if(!j)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=y,h):(b=b!==null,b!==(c!==null&&c.memoizedState!==null)&&b&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(hr.current&1)!==0?Or===0&&(Or=3):uw())),h.updateQueue!==null&&(h.flags|=4),nn(h),null);case 4:return Tc(),Jv(c,h),c===null&&Od(h.stateNode.containerInfo),nn(h),null;case 10:return Sv(h.type._context),nn(h),null;case 17:return jn(h.type)&&Np(),nn(h),null;case 19:if(ir(hr),j=h.memoizedState,j===null)return nn(h),null;if(b=(h.flags&128)!==0,K=j.rendering,K===null)if(b)Hd(j,!1);else{if(Or!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(K=$p(c),K!==null){for(h.flags|=128,Hd(j,!1),b=K.updateQueue,b!==null&&(h.updateQueue=b,h.flags|=4),h.subtreeFlags=0,b=y,y=h.child;y!==null;)j=y,c=b,j.flags&=14680066,K=j.alternate,K===null?(j.childLanes=0,j.lanes=c,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=K.childLanes,j.lanes=K.lanes,j.child=K.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=K.memoizedProps,j.memoizedState=K.memoizedState,j.updateQueue=K.updateQueue,j.type=K.type,c=K.dependencies,j.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),y=y.sibling;return tr(hr,hr.current&1|2),h.child}c=c.sibling}j.tail!==null&&Ke()>Rc&&(h.flags|=128,b=!0,Hd(j,!1),h.lanes=4194304)}else{if(!b)if(c=$p(K),c!==null){if(h.flags|=128,b=!0,y=c.updateQueue,y!==null&&(h.updateQueue=y,h.flags|=4),Hd(j,!0),j.tail===null&&j.tailMode==="hidden"&&!K.alternate&&!lr)return nn(h),null}else 2*Ke()-j.renderingStartTime>Rc&&y!==1073741824&&(h.flags|=128,b=!0,Hd(j,!1),h.lanes=4194304);j.isBackwards?(K.sibling=h.child,h.child=K):(y=j.last,y!==null?y.sibling=K:h.child=K,j.last=K)}return j.tail!==null?(h=j.tail,j.rendering=h,j.tail=h.sibling,j.renderingStartTime=Ke(),h.sibling=null,y=hr.current,tr(hr,b?y&1|2:y&1),h):(nn(h),null);case 22:case 23:return cw(),b=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(h.flags|=8192),b&&(h.mode&1)!==0?(Zn&1073741824)!==0&&(nn(h),h.subtreeFlags&6&&(h.flags|=8192)):nn(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function V8(c,h){switch(vv(h),h.tag){case 1:return jn(h.type)&&Np(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Tc(),ir(Nn),ir(tn),Pv(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return Nv(h),null;case 13:if(ir(hr),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));Sc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return ir(hr),null;case 4:return Tc(),null;case 10:return Sv(h.type._context),null;case 22:case 23:return cw(),null;case 24:return null;default:return null}}var Yp=!1,sn=!1,W8=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function jc(c,h){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(b){yr(c,h,b)}else y.current=null}function Zv(c,h,y){try{y()}catch(b){yr(c,h,b)}}var rE=!1;function H8(c,h){if(cv=mp,c=MS(),tv(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var b=y.getSelection&&y.getSelection();if(b&&b.rangeCount!==0){y=b.anchorNode;var E=b.anchorOffset,j=b.focusNode;b=b.focusOffset;try{y.nodeType,j.nodeType}catch{y=null;break e}var K=0,se=-1,ae=-1,we=0,Ne=0,je=c,Ae=null;t:for(;;){for(var We;je!==y||E!==0&&je.nodeType!==3||(se=K+E),je!==j||b!==0&&je.nodeType!==3||(ae=K+b),je.nodeType===3&&(K+=je.nodeValue.length),(We=je.firstChild)!==null;)Ae=je,je=We;for(;;){if(je===c)break t;if(Ae===y&&++we===E&&(se=K),Ae===j&&++Ne===b&&(ae=K),(We=je.nextSibling)!==null)break;je=Ae,Ae=je.parentNode}je=We}y=se===-1||ae===-1?null:{start:se,end:ae}}else y=null}y=y||{start:0,end:0}}else y=null;for(uv={focusedElem:c,selectionRange:y},mp=!1,Ge=h;Ge!==null;)if(h=Ge,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Ge=c;else for(;Ge!==null;){h=Ge;try{var Ze=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(Ze!==null){var Qe=Ze.memoizedProps,br=Ze.memoizedState,fe=h.stateNode,ce=fe.getSnapshotBeforeUpdate(h.elementType===h.type?Qe:Ds(h.type,Qe),br);fe.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var ge=h.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Me){yr(h,h.return,Me)}if(c=h.sibling,c!==null){c.return=h.return,Ge=c;break}Ge=h.return}return Ze=rE,rE=!1,Ze}function qd(c,h,y){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var E=b=b.next;do{if((E.tag&c)===c){var j=E.destroy;E.destroy=void 0,j!==void 0&&Zv(h,y,j)}E=E.next}while(E!==b)}}function Jp(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var y=h=h.next;do{if((y.tag&c)===c){var b=y.create;y.destroy=b()}y=y.next}while(y!==h)}}function Xv(c){var h=c.ref;if(h!==null){var y=c.stateNode;switch(c.tag){case 5:c=y;break;default:c=y}typeof h=="function"?h(c):h.current=c}}function nE(c){var h=c.alternate;h!==null&&(c.alternate=null,nE(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[ci],delete h[Dd],delete h[pv],delete h[A8],delete h[T8])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function sE(c){return c.tag===5||c.tag===3||c.tag===4}function iE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||sE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Qv(c,h,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?y.nodeType===8?y.parentNode.insertBefore(c,h):y.insertBefore(c,h):(y.nodeType===8?(h=y.parentNode,h.insertBefore(c,y)):(h=y,h.appendChild(c)),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=Ap));else if(b!==4&&(c=c.child,c!==null))for(Qv(c,h,y),c=c.sibling;c!==null;)Qv(c,h,y),c=c.sibling}function ew(c,h,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?y.insertBefore(c,h):y.appendChild(c);else if(b!==4&&(c=c.child,c!==null))for(ew(c,h,y),c=c.sibling;c!==null;)ew(c,h,y),c=c.sibling}var Gr=null,Is=!1;function qo(c,h,y){for(y=y.child;y!==null;)oE(c,h,y),y=y.sibling}function oE(c,h,y){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(dc,y)}catch{}switch(y.tag){case 5:sn||jc(y,h);case 6:var b=Gr,E=Is;Gr=null,qo(c,h,y),Gr=b,Is=E,Gr!==null&&(Is?(c=Gr,y=y.stateNode,c.nodeType===8?c.parentNode.removeChild(y):c.removeChild(y)):Gr.removeChild(y.stateNode));break;case 18:Gr!==null&&(Is?(c=Gr,y=y.stateNode,c.nodeType===8?fv(c.parentNode,y):c.nodeType===1&&fv(c,y),Sd(c)):fv(Gr,y.stateNode));break;case 4:b=Gr,E=Is,Gr=y.stateNode.containerInfo,Is=!0,qo(c,h,y),Gr=b,Is=E;break;case 0:case 11:case 14:case 15:if(!sn&&(b=y.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){E=b=b.next;do{var j=E,K=j.destroy;j=j.tag,K!==void 0&&((j&2)!==0||(j&4)!==0)&&Zv(y,h,K),E=E.next}while(E!==b)}qo(c,h,y);break;case 1:if(!sn&&(jc(y,h),b=y.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=y.memoizedProps,b.state=y.memoizedState,b.componentWillUnmount()}catch(se){yr(y,h,se)}qo(c,h,y);break;case 21:qo(c,h,y);break;case 22:y.mode&1?(sn=(b=sn)||y.memoizedState!==null,qo(c,h,y),sn=b):qo(c,h,y);break;default:qo(c,h,y)}}function aE(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new W8),h.forEach(function(b){var E=e6.bind(null,c,b);y.has(b)||(y.add(b),b.then(E,E))})}}function Ls(c,h){var y=h.deletions;if(y!==null)for(var b=0;b<y.length;b++){var E=y[b];try{var j=c,K=h,se=K;e:for(;se!==null;){switch(se.tag){case 5:Gr=se.stateNode,Is=!1;break e;case 3:Gr=se.stateNode.containerInfo,Is=!0;break e;case 4:Gr=se.stateNode.containerInfo,Is=!0;break e}se=se.return}if(Gr===null)throw Error(t(160));oE(j,K,E),Gr=null,Is=!1;var ae=E.alternate;ae!==null&&(ae.return=null),E.return=null}catch(we){yr(E,h,we)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)lE(h,c),h=h.sibling}function lE(c,h){var y=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ls(h,c),hi(c),b&4){try{qd(3,c,c.return),Jp(3,c)}catch(Qe){yr(c,c.return,Qe)}try{qd(5,c,c.return)}catch(Qe){yr(c,c.return,Qe)}}break;case 1:Ls(h,c),hi(c),b&512&&y!==null&&jc(y,y.return);break;case 5:if(Ls(h,c),hi(c),b&512&&y!==null&&jc(y,y.return),c.flags&32){var E=c.stateNode;try{yt(E,"")}catch(Qe){yr(c,c.return,Qe)}}if(b&4&&(E=c.stateNode,E!=null)){var j=c.memoizedProps,K=y!==null?y.memoizedProps:j,se=c.type,ae=c.updateQueue;if(c.updateQueue=null,ae!==null)try{se==="input"&&j.type==="radio"&&j.name!=null&&te(E,j),Re(se,K);var we=Re(se,j);for(K=0;K<ae.length;K+=2){var Ne=ae[K],je=ae[K+1];Ne==="style"?Gt(E,je):Ne==="dangerouslySetInnerHTML"?ot(E,je):Ne==="children"?yt(E,je):A(E,Ne,je,we)}switch(se){case"input":Y(E,j);break;case"textarea":le(E,j);break;case"select":var Ae=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!j.multiple;var We=j.value;We!=null?ne(E,!!j.multiple,We,!1):Ae!==!!j.multiple&&(j.defaultValue!=null?ne(E,!!j.multiple,j.defaultValue,!0):ne(E,!!j.multiple,j.multiple?[]:"",!1))}E[Dd]=j}catch(Qe){yr(c,c.return,Qe)}}break;case 6:if(Ls(h,c),hi(c),b&4){if(c.stateNode===null)throw Error(t(162));E=c.stateNode,j=c.memoizedProps;try{E.nodeValue=j}catch(Qe){yr(c,c.return,Qe)}}break;case 3:if(Ls(h,c),hi(c),b&4&&y!==null&&y.memoizedState.isDehydrated)try{Sd(h.containerInfo)}catch(Qe){yr(c,c.return,Qe)}break;case 4:Ls(h,c),hi(c);break;case 13:Ls(h,c),hi(c),E=c.child,E.flags&8192&&(j=E.memoizedState!==null,E.stateNode.isHidden=j,!j||E.alternate!==null&&E.alternate.memoizedState!==null||(nw=Ke())),b&4&&aE(c);break;case 22:if(Ne=y!==null&&y.memoizedState!==null,c.mode&1?(sn=(we=sn)||Ne,Ls(h,c),sn=we):Ls(h,c),hi(c),b&8192){if(we=c.memoizedState!==null,(c.stateNode.isHidden=we)&&!Ne&&(c.mode&1)!==0)for(Ge=c,Ne=c.child;Ne!==null;){for(je=Ge=Ne;Ge!==null;){switch(Ae=Ge,We=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:qd(4,Ae,Ae.return);break;case 1:jc(Ae,Ae.return);var Ze=Ae.stateNode;if(typeof Ze.componentWillUnmount=="function"){b=Ae,y=Ae.return;try{h=b,Ze.props=h.memoizedProps,Ze.state=h.memoizedState,Ze.componentWillUnmount()}catch(Qe){yr(b,y,Qe)}}break;case 5:jc(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){dE(je);continue}}We!==null?(We.return=Ae,Ge=We):dE(je)}Ne=Ne.sibling}e:for(Ne=null,je=c;;){if(je.tag===5){if(Ne===null){Ne=je;try{E=je.stateNode,we?(j=E.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(se=je.stateNode,ae=je.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,se.style.display=gt("display",K))}catch(Qe){yr(c,c.return,Qe)}}}else if(je.tag===6){if(Ne===null)try{je.stateNode.nodeValue=we?"":je.memoizedProps}catch(Qe){yr(c,c.return,Qe)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===c)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===c)break e;for(;je.sibling===null;){if(je.return===null||je.return===c)break e;Ne===je&&(Ne=null),je=je.return}Ne===je&&(Ne=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Ls(h,c),hi(c),b&4&&aE(c);break;case 21:break;default:Ls(h,c),hi(c)}}function hi(c){var h=c.flags;if(h&2){try{e:{for(var y=c.return;y!==null;){if(sE(y)){var b=y;break e}y=y.return}throw Error(t(160))}switch(b.tag){case 5:var E=b.stateNode;b.flags&32&&(yt(E,""),b.flags&=-33);var j=iE(c);ew(c,j,E);break;case 3:case 4:var K=b.stateNode.containerInfo,se=iE(c);Qv(c,se,K);break;default:throw Error(t(161))}}catch(ae){yr(c,c.return,ae)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function q8(c,h,y){Ge=c,cE(c)}function cE(c,h,y){for(var b=(c.mode&1)!==0;Ge!==null;){var E=Ge,j=E.child;if(E.tag===22&&b){var K=E.memoizedState!==null||Yp;if(!K){var se=E.alternate,ae=se!==null&&se.memoizedState!==null||sn;se=Yp;var we=sn;if(Yp=K,(sn=ae)&&!we)for(Ge=E;Ge!==null;)K=Ge,ae=K.child,K.tag===22&&K.memoizedState!==null?hE(E):ae!==null?(ae.return=K,Ge=ae):hE(E);for(;j!==null;)Ge=j,cE(j),j=j.sibling;Ge=E,Yp=se,sn=we}uE(c)}else(E.subtreeFlags&8772)!==0&&j!==null?(j.return=E,Ge=j):uE(c)}}function uE(c){for(;Ge!==null;){var h=Ge;if((h.flags&8772)!==0){var y=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:sn||Jp(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!sn)if(y===null)b.componentDidMount();else{var E=h.elementType===h.type?y.memoizedProps:Ds(h.type,y.memoizedProps);b.componentDidUpdate(E,y.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var j=h.updateQueue;j!==null&&dC(h,j,b);break;case 3:var K=h.updateQueue;if(K!==null){if(y=null,h.child!==null)switch(h.child.tag){case 5:y=h.child.stateNode;break;case 1:y=h.child.stateNode}dC(h,K,y)}break;case 5:var se=h.stateNode;if(y===null&&h.flags&4){y=se;var ae=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&y.focus();break;case"img":ae.src&&(y.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var we=h.alternate;if(we!==null){var Ne=we.memoizedState;if(Ne!==null){var je=Ne.dehydrated;je!==null&&Sd(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||h.flags&512&&Xv(h)}catch(Ae){yr(h,h.return,Ae)}}if(h===c){Ge=null;break}if(y=h.sibling,y!==null){y.return=h.return,Ge=y;break}Ge=h.return}}function dE(c){for(;Ge!==null;){var h=Ge;if(h===c){Ge=null;break}var y=h.sibling;if(y!==null){y.return=h.return,Ge=y;break}Ge=h.return}}function hE(c){for(;Ge!==null;){var h=Ge;try{switch(h.tag){case 0:case 11:case 15:var y=h.return;try{Jp(4,h)}catch(ae){yr(h,y,ae)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var E=h.return;try{b.componentDidMount()}catch(ae){yr(h,E,ae)}}var j=h.return;try{Xv(h)}catch(ae){yr(h,j,ae)}break;case 5:var K=h.return;try{Xv(h)}catch(ae){yr(h,K,ae)}}}catch(ae){yr(h,h.return,ae)}if(h===c){Ge=null;break}var se=h.sibling;if(se!==null){se.return=h.return,Ge=se;break}Ge=h.return}}var K8=Math.ceil,Zp=T.ReactCurrentDispatcher,tw=T.ReactCurrentOwner,fs=T.ReactCurrentBatchConfig,Dt=0,zr=null,Ar=null,Yr=0,Zn=0,Pc=zo(0),Or=0,Kd=null,pl=0,Xp=0,rw=0,Gd=null,Rn=null,nw=0,Rc=1/0,ro=null,Qp=!1,sw=null,Ko=null,em=!1,Go=null,tm=0,Yd=0,iw=null,rm=-1,nm=0;function vn(){return(Dt&6)!==0?Ke():rm!==-1?rm:rm=Ke()}function Yo(c){return(c.mode&1)===0?1:(Dt&2)!==0&&Yr!==0?Yr&-Yr:j8.transition!==null?(nm===0&&(nm=iS()),nm):(c=qt,c!==0||(c=window.event,c=c===void 0?16:pS(c.type)),c)}function Fs(c,h,y,b){if(50<Yd)throw Yd=0,iw=null,Error(t(185));wd(c,y,b),((Dt&2)===0||c!==zr)&&(c===zr&&((Dt&2)===0&&(Xp|=y),Or===4&&Jo(c,Yr)),On(c,b),y===1&&Dt===0&&(h.mode&1)===0&&(Rc=Ke()+500,Pp&&Vo()))}function On(c,h){var y=c.callbackNode;jF(c,h);var b=hp(c,c===zr?Yr:0);if(b===0)y!==null&&pe(y),c.callbackNode=null,c.callbackPriority=0;else if(h=b&-b,c.callbackPriority!==h){if(y!=null&&pe(y),h===1)c.tag===0?N8(pE.bind(null,c)):QS(pE.bind(null,c)),C8(function(){(Dt&6)===0&&Vo()}),y=null;else{switch(oS(b)){case 1:y=Rt;break;case 4:y=Br;break;case 16:y=dr;break;case 536870912:y=Oo;break;default:y=dr}y=_E(y,fE.bind(null,c))}c.callbackPriority=h,c.callbackNode=y}}function fE(c,h){if(rm=-1,nm=0,(Dt&6)!==0)throw Error(t(327));var y=c.callbackNode;if(Oc()&&c.callbackNode!==y)return null;var b=hp(c,c===zr?Yr:0);if(b===0)return null;if((b&30)!==0||(b&c.expiredLanes)!==0||h)h=sm(c,b);else{h=b;var E=Dt;Dt|=2;var j=gE();(zr!==c||Yr!==h)&&(ro=null,Rc=Ke()+500,gl(c,h));do try{J8();break}catch(se){mE(c,se)}while(!0);kv(),Zp.current=j,Dt=E,Ar!==null?h=0:(zr=null,Yr=0,h=Or)}if(h!==0){if(h===2&&(E=By(c),E!==0&&(b=E,h=ow(c,E))),h===1)throw y=Kd,gl(c,0),Jo(c,b),On(c,Ke()),y;if(h===6)Jo(c,b);else{if(E=c.current.alternate,(b&30)===0&&!G8(E)&&(h=sm(c,b),h===2&&(j=By(c),j!==0&&(b=j,h=ow(c,j))),h===1))throw y=Kd,gl(c,0),Jo(c,b),On(c,Ke()),y;switch(c.finishedWork=E,c.finishedLanes=b,h){case 0:case 1:throw Error(t(345));case 2:yl(c,Rn,ro);break;case 3:if(Jo(c,b),(b&130023424)===b&&(h=nw+500-Ke(),10<h)){if(hp(c,0)!==0)break;if(E=c.suspendedLanes,(E&b)!==b){vn(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=hv(yl.bind(null,c,Rn,ro),h);break}yl(c,Rn,ro);break;case 4:if(Jo(c,b),(b&4194240)===b)break;for(h=c.eventTimes,E=-1;0<b;){var K=31-Rs(b);j=1<<K,K=h[K],K>E&&(E=K),b&=~j}if(b=E,b=Ke()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*K8(b/1960))-b,10<b){c.timeoutHandle=hv(yl.bind(null,c,Rn,ro),b);break}yl(c,Rn,ro);break;case 5:yl(c,Rn,ro);break;default:throw Error(t(329))}}}return On(c,Ke()),c.callbackNode===y?fE.bind(null,c):null}function ow(c,h){var y=Gd;return c.current.memoizedState.isDehydrated&&(gl(c,h).flags|=256),c=sm(c,h),c!==2&&(h=Rn,Rn=y,h!==null&&aw(h)),c}function aw(c){Rn===null?Rn=c:Rn.push.apply(Rn,c)}function G8(c){for(var h=c;;){if(h.flags&16384){var y=h.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var b=0;b<y.length;b++){var E=y[b],j=E.getSnapshot;E=E.value;try{if(!Os(j(),E))return!1}catch{return!1}}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Jo(c,h){for(h&=~rw,h&=~Xp,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var y=31-Rs(h),b=1<<y;c[y]=-1,h&=~b}}function pE(c){if((Dt&6)!==0)throw Error(t(327));Oc();var h=hp(c,0);if((h&1)===0)return On(c,Ke()),null;var y=sm(c,h);if(c.tag!==0&&y===2){var b=By(c);b!==0&&(h=b,y=ow(c,b))}if(y===1)throw y=Kd,gl(c,0),Jo(c,h),On(c,Ke()),y;if(y===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,yl(c,Rn,ro),On(c,Ke()),null}function lw(c,h){var y=Dt;Dt|=1;try{return c(h)}finally{Dt=y,Dt===0&&(Rc=Ke()+500,Pp&&Vo())}}function ml(c){Go!==null&&Go.tag===0&&(Dt&6)===0&&Oc();var h=Dt;Dt|=1;var y=fs.transition,b=qt;try{if(fs.transition=null,qt=1,c)return c()}finally{qt=b,fs.transition=y,Dt=h,(Dt&6)===0&&Vo()}}function cw(){Zn=Pc.current,ir(Pc)}function gl(c,h){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==-1&&(c.timeoutHandle=-1,S8(y)),Ar!==null)for(y=Ar.return;y!==null;){var b=y;switch(vv(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Np();break;case 3:Tc(),ir(Nn),ir(tn),Pv();break;case 5:Nv(b);break;case 4:Tc();break;case 13:ir(hr);break;case 19:ir(hr);break;case 10:Sv(b.type._context);break;case 22:case 23:cw()}y=y.return}if(zr=c,Ar=c=Zo(c.current,null),Yr=Zn=h,Or=0,Kd=null,rw=Xp=pl=0,Rn=Gd=null,dl!==null){for(h=0;h<dl.length;h++)if(y=dl[h],b=y.interleaved,b!==null){y.interleaved=null;var E=b.next,j=y.pending;if(j!==null){var K=j.next;j.next=E,b.next=K}y.pending=b}dl=null}return c}function mE(c,h){do{var y=Ar;try{if(kv(),zp.current=Hp,Up){for(var b=fr.memoizedState;b!==null;){var E=b.queue;E!==null&&(E.pending=null),b=b.next}Up=!1}if(fl=0,$r=Rr=fr=null,zd=!1,Ud=0,tw.current=null,y===null||y.return===null){Or=1,Kd=h,Ar=null;break}e:{var j=c,K=y.return,se=y,ae=h;if(h=Yr,se.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var we=ae,Ne=se,je=Ne.tag;if((Ne.mode&1)===0&&(je===0||je===11||je===15)){var Ae=Ne.alternate;Ae?(Ne.updateQueue=Ae.updateQueue,Ne.memoizedState=Ae.memoizedState,Ne.lanes=Ae.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var We=$C(K);if(We!==null){We.flags&=-257,zC(We,K,se,j,h),We.mode&1&&BC(j,we,h),h=We,ae=we;var Ze=h.updateQueue;if(Ze===null){var Qe=new Set;Qe.add(ae),h.updateQueue=Qe}else Ze.add(ae);break e}else{if((h&1)===0){BC(j,we,h),uw();break e}ae=Error(t(426))}}else if(lr&&se.mode&1){var br=$C(K);if(br!==null){(br.flags&65536)===0&&(br.flags|=256),zC(br,K,se,j,h),bv(Nc(ae,se));break e}}j=ae=Nc(ae,se),Or!==4&&(Or=2),Gd===null?Gd=[j]:Gd.push(j),j=K;do{switch(j.tag){case 3:j.flags|=65536,h&=-h,j.lanes|=h;var fe=LC(j,ae,h);uC(j,fe);break e;case 1:se=ae;var ce=j.type,ge=j.stateNode;if((j.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Ko===null||!Ko.has(ge)))){j.flags|=65536,h&=-h,j.lanes|=h;var Me=FC(j,se,h);uC(j,Me);break e}}j=j.return}while(j!==null)}vE(y)}catch(et){h=et,Ar===y&&y!==null&&(Ar=y=y.return);continue}break}while(!0)}function gE(){var c=Zp.current;return Zp.current=Hp,c===null?Hp:c}function uw(){(Or===0||Or===3||Or===2)&&(Or=4),zr===null||(pl&268435455)===0&&(Xp&268435455)===0||Jo(zr,Yr)}function sm(c,h){var y=Dt;Dt|=2;var b=gE();(zr!==c||Yr!==h)&&(ro=null,gl(c,h));do try{Y8();break}catch(E){mE(c,E)}while(!0);if(kv(),Dt=y,Zp.current=b,Ar!==null)throw Error(t(261));return zr=null,Yr=0,Or}function Y8(){for(;Ar!==null;)yE(Ar)}function J8(){for(;Ar!==null&&!Ue();)yE(Ar)}function yE(c){var h=bE(c.alternate,c,Zn);c.memoizedProps=c.pendingProps,h===null?vE(c):Ar=h,tw.current=null}function vE(c){var h=c;do{var y=h.alternate;if(c=h.return,(h.flags&32768)===0){if(y=U8(y,h,Zn),y!==null){Ar=y;return}}else{if(y=V8(y,h),y!==null){y.flags&=32767,Ar=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Or=6,Ar=null;return}}if(h=h.sibling,h!==null){Ar=h;return}Ar=h=c}while(h!==null);Or===0&&(Or=5)}function yl(c,h,y){var b=qt,E=fs.transition;try{fs.transition=null,qt=1,Z8(c,h,y,b)}finally{fs.transition=E,qt=b}return null}function Z8(c,h,y,b){do Oc();while(Go!==null);if((Dt&6)!==0)throw Error(t(327));y=c.finishedWork;var E=c.finishedLanes;if(y===null)return null;if(c.finishedWork=null,c.finishedLanes=0,y===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var j=y.lanes|y.childLanes;if(PF(c,j),c===zr&&(Ar=zr=null,Yr=0),(y.subtreeFlags&2064)===0&&(y.flags&2064)===0||em||(em=!0,_E(dr,function(){return Oc(),null})),j=(y.flags&15990)!==0,(y.subtreeFlags&15990)!==0||j){j=fs.transition,fs.transition=null;var K=qt;qt=1;var se=Dt;Dt|=4,tw.current=null,H8(c,y),lE(y,c),y8(uv),mp=!!cv,uv=cv=null,c.current=y,q8(y),dt(),Dt=se,qt=K,fs.transition=j}else c.current=y;if(em&&(em=!1,Go=c,tm=E),j=c.pendingLanes,j===0&&(Ko=null),CF(y.stateNode),On(c,Ke()),h!==null)for(b=c.onRecoverableError,y=0;y<h.length;y++)E=h[y],b(E.value,{componentStack:E.stack,digest:E.digest});if(Qp)throw Qp=!1,c=sw,sw=null,c;return(tm&1)!==0&&c.tag!==0&&Oc(),j=c.pendingLanes,(j&1)!==0?c===iw?Yd++:(Yd=0,iw=c):Yd=0,Vo(),null}function Oc(){if(Go!==null){var c=oS(tm),h=fs.transition,y=qt;try{if(fs.transition=null,qt=16>c?16:c,Go===null)var b=!1;else{if(c=Go,Go=null,tm=0,(Dt&6)!==0)throw Error(t(331));var E=Dt;for(Dt|=4,Ge=c.current;Ge!==null;){var j=Ge,K=j.child;if((Ge.flags&16)!==0){var se=j.deletions;if(se!==null){for(var ae=0;ae<se.length;ae++){var we=se[ae];for(Ge=we;Ge!==null;){var Ne=Ge;switch(Ne.tag){case 0:case 11:case 15:qd(8,Ne,j)}var je=Ne.child;if(je!==null)je.return=Ne,Ge=je;else for(;Ge!==null;){Ne=Ge;var Ae=Ne.sibling,We=Ne.return;if(nE(Ne),Ne===we){Ge=null;break}if(Ae!==null){Ae.return=We,Ge=Ae;break}Ge=We}}}var Ze=j.alternate;if(Ze!==null){var Qe=Ze.child;if(Qe!==null){Ze.child=null;do{var br=Qe.sibling;Qe.sibling=null,Qe=br}while(Qe!==null)}}Ge=j}}if((j.subtreeFlags&2064)!==0&&K!==null)K.return=j,Ge=K;else e:for(;Ge!==null;){if(j=Ge,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:qd(9,j,j.return)}var fe=j.sibling;if(fe!==null){fe.return=j.return,Ge=fe;break e}Ge=j.return}}var ce=c.current;for(Ge=ce;Ge!==null;){K=Ge;var ge=K.child;if((K.subtreeFlags&2064)!==0&&ge!==null)ge.return=K,Ge=ge;else e:for(K=ce;Ge!==null;){if(se=Ge,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:Jp(9,se)}}catch(et){yr(se,se.return,et)}if(se===K){Ge=null;break e}var Me=se.sibling;if(Me!==null){Me.return=se.return,Ge=Me;break e}Ge=se.return}}if(Dt=E,Vo(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(dc,c)}catch{}b=!0}return b}finally{qt=y,fs.transition=h}}return!1}function wE(c,h,y){h=Nc(y,h),h=LC(c,h,1),c=Ho(c,h,1),h=vn(),c!==null&&(wd(c,1,h),On(c,h))}function yr(c,h,y){if(c.tag===3)wE(c,c,y);else for(;h!==null;){if(h.tag===3){wE(h,c,y);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ko===null||!Ko.has(b))){c=Nc(y,c),c=FC(h,c,1),h=Ho(h,c,1),c=vn(),h!==null&&(wd(h,1,c),On(h,c));break}}h=h.return}}function X8(c,h,y){var b=c.pingCache;b!==null&&b.delete(h),h=vn(),c.pingedLanes|=c.suspendedLanes&y,zr===c&&(Yr&y)===y&&(Or===4||Or===3&&(Yr&130023424)===Yr&&500>Ke()-nw?gl(c,0):rw|=y),On(c,h)}function xE(c,h){h===0&&((c.mode&1)===0?h=1:(h=dp,dp<<=1,(dp&130023424)===0&&(dp=4194304)));var y=vn();c=Qi(c,h),c!==null&&(wd(c,h,y),On(c,y))}function Q8(c){var h=c.memoizedState,y=0;h!==null&&(y=h.retryLane),xE(c,y)}function e6(c,h){var y=0;switch(c.tag){case 13:var b=c.stateNode,E=c.memoizedState;E!==null&&(y=E.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(h),xE(c,y)}var bE;bE=function(c,h,y){if(c!==null)if(c.memoizedProps!==h.pendingProps||Nn.current)Pn=!0;else{if((c.lanes&y)===0&&(h.flags&128)===0)return Pn=!1,z8(c,h,y);Pn=(c.flags&131072)!==0}else Pn=!1,lr&&(h.flags&1048576)!==0&&eC(h,Op,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;Gp(c,h),c=h.pendingProps;var E=bc(h,tn.current);Ac(h,y),E=Mv(null,h,b,c,E,y);var j=Dv();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,jn(b)?(j=!0,jp(h)):j=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Av(h),E.updater=qp,h.stateNode=E,E._reactInternals=h,zv(h,b,c,y),h=Hv(null,h,b,!0,j,y)):(h.tag=0,lr&&j&&yv(h),yn(null,h,E,y),h=h.child),h;case 16:b=h.elementType;e:{switch(Gp(c,h),c=h.pendingProps,E=b._init,b=E(b._payload),h.type=b,E=h.tag=r6(b),c=Ds(b,c),E){case 0:h=Wv(null,h,b,c,y);break e;case 1:h=KC(null,h,b,c,y);break e;case 11:h=UC(null,h,b,c,y);break e;case 14:h=VC(null,h,b,Ds(b.type,c),y);break e}throw Error(t(306,b,""))}return h;case 0:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:Ds(b,E),Wv(c,h,b,E,y);case 1:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:Ds(b,E),KC(c,h,b,E,y);case 3:e:{if(GC(h),c===null)throw Error(t(387));b=h.pendingProps,j=h.memoizedState,E=j.element,cC(c,h),Bp(h,b,null,y);var K=h.memoizedState;if(b=K.element,j.isDehydrated)if(j={element:b,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},h.updateQueue.baseState=j,h.memoizedState=j,h.flags&256){E=Nc(Error(t(423)),h),h=YC(c,h,b,y,E);break e}else if(b!==E){E=Nc(Error(t(424)),h),h=YC(c,h,b,y,E);break e}else for(Jn=$o(h.stateNode.containerInfo.firstChild),Yn=h,lr=!0,Ms=null,y=aC(h,null,b,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Sc(),b===E){h=to(c,h,y);break e}yn(c,h,b,y)}h=h.child}return h;case 5:return hC(h),c===null&&xv(h),b=h.type,E=h.pendingProps,j=c!==null?c.memoizedProps:null,K=E.children,dv(b,E)?K=null:j!==null&&dv(b,j)&&(h.flags|=32),qC(c,h),yn(c,h,K,y),h.child;case 6:return c===null&&xv(h),null;case 13:return JC(c,h,y);case 4:return Tv(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=Cc(h,null,b,y):yn(c,h,b,y),h.child;case 11:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:Ds(b,E),UC(c,h,b,E,y);case 7:return yn(c,h,h.pendingProps,y),h.child;case 8:return yn(c,h,h.pendingProps.children,y),h.child;case 12:return yn(c,h,h.pendingProps.children,y),h.child;case 10:e:{if(b=h.type._context,E=h.pendingProps,j=h.memoizedProps,K=E.value,tr(Ip,b._currentValue),b._currentValue=K,j!==null)if(Os(j.value,K)){if(j.children===E.children&&!Nn.current){h=to(c,h,y);break e}}else for(j=h.child,j!==null&&(j.return=h);j!==null;){var se=j.dependencies;if(se!==null){K=j.child;for(var ae=se.firstContext;ae!==null;){if(ae.context===b){if(j.tag===1){ae=eo(-1,y&-y),ae.tag=2;var we=j.updateQueue;if(we!==null){we=we.shared;var Ne=we.pending;Ne===null?ae.next=ae:(ae.next=Ne.next,Ne.next=ae),we.pending=ae}}j.lanes|=y,ae=j.alternate,ae!==null&&(ae.lanes|=y),Cv(j.return,y,h),se.lanes|=y;break}ae=ae.next}}else if(j.tag===10)K=j.type===h.type?null:j.child;else if(j.tag===18){if(K=j.return,K===null)throw Error(t(341));K.lanes|=y,se=K.alternate,se!==null&&(se.lanes|=y),Cv(K,y,h),K=j.sibling}else K=j.child;if(K!==null)K.return=j;else for(K=j;K!==null;){if(K===h){K=null;break}if(j=K.sibling,j!==null){j.return=K.return,K=j;break}K=K.return}j=K}yn(c,h,E.children,y),h=h.child}return h;case 9:return E=h.type,b=h.pendingProps.children,Ac(h,y),E=ds(E),b=b(E),h.flags|=1,yn(c,h,b,y),h.child;case 14:return b=h.type,E=Ds(b,h.pendingProps),E=Ds(b.type,E),VC(c,h,b,E,y);case 15:return WC(c,h,h.type,h.pendingProps,y);case 17:return b=h.type,E=h.pendingProps,E=h.elementType===b?E:Ds(b,E),Gp(c,h),h.tag=1,jn(b)?(c=!0,jp(h)):c=!1,Ac(h,y),DC(h,b,E),zv(h,b,E,y),Hv(null,h,b,!0,c,y);case 19:return XC(c,h,y);case 22:return HC(c,h,y)}throw Error(t(156,h.tag))};function _E(c,h){return yd(c,h)}function t6(c,h,y,b){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(c,h,y,b){return new t6(c,h,y,b)}function dw(c){return c=c.prototype,!(!c||!c.isReactComponent)}function r6(c){if(typeof c=="function")return dw(c)?1:0;if(c!=null){if(c=c.$$typeof,c===R)return 11;if(c===W)return 14}return 2}function Zo(c,h){var y=c.alternate;return y===null?(y=ps(c.tag,h,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=h,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,h=c.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function im(c,h,y,b,E,j){var K=2;if(b=c,typeof c=="function")dw(c)&&(K=1);else if(typeof c=="string")K=5;else e:switch(c){case z:return vl(y.children,E,j,h);case M:K=8,E|=8;break;case D:return c=ps(12,y,h,E|2),c.elementType=D,c.lanes=j,c;case U:return c=ps(13,y,h,E),c.elementType=U,c.lanes=j,c;case k:return c=ps(19,y,h,E),c.elementType=k,c.lanes=j,c;case I:return om(y,E,j,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case H:K=10;break e;case Z:K=9;break e;case R:K=11;break e;case W:K=14;break e;case B:K=16,b=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=ps(K,y,h,E),h.elementType=c,h.type=b,h.lanes=j,h}function vl(c,h,y,b){return c=ps(7,c,b,h),c.lanes=y,c}function om(c,h,y,b){return c=ps(22,c,b,h),c.elementType=I,c.lanes=y,c.stateNode={isHidden:!1},c}function hw(c,h,y){return c=ps(6,c,null,h),c.lanes=y,c}function fw(c,h,y){return h=ps(4,c.children!==null?c.children:[],c.key,h),h.lanes=y,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function n6(c,h,y,b,E){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$y(0),this.expirationTimes=$y(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$y(0),this.identifierPrefix=b,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function pw(c,h,y,b,E,j,K,se,ae){return c=new n6(c,h,y,se,ae),h===1?(h=1,j===!0&&(h|=8)):h=0,j=ps(3,null,null,h),c.current=j,j.stateNode=c,j.memoizedState={element:b,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(j),c}function s6(c,h,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:b==null?null:""+b,children:c,containerInfo:h,implementation:y}}function kE(c){if(!c)return Uo;c=c._reactInternals;e:{if(Gi(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(jn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var y=c.type;if(jn(y))return ZS(c,y,h)}return h}function SE(c,h,y,b,E,j,K,se,ae){return c=pw(y,b,!0,c,E,j,K,se,ae),c.context=kE(null),y=c.current,b=vn(),E=Yo(y),j=eo(b,E),j.callback=h??null,Ho(y,j,E),c.current.lanes=E,wd(c,E,b),On(c,b),c}function am(c,h,y,b){var E=h.current,j=vn(),K=Yo(E);return y=kE(y),h.context===null?h.context=y:h.pendingContext=y,h=eo(j,K),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=Ho(E,h,K),c!==null&&(Fs(c,E,K,j),Fp(c,E,K)),K}function lm(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function CE(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<h?y:h}}function mw(c,h){CE(c,h),(c=c.alternate)&&CE(c,h)}function i6(){return null}var EE=typeof reportError=="function"?reportError:function(c){console.error(c)};function gw(c){this._internalRoot=c}cm.prototype.render=gw.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));am(c,h,null,null)},cm.prototype.unmount=gw.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;ml(function(){am(null,c,null,null)}),h[Yi]=null}};function cm(c){this._internalRoot=c}cm.prototype.unstable_scheduleHydration=function(c){if(c){var h=cS();c={blockedOn:null,target:c,priority:h};for(var y=0;y<Lo.length&&h!==0&&h<Lo[y].priority;y++);Lo.splice(y,0,c),y===0&&hS(c)}};function yw(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function um(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function AE(){}function o6(c,h,y,b,E){if(E){if(typeof b=="function"){var j=b;b=function(){var we=lm(K);j.call(we)}}var K=SE(h,b,c,0,null,!1,!1,"",AE);return c._reactRootContainer=K,c[Yi]=K.current,Od(c.nodeType===8?c.parentNode:c),ml(),K}for(;E=c.lastChild;)c.removeChild(E);if(typeof b=="function"){var se=b;b=function(){var we=lm(ae);se.call(we)}}var ae=pw(c,0,!1,null,null,!1,!1,"",AE);return c._reactRootContainer=ae,c[Yi]=ae.current,Od(c.nodeType===8?c.parentNode:c),ml(function(){am(h,ae,y,b)}),ae}function dm(c,h,y,b,E){var j=y._reactRootContainer;if(j){var K=j;if(typeof E=="function"){var se=E;E=function(){var ae=lm(K);se.call(ae)}}am(h,K,c,E)}else K=o6(y,h,c,E,b);return lm(K)}aS=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var y=vd(h.pendingLanes);y!==0&&(zy(h,y|1),On(h,Ke()),(Dt&6)===0&&(Rc=Ke()+500,Vo()))}break;case 13:ml(function(){var b=Qi(c,1);if(b!==null){var E=vn();Fs(b,c,1,E)}}),mw(c,1)}},Uy=function(c){if(c.tag===13){var h=Qi(c,134217728);if(h!==null){var y=vn();Fs(h,c,134217728,y)}mw(c,134217728)}},lS=function(c){if(c.tag===13){var h=Yo(c),y=Qi(c,h);if(y!==null){var b=vn();Fs(y,c,h,b)}mw(c,h)}},cS=function(){return qt},uS=function(c,h){var y=qt;try{return qt=c,h()}finally{qt=y}},$e=function(c,h,y){switch(h){case"input":if(Y(c,y),h=y.name,y.type==="radio"&&h!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<y.length;h++){var b=y[h];if(b!==c&&b.form===c.form){var E=Tp(b);if(!E)throw Error(t(90));_e(b),Y(b,E)}}}break;case"textarea":le(c,y);break;case"select":h=y.value,h!=null&&ne(c,!!y.multiple,h,!1)}},Po=lw,ls=ml;var a6={usingClientEntryPoint:!1,Events:[Id,wc,Tp,ur,en,lw]},Jd={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l6={bundleType:Jd.bundleType,version:Jd.version,rendererPackageName:Jd.rendererPackageName,rendererConfig:Jd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Ro(c),c===null?null:c.stateNode},findFiberByHostInstance:Jd.findFiberByHostInstance||i6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{dc=hm.inject(l6),li=hm}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a6,Mn.createPortal=function(c,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yw(h))throw Error(t(200));return s6(c,h,null,y)},Mn.createRoot=function(c,h){if(!yw(c))throw Error(t(299));var y=!1,b="",E=EE;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),h=pw(c,1,!1,null,null,y,!1,b,E),c[Yi]=h.current,Od(c.nodeType===8?c.parentNode:c),new gw(h)},Mn.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=Ro(h),c=c===null?null:c.stateNode,c},Mn.flushSync=function(c){return ml(c)},Mn.hydrate=function(c,h,y){if(!um(h))throw Error(t(200));return dm(null,c,h,!0,y)},Mn.hydrateRoot=function(c,h,y){if(!yw(c))throw Error(t(405));var b=y!=null&&y.hydratedSources||null,E=!1,j="",K=EE;if(y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(j=y.identifierPrefix),y.onRecoverableError!==void 0&&(K=y.onRecoverableError)),h=SE(h,null,c,1,y??null,E,!1,j,K),c[Yi]=h.current,Od(c),b)for(c=0;c<b.length;c++)y=b[c],E=y._getVersion,E=E(y._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[y,E]:h.mutableSourceEagerHydrationData.push(y,E);return new cm(h)},Mn.render=function(c,h,y){if(!um(h))throw Error(t(200));return dm(null,c,h,!1,y)},Mn.unmountComponentAtNode=function(c){if(!um(c))throw Error(t(40));return c._reactRootContainer?(ml(function(){dm(null,null,c,!1,function(){c._reactRootContainer=null,c[Yi]=null})}),!0):!1},Mn.unstable_batchedUpdates=lw,Mn.unstable_renderSubtreeIntoContainer=function(c,h,y,b){if(!um(y))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return dm(c,h,y,!1,b)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var IE;function qj(){if(IE)return bw.exports;IE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bw.exports=w6(),bw.exports}var LE;function x6(){if(LE)return pm;LE=1;var r=qj();return pm.createRoot=r.createRoot,pm.hydrateRoot=r.hydrateRoot,pm}var b6=x6(),S=z1();const be=I0(S),Kj=h6({__proto__:null,default:be},[S]),_6=1,k6=1e6;let Sw=0;function S6(){return Sw=(Sw+1)%Number.MAX_SAFE_INTEGER,Sw.toString()}const Cw=new Map,FE=r=>{if(Cw.has(r))return;const e=setTimeout(()=>{Cw.delete(r),Sh({type:"REMOVE_TOAST",toastId:r})},k6);Cw.set(r,e)},C6=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,_6)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?FE(t):r.toasts.forEach(n=>{FE(n.id)}),{...r,toasts:r.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},tg=[];let rg={toasts:[]};function Sh(r){rg=C6(rg,r),tg.forEach(e=>{e(rg)})}function Gj({...r}){const e=S6(),t=s=>Sh({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Sh({type:"DISMISS_TOAST",toastId:e});return Sh({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:t}}function qn(){const[r,e]=S.useState(rg);return S.useEffect(()=>(tg.push(e),()=>{const t=tg.indexOf(e);t>-1&&tg.splice(t,1)}),[r]),{...r,toast:Gj,dismiss:t=>Sh({type:"DISMISS_TOAST",toastId:t})}}var Zu=qj();const Yj=I0(Zu);function Le(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r==null||r(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function E6(r,e){typeof r=="function"?r(e):r!=null&&(r.current=e)}function L0(...r){return e=>r.forEach(t=>E6(t,e))}function Pt(...r){return S.useCallback(L0(...r),r)}function A6(r,e=[]){let t=[];function n(i,o){const a=S.createContext(o),l=t.length;t=[...t,o];function d(f){const{scope:p,children:m,...v}=f,w=(p==null?void 0:p[r][l])||a,x=S.useMemo(()=>v,Object.values(v));return g.jsx(w.Provider,{value:x,children:m})}function u(f,p){const m=(p==null?void 0:p[r][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const s=()=>{const i=t.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return S.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,T6(s,...e)]}function T6(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:d})=>{const f=l(i)[`__scope${d}`];return{...a,...f}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Mi=S.forwardRef((r,e)=>{const{children:t,...n}=r,s=S.Children.toArray(t),i=s.find(N6);if(i){const o=i.props.children,a=s.map(l=>l===i?S.Children.count(o)>1?S.Children.only(null):S.isValidElement(o)?o.props.children:null:l);return g.jsx(Ix,{...n,ref:e,children:S.isValidElement(o)?S.cloneElement(o,void 0,a):null})}return g.jsx(Ix,{...n,ref:e,children:t})});Mi.displayName="Slot";var Ix=S.forwardRef((r,e)=>{const{children:t,...n}=r;if(S.isValidElement(t)){const s=P6(t);return S.cloneElement(t,{...j6(n,t.props),ref:e?L0(e,s):s})}return S.Children.count(t)>1?S.Children.only(null):null});Ix.displayName="SlotClone";var U1=({children:r})=>g.jsx(g.Fragment,{children:r});function N6(r){return S.isValidElement(r)&&r.type===U1}function j6(r,e){const t={...e};for(const n in e){const s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...a)=>{i(...a),s(...a)}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function P6(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function F0(r){const e=r+"CollectionProvider",[t,n]=A6(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:w}=m,x=be.useRef(null),_=be.useRef(new Map).current;return g.jsx(s,{scope:v,itemMap:_,collectionRef:x,children:w})};o.displayName=e;const a=r+"CollectionSlot",l=be.forwardRef((m,v)=>{const{scope:w,children:x}=m,_=i(a,w),C=Pt(v,_.collectionRef);return g.jsx(Mi,{ref:C,children:x})});l.displayName=a;const d=r+"CollectionItemSlot",u="data-radix-collection-item",f=be.forwardRef((m,v)=>{const{scope:w,children:x,..._}=m,C=be.useRef(null),A=Pt(v,C),T=i(d,w);return be.useEffect(()=>(T.itemMap.set(C,{ref:C,..._}),()=>void T.itemMap.delete(C))),g.jsx(Mi,{[u]:"",ref:A,children:x})});f.displayName=d;function p(m){const v=i(r+"CollectionConsumer",m);return be.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((T,P)=>_.indexOf(T.ref.current)-_.indexOf(P.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:f},p,n]}function R6(r,e){const t=S.createContext(e),n=i=>{const{children:o,...a}=i,l=S.useMemo(()=>a,Object.values(a));return g.jsx(t.Provider,{value:l,children:o})};n.displayName=r+"Provider";function s(i){const o=S.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${r}\``)}return[n,s]}function ni(r,e=[]){let t=[];function n(i,o){const a=S.createContext(o),l=t.length;t=[...t,o];const d=f=>{var _;const{scope:p,children:m,...v}=f,w=((_=p==null?void 0:p[r])==null?void 0:_[l])||a,x=S.useMemo(()=>v,Object.values(v));return g.jsx(w.Provider,{value:x,children:m})};d.displayName=i+"Provider";function u(f,p){var w;const m=((w=p==null?void 0:p[r])==null?void 0:w[l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,u]}const s=()=>{const i=t.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return S.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,O6(s,...e)]}function O6(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:d})=>{const f=l(i)[`__scope${d}`];return{...a,...f}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var M6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],at=M6.reduce((r,e)=>{const t=S.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?Mi:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{});function V1(r,e){r&&Zu.flushSync(()=>r.dispatchEvent(e))}function Xr(r){const e=S.useRef(r);return S.useEffect(()=>{e.current=r}),S.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function D6(r,e=globalThis==null?void 0:globalThis.document){const t=Xr(r);S.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var I6="DismissableLayer",Lx="dismissableLayer.update",L6="dismissableLayer.pointerDownOutside",F6="dismissableLayer.focusOutside",BE,Jj=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ql=S.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=r,d=S.useContext(Jj),[u,f]=S.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=S.useState({}),v=Pt(e,z=>f(z)),w=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=w.indexOf(x),C=u?w.indexOf(u):-1,A=d.layersWithOutsidePointerEventsDisabled.size>0,T=C>=_,P=$6(z=>{const M=z.target,D=[...d.branches].some(H=>H.contains(M));!T||D||(s==null||s(z),o==null||o(z),z.defaultPrevented||a==null||a())},p),O=z6(z=>{const M=z.target;[...d.branches].some(H=>H.contains(M))||(i==null||i(z),o==null||o(z),z.defaultPrevented||a==null||a())},p);return D6(z=>{C===d.layers.size-1&&(n==null||n(z),!z.defaultPrevented&&a&&(z.preventDefault(),a()))},p),S.useEffect(()=>{if(u)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(BE=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),$E(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=BE)}},[u,p,t,d]),S.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),$E())},[u,d]),S.useEffect(()=>{const z=()=>m({});return document.addEventListener(Lx,z),()=>document.removeEventListener(Lx,z)},[]),g.jsx(at.div,{...l,ref:v,style:{pointerEvents:A?T?"auto":"none":void 0,...r.style},onFocusCapture:Le(r.onFocusCapture,O.onFocusCapture),onBlurCapture:Le(r.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Le(r.onPointerDownCapture,P.onPointerDownCapture)})});Ql.displayName=I6;var B6="DismissableLayerBranch",Zj=S.forwardRef((r,e)=>{const t=S.useContext(Jj),n=S.useRef(null),s=Pt(e,n);return S.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),g.jsx(at.div,{...r,ref:s})});Zj.displayName=B6;function $6(r,e=globalThis==null?void 0:globalThis.document){const t=Xr(r),n=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){Xj(L6,t,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function z6(r,e=globalThis==null?void 0:globalThis.document){const t=Xr(r),n=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!n.current&&Xj(F6,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function $E(){const r=new CustomEvent(Lx);document.dispatchEvent(r)}function Xj(r,e,t,{discrete:n}){const s=t.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?V1(s,i):s.dispatchEvent(i)}var U6=Ql,V6=Zj,Kr=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},W6="Portal",Xu=S.forwardRef((r,e)=>{var a;const{container:t,...n}=r,[s,i]=S.useState(!1);Kr(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Yj.createPortal(g.jsx(at.div,{...n,ref:e}),o):null});Xu.displayName=W6;function H6(r,e){return S.useReducer((t,n)=>e[t][n]??t,r)}var as=r=>{const{present:e,children:t}=r,n=q6(e),s=typeof t=="function"?t({present:n.isPresent}):S.Children.only(t),i=Pt(n.ref,K6(s));return typeof t=="function"||n.isPresent?S.cloneElement(s,{ref:i}):null};as.displayName="Presence";function q6(r){const[e,t]=S.useState(),n=S.useRef({}),s=S.useRef(r),i=S.useRef("none"),o=r?"mounted":"unmounted",[a,l]=H6(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const d=mm(n.current);i.current=a==="mounted"?d:"none"},[a]),Kr(()=>{const d=n.current,u=s.current;if(u!==r){const p=i.current,m=mm(d);r?l("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,l]),Kr(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,f=m=>{const w=mm(n.current).includes(m.animationName);if(m.target===e&&w&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=m=>{m.target===e&&(i.current=mm(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(d=>{d&&(n.current=getComputedStyle(d)),t(d)},[])}}function mm(r){return(r==null?void 0:r.animationName)||"none"}function K6(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function wo({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,s]=G6({defaultProp:e,onChange:t}),i=r!==void 0,o=i?r:n,a=Xr(t),l=S.useCallback(d=>{if(i){const f=typeof d=="function"?d(r):d;f!==r&&a(f)}else s(d)},[i,r,s,a]);return[o,l]}function G6({defaultProp:r,onChange:e}){const t=S.useState(r),[n]=t,s=S.useRef(n),i=Xr(e);return S.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),t}var Y6="VisuallyHidden",Lf=S.forwardRef((r,e)=>g.jsx(at.span,{...r,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}));Lf.displayName=Y6;var J6=Lf,W1="ToastProvider",[H1,Z6,X6]=F0("Toast"),[Qj,Toe]=ni("Toast",[X6]),[Q6,B0]=Qj(W1),eP=r=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=r,[a,l]=S.useState(null),[d,u]=S.useState(0),f=S.useRef(!1),p=S.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${W1}\`. Expected non-empty \`string\`.`),g.jsx(H1.Provider,{scope:e,children:g.jsx(Q6,{scope:e,label:t,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:a,onViewportChange:l,onToastAdd:S.useCallback(()=>u(m=>m+1),[]),onToastRemove:S.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};eP.displayName=W1;var tP="ToastViewport",eB=["F8"],Fx="toast.viewportPause",Bx="toast.viewportResume",rP=S.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:n=eB,label:s="Notifications ({hotkey})",...i}=r,o=B0(tP,t),a=Z6(t),l=S.useRef(null),d=S.useRef(null),u=S.useRef(null),f=S.useRef(null),p=Pt(e,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;S.useEffect(()=>{const x=_=>{var A;n.length!==0&&n.every(T=>_[T]||_.code===T)&&((A=f.current)==null||A.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),S.useEffect(()=>{const x=l.current,_=f.current;if(v&&x&&_){const C=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(Fx);_.dispatchEvent(O),o.isClosePausedRef.current=!0}},A=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(Bx);_.dispatchEvent(O),o.isClosePausedRef.current=!1}},T=O=>{!x.contains(O.relatedTarget)&&A()},P=()=>{x.contains(document.activeElement)||A()};return x.addEventListener("focusin",C),x.addEventListener("focusout",T),x.addEventListener("pointermove",C),x.addEventListener("pointerleave",P),window.addEventListener("blur",C),window.addEventListener("focus",A),()=>{x.removeEventListener("focusin",C),x.removeEventListener("focusout",T),x.removeEventListener("pointermove",C),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",C),window.removeEventListener("focus",A)}}},[v,o.isClosePausedRef]);const w=S.useCallback(({tabbingDirection:x})=>{const C=a().map(A=>{const T=A.ref.current,P=[T,...fB(T)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?C.reverse():C).flat()},[a]);return S.useEffect(()=>{const x=f.current;if(x){const _=C=>{var P,O,z;const A=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!A){const M=document.activeElement,D=C.shiftKey;if(C.target===x&&D){(P=d.current)==null||P.focus();return}const R=w({tabbingDirection:D?"backwards":"forwards"}),U=R.findIndex(k=>k===M);Ew(R.slice(U+1))?C.preventDefault():D?(O=d.current)==null||O.focus():(z=u.current)==null||z.focus()}};return x.addEventListener("keydown",_),()=>x.removeEventListener("keydown",_)}},[a,w]),g.jsxs(V6,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&g.jsx($x,{ref:d,onFocusFromOutsideViewport:()=>{const x=w({tabbingDirection:"forwards"});Ew(x)}}),g.jsx(H1.Slot,{scope:t,children:g.jsx(at.ol,{tabIndex:-1,...i,ref:p})}),v&&g.jsx($x,{ref:u,onFocusFromOutsideViewport:()=>{const x=w({tabbingDirection:"backwards"});Ew(x)}})]})});rP.displayName=tP;var nP="ToastFocusProxy",$x=S.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...s}=r,i=B0(nP,t);return g.jsx(Lf,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const a=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(a))&&n()}})});$x.displayName=nP;var $0="Toast",tB="toast.swipeStart",rB="toast.swipeMove",nB="toast.swipeCancel",sB="toast.swipeEnd",sP=S.forwardRef((r,e)=>{const{forceMount:t,open:n,defaultOpen:s,onOpenChange:i,...o}=r,[a=!0,l]=wo({prop:n,defaultProp:s,onChange:i});return g.jsx(as,{present:t||a,children:g.jsx(aB,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Xr(r.onPause),onResume:Xr(r.onResume),onSwipeStart:Le(r.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Le(r.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Le(r.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Le(r.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});sP.displayName=$0;var[iB,oB]=Qj($0,{onClose(){}}),aB=S.forwardRef((r,e)=>{const{__scopeToast:t,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...v}=r,w=B0($0,t),[x,_]=S.useState(null),C=Pt(e,k=>_(k)),A=S.useRef(null),T=S.useRef(null),P=s||w.duration,O=S.useRef(0),z=S.useRef(P),M=S.useRef(0),{onToastAdd:D,onToastRemove:H}=w,Z=Xr(()=>{var W;(x==null?void 0:x.contains(document.activeElement))&&((W=w.viewport)==null||W.focus()),o()}),R=S.useCallback(k=>{!k||k===1/0||(window.clearTimeout(M.current),O.current=new Date().getTime(),M.current=window.setTimeout(Z,k))},[Z]);S.useEffect(()=>{const k=w.viewport;if(k){const W=()=>{R(z.current),d==null||d()},B=()=>{const I=new Date().getTime()-O.current;z.current=z.current-I,window.clearTimeout(M.current),l==null||l()};return k.addEventListener(Fx,B),k.addEventListener(Bx,W),()=>{k.removeEventListener(Fx,B),k.removeEventListener(Bx,W)}}},[w.viewport,P,l,d,R]),S.useEffect(()=>{i&&!w.isClosePausedRef.current&&R(P)},[i,P,w.isClosePausedRef,R]),S.useEffect(()=>(D(),()=>H()),[D,H]);const U=S.useMemo(()=>x?dP(x):null,[x]);return w.viewport?g.jsxs(g.Fragment,{children:[U&&g.jsx(lB,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),g.jsx(iB,{scope:t,onClose:Z,children:Zu.createPortal(g.jsx(H1.ItemSlot,{scope:t,children:g.jsx(U6,{asChild:!0,onEscapeKeyDown:Le(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||Z(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(at.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection,...v,ref:C,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:Le(r.onKeyDown,k=>{k.key==="Escape"&&(a==null||a(k.nativeEvent),k.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,Z()))}),onPointerDown:Le(r.onPointerDown,k=>{k.button===0&&(A.current={x:k.clientX,y:k.clientY})}),onPointerMove:Le(r.onPointerMove,k=>{if(!A.current)return;const W=k.clientX-A.current.x,B=k.clientY-A.current.y,I=!!T.current,G=["left","right"].includes(w.swipeDirection),V=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,X=G?V(0,W):0,F=G?0:V(0,B),q=k.pointerType==="touch"?10:2,oe={x:X,y:F},re={originalEvent:k,delta:oe};I?(T.current=oe,gm(rB,f,re,{discrete:!1})):zE(oe,w.swipeDirection,q)?(T.current=oe,gm(tB,u,re,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs(W)>q||Math.abs(B)>q)&&(A.current=null)}),onPointerUp:Le(r.onPointerUp,k=>{const W=T.current,B=k.target;if(B.hasPointerCapture(k.pointerId)&&B.releasePointerCapture(k.pointerId),T.current=null,A.current=null,W){const I=k.currentTarget,G={originalEvent:k,delta:W};zE(W,w.swipeDirection,w.swipeThreshold)?gm(sB,m,G,{discrete:!0}):gm(nB,p,G,{discrete:!0}),I.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),lB=r=>{const{__scopeToast:e,children:t,...n}=r,s=B0($0,e),[i,o]=S.useState(!1),[a,l]=S.useState(!1);return dB(()=>o(!0)),S.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),a?null:g.jsx(Xu,{asChild:!0,children:g.jsx(Lf,{...n,children:i&&g.jsxs(g.Fragment,{children:[s.label," ",t]})})})},cB="ToastTitle",iP=S.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return g.jsx(at.div,{...n,ref:e})});iP.displayName=cB;var uB="ToastDescription",oP=S.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return g.jsx(at.div,{...n,ref:e})});oP.displayName=uB;var aP="ToastAction",lP=S.forwardRef((r,e)=>{const{altText:t,...n}=r;return t.trim()?g.jsx(uP,{altText:t,asChild:!0,children:g.jsx(q1,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${aP}\`. Expected non-empty \`string\`.`),null)});lP.displayName=aP;var cP="ToastClose",q1=S.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r,s=oB(cP,t);return g.jsx(uP,{asChild:!0,children:g.jsx(at.button,{type:"button",...n,ref:e,onClick:Le(r.onClick,s.onClose)})})});q1.displayName=cP;var uP=S.forwardRef((r,e)=>{const{__scopeToast:t,altText:n,...s}=r;return g.jsx(at.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function dP(r){const e=[];return Array.from(r.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),hB(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...dP(n))}}),e}function gm(r,e,t,{discrete:n}){const s=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?V1(s,i):s.dispatchEvent(i)}var zE=(r,e,t=0)=>{const n=Math.abs(r.x),s=Math.abs(r.y),i=n>s;return e==="left"||e==="right"?i&&n>t:!i&&s>t};function dB(r=()=>{}){const e=Xr(r);Kr(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function hB(r){return r.nodeType===r.ELEMENT_NODE}function fB(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ew(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var pB=eP,hP=rP,fP=sP,pP=iP,mP=oP,gP=lP,yP=q1;function vP(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=vP(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function wP(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=vP(r))&&(n&&(n+=" "),n+=e);return n}const UE=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,VE=wP,Ff=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return VE(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const u=t==null?void 0:t[d],f=i==null?void 0:i[d];if(u===null)return null;const p=UE(u)||UE(f);return s[d][p]}),a=t&&Object.entries(t).reduce((d,u)=>{let[f,p]=u;return p===void 0||(d[f]=p),d},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:f,className:p,...m}=u;return Object.entries(m).every(v=>{let[w,x]=v;return Array.isArray(x)?x.includes({...i,...a}[w]):{...i,...a}[w]===x})?[...d,f,p]:d},[]);return VE(r,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xP=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=S.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...gB,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:xP("lucide",s),...a},[...o.map(([d,u])=>S.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(r,e)=>{const t=S.forwardRef(({className:n,...s},i)=>S.createElement(yB,{ref:i,iconNode:e,className:xP(`lucide-${mB(r)}`,n),...s}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=ut("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=ut("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=ut("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=ut("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=ut("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=ut("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=ut("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=ut("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ut("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=ut("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=ut("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=ut("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=ut("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=ut("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=ut("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=ut("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=ut("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=ut("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=ut("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=ut("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=ut("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=ut("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=ut("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=ut("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ut("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=ut("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=ut("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=ut("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ut("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=ut("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=ut("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=ut("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=ut("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=ut("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=ut("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=ut("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=ut("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=ut("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=ut("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=ut("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=ut("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=ut("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=ut("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=ut("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=ut("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=ut("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=ut("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=ut("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ut("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=ut("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ut("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=ut("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Y1="-",$B=r=>{const e=UB(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const a=o.split(Y1);return a[0]===""&&a.length!==1&&a.shift(),TP(a,e)||zB(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},TP=(r,e)=>{var o;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?TP(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(Y1);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},YE=/^\[(.+)\]$/,zB=r=>{if(YE.test(r)){const e=YE.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},UB=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return WB(Object.entries(r.classGroups),t).forEach(([i,o])=>{Wx(o,n,i,e)}),n},Wx=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:JE(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(VB(s)){Wx(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{Wx(o,JE(e,i),t,n)})})},JE=(r,e)=>{let t=r;return e.split(Y1).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},VB=r=>r.isThemeGetter,WB=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):r,HB=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},NP="!",qB=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let d=0,u=0,f;for(let x=0;x<a.length;x++){let _=a[x];if(d===0){if(_===s&&(n||a.slice(x,x+i)===e)){l.push(a.slice(u,x)),u=x+i;continue}if(_==="/"){f=x;continue}}_==="["?d++:_==="]"&&d--}const p=l.length===0?a:a.substring(u),m=p.startsWith(NP),v=m?p.substring(1):p,w=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:w}};return t?a=>t({className:a,parseClassName:o}):o},KB=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},GB=r=>({cache:HB(r.cacheSize),parseClassName:qB(r),...$B(r)}),YB=/\s+/,JB=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=r.trim().split(YB);let a="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:u,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(d);let v=!!m,w=n(v?p.substring(0,m):p);if(!w){if(!v){a=d+(a.length>0?" "+a:a);continue}if(w=n(p),!w){a=d+(a.length>0?" "+a:a);continue}v=!1}const x=KB(u).join(":"),_=f?x+NP:x,C=_+w;if(i.includes(C))continue;i.push(C);const A=s(w,v);for(let T=0;T<A.length;++T){const P=A[T];i.push(_+P)}a=d+(a.length>0?" "+a:a)}return a};function ZB(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=jP(e))&&(n&&(n+=" "),n+=t);return n}const jP=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=jP(r[n]))&&(t&&(t+=" "),t+=e);return t};function XB(r,...e){let t,n,s,i=o;function o(l){const d=e.reduce((u,f)=>f(u),r());return t=GB(d),n=t.cache.get,s=t.cache.set,i=a,a(l)}function a(l){const d=n(l);if(d)return d;const u=JB(l,t);return s(l,u),u}return function(){return i(ZB.apply(null,arguments))}}const or=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},PP=/^\[(?:([a-z-]+):)?(.+)\]$/i,QB=/^\d+\/\d+$/,e3=new Set(["px","full","screen"]),t3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,r3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,s3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,i3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,no=r=>iu(r)||e3.has(r)||QB.test(r),Qo=r=>ed(r,"length",f3),iu=r=>!!r&&!Number.isNaN(Number(r)),Nw=r=>ed(r,"number",iu),Xd=r=>!!r&&Number.isInteger(Number(r)),o3=r=>r.endsWith("%")&&iu(r.slice(0,-1)),_t=r=>PP.test(r),ea=r=>t3.test(r),a3=new Set(["length","size","percentage"]),l3=r=>ed(r,a3,RP),c3=r=>ed(r,"position",RP),u3=new Set(["image","url"]),d3=r=>ed(r,u3,m3),h3=r=>ed(r,"",p3),Qd=()=>!0,ed=(r,e,t)=>{const n=PP.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},f3=r=>r3.test(r)&&!n3.test(r),RP=()=>!1,p3=r=>s3.test(r),m3=r=>i3.test(r),g3=()=>{const r=or("colors"),e=or("spacing"),t=or("blur"),n=or("brightness"),s=or("borderColor"),i=or("borderRadius"),o=or("borderSpacing"),a=or("borderWidth"),l=or("contrast"),d=or("grayscale"),u=or("hueRotate"),f=or("invert"),p=or("gap"),m=or("gradientColorStops"),v=or("gradientColorStopPositions"),w=or("inset"),x=or("margin"),_=or("opacity"),C=or("padding"),A=or("saturate"),T=or("scale"),P=or("sepia"),O=or("skew"),z=or("space"),M=or("translate"),D=()=>["auto","contain","none"],H=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",_t,e],R=()=>[_t,e],U=()=>["",no,Qo],k=()=>["auto",iu,_t],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",_t],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[iu,_t];return{cacheSize:500,separator:":",theme:{colors:[Qd],spacing:[no,Qo],blur:["none","",ea,_t],brightness:F(),borderColor:[r],borderRadius:["none","","full",ea,_t],borderSpacing:R(),borderWidth:U(),contrast:F(),grayscale:V(),hueRotate:F(),invert:V(),gap:R(),gradientColorStops:[r],gradientColorStopPositions:[o3,Qo],inset:Z(),margin:Z(),opacity:F(),padding:R(),saturate:F(),scale:F(),sepia:V(),skew:F(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[ea]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),_t]}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xd,_t]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Xd,_t]}],"grid-cols":[{"grid-cols":[Qd]}],"col-start-end":[{col:["auto",{span:["full",Xd,_t]},_t]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Qd]}],"row-start-end":[{row:["auto",{span:[Xd,_t]},_t]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_t,e]}],"min-w":[{"min-w":[_t,e,"min","max","fit"]}],"max-w":[{"max-w":[_t,e,"none","full","min","max","fit","prose",{screen:[ea]},ea]}],h:[{h:[_t,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_t,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_t,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ea,Qo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nw]}],"font-family":[{font:[Qd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",iu,Nw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",no,_t]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",no,Qo]}],"underline-offset":[{"underline-offset":["auto",no,_t]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),c3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",l3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},d3]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[no,_t]}],"outline-w":[{outline:[no,Qo]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[no,Qo]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",ea,h3]}],"shadow-color":[{shadow:[Qd]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ea,_t]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[A]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Xd,_t]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[no,Qo,Nw]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},y3=XB(g3);function Ye(...r){return y3(wP(r))}const v3=pB,OP=S.forwardRef(({className:r,...e},t)=>g.jsx(hP,{ref:t,className:Ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));OP.displayName=hP.displayName;const w3=Ff("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),MP=S.forwardRef(({className:r,variant:e,...t},n)=>g.jsx(fP,{ref:n,className:Ye(w3({variant:e}),r),...t}));MP.displayName=fP.displayName;const x3=S.forwardRef(({className:r,...e},t)=>g.jsx(gP,{ref:t,className:Ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));x3.displayName=gP.displayName;const DP=S.forwardRef(({className:r,...e},t)=>g.jsx(yP,{ref:t,className:Ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:g.jsx(Qu,{className:"h-4 w-4"})}));DP.displayName=yP.displayName;const IP=S.forwardRef(({className:r,...e},t)=>g.jsx(pP,{ref:t,className:Ye("text-sm font-semibold",r),...e}));IP.displayName=pP.displayName;const LP=S.forwardRef(({className:r,...e},t)=>g.jsx(mP,{ref:t,className:Ye("text-sm opacity-90",r),...e}));LP.displayName=mP.displayName;function b3(){const{toasts:r}=qn();return g.jsxs(v3,{children:[r.map(function({id:e,title:t,description:n,action:s,...i}){return g.jsxs(MP,{...i,children:[g.jsxs("div",{className:"grid gap-1",children:[t&&g.jsx(IP,{children:t}),n&&g.jsx(LP,{children:n})]}),s,g.jsx(DP,{})]},e)}),g.jsx(OP,{})]})}var Ng=["light","dark"],J1="(prefers-color-scheme: dark)",_3=typeof window>"u",Z1=S.createContext(void 0),k3={setTheme:r=>{},themes:[]},FP=()=>{var r;return(r=S.useContext(Z1))!=null?r:k3},S3=r=>S.useContext(Z1)?r.children:S.createElement(E3,{...r}),C3=["light","dark"],E3=({forcedTheme:r,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:i=C3,defaultTheme:o=t?"system":"light",attribute:a="data-theme",value:l,children:d,nonce:u})=>{let[f,p]=S.useState(()=>ZE(s,o)),[m,v]=S.useState(()=>ZE(s)),w=l?Object.values(l):i,x=S.useCallback(T=>{let P=T;if(!P)return;T==="system"&&t&&(P=XE());let O=l?l[P]:P,z=e?T3():null,M=document.documentElement;if(a==="class"?(M.classList.remove(...w),O&&M.classList.add(O)):O?M.setAttribute(a,O):M.removeAttribute(a),n){let D=Ng.includes(o)?o:null,H=Ng.includes(P)?P:D;M.style.colorScheme=H}z==null||z()},[]),_=S.useCallback(T=>{let P=typeof T=="function"?T(T):T;p(P);try{localStorage.setItem(s,P)}catch{}},[r]),C=S.useCallback(T=>{let P=XE(T);v(P),f==="system"&&t&&!r&&x("system")},[f,r]);S.useEffect(()=>{let T=window.matchMedia(J1);return T.addListener(C),C(T),()=>T.removeListener(C)},[C]),S.useEffect(()=>{let T=P=>{if(P.key!==s)return;let O=P.newValue||o;_(O)};return window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[_]),S.useEffect(()=>{x(r??f)},[r,f]);let A=S.useMemo(()=>({theme:f,setTheme:_,forcedTheme:r,resolvedTheme:f==="system"?m:f,themes:t?[...i,"system"]:i,systemTheme:t?m:void 0}),[f,_,r,m,t,i]);return S.createElement(Z1.Provider,{value:A},S.createElement(A3,{forcedTheme:r,disableTransitionOnChange:e,enableSystem:t,enableColorScheme:n,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:d,attrs:w,nonce:u}),d)},A3=S.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let d=i==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=s?Ng.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(v,w=!1,x=!0)=>{let _=o?o[v]:v,C=w?v+"|| ''":`'${_}'`,A="";return s&&x&&!w&&Ng.includes(v)&&(A+=`d.style.colorScheme = '${v}';`),t==="class"?w||_?A+=`c.add(${C})`:A+="null":_&&(A+=`d[s](n,${C})`),A},m=r?`!function(){${u}${p(r)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${J1}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${d?"":"else{"+p(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${f}}catch(t){}}();`;return S.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),ZE=(r,e)=>{if(_3)return;let t;try{t=localStorage.getItem(r)||void 0}catch{}return t||e},T3=()=>{let r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(r)},1)}},XE=r=>(r||(r=window.matchMedia(J1)),r.matches?"dark":"light"),N3=r=>{switch(r){case"success":return R3;case"info":return M3;case"warning":return O3;case"error":return D3;default:return null}},j3=Array(12).fill(0),P3=({visible:r})=>be.createElement("div",{className:"sonner-loading-wrapper","data-visible":r},be.createElement("div",{className:"sonner-spinner"},j3.map((e,t)=>be.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),R3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),O3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),M3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),D3=be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},be.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),I3=()=>{let[r,e]=be.useState(document.hidden);return be.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},Hx=1,L3=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;let{message:t,...n}=r,s=typeof(r==null?void 0:r.id)=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:Hx++,i=this.toasts.find(a=>a.id===s),o=r.dismissible===void 0?!0:r.dismissible;return i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...r,id:s,title:t}),{...a,...r,id:s,dismissible:o,title:t}):a):this.addToast({title:t,...n,dismissible:o,id:s}),s},this.dismiss=r=>(r||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:r,dismiss:!0})),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=r instanceof Promise?r:r(),s=t!==void 0;return n.then(async i=>{if(B3(i)&&!i.ok){s=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${i.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${i.status}`):e.description;this.create({id:t,type:"error",message:o,description:a})}else if(e.success!==void 0){s=!1;let o=typeof e.success=="function"?await e.success(i):e.success,a=typeof e.description=="function"?await e.description(i):e.description;this.create({id:t,type:"success",message:o,description:a})}}).catch(async i=>{if(e.error!==void 0){s=!1;let o=typeof e.error=="function"?await e.error(i):e.error,a=typeof e.description=="function"?await e.description(i):e.description;this.create({id:t,type:"error",message:o,description:a})}}).finally(()=>{var i;s&&(this.dismiss(t),t=void 0),(i=e.finally)==null||i.call(e)}),t},this.custom=(r,e)=>{let t=(e==null?void 0:e.id)||Hx++;return this.create({jsx:r(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},es=new L3,F3=(r,e)=>{let t=(e==null?void 0:e.id)||Hx++;return es.addToast({title:r,...e,id:t}),t},B3=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",$3=F3,z3=()=>es.toasts;Object.assign($3,{success:es.success,info:es.info,warning:es.warning,error:es.error,custom:es.custom,message:es.message,promise:es.promise,dismiss:es.dismiss,loading:es.loading},{getHistory:z3});function U3(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}U3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ym(r){return r.label!==void 0}var V3=3,W3="32px",H3=4e3,q3=356,K3=14,G3=20,Y3=200;function J3(...r){return r.filter(Boolean).join(" ")}var Z3=r=>{var e,t,n,s,i,o,a,l,d,u;let{invert:f,toast:p,unstyled:m,interacting:v,setHeights:w,visibleToasts:x,heights:_,index:C,toasts:A,expanded:T,removeToast:P,defaultRichColors:O,closeButton:z,style:M,cancelButtonStyle:D,actionButtonStyle:H,className:Z="",descriptionClassName:R="",duration:U,position:k,gap:W,loadingIcon:B,expandByDefault:I,classNames:G,icons:V,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:F,cn:q}=r,[oe,re]=be.useState(!1),[ee,ye]=be.useState(!1),[ve,he]=be.useState(!1),[xe,Ce]=be.useState(!1),[ue,_e]=be.useState(0),[Ie,$]=be.useState(0),me=be.useRef(null),te=be.useRef(null),Y=C===0,N=C+1<=x,L=p.type,J=p.dismissible!==!1,ne=p.className||"",Q=p.descriptionClassName||"",ie=be.useMemo(()=>_.findIndex(Ee=>Ee.toastId===p.id)||0,[_,p.id]),le=be.useMemo(()=>{var Ee;return(Ee=p.closeButton)!=null?Ee:z},[p.closeButton,z]),de=be.useMemo(()=>p.duration||U||H3,[p.duration,U]),ke=be.useRef(0),Te=be.useRef(0),De=be.useRef(0),ot=be.useRef(null),[yt,St]=k.split("-"),zt=be.useMemo(()=>_.reduce((Ee,Xe,$e)=>$e>=ie?Ee:Ee+Xe.height,0),[_,ie]),gt=I3(),Gt=p.invert||f,nr=L==="loading";Te.current=be.useMemo(()=>ie*W+zt,[ie,zt]),be.useEffect(()=>{re(!0)},[]),be.useLayoutEffect(()=>{if(!oe)return;let Ee=te.current,Xe=Ee.style.height;Ee.style.height="auto";let $e=Ee.getBoundingClientRect().height;Ee.style.height=Xe,$($e),w(nt=>nt.find(st=>st.toastId===p.id)?nt.map(st=>st.toastId===p.id?{...st,height:$e}:st):[{toastId:p.id,height:$e,position:p.position},...nt])},[oe,p.title,p.description,w,p.id]);let Ft=be.useCallback(()=>{ye(!0),_e(Te.current),w(Ee=>Ee.filter(Xe=>Xe.toastId!==p.id)),setTimeout(()=>{P(p)},Y3)},[p,P,w,Te]);be.useEffect(()=>{if(p.promise&&L==="loading"||p.duration===1/0||p.type==="loading")return;let Ee,Xe=de;return T||v||F&&gt?(()=>{if(De.current<ke.current){let $e=new Date().getTime()-ke.current;Xe=Xe-$e}De.current=new Date().getTime()})():Xe!==1/0&&(ke.current=new Date().getTime(),Ee=setTimeout(()=>{var $e;($e=p.onAutoClose)==null||$e.call(p,p),Ft()},Xe)),()=>clearTimeout(Ee)},[T,v,I,p,de,Ft,p.promise,L,F,gt]),be.useEffect(()=>{let Ee=te.current;if(Ee){let Xe=Ee.getBoundingClientRect().height;return $(Xe),w($e=>[{toastId:p.id,height:Xe,position:p.position},...$e]),()=>w($e=>$e.filter(nt=>nt.toastId!==p.id))}},[w,p.id]),be.useEffect(()=>{p.delete&&Ft()},[Ft,p.delete]);function Re(){return V!=null&&V.loading?be.createElement("div",{className:"sonner-loader","data-visible":L==="loading"},V.loading):B?be.createElement("div",{className:"sonner-loader","data-visible":L==="loading"},B):be.createElement(P3,{visible:L==="loading"})}return be.createElement("li",{"aria-live":p.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:te,className:q(Z,ne,G==null?void 0:G.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,G==null?void 0:G.default,G==null?void 0:G[L],(t=p==null?void 0:p.classNames)==null?void 0:t[L]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:O,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":oe,"data-promise":!!p.promise,"data-removed":ee,"data-visible":N,"data-y-position":yt,"data-x-position":St,"data-index":C,"data-front":Y,"data-swiping":ve,"data-dismissible":J,"data-type":L,"data-invert":Gt,"data-swipe-out":xe,"data-expanded":!!(T||I&&oe),style:{"--index":C,"--toasts-before":C,"--z-index":A.length-C,"--offset":`${ee?ue:Te.current}px`,"--initial-height":I?"auto":`${Ie}px`,...M,...p.style},onPointerDown:Ee=>{nr||!J||(me.current=new Date,_e(Te.current),Ee.target.setPointerCapture(Ee.pointerId),Ee.target.tagName!=="BUTTON"&&(he(!0),ot.current={x:Ee.clientX,y:Ee.clientY}))},onPointerUp:()=>{var Ee,Xe,$e,nt;if(xe||!J)return;ot.current=null;let st=Number(((Ee=te.current)==null?void 0:Ee.style.getPropertyValue("--swipe-amount").replace("px",""))||0),wt=new Date().getTime()-((Xe=me.current)==null?void 0:Xe.getTime()),ur=Math.abs(st)/wt;if(Math.abs(st)>=G3||ur>.11){_e(Te.current),($e=p.onDismiss)==null||$e.call(p,p),Ft(),Ce(!0);return}(nt=te.current)==null||nt.style.setProperty("--swipe-amount","0px"),he(!1)},onPointerMove:Ee=>{var Xe;if(!ot.current||!J)return;let $e=Ee.clientY-ot.current.y,nt=Ee.clientX-ot.current.x,st=(yt==="top"?Math.min:Math.max)(0,$e),wt=Ee.pointerType==="touch"?10:2;Math.abs(st)>wt?(Xe=te.current)==null||Xe.style.setProperty("--swipe-amount",`${$e}px`):Math.abs(nt)>wt&&(ot.current=null)}},le&&!p.jsx?be.createElement("button",{"aria-label":X,"data-disabled":nr,"data-close-button":!0,onClick:nr||!J?()=>{}:()=>{var Ee;Ft(),(Ee=p.onDismiss)==null||Ee.call(p,p)},className:q(G==null?void 0:G.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},be.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),be.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,p.jsx||be.isValidElement(p.title)?p.jsx||p.title:be.createElement(be.Fragment,null,L||p.icon||p.promise?be.createElement("div",{"data-icon":"",className:q(G==null?void 0:G.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Re():null,p.type!=="loading"?p.icon||(V==null?void 0:V[L])||N3(L):null):null,be.createElement("div",{"data-content":"",className:q(G==null?void 0:G.content,(o=p==null?void 0:p.classNames)==null?void 0:o.content)},be.createElement("div",{"data-title":"",className:q(G==null?void 0:G.title,(a=p==null?void 0:p.classNames)==null?void 0:a.title)},p.title),p.description?be.createElement("div",{"data-description":"",className:q(R,Q,G==null?void 0:G.description,(l=p==null?void 0:p.classNames)==null?void 0:l.description)},p.description):null),be.isValidElement(p.cancel)?p.cancel:p.cancel&&ym(p.cancel)?be.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||D,onClick:Ee=>{var Xe,$e;ym(p.cancel)&&J&&(($e=(Xe=p.cancel).onClick)==null||$e.call(Xe,Ee),Ft())},className:q(G==null?void 0:G.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,be.isValidElement(p.action)?p.action:p.action&&ym(p.action)?be.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||H,onClick:Ee=>{var Xe,$e;ym(p.action)&&(Ee.defaultPrevented||(($e=(Xe=p.action).onClick)==null||$e.call(Xe,Ee),Ft()))},className:q(G==null?void 0:G.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function QE(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}var X3=r=>{let{invert:e,position:t="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:a,theme:l="light",richColors:d,duration:u,style:f,visibleToasts:p=V3,toastOptions:m,dir:v=QE(),gap:w=K3,loadingIcon:x,icons:_,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:A,cn:T=J3}=r,[P,O]=be.useState([]),z=be.useMemo(()=>Array.from(new Set([t].concat(P.filter(F=>F.position).map(F=>F.position)))),[P,t]),[M,D]=be.useState([]),[H,Z]=be.useState(!1),[R,U]=be.useState(!1),[k,W]=be.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=be.useRef(null),I=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=be.useRef(null),V=be.useRef(!1),X=be.useCallback(F=>{var q;(q=P.find(oe=>oe.id===F.id))!=null&&q.delete||es.dismiss(F.id),O(oe=>oe.filter(({id:re})=>re!==F.id))},[P]);return be.useEffect(()=>es.subscribe(F=>{if(F.dismiss){O(q=>q.map(oe=>oe.id===F.id?{...oe,delete:!0}:oe));return}setTimeout(()=>{Yj.flushSync(()=>{O(q=>{let oe=q.findIndex(re=>re.id===F.id);return oe!==-1?[...q.slice(0,oe),{...q[oe],...F},...q.slice(oe+1)]:[F,...q]})})})}),[]),be.useEffect(()=>{if(l!=="system"){W(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:F})=>{W(F?"dark":"light")})},[l]),be.useEffect(()=>{P.length<=1&&Z(!1)},[P]),be.useEffect(()=>{let F=q=>{var oe,re;n.every(ee=>q[ee]||q.code===ee)&&(Z(!0),(oe=B.current)==null||oe.focus()),q.code==="Escape"&&(document.activeElement===B.current||(re=B.current)!=null&&re.contains(document.activeElement))&&Z(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[n]),be.useEffect(()=>{if(B.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,V.current=!1)}},[B.current]),P.length?be.createElement("section",{"aria-label":`${C} ${I}`,tabIndex:-1},z.map((F,q)=>{var oe;let[re,ee]=F.split("-");return be.createElement("ol",{key:F,dir:v==="auto"?QE():v,tabIndex:-1,ref:B,className:o,"data-sonner-toaster":!0,"data-theme":k,"data-y-position":re,"data-x-position":ee,style:{"--front-toast-height":`${((oe=M[0])==null?void 0:oe.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||W3,"--width":`${q3}px`,"--gap":`${w}px`,...f},onBlur:ye=>{V.current&&!ye.currentTarget.contains(ye.relatedTarget)&&(V.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:ye=>{ye.target instanceof HTMLElement&&ye.target.dataset.dismissible==="false"||V.current||(V.current=!0,G.current=ye.relatedTarget)},onMouseEnter:()=>Z(!0),onMouseMove:()=>Z(!0),onMouseLeave:()=>{R||Z(!1)},onPointerDown:ye=>{ye.target instanceof HTMLElement&&ye.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},P.filter(ye=>!ye.position&&q===0||ye.position===F).map((ye,ve)=>{var he,xe;return be.createElement(Z3,{key:ye.id,icons:_,index:ve,toast:ye,defaultRichColors:d,duration:(he=m==null?void 0:m.duration)!=null?he:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:p,closeButton:(xe=m==null?void 0:m.closeButton)!=null?xe:i,interacting:R,position:F,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:X,toasts:P.filter(Ce=>Ce.position==ye.position),heights:M.filter(Ce=>Ce.position==ye.position),setHeights:D,expandByDefault:s,gap:w,loadingIcon:x,expanded:H,pauseWhenPageIsHidden:A,cn:T})}))})):null};const Q3=({...r})=>{const{theme:e="system"}=FP();return g.jsx(X3,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};var e$=Kj.useId||(()=>{}),t$=0;function Ys(r){const[e,t]=S.useState(e$());return Kr(()=>{t(n=>n??String(t$++))},[r]),e?`radix-${e}`:""}const r$=["top","right","bottom","left"],Ta=Math.min,rs=Math.max,jg=Math.round,vm=Math.floor,Na=r=>({x:r,y:r}),n$={left:"right",right:"left",bottom:"top",top:"bottom"},s$={start:"end",end:"start"};function qx(r,e,t){return rs(r,Ta(e,t))}function xo(r,e){return typeof r=="function"?r(e):r}function bo(r){return r.split("-")[0]}function td(r){return r.split("-")[1]}function X1(r){return r==="x"?"y":"x"}function Q1(r){return r==="y"?"height":"width"}function ja(r){return["top","bottom"].includes(bo(r))?"y":"x"}function e_(r){return X1(ja(r))}function i$(r,e,t){t===void 0&&(t=!1);const n=td(r),s=e_(r),i=Q1(s);let o=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Pg(o)),[o,Pg(o)]}function o$(r){const e=Pg(r);return[Kx(r),e,Kx(e)]}function Kx(r){return r.replace(/start|end/g,e=>s$[e])}function a$(r,e,t){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?s:n:e?n:s;case"left":case"right":return e?i:o;default:return[]}}function l$(r,e,t,n){const s=td(r);let i=a$(bo(r),t==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Kx)))),i}function Pg(r){return r.replace(/left|right|bottom|top/g,e=>n$[e])}function c$(r){return{top:0,right:0,bottom:0,left:0,...r}}function BP(r){return typeof r!="number"?c$(r):{top:r,right:r,bottom:r,left:r}}function Rg(r){const{x:e,y:t,width:n,height:s}=r;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function eA(r,e,t){let{reference:n,floating:s}=r;const i=ja(e),o=e_(e),a=Q1(o),l=bo(e),d=i==="y",u=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,p=n[a]/2-s[a]/2;let m;switch(l){case"top":m={x:u,y:n.y-s.height};break;case"bottom":m={x:u,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-s.width,y:f};break;default:m={x:n.x,y:n.y}}switch(td(e)){case"start":m[o]-=p*(t&&d?-1:1);break;case"end":m[o]+=p*(t&&d?-1:1);break}return m}const u$=async(r,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:r,floating:e,strategy:s}),{x:u,y:f}=eA(d,n,l),p=n,m={},v=0;for(let w=0;w<a.length;w++){const{name:x,fn:_}=a[w],{x:C,y:A,data:T,reset:P}=await _({x:u,y:f,initialPlacement:n,placement:p,strategy:s,middlewareData:m,rects:d,platform:o,elements:{reference:r,floating:e}});u=C??u,f=A??f,m={...m,[x]:{...m[x],...T}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:s}):P.rects),{x:u,y:f}=eA(d,p,l)),w=-1)}return{x:u,y:f,placement:p,strategy:s,middlewareData:m}};async function Wh(r,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=r,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=xo(e,r),v=BP(m),x=a[p?f==="floating"?"reference":"floating":f],_=Rg(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(x)))==null||t?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:d,rootBoundary:u,strategy:l})),C=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),T=await(i.isElement==null?void 0:i.isElement(A))?await(i.getScale==null?void 0:i.getScale(A))||{x:1,y:1}:{x:1,y:1},P=Rg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:A,strategy:l}):C);return{top:(_.top-P.top+v.top)/T.y,bottom:(P.bottom-_.bottom+v.bottom)/T.y,left:(_.left-P.left+v.left)/T.x,right:(P.right-_.right+v.right)/T.x}}const d$=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:d,padding:u=0}=xo(r,e)||{};if(d==null)return{};const f=BP(u),p={x:t,y:n},m=e_(s),v=Q1(m),w=await o.getDimensions(d),x=m==="y",_=x?"top":"left",C=x?"bottom":"right",A=x?"clientHeight":"clientWidth",T=i.reference[v]+i.reference[m]-p[m]-i.floating[v],P=p[m]-i.reference[m],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let z=O?O[A]:0;(!z||!await(o.isElement==null?void 0:o.isElement(O)))&&(z=a.floating[A]||i.floating[v]);const M=T/2-P/2,D=z/2-w[v]/2-1,H=Ta(f[_],D),Z=Ta(f[C],D),R=H,U=z-w[v]-Z,k=z/2-w[v]/2+M,W=qx(R,k,U),B=!l.arrow&&td(s)!=null&&k!==W&&i.reference[v]/2-(k<R?H:Z)-w[v]/2<0,I=B?k<R?k-R:k-U:0;return{[m]:p[m]+I,data:{[m]:W,centerOffset:k-W-I,...B&&{alignmentOffset:I}},reset:B}}}),h$=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,...x}=xo(r,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const _=bo(s),C=ja(a),A=bo(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(d.floating)),P=p||(A||!w?[Pg(a)]:o$(a)),O=v!=="none";!p&&O&&P.push(...l$(a,w,v,T));const z=[a,...P],M=await Wh(e,x),D=[];let H=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&D.push(M[_]),f){const k=i$(s,o,T);D.push(M[k[0]],M[k[1]])}if(H=[...H,{placement:s,overflows:D}],!D.every(k=>k<=0)){var Z,R;const k=(((Z=i.flip)==null?void 0:Z.index)||0)+1,W=z[k];if(W)return{data:{index:k,overflows:H},reset:{placement:W}};let B=(R=H.filter(I=>I.overflows[0]<=0).sort((I,G)=>I.overflows[1]-G.overflows[1])[0])==null?void 0:R.placement;if(!B)switch(m){case"bestFit":{var U;const I=(U=H.filter(G=>{if(O){const V=ja(G.placement);return V===C||V==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(V=>V>0).reduce((V,X)=>V+X,0)]).sort((G,V)=>G[1]-V[1])[0])==null?void 0:U[0];I&&(B=I);break}case"initialPlacement":B=a;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function tA(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function rA(r){return r$.some(e=>r[e]>=0)}const f$=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=xo(r,e);switch(n){case"referenceHidden":{const i=await Wh(e,{...s,elementContext:"reference"}),o=tA(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rA(o)}}}case"escaped":{const i=await Wh(e,{...s,altBoundary:!0}),o=tA(i,t.floating);return{data:{escapedOffsets:o,escaped:rA(o)}}}default:return{}}}}};async function p$(r,e){const{placement:t,platform:n,elements:s}=r,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=bo(t),a=td(t),l=ja(t)==="y",d=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=xo(e,r);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*d}:{x:p*d,y:m*u}}const m$=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await p$(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},g$=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:_,y:C}=x;return{x:_,y:C}}},...l}=xo(r,e),d={x:t,y:n},u=await Wh(e,l),f=ja(bo(s)),p=X1(f);let m=d[p],v=d[f];if(i){const x=p==="y"?"top":"left",_=p==="y"?"bottom":"right",C=m+u[x],A=m-u[_];m=qx(C,m,A)}if(o){const x=f==="y"?"top":"left",_=f==="y"?"bottom":"right",C=v+u[x],A=v-u[_];v=qx(C,v,A)}const w=a.fn({...e,[p]:m,[f]:v});return{...w,data:{x:w.x-t,y:w.y-n,enabled:{[p]:i,[f]:o}}}}}},y$=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:d=!0}=xo(r,e),u={x:t,y:n},f=ja(s),p=X1(f);let m=u[p],v=u[f];const w=xo(a,e),x=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const A=p==="y"?"height":"width",T=i.reference[p]-i.floating[A]+x.mainAxis,P=i.reference[p]+i.reference[A]-x.mainAxis;m<T?m=T:m>P&&(m=P)}if(d){var _,C;const A=p==="y"?"width":"height",T=["top","left"].includes(bo(s)),P=i.reference[f]-i.floating[A]+(T&&((_=o.offset)==null?void 0:_[f])||0)+(T?0:x.crossAxis),O=i.reference[f]+i.reference[A]+(T?0:((C=o.offset)==null?void 0:C[f])||0)-(T?x.crossAxis:0);v<P?v=P:v>O&&(v=O)}return{[p]:m,[f]:v}}}},v$=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...d}=xo(r,e),u=await Wh(e,d),f=bo(s),p=td(s),m=ja(s)==="y",{width:v,height:w}=i.floating;let x,_;f==="top"||f==="bottom"?(x=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,x=p==="end"?"top":"bottom");const C=w-u.top-u.bottom,A=v-u.left-u.right,T=Ta(w-u[x],C),P=Ta(v-u[_],A),O=!e.middlewareData.shift;let z=T,M=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(M=A),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(z=C),O&&!p){const H=rs(u.left,0),Z=rs(u.right,0),R=rs(u.top,0),U=rs(u.bottom,0);m?M=v-2*(H!==0||Z!==0?H+Z:rs(u.left,u.right)):z=w-2*(R!==0||U!==0?R+U:rs(u.top,u.bottom))}await l({...e,availableWidth:M,availableHeight:z});const D=await o.getDimensions(a.floating);return v!==D.width||w!==D.height?{reset:{rects:!0}}:{}}}};function z0(){return typeof window<"u"}function rd(r){return $P(r)?(r.nodeName||"").toLowerCase():"#document"}function ns(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Ui(r){var e;return(e=($P(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function $P(r){return z0()?r instanceof Node||r instanceof ns(r).Node:!1}function Zs(r){return z0()?r instanceof Element||r instanceof ns(r).Element:!1}function Di(r){return z0()?r instanceof HTMLElement||r instanceof ns(r).HTMLElement:!1}function nA(r){return!z0()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof ns(r).ShadowRoot}function Bf(r){const{overflow:e,overflowX:t,overflowY:n,display:s}=Xs(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(s)}function w$(r){return["table","td","th"].includes(rd(r))}function U0(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function t_(r){const e=r_(),t=Zs(r)?Xs(r):r;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function x$(r){let e=Pa(r);for(;Di(e)&&!Nu(e);){if(t_(e))return e;if(U0(e))return null;e=Pa(e)}return null}function r_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Nu(r){return["html","body","#document"].includes(rd(r))}function Xs(r){return ns(r).getComputedStyle(r)}function V0(r){return Zs(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Pa(r){if(rd(r)==="html")return r;const e=r.assignedSlot||r.parentNode||nA(r)&&r.host||Ui(r);return nA(e)?e.host:e}function zP(r){const e=Pa(r);return Nu(e)?r.ownerDocument?r.ownerDocument.body:r.body:Di(e)&&Bf(e)?e:zP(e)}function Hh(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=zP(r),i=s===((n=r.ownerDocument)==null?void 0:n.body),o=ns(s);if(i){const a=Gx(o);return e.concat(o,o.visualViewport||[],Bf(s)?s:[],a&&t?Hh(a):[])}return e.concat(s,Hh(s,[],t))}function Gx(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function UP(r){const e=Xs(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Di(r),i=s?r.offsetWidth:t,o=s?r.offsetHeight:n,a=jg(t)!==i||jg(n)!==o;return a&&(t=i,n=o),{width:t,height:n,$:a}}function n_(r){return Zs(r)?r:r.contextElement}function ou(r){const e=n_(r);if(!Di(e))return Na(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:i}=UP(e);let o=(i?jg(t.width):t.width)/n,a=(i?jg(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const b$=Na(0);function VP(r){const e=ns(r);return!r_()||!e.visualViewport?b$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _$(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==ns(r)?!1:e}function Bl(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=r.getBoundingClientRect(),i=n_(r);let o=Na(1);e&&(n?Zs(n)&&(o=ou(n)):o=ou(r));const a=_$(i,t,n)?VP(i):Na(0);let l=(s.left+a.x)/o.x,d=(s.top+a.y)/o.y,u=s.width/o.x,f=s.height/o.y;if(i){const p=ns(i),m=n&&Zs(n)?ns(n):n;let v=p,w=Gx(v);for(;w&&n&&m!==v;){const x=ou(w),_=w.getBoundingClientRect(),C=Xs(w),A=_.left+(w.clientLeft+parseFloat(C.paddingLeft))*x.x,T=_.top+(w.clientTop+parseFloat(C.paddingTop))*x.y;l*=x.x,d*=x.y,u*=x.x,f*=x.y,l+=A,d+=T,v=ns(w),w=Gx(v)}}return Rg({width:u,height:f,x:l,y:d})}function k$(r){let{elements:e,rect:t,offsetParent:n,strategy:s}=r;const i=s==="fixed",o=Ui(n),a=e?U0(e.floating):!1;if(n===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},d=Na(1);const u=Na(0),f=Di(n);if((f||!f&&!i)&&((rd(n)!=="body"||Bf(o))&&(l=V0(n)),Di(n))){const p=Bl(n);d=ou(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-l.scrollLeft*d.x+u.x,y:t.y*d.y-l.scrollTop*d.y+u.y}}function S$(r){return Array.from(r.getClientRects())}function Yx(r,e){const t=V0(r).scrollLeft;return e?e.left+t:Bl(Ui(r)).left+t}function C$(r){const e=Ui(r),t=V0(r),n=r.ownerDocument.body,s=rs(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=rs(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Yx(r);const a=-t.scrollTop;return Xs(n).direction==="rtl"&&(o+=rs(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function E$(r,e){const t=ns(r),n=Ui(r),s=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=r_();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function A$(r,e){const t=Bl(r,!0,e==="fixed"),n=t.top+r.clientTop,s=t.left+r.clientLeft,i=Di(r)?ou(r):Na(1),o=r.clientWidth*i.x,a=r.clientHeight*i.y,l=s*i.x,d=n*i.y;return{width:o,height:a,x:l,y:d}}function sA(r,e,t){let n;if(e==="viewport")n=E$(r,t);else if(e==="document")n=C$(Ui(r));else if(Zs(e))n=A$(e,t);else{const s=VP(r);n={...e,x:e.x-s.x,y:e.y-s.y}}return Rg(n)}function WP(r,e){const t=Pa(r);return t===e||!Zs(t)||Nu(t)?!1:Xs(t).position==="fixed"||WP(t,e)}function T$(r,e){const t=e.get(r);if(t)return t;let n=Hh(r,[],!1).filter(a=>Zs(a)&&rd(a)!=="body"),s=null;const i=Xs(r).position==="fixed";let o=i?Pa(r):r;for(;Zs(o)&&!Nu(o);){const a=Xs(o),l=t_(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Bf(o)&&!l&&WP(r,o))?n=n.filter(u=>u!==o):s=a,o=Pa(o)}return e.set(r,n),n}function N$(r){let{element:e,boundary:t,rootBoundary:n,strategy:s}=r;const o=[...t==="clippingAncestors"?U0(e)?[]:T$(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((d,u)=>{const f=sA(e,u,s);return d.top=rs(f.top,d.top),d.right=Ta(f.right,d.right),d.bottom=Ta(f.bottom,d.bottom),d.left=rs(f.left,d.left),d},sA(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function j$(r){const{width:e,height:t}=UP(r);return{width:e,height:t}}function P$(r,e,t){const n=Di(e),s=Ui(e),i=t==="fixed",o=Bl(r,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Na(0);if(n||!n&&!i)if((rd(e)!=="body"||Bf(s))&&(a=V0(e)),n){const m=Bl(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=Yx(s));let d=0,u=0;if(s&&!n&&!i){const m=s.getBoundingClientRect();u=m.top+a.scrollTop,d=m.left+a.scrollLeft-Yx(s,m)}const f=o.left+a.scrollLeft-l.x-d,p=o.top+a.scrollTop-l.y-u;return{x:f,y:p,width:o.width,height:o.height}}function jw(r){return Xs(r).position==="static"}function iA(r,e){if(!Di(r)||Xs(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Ui(r)===t&&(t=t.ownerDocument.body),t}function HP(r,e){const t=ns(r);if(U0(r))return t;if(!Di(r)){let s=Pa(r);for(;s&&!Nu(s);){if(Zs(s)&&!jw(s))return s;s=Pa(s)}return t}let n=iA(r,e);for(;n&&w$(n)&&jw(n);)n=iA(n,e);return n&&Nu(n)&&jw(n)&&!t_(n)?t:n||x$(r)||t}const R$=async function(r){const e=this.getOffsetParent||HP,t=this.getDimensions,n=await t(r.floating);return{reference:P$(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function O$(r){return Xs(r).direction==="rtl"}const M$={convertOffsetParentRelativeRectToViewportRelativeRect:k$,getDocumentElement:Ui,getClippingRect:N$,getOffsetParent:HP,getElementRects:R$,getClientRects:S$,getDimensions:j$,getScale:ou,isElement:Zs,isRTL:O$};function D$(r,e){let t=null,n;const s=Ui(r);function i(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:d,top:u,width:f,height:p}=r.getBoundingClientRect();if(a||e(),!f||!p)return;const m=vm(u),v=vm(s.clientWidth-(d+f)),w=vm(s.clientHeight-(u+p)),x=vm(d),C={rootMargin:-m+"px "+-v+"px "+-w+"px "+-x+"px",threshold:rs(0,Ta(1,l))||1};let A=!0;function T(P){const O=P[0].intersectionRatio;if(O!==l){if(!A)return o();O?o(!1,O):n=setTimeout(()=>{o(!1,1e-7)},1e3)}A=!1}try{t=new IntersectionObserver(T,{...C,root:s.ownerDocument})}catch{t=new IntersectionObserver(T,C)}t.observe(r)}return o(!0),i}function I$(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,d=n_(r),u=s||i?[...d?Hh(d):[],...Hh(e)]:[];u.forEach(_=>{s&&_.addEventListener("scroll",t,{passive:!0}),i&&_.addEventListener("resize",t)});const f=d&&a?D$(d,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(_=>{let[C]=_;C&&C.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var A;(A=m)==null||A.observe(e)})),t()}),d&&!l&&m.observe(d),m.observe(e));let v,w=l?Bl(r):null;l&&x();function x(){const _=Bl(r);w&&(_.x!==w.x||_.y!==w.y||_.width!==w.width||_.height!==w.height)&&t(),w=_,v=requestAnimationFrame(x)}return t(),()=>{var _;u.forEach(C=>{s&&C.removeEventListener("scroll",t),i&&C.removeEventListener("resize",t)}),f==null||f(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const L$=m$,F$=g$,B$=h$,$$=v$,z$=f$,oA=d$,U$=y$,V$=(r,e,t)=>{const n=new Map,s={platform:M$,...t},i={...s.platform,_c:n};return u$(r,e,{...s,platform:i})};var ng=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Og(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,s;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!Og(r[n],e[n]))return!1;return!0}if(s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const i=s[n];if(!(i==="_owner"&&r.$$typeof)&&!Og(r[i],e[i]))return!1}return!0}return r!==r&&e!==e}function qP(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function aA(r,e){const t=qP(r);return Math.round(e*t)/t}function Pw(r){const e=S.useRef(r);return ng(()=>{e.current=r}),e}function W$(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:d}=r,[u,f]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=S.useState(n);Og(p,n)||m(n);const[v,w]=S.useState(null),[x,_]=S.useState(null),C=S.useCallback(G=>{G!==O.current&&(O.current=G,w(G))},[]),A=S.useCallback(G=>{G!==z.current&&(z.current=G,_(G))},[]),T=i||v,P=o||x,O=S.useRef(null),z=S.useRef(null),M=S.useRef(u),D=l!=null,H=Pw(l),Z=Pw(s),R=Pw(d),U=S.useCallback(()=>{if(!O.current||!z.current)return;const G={placement:e,strategy:t,middleware:p};Z.current&&(G.platform=Z.current),V$(O.current,z.current,G).then(V=>{const X={...V,isPositioned:R.current!==!1};k.current&&!Og(M.current,X)&&(M.current=X,Zu.flushSync(()=>{f(X)}))})},[p,e,t,Z,R]);ng(()=>{d===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[d]);const k=S.useRef(!1);ng(()=>(k.current=!0,()=>{k.current=!1}),[]),ng(()=>{if(T&&(O.current=T),P&&(z.current=P),T&&P){if(H.current)return H.current(T,P,U);U()}},[T,P,U,H,D]);const W=S.useMemo(()=>({reference:O,floating:z,setReference:C,setFloating:A}),[C,A]),B=S.useMemo(()=>({reference:T,floating:P}),[T,P]),I=S.useMemo(()=>{const G={position:t,left:0,top:0};if(!B.floating)return G;const V=aA(B.floating,u.x),X=aA(B.floating,u.y);return a?{...G,transform:"translate("+V+"px, "+X+"px)",...qP(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:V,top:X}},[t,a,B.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:U,refs:W,elements:B,floatingStyles:I}),[u,U,W,B,I])}const H$=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:s}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?oA({element:n.current,padding:s}).fn(t):{}:n?oA({element:n,padding:s}).fn(t):{}}}},q$=(r,e)=>({...L$(r),options:[r,e]}),K$=(r,e)=>({...F$(r),options:[r,e]}),G$=(r,e)=>({...U$(r),options:[r,e]}),Y$=(r,e)=>({...B$(r),options:[r,e]}),J$=(r,e)=>({...$$(r),options:[r,e]}),Z$=(r,e)=>({...z$(r),options:[r,e]}),X$=(r,e)=>({...H$(r),options:[r,e]});var Q$="Arrow",KP=S.forwardRef((r,e)=>{const{children:t,width:n=10,height:s=5,...i}=r;return g.jsx(at.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});KP.displayName=Q$;var ez=KP;function tz(r,e=[]){let t=[];function n(i,o){const a=S.createContext(o),l=t.length;t=[...t,o];function d(f){const{scope:p,children:m,...v}=f,w=(p==null?void 0:p[r][l])||a,x=S.useMemo(()=>v,Object.values(v));return g.jsx(w.Provider,{value:x,children:m})}function u(f,p){const m=(p==null?void 0:p[r][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const s=()=>{const i=t.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return S.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,rz(s,...e)]}function rz(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:d})=>{const f=l(i)[`__scope${d}`];return{...a,...f}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function GP(r){const[e,t]=S.useState(void 0);return Kr(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,d=Array.isArray(l)?l[0]:l;o=d.inlineSize,a=d.blockSize}else o=r.offsetWidth,a=r.offsetHeight;t({width:o,height:a})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var s_="Popper",[YP,qa]=tz(s_),[nz,JP]=YP(s_),ZP=r=>{const{__scopePopper:e,children:t}=r,[n,s]=S.useState(null);return g.jsx(nz,{scope:e,anchor:n,onAnchorChange:s,children:t})};ZP.displayName=s_;var XP="PopperAnchor",QP=S.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...s}=r,i=JP(XP,t),o=S.useRef(null),a=Pt(e,o);return S.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:g.jsx(at.div,{...s,ref:a})});QP.displayName=XP;var i_="PopperContent",[sz,iz]=YP(i_),eR=S.forwardRef((r,e)=>{var ve,he,xe,Ce,ue,_e;const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,...w}=r,x=JP(i_,t),[_,C]=S.useState(null),A=Pt(e,Ie=>C(Ie)),[T,P]=S.useState(null),O=GP(T),z=(O==null?void 0:O.width)??0,M=(O==null?void 0:O.height)??0,D=n+(i!=="center"?"-"+i:""),H=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},Z=Array.isArray(d)?d:[d],R=Z.length>0,U={padding:H,boundary:Z.filter(az),altBoundary:R},{refs:k,floatingStyles:W,placement:B,isPositioned:I,middlewareData:G}=W$({strategy:"fixed",placement:D,whileElementsMounted:(...Ie)=>I$(...Ie,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[q$({mainAxis:s+M,alignmentAxis:o}),l&&K$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?G$():void 0,...U}),l&&Y$({...U}),J$({...U,apply:({elements:Ie,rects:$,availableWidth:me,availableHeight:te})=>{const{width:Y,height:N}=$.reference,L=Ie.floating.style;L.setProperty("--radix-popper-available-width",`${me}px`),L.setProperty("--radix-popper-available-height",`${te}px`),L.setProperty("--radix-popper-anchor-width",`${Y}px`),L.setProperty("--radix-popper-anchor-height",`${N}px`)}}),T&&X$({element:T,padding:a}),lz({arrowWidth:z,arrowHeight:M}),p&&Z$({strategy:"referenceHidden",...U})]}),[V,X]=nR(B),F=Xr(v);Kr(()=>{I&&(F==null||F())},[I,F]);const q=(ve=G.arrow)==null?void 0:ve.x,oe=(he=G.arrow)==null?void 0:he.y,re=((xe=G.arrow)==null?void 0:xe.centerOffset)!==0,[ee,ye]=S.useState();return Kr(()=>{_&&ye(window.getComputedStyle(_).zIndex)},[_]),g.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:I?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(Ce=G.transformOrigin)==null?void 0:Ce.x,(ue=G.transformOrigin)==null?void 0:ue.y].join(" "),...((_e=G.hide)==null?void 0:_e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:g.jsx(sz,{scope:t,placedSide:V,onArrowChange:P,arrowX:q,arrowY:oe,shouldHideArrow:re,children:g.jsx(at.div,{"data-side":V,"data-align":X,...w,ref:A,style:{...w.style,animation:I?void 0:"none"}})})})});eR.displayName=i_;var tR="PopperArrow",oz={top:"bottom",right:"left",bottom:"top",left:"right"},rR=S.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,i=iz(tR,n),o=oz[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(ez,{...s,ref:t,style:{...s.style,display:"block"}})})});rR.displayName=tR;function az(r){return r!==null}var lz=r=>({name:"transformOrigin",options:r,fn(e){var x,_,C;const{placement:t,rects:n,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:r.arrowWidth,l=o?0:r.arrowHeight,[d,u]=nR(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,m=(((C=s.arrow)==null?void 0:C.y)??0)+l/2;let v="",w="";return d==="bottom"?(v=o?f:`${p}px`,w=`${-l}px`):d==="top"?(v=o?f:`${p}px`,w=`${n.floating.height+l}px`):d==="right"?(v=`${-l}px`,w=o?f:`${m}px`):d==="left"&&(v=`${n.floating.width+l}px`,w=o?f:`${m}px`),{data:{x:v,y:w}}}});function nR(r){const[e,t="center"]=r.split("-");return[e,t]}var o_=ZP,$f=QP,W0=eR,H0=rR,[q0,Noe]=ni("Tooltip",[qa]),a_=qa(),sR="TooltipProvider",cz=700,lA="tooltip.open",[uz,iR]=q0(sR),oR=r=>{const{__scopeTooltip:e,delayDuration:t=cz,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=r,[o,a]=S.useState(!0),l=S.useRef(!1),d=S.useRef(0);return S.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),g.jsx(uz,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:S.useCallback(()=>{window.clearTimeout(d.current),a(!1)},[]),onClose:S.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:S.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};oR.displayName=sR;var aR="Tooltip",[joe,K0]=q0(aR),Jx="TooltipTrigger",dz=S.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=K0(Jx,t),i=iR(Jx,t),o=a_(t),a=S.useRef(null),l=Pt(e,a,s.onTriggerChange),d=S.useRef(!1),u=S.useRef(!1),f=S.useCallback(()=>d.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),g.jsx($f,{asChild:!0,...o,children:g.jsx(at.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:Le(r.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Le(r.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Le(r.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Le(r.onFocus,()=>{d.current||s.onOpen()}),onBlur:Le(r.onBlur,s.onClose),onClick:Le(r.onClick,s.onClose)})})});dz.displayName=Jx;var hz="TooltipPortal",[Poe,fz]=q0(hz,{forceMount:void 0}),ju="TooltipContent",lR=S.forwardRef((r,e)=>{const t=fz(ju,r.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...i}=r,o=K0(ju,r.__scopeTooltip);return g.jsx(as,{present:n||o.open,children:o.disableHoverableContent?g.jsx(cR,{side:s,...i,ref:e}):g.jsx(pz,{side:s,...i,ref:e})})}),pz=S.forwardRef((r,e)=>{const t=K0(ju,r.__scopeTooltip),n=iR(ju,r.__scopeTooltip),s=S.useRef(null),i=Pt(e,s),[o,a]=S.useState(null),{trigger:l,onClose:d}=t,u=s.current,{onPointerInTransitChange:f}=n,p=S.useCallback(()=>{a(null),f(!1)},[f]),m=S.useCallback((v,w)=>{const x=v.currentTarget,_={x:v.clientX,y:v.clientY},C=vz(_,x.getBoundingClientRect()),A=wz(_,C),T=xz(w.getBoundingClientRect()),P=_z([...A,...T]);a(P),f(!0)},[f]);return S.useEffect(()=>()=>p(),[p]),S.useEffect(()=>{if(l&&u){const v=x=>m(x,u),w=x=>m(x,l);return l.addEventListener("pointerleave",v),u.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",w)}}},[l,u,m,p]),S.useEffect(()=>{if(o){const v=w=>{const x=w.target,_={x:w.clientX,y:w.clientY},C=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),A=!bz(_,o);C?p():A&&(p(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,u,o,d,p]),g.jsx(cR,{...r,ref:i})}),[mz,gz]=q0(aR,{isInside:!1}),cR=S.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=r,l=K0(ju,t),d=a_(t),{onClose:u}=l;return S.useEffect(()=>(document.addEventListener(lA,u),()=>document.removeEventListener(lA,u)),[u]),S.useEffect(()=>{if(l.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),g.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:g.jsxs(W0,{"data-state":l.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(U1,{children:n}),g.jsx(mz,{scope:t,isInside:!0,children:g.jsx(J6,{id:l.contentId,role:"tooltip",children:s||n})})]})})});lR.displayName=ju;var uR="TooltipArrow",yz=S.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=a_(t);return gz(uR,t).isInside?null:g.jsx(H0,{...s,...n,ref:e})});yz.displayName=uR;function vz(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),s=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,s,i)){case i:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function wz(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function xz(r){const{top:e,right:t,bottom:n,left:s}=r;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function bz(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,d=e[o].x,u=e[o].y;l>n!=u>n&&t<(d-a)*(n-l)/(u-l)+a&&(s=!s)}return s}function _z(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),kz(e)}function kz(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const s=r[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const s=r[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Sz=oR,dR=lR;const Cz=Sz,Ez=S.forwardRef(({className:r,sideOffset:e=4,...t},n)=>g.jsx(dR,{ref:n,sideOffset:e,className:Ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Ez.displayName=dR.displayName;var G0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Y0=typeof window>"u"||"Deno"in globalThis;function zs(){}function Az(r,e){return typeof r=="function"?r(e):r}function Tz(r){return typeof r=="number"&&r>=0&&r!==1/0}function Nz(r,e){return Math.max(r+(e||0)-Date.now(),0)}function cA(r,e){return typeof r=="function"?r(e):r}function jz(r,e){return typeof r=="function"?r(e):r}function uA(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=r;if(o){if(n){if(e.queryHash!==l_(o,e.options))return!1}else if(!Kh(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function dA(r,e){const{exact:t,status:n,predicate:s,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(qh(e.options.mutationKey)!==qh(i))return!1}else if(!Kh(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function l_(r,e){return((e==null?void 0:e.queryKeyHashFn)||qh)(r)}function qh(r){return JSON.stringify(r,(e,t)=>Zx(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function Kh(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Kh(r[t],e[t])):!1}function hR(r,e){if(r===e)return r;const t=hA(r)&&hA(e);if(t||Zx(r)&&Zx(e)){const n=t?r:Object.keys(r),s=n.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let l=0;for(let d=0;d<o;d++){const u=t?d:i[d];(!t&&n.includes(u)||t)&&r[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=hR(r[u],e[u]),a[u]===r[u]&&r[u]!==void 0&&l++)}return s===o&&l===s?r:a}return e}function hA(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Zx(r){if(!fA(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!fA(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function fA(r){return Object.prototype.toString.call(r)==="[object Object]"}function Pz(r){return new Promise(e=>{setTimeout(e,r)})}function Rz(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?hR(r,e):e}function Oz(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function Mz(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var c_=Symbol();function fR(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===c_?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var Pl,ma,xu,Fj,Dz=(Fj=class extends G0{constructor(){super();Ut(this,Pl);Ut(this,ma);Ut(this,xu);Ct(this,xu,e=>{if(!Y0&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Se(this,ma)||this.setEventListener(Se(this,xu))}onUnsubscribe(){var e;this.hasListeners()||((e=Se(this,ma))==null||e.call(this),Ct(this,ma,void 0))}setEventListener(e){var t;Ct(this,xu,e),(t=Se(this,ma))==null||t.call(this),Ct(this,ma,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){Se(this,Pl)!==e&&(Ct(this,Pl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Se(this,Pl)=="boolean"?Se(this,Pl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Pl=new WeakMap,ma=new WeakMap,xu=new WeakMap,Fj),pR=new Dz,bu,ga,_u,Bj,Iz=(Bj=class extends G0{constructor(){super();Ut(this,bu,!0);Ut(this,ga);Ut(this,_u);Ct(this,_u,e=>{if(!Y0&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){Se(this,ga)||this.setEventListener(Se(this,_u))}onUnsubscribe(){var e;this.hasListeners()||((e=Se(this,ga))==null||e.call(this),Ct(this,ga,void 0))}setEventListener(e){var t;Ct(this,_u,e),(t=Se(this,ga))==null||t.call(this),Ct(this,ga,e(this.setOnline.bind(this)))}setOnline(e){Se(this,bu)!==e&&(Ct(this,bu,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return Se(this,bu)}},bu=new WeakMap,ga=new WeakMap,_u=new WeakMap,Bj),Mg=new Iz;function Lz(){let r,e;const t=new Promise((s,i)=>{r=s,e=i});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function Fz(r){return Math.min(1e3*2**r,3e4)}function mR(r){return(r??"online")==="online"?Mg.isOnline():!0}var gR=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Rw(r){return r instanceof gR}function yR(r){let e=!1,t=0,n=!1,s;const i=Lz(),o=w=>{var x;n||(p(new gR(w)),(x=r.abort)==null||x.call(r))},a=()=>{e=!0},l=()=>{e=!1},d=()=>pR.isFocused()&&(r.networkMode==="always"||Mg.isOnline())&&r.canRun(),u=()=>mR(r.networkMode)&&r.canRun(),f=w=>{var x;n||(n=!0,(x=r.onSuccess)==null||x.call(r,w),s==null||s(),i.resolve(w))},p=w=>{var x;n||(n=!0,(x=r.onError)==null||x.call(r,w),s==null||s(),i.reject(w))},m=()=>new Promise(w=>{var x;s=_=>{(n||d())&&w(_)},(x=r.onPause)==null||x.call(r)}).then(()=>{var w;s=void 0,n||(w=r.onContinue)==null||w.call(r)}),v=()=>{if(n)return;let w;const x=t===0?r.initialPromise:void 0;try{w=x??r.fn()}catch(_){w=Promise.reject(_)}Promise.resolve(w).then(f).catch(_=>{var O;if(n)return;const C=r.retry??(Y0?0:3),A=r.retryDelay??Fz,T=typeof A=="function"?A(t,_):A,P=C===!0||typeof C=="number"&&t<C||typeof C=="function"&&C(t,_);if(e||!P){p(_);return}t++,(O=r.onFail)==null||O.call(r,t,_),Pz(T).then(()=>d()?void 0:m()).then(()=>{e?p(_):v()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():m().then(v),i)}}function Bz(){let r=[],e=0,t=a=>{a()},n=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?r.push(a):s(()=>{t(a)})},o=()=>{const a=r;r=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var bn=Bz(),Rl,$j,vR=($j=class{constructor(){Ut(this,Rl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tz(this.gcTime)&&Ct(this,Rl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Y0?1/0:5*60*1e3))}clearGcTimeout(){Se(this,Rl)&&(clearTimeout(Se(this,Rl)),Ct(this,Rl,void 0))}},Rl=new WeakMap,$j),ku,Su,ys,ln,Df,Ol,Us,oo,zj,$z=(zj=class extends vR{constructor(e){super();Ut(this,Us);Ut(this,ku);Ut(this,Su);Ut(this,ys);Ut(this,ln);Ut(this,Df);Ut(this,Ol);Ct(this,Ol,!1),Ct(this,Df,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ct(this,ys,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ct(this,ku,Uz(this.options)),this.state=e.state??Se(this,ku),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Se(this,ln))==null?void 0:e.promise}setOptions(e){this.options={...Se(this,Df),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Se(this,ys).remove(this)}setData(e,t){const n=Rz(this.state.data,e,this.options);return on(this,Us,oo).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){on(this,Us,oo).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,s;const t=(n=Se(this,ln))==null?void 0:n.promise;return(s=Se(this,ln))==null||s.cancel(e),t?t.then(zs).catch(zs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Se(this,ku))}isActive(){return this.observers.some(e=>jz(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===c_||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Nz(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=Se(this,ln))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=Se(this,ln))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Se(this,ys).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Se(this,ln)&&(Se(this,Ol)?Se(this,ln).cancel({revert:!0}):Se(this,ln).cancelRetry()),this.scheduleGc()),Se(this,ys).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||on(this,Us,oo).call(this,{type:"invalidate"})}fetch(e,t){var l,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(Se(this,ln))return Se(this,ln).continueRetry(),Se(this,ln).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ct(this,Ol,!0),n.signal)})},i=()=>{const f=fR(this.options,t),p={queryKey:this.queryKey,meta:this.meta};return s(p),Ct(this,Ol,!1),this.options.persister?this.options.persister(f,p,this):f(p)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),Ct(this,Su,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&on(this,Us,oo).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=f=>{var p,m,v,w;Rw(f)&&f.silent||on(this,Us,oo).call(this,{type:"error",error:f}),Rw(f)||((m=(p=Se(this,ys).config).onError)==null||m.call(p,f,this),(w=(v=Se(this,ys).config).onSettled)==null||w.call(v,this.state.data,f,this)),this.scheduleGc()};return Ct(this,ln,yR({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var p,m,v,w;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){a(x);return}(m=(p=Se(this,ys).config).onSuccess)==null||m.call(p,f,this),(w=(v=Se(this,ys).config).onSettled)==null||w.call(v,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,p)=>{on(this,Us,oo).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{on(this,Us,oo).call(this,{type:"pause"})},onContinue:()=>{on(this,Us,oo).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Se(this,ln).start()}},ku=new WeakMap,Su=new WeakMap,ys=new WeakMap,ln=new WeakMap,Df=new WeakMap,Ol=new WeakMap,Us=new WeakSet,oo=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...zz(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Rw(s)&&s.revert&&Se(this,Su)?{...Se(this,Su),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),bn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Se(this,ys).notify({query:this,type:"updated",action:e})})},zj);function zz(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mR(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Uz(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var wi,Uj,Vz=(Uj=class extends G0{constructor(e={}){super();Ut(this,wi);this.config=e,Ct(this,wi,new Map)}build(e,t,n){const s=t.queryKey,i=t.queryHash??l_(s,t);let o=this.get(i);return o||(o=new $z({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Se(this,wi).has(e.queryHash)||(Se(this,wi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Se(this,wi).get(e.queryHash);t&&(e.destroy(),t===e&&Se(this,wi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){bn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Se(this,wi).get(e)}getAll(){return[...Se(this,wi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>uA(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>uA(e,n)):t}notify(e){bn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){bn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){bn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},wi=new WeakMap,Uj),xi,wn,Ml,bi,ra,Vj,Wz=(Vj=class extends vR{constructor(e){super();Ut(this,bi);Ut(this,xi);Ut(this,wn);Ut(this,Ml);this.mutationId=e.mutationId,Ct(this,wn,e.mutationCache),Ct(this,xi,[]),this.state=e.state||Hz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Se(this,xi).includes(e)||(Se(this,xi).push(e),this.clearGcTimeout(),Se(this,wn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ct(this,xi,Se(this,xi).filter(t=>t!==e)),this.scheduleGc(),Se(this,wn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Se(this,xi).length||(this.state.status==="pending"?this.scheduleGc():Se(this,wn).remove(this))}continue(){var e;return((e=Se(this,Ml))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,d,u,f,p,m,v,w,x,_,C,A,T,P,O,z;Ct(this,Ml,yR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,D)=>{on(this,bi,ra).call(this,{type:"failed",failureCount:M,error:D})},onPause:()=>{on(this,bi,ra).call(this,{type:"pause"})},onContinue:()=>{on(this,bi,ra).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Se(this,wn).canRun(this)}));const t=this.state.status==="pending",n=!Se(this,Ml).canStart();try{if(!t){on(this,bi,ra).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=Se(this,wn).config).onMutate)==null?void 0:i.call(s,e,this));const D=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));D!==this.state.context&&on(this,bi,ra).call(this,{type:"pending",context:D,variables:e,isPaused:n})}const M=await Se(this,Ml).start();return await((d=(l=Se(this,wn).config).onSuccess)==null?void 0:d.call(l,M,e,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,M,e,this.state.context)),await((m=(p=Se(this,wn).config).onSettled)==null?void 0:m.call(p,M,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,M,null,e,this.state.context)),on(this,bi,ra).call(this,{type:"success",data:M}),M}catch(M){try{throw await((_=(x=Se(this,wn).config).onError)==null?void 0:_.call(x,M,e,this.state.context,this)),await((A=(C=this.options).onError)==null?void 0:A.call(C,M,e,this.state.context)),await((P=(T=Se(this,wn).config).onSettled)==null?void 0:P.call(T,void 0,M,this.state.variables,this.state.context,this)),await((z=(O=this.options).onSettled)==null?void 0:z.call(O,void 0,M,e,this.state.context)),M}finally{on(this,bi,ra).call(this,{type:"error",error:M})}}finally{Se(this,wn).runNext(this)}}},xi=new WeakMap,wn=new WeakMap,Ml=new WeakMap,bi=new WeakSet,ra=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),bn.batch(()=>{Se(this,xi).forEach(n=>{n.onMutationUpdate(e)}),Se(this,wn).notify({mutation:this,type:"updated",action:e})})},Vj);function Hz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qn,If,Wj,qz=(Wj=class extends G0{constructor(e={}){super();Ut(this,Qn);Ut(this,If);this.config=e,Ct(this,Qn,new Map),Ct(this,If,Date.now())}build(e,t,n){const s=new Wz({mutationCache:this,mutationId:++fm(this,If)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){const t=wm(e),n=Se(this,Qn).get(t)??[];n.push(e),Se(this,Qn).set(t,n),this.notify({type:"added",mutation:e})}remove(e){var n;const t=wm(e);if(Se(this,Qn).has(t)){const s=(n=Se(this,Qn).get(t))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?Se(this,Qn).delete(t):Se(this,Qn).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const t=(n=Se(this,Qn).get(wm(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var n;const t=(n=Se(this,Qn).get(wm(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){bn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Se(this,Qn).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>dA(t,n))}findAll(e={}){return this.getAll().filter(t=>dA(e,t))}notify(e){bn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return bn.batch(()=>Promise.all(e.map(t=>t.continue().catch(zs))))}},Qn=new WeakMap,If=new WeakMap,Wj);function wm(r){var e;return((e=r.options.scope)==null?void 0:e.id)??String(r.mutationId)}function pA(r){return{onFetch:(e,t)=>{var u,f,p,m,v;const n=e.options,s=(p=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const d=async()=>{let w=!1;const x=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},_=fR(e.options,e.fetchOptions),C=async(A,T,P)=>{if(w)return Promise.reject();if(T==null&&A.pages.length)return Promise.resolve(A);const O={queryKey:e.queryKey,pageParam:T,direction:P?"backward":"forward",meta:e.options.meta};x(O);const z=await _(O),{maxPages:M}=e.options,D=P?Mz:Oz;return{pages:D(A.pages,z,M),pageParams:D(A.pageParams,T,M)}};if(s&&i.length){const A=s==="backward",T=A?Kz:mA,P={pages:i,pageParams:o},O=T(n,P);a=await C(P,O,A)}else{const A=r??i.length;do{const T=l===0?o[0]??n.initialPageParam:mA(n,a);if(l>0&&T==null)break;a=await C(a,T),l++}while(l<A)}return a};e.options.persister?e.fetchFn=()=>{var w,x;return(x=(w=e.options).persister)==null?void 0:x.call(w,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function mA(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function Kz(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var vr,ya,va,Cu,Eu,wa,Au,Tu,Hj,Gz=(Hj=class{constructor(r={}){Ut(this,vr);Ut(this,ya);Ut(this,va);Ut(this,Cu);Ut(this,Eu);Ut(this,wa);Ut(this,Au);Ut(this,Tu);Ct(this,vr,r.queryCache||new Vz),Ct(this,ya,r.mutationCache||new qz),Ct(this,va,r.defaultOptions||{}),Ct(this,Cu,new Map),Ct(this,Eu,new Map),Ct(this,wa,0)}mount(){fm(this,wa)._++,Se(this,wa)===1&&(Ct(this,Au,pR.subscribe(async r=>{r&&(await this.resumePausedMutations(),Se(this,vr).onFocus())})),Ct(this,Tu,Mg.subscribe(async r=>{r&&(await this.resumePausedMutations(),Se(this,vr).onOnline())})))}unmount(){var r,e;fm(this,wa)._--,Se(this,wa)===0&&((r=Se(this,Au))==null||r.call(this),Ct(this,Au,void 0),(e=Se(this,Tu))==null||e.call(this),Ct(this,Tu,void 0))}isFetching(r){return Se(this,vr).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return Se(this,ya).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=Se(this,vr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.getQueryData(r.queryKey);if(e===void 0)return this.fetchQuery(r);{const t=this.defaultQueryOptions(r),n=Se(this,vr).build(this,t);return r.revalidateIfStale&&n.isStaleByTime(cA(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(r){return Se(this,vr).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=Se(this,vr).get(n.queryHash),i=s==null?void 0:s.state.data,o=Az(e,i);if(o!==void 0)return Se(this,vr).build(this,n).setData(o,{...t,manual:!0})}setQueriesData(r,e,t){return bn.batch(()=>Se(this,vr).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=Se(this,vr).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=Se(this,vr);bn.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=Se(this,vr),n={type:"active",...r};return bn.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(r={},e={}){const t={revert:!0,...e},n=bn.batch(()=>Se(this,vr).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(zs).catch(zs)}invalidateQueries(r={},e={}){return bn.batch(()=>{if(Se(this,vr).findAll(r).forEach(n=>{n.invalidate()}),r.refetchType==="none")return Promise.resolve();const t={...r,type:r.refetchType??r.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(r={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=bn.batch(()=>Se(this,vr).findAll(r).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(zs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(zs)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=Se(this,vr).build(this,e);return t.isStaleByTime(cA(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(zs).catch(zs)}fetchInfiniteQuery(r){return r.behavior=pA(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(zs).catch(zs)}ensureInfiniteQueryData(r){return r.behavior=pA(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Mg.isOnline()?Se(this,ya).resumePausedMutations():Promise.resolve()}getQueryCache(){return Se(this,vr)}getMutationCache(){return Se(this,ya)}getDefaultOptions(){return Se(this,va)}setDefaultOptions(r){Ct(this,va,r)}setQueryDefaults(r,e){Se(this,Cu).set(qh(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...Se(this,Cu).values()];let t={};return e.forEach(n=>{Kh(r,n.queryKey)&&(t={...t,...n.defaultOptions})}),t}setMutationDefaults(r,e){Se(this,Eu).set(qh(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...Se(this,Eu).values()];let t={};return e.forEach(n=>{Kh(r,n.mutationKey)&&(t={...t,...n.defaultOptions})}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...Se(this,va).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=l_(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===c_&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...Se(this,va).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){Se(this,vr).clear(),Se(this,ya).clear()}},vr=new WeakMap,ya=new WeakMap,va=new WeakMap,Cu=new WeakMap,Eu=new WeakMap,wa=new WeakMap,Au=new WeakMap,Tu=new WeakMap,Hj),Yz=S.createContext(void 0),Jz=({client:r,children:e})=>(S.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),g.jsx(Yz.Provider,{value:r,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gh(){return Gh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gh.apply(this,arguments)}var xa;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(xa||(xa={}));const gA="popstate";function Zz(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Xx("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Dg(s)}return Qz(e,t,null,r)}function Cr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function wR(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xz(){return Math.random().toString(36).substr(2,8)}function yA(r,e){return{usr:r.state,key:r.key,idx:e}}function Xx(r,e,t,n){return t===void 0&&(t=null),Gh({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?nd(e):e,{state:t,key:e&&e.key||n||Xz()})}function Dg(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function nd(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function Qz(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=xa.Pop,l=null,d=u();d==null&&(d=0,o.replaceState(Gh({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=xa.Pop;let x=u(),_=x==null?null:x-d;d=x,l&&l({action:a,location:w.location,delta:_})}function p(x,_){a=xa.Push;let C=Xx(w.location,x,_);d=u()+1;let A=yA(C,d),T=w.createHref(C);try{o.pushState(A,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(T)}i&&l&&l({action:a,location:w.location,delta:1})}function m(x,_){a=xa.Replace;let C=Xx(w.location,x,_);d=u();let A=yA(C,d),T=w.createHref(C);o.replaceState(A,"",T),i&&l&&l({action:a,location:w.location,delta:0})}function v(x){let _=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof x=="string"?x:Dg(x);return C=C.replace(/ $/,"%20"),Cr(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let w={get action(){return a},get location(){return r(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(gA,f),l=x,()=>{s.removeEventListener(gA,f),l=null}},createHref(x){return e(s,x)},createURL:v,encodeLocation(x){let _=v(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(x){return o.go(x)}};return w}var vA;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(vA||(vA={}));function eU(r,e,t){return t===void 0&&(t="/"),tU(r,e,t)}function tU(r,e,t,n){let s=typeof e=="string"?nd(e):e,i=u_(s.pathname||"/",t);if(i==null)return null;let o=xR(r);rU(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let d=pU(i);a=dU(o[l],d)}return a}function xR(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Cr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let d=Ca([n,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(Cr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),xR(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:cU(d,i.index),routesMeta:u})};return r.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of bR(i.path))s(i,o,l)}),e}function bR(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=bR(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>r.startsWith("/")&&l===""?"/":l)}function rU(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:uU(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const nU=/^:[\w-]+$/,sU=3,iU=2,oU=1,aU=10,lU=-2,wA=r=>r==="*";function cU(r,e){let t=r.split("/"),n=t.length;return t.some(wA)&&(n+=lU),e&&(n+=iU),t.filter(s=>!wA(s)).reduce((s,i)=>s+(nU.test(i)?sU:i===""?oU:aU),n)}function uU(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function dU(r,e,t){let{routesMeta:n}=r,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],d=a===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=hU({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),p=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ca([i,f.pathname]),pathnameBase:vU(Ca([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Ca([i,f.pathnameBase]))}return o}function hU(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=fU(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((d,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let w=a[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?d[p]=void 0:d[p]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:r}}function fU(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),wR(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function pU(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wR(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function u_(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function mU(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?nd(r):r;return{pathname:t?t.startsWith("/")?t:gU(t,e):e,search:wU(n),hash:xU(s)}}function gU(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ow(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yU(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function d_(r,e){let t=yU(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function h_(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=nd(r):(s=Gh({},r),Cr(!s.pathname||!s.pathname.includes("?"),Ow("?","pathname","search",s)),Cr(!s.pathname||!s.pathname.includes("#"),Ow("#","pathname","hash",s)),Cr(!s.search||!s.search.includes("#"),Ow("#","search","hash",s)));let i=r===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=mU(s,a),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}const Ca=r=>r.join("/").replace(/\/\/+/g,"/"),vU=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),wU=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,xU=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function bU(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const _R=["post","put","patch","delete"];new Set(_R);const _U=["get",..._R];new Set(_U);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Yh.apply(this,arguments)}const f_=S.createContext(null),kU=S.createContext(null),Ka=S.createContext(null),J0=S.createContext(null),To=S.createContext({outlet:null,matches:[],isDataRoute:!1}),kR=S.createContext(null);function SU(r,e){let{relative:t}=e===void 0?{}:e;sd()||Cr(!1);let{basename:n,navigator:s}=S.useContext(Ka),{hash:i,pathname:o,search:a}=ER(r,{relative:t}),l=o;return n!=="/"&&(l=o==="/"?n:Ca([n,o])),s.createHref({pathname:l,search:a,hash:i})}function sd(){return S.useContext(J0)!=null}function id(){return sd()||Cr(!1),S.useContext(J0).location}function SR(r){S.useContext(Ka).static||S.useLayoutEffect(r)}function si(){let{isDataRoute:r}=S.useContext(To);return r?LU():CU()}function CU(){sd()||Cr(!1);let r=S.useContext(f_),{basename:e,future:t,navigator:n}=S.useContext(Ka),{matches:s}=S.useContext(To),{pathname:i}=id(),o=JSON.stringify(d_(s,t.v7_relativeSplatPath)),a=S.useRef(!1);return SR(()=>{a.current=!0}),S.useCallback(function(d,u){if(u===void 0&&(u={}),!a.current)return;if(typeof d=="number"){n.go(d);return}let f=h_(d,JSON.parse(o),i,u.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ca([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,o,i,r])}function CR(){let{matches:r}=S.useContext(To),e=r[r.length-1];return e?e.params:{}}function ER(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=S.useContext(Ka),{matches:s}=S.useContext(To),{pathname:i}=id(),o=JSON.stringify(d_(s,n.v7_relativeSplatPath));return S.useMemo(()=>h_(r,JSON.parse(o),i,t==="path"),[r,o,i,t])}function EU(r,e){return AU(r,e)}function AU(r,e,t,n){sd()||Cr(!1);let{navigator:s}=S.useContext(Ka),{matches:i}=S.useContext(To),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let d=id(),u;if(e){var f;let x=typeof e=="string"?nd(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||Cr(!1),u=x}else u=d;let p=u.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=eU(r,{pathname:m}),w=RU(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Ca([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ca([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,t,n);return e&&w?S.createElement(J0.Provider,{value:{location:Yh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:xa.Pop}},w):w}function TU(){let r=IU(),e=bU(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:s},t):null,null)}const NU=S.createElement(TU,null);class jU extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?S.createElement(To.Provider,{value:this.props.routeContext},S.createElement(kR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PU(r){let{routeContext:e,match:t,children:n}=r,s=S.useContext(f_);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(To.Provider,{value:e},n)}function RU(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Cr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:p,errors:m}=t,v=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,v=!1,w=null,x=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||NU,l&&(d<0&&p===0?(FU("route-fallback"),v=!0,x=null):d===p&&(v=!0,x=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),C=()=>{let A;return m?A=w:v?A=x:f.route.Component?A=S.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=u,S.createElement(PU,{match:f,routeContext:{outlet:u,matches:_,isDataRoute:t!=null},children:A})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?S.createElement(jU,{location:t.location,revalidation:t.revalidation,component:w,error:m,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var AR=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(AR||{}),TR=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(TR||{});function OU(r){let e=S.useContext(f_);return e||Cr(!1),e}function MU(r){let e=S.useContext(kU);return e||Cr(!1),e}function DU(r){let e=S.useContext(To);return e||Cr(!1),e}function NR(r){let e=DU(),t=e.matches[e.matches.length-1];return t.route.id||Cr(!1),t.route.id}function IU(){var r;let e=S.useContext(kR),t=MU(),n=NR();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function LU(){let{router:r}=OU(AR.UseNavigateStable),e=NR(TR.UseNavigateStable),t=S.useRef(!1);return SR(()=>{t.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Yh({fromRouteId:e},i)))},[r,e])}const xA={};function FU(r,e,t){xA[r]||(xA[r]=!0)}function p_(r){let{to:e,replace:t,state:n,relative:s}=r;sd()||Cr(!1);let{future:i,static:o}=S.useContext(Ka),{matches:a}=S.useContext(To),{pathname:l}=id(),d=si(),u=h_(e,d_(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(u);return S.useEffect(()=>d(JSON.parse(f),{replace:t,state:n,relative:s}),[d,f,s,t,n]),null}function ms(r){Cr(!1)}function BU(r){let{basename:e="/",children:t=null,location:n,navigationType:s=xa.Pop,navigator:i,static:o=!1,future:a}=r;sd()&&Cr(!1);let l=e.replace(/^\/*/,"/"),d=S.useMemo(()=>({basename:l,navigator:i,static:o,future:Yh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=nd(n));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:v="default"}=n,w=S.useMemo(()=>{let x=u_(u,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:v},navigationType:s}},[l,u,f,p,m,v,s]);return w==null?null:S.createElement(Ka.Provider,{value:d},S.createElement(J0.Provider,{children:t,value:w}))}function $U(r){let{children:e,location:t}=r;return EU(Qx(e),t)}new Promise(()=>{});function Qx(r,e){e===void 0&&(e=[]);let t=[];return S.Children.forEach(r,(n,s)=>{if(!S.isValidElement(n))return;let i=[...e,s];if(n.type===S.Fragment){t.push.apply(t,Qx(n.props.children,i));return}n.type!==ms&&Cr(!1),!n.props.index||!n.props.children||Cr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qx(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eb(){return eb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},eb.apply(this,arguments)}function zU(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function UU(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function VU(r,e){return r.button===0&&(!e||e==="_self")&&!UU(r)}const WU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HU="6";try{window.__reactRouterVersion=HU}catch{}const qU="startTransition",bA=Kj[qU];function KU(r){let{basename:e,children:t,future:n,window:s}=r,i=S.useRef();i.current==null&&(i.current=Zz({window:s,v5Compat:!0}));let o=i.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=S.useCallback(f=>{d&&bA?bA(()=>l(f)):l(f)},[l,d]);return S.useLayoutEffect(()=>o.listen(u),[o,u]),S.createElement(BU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:n})}const GU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jR=S.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:d,preventScrollReset:u,viewTransition:f}=e,p=zU(e,WU),{basename:m}=S.useContext(Ka),v,w=!1;if(typeof d=="string"&&YU.test(d)&&(v=d,GU))try{let A=new URL(window.location.href),T=d.startsWith("//")?new URL(A.protocol+d):new URL(d),P=u_(T.pathname,m);T.origin===A.origin&&P!=null?d=P+T.search+T.hash:w=!0}catch{}let x=SU(d,{relative:s}),_=JU(d,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:f});function C(A){n&&n(A),A.defaultPrevented||_(A)}return S.createElement("a",eb({},p,{href:v||x,onClick:w||i?n:C,ref:t,target:l}))});var _A;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(_A||(_A={}));var kA;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(kA||(kA={}));function JU(r,e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=si(),d=id(),u=ER(r,{relative:o});return S.useCallback(f=>{if(VU(f,t)){f.preventDefault();let p=n!==void 0?n:Dg(d)===Dg(u);l(r,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[d,l,u,n,s,t,r,i,o,a])}const m_=Ff("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),tt=S.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},i)=>{const o=n?Mi:"button";return g.jsx(o,{className:Ye(m_({variant:e,size:t,className:r})),ref:i,...s})});tt.displayName="Button";const It=S.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Ye("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));It.displayName="Card";const PR=S.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Ye("flex flex-col space-y-1.5 p-6",r),...e}));PR.displayName="CardHeader";const RR=S.forwardRef(({className:r,...e},t)=>g.jsx("h3",{ref:t,className:Ye("text-2xl font-semibold leading-none tracking-tight",r),...e}));RR.displayName="CardTitle";const OR=S.forwardRef(({className:r,...e},t)=>g.jsx("p",{ref:t,className:Ye("text-sm text-muted-foreground",r),...e}));OR.displayName="CardDescription";const MR=S.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Ye("p-6 pt-0",r),...e}));MR.displayName="CardContent";const DR=S.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Ye("flex items-center p-6 pt-0",r),...e}));DR.displayName="CardFooter";const ZU="modulepreload",XU=function(r){return"/"+r},SA={},Ra=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(t.map(d=>{if(d=XU(d),d in SA)return;SA[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":ZU,u||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},QU=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ra(async()=>{const{default:n}=await Promise.resolve().then(()=>od);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class g_ extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class e9 extends g_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class t9 extends g_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class r9 extends g_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tb;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(tb||(tb={}));var n9=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,e||[])).next())})};class s9{constructor(e,{headers:t={},customFetch:n,region:s=tb.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=QU(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return n9(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(v=>{throw new e9(v)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new t9(u);if(!u.ok)throw new r9(u);let p=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield u.json():p==="application/octet-stream"?m=yield u.blob():p==="text/event-stream"?m=u:p==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var Vr={},Mc={},Dc={},Ic={},Lc={},Fc={},i9=function(){if(typeof self<"u")return self;if(typeof window<"u"||typeof window<"u")return window;throw new Error("unable to locate global object")},Pu=i9();const o9=Pu.fetch,IR=Pu.fetch.bind(Pu),LR=Pu.Headers,a9=Pu.Request,l9=Pu.Response,od=Object.freeze(Object.defineProperty({__proto__:null,Headers:LR,Request:a9,Response:l9,default:IR,fetch:o9},Symbol.toStringTag,{value:"Module"})),c9=f6(od);var xm={},CA;function FR(){if(CA)return xm;CA=1,Object.defineProperty(xm,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return xm.default=r,xm}var EA;function BR(){if(EA)return Fc;EA=1;var r=Fc&&Fc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fc,"__esModule",{value:!0});const e=r(c9),t=r(FR());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,f,p;let m=null,v=null,w=null,x=d.status,_=d.statusText;if(d.ok){if(this.method!=="HEAD"){const P=await d.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=P:v=JSON.parse(P))}const A=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),T=(f=d.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");A&&T&&T.length>1&&(w=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,w=null,x=406,_="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const A=await d.text();try{m=JSON.parse(A),Array.isArray(m)&&d.status===404&&(v=[],m=null,x=200,_="OK")}catch{d.status===404&&A===""?(x=204,_="No Content"):m={message:A}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,x=200,_="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:v,count:w,status:x,statusText:_}});return this.shouldThrowOnError||(l=l.catch(d=>{var u,f,p;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(f=d==null?void 0:d.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(p=d==null?void 0:d.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return Fc.default=n,Fc}var AA;function $R(){if(AA)return Lc;AA=1;var r=Lc&&Lc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Lc,"__esModule",{value:!0});const e=r(BR());class t extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const d=l?`${l}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(d,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:d="text"}={}){var u;const f=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${p}"; options=${f};`,d==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Lc.default=t,Lc}var TA;function y_(){if(TA)return Ic;TA=1;var r=Ic&&Ic.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ic,"__esModule",{value:!0});const e=r($R());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${d}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return Ic.default=t,Ic}var NA;function zR(){if(NA)return Dc;NA=1;var r=Dc&&Dc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dc,"__esModule",{value:!0});const e=r(y_());class t{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=i,this.schema=o,this.fetch=a}select(s,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const d=(s??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const d=s.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(d.length>0){const u=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const d="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const f=s.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Dc.default=t,Dc}var eh={},th={},jA;function u9(){return jA||(jA=1,Object.defineProperty(th,"__esModule",{value:!0}),th.version=void 0,th.version="0.0.0-automated"),th}var PA;function d9(){if(PA)return eh;PA=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.DEFAULT_HEADERS=void 0;const r=u9();return eh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},eh}var RA;function h9(){if(RA)return Mc;RA=1;var r=Mc&&Mc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Mc,"__esModule",{value:!0});const e=r(zR()),t=r(y_()),n=d9();class s{constructor(o,{headers:a={},schema:l,fetch:d}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=d}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:d=!1,count:u}={}){let f;const p=new URL(`${this.url}/rpc/${o}`);let m;l||d?(f=l?"HEAD":"GET",Object.entries(a).filter(([w,x])=>x!==void 0).map(([w,x])=>[w,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([w,x])=>{p.searchParams.append(w,x)})):(f="POST",m=a);const v=Object.assign({},this.headers);return u&&(v.Prefer=`count=${u}`),new t.default({method:f,url:p,headers:v,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return Mc.default=s,Mc}var OA;function f9(){if(OA)return Vr;OA=1;var r=Vr&&Vr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.PostgrestError=Vr.PostgrestBuilder=Vr.PostgrestTransformBuilder=Vr.PostgrestFilterBuilder=Vr.PostgrestQueryBuilder=Vr.PostgrestClient=void 0;const e=r(h9());Vr.PostgrestClient=e.default;const t=r(zR());Vr.PostgrestQueryBuilder=t.default;const n=r(y_());Vr.PostgrestFilterBuilder=n.default;const s=r($R());Vr.PostgrestTransformBuilder=s.default;const i=r(BR());Vr.PostgrestBuilder=i.default;const o=r(FR());return Vr.PostgrestError=o.default,Vr.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Vr}var p9=f9();const m9=I0(p9),{PostgrestClient:g9,PostgrestQueryBuilder:Roe,PostgrestFilterBuilder:Ooe,PostgrestTransformBuilder:Moe,PostgrestBuilder:Doe,PostgrestError:Ioe}=m9,y9="2.11.2",v9={"X-Client-Info":`realtime-js/${y9}`},w9="1.0.0",UR=1e4,x9=1e3;var au;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(au||(au={}));var Xn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Xn||(Xn={}));var Vs;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Vs||(Vs={}));var rb;(function(r){r.websocket="websocket"})(rb||(rb={}));var Sl;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Sl||(Sl={}));class b9{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:d}}}class VR{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rr;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(rr||(rr={}));const MA=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=_9(o,r,e,s),i),{})},_9=(r,e,t,n)=>{const s=e.find(a=>a.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?WR(i,o):nb(o)},WR=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return E9(e,t)}switch(r){case rr.bool:return k9(e);case rr.float4:case rr.float8:case rr.int2:case rr.int4:case rr.int8:case rr.numeric:case rr.oid:return S9(e);case rr.json:case rr.jsonb:return C9(e);case rr.timestamp:return A9(e);case rr.abstime:case rr.date:case rr.daterange:case rr.int4range:case rr.int8range:case rr.money:case rr.reltime:case rr.text:case rr.time:case rr.timestamptz:case rr.timetz:case rr.tsrange:case rr.tstzrange:return nb(e);default:return nb(e)}},nb=r=>r,k9=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},S9=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},C9=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},E9=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>WR(e,a))}return r},A9=r=>typeof r=="string"?r.replace(" ","T"):r,HR=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Mw{constructor(e,t,n={},s=UR){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var DA;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(DA||(DA={}));class Ch{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ch.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ch.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ch.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(d,u)=>{o[d]||(l[d]=u)}),this.map(o,(d,u)=>{const f=i[d];if(f){const p=u.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),v=u.filter(x=>m.indexOf(x.presence_ref)<0),w=f.filter(x=>p.indexOf(x.presence_ref)<0);v.length>0&&(a[d]=v),w.length>0&&(l[d]=w)}else a[d]=u}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var d;const u=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}n(a,u,l)}),this.map(o,(a,l)=>{let d=e[a];if(!d)return;const u=l.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=d,s(a,d,l),d.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var IA;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(IA||(IA={}));var LA;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(LA||(LA={}));var co;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(co||(co={}));class v_{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Xn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Mw(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new VR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ch(this),this.broadcastEndpointURL=HR(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(co.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(co.CLOSED));const l={},d={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(co.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,v=[];for(let w=0;w<m;w++){const x=p[w],{filter:{event:_,schema:C,table:A,filter:T}}=x,P=u&&u[w];if(P&&P.event===_&&P.schema===C&&P.table===A&&P.filter===T)v.push(Object.assign(Object.assign({},x),{id:P.id}));else{this.unsubscribe(),e==null||e(co.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(co.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(co.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(co.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Mw(this,Vs.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Mw(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:d,join:u}=Vs;if(n&&[a,l,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,t,n);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,w,x;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(w=m.filter)===null||w===void 0?void 0:w.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(p,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,w,x,_,C,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const T=m.id,P=(v=m.filter)===null||v===void 0?void 0:v.event;return T&&((w=t.ids)===null||w===void 0?void 0:w.includes(T))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const T=(C=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return T==="*"||T===((A=t==null?void 0:t.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:w,table:x,commit_timestamp:_,type:C,errors:A}=v;p=Object.assign(Object.assign({},{schema:w,table:x,commit_timestamp:_,eventType:C,new:{},old:{},errors:A}),this._getPayloadRecords(v))}m.callback(p,n)})}_isClosed(){return this.state===Xn.closed}_isJoined(){return this.state===Xn.joined}_isJoining(){return this.state===Xn.joining}_isLeaving(){return this.state===Xn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&v_.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=MA(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=MA(e.columns,e.old_record)),t}}const T9=()=>{},N9=typeof WebSocket<"u",j9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class P9{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=v9,this.params={},this.timeout=UR,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=T9,this.conn=null,this.sendBuffer=[],this.serializer=new b9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Ra(async()=>{const{default:l}=await Promise.resolve().then(()=>od);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${rb.websocket}`,this.httpEndpoint=HR(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new VR(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(N9){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new R9(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ra(async()=>{const{default:e}=await import("./browser-lob7gdZ_.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:w9}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case au.connecting:return Sl.Connecting;case au.open:return Sl.Open;case au.closing:return Sl.Closing;default:return Sl.Closed}}isConnected(){return this.connectionState()===Sl.Open}channel(e,t={config:{}}){const n=new v_(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(Vs.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(x9,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([j9],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class R9{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=au.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class w_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wr(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class O9 extends w_{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sb extends w_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var M9=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,e||[])).next())})};const qR=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ra(async()=>{const{default:n}=await Promise.resolve().then(()=>od);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},D9=()=>M9(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ra(()=>Promise.resolve().then(()=>od),void 0)).Response:Response}),ib=r=>{if(Array.isArray(r))return r.map(t=>ib(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ib(n)}),e};var ec=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,e||[])).next())})};const Dw=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),I9=(r,e,t)=>ec(void 0,void 0,void 0,function*(){const n=yield D9();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{e(new O9(Dw(s),r.status||500))}).catch(s=>{e(new sb(Dw(s),s))}):e(new sb(Dw(r),r))}),L9=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),t))};function zf(r,e,t,n,s,i){return ec(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,L9(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>I9(l,a,n))})})}function Ig(r,e,t,n){return ec(this,void 0,void 0,function*(){return zf(r,"GET",e,t,n)})}function oa(r,e,t,n,s){return ec(this,void 0,void 0,function*(){return zf(r,"POST",e,n,s,t)})}function F9(r,e,t,n,s){return ec(this,void 0,void 0,function*(){return zf(r,"PUT",e,n,s,t)})}function B9(r,e,t,n){return ec(this,void 0,void 0,function*(){return zf(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function KR(r,e,t,n,s){return ec(this,void 0,void 0,function*(){return zf(r,"DELETE",e,n,s,t)})}var Dn=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,e||[])).next())})};const $9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},FA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class z9{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=qR(s)}uploadOrUpdate(e,t,n,s){return Dn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},FA),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield f.json();return f.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(Wr(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Dn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Dn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const d=Object.assign({upsert:FA.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",d.cacheControl)):(l=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),p=yield f.json();return f.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(Wr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Dn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield oa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new w_("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}update(e,t,n){return Dn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Dn(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Wr(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Dn(this,void 0,void 0,function*(){try{return{data:{path:(yield oa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Wr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Dn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield oa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Wr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Dn(this,void 0,void 0,function*(){try{const s=yield oa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Wr(s))return{data:null,error:s};throw s}})}download(e,t){return Dn(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ig(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Wr(a))return{data:null,error:a};throw a}})}info(e){return Dn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Ig(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ib(n),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}exists(e){return Dn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield B9(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Wr(n)&&n instanceof sb){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${d}`)}}}remove(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield KR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Wr(t))return{data:null,error:t};throw t}})}list(e,t,n){return Dn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},$9),t),{prefix:e||""});return{data:yield oa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Wr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const U9="2.7.1",V9={"X-Client-Info":`storage-js/${U9}`};var Bc=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,[])).next())})};class W9{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},V9),t),this.fetch=qR(n)}listBuckets(){return Bc(this,void 0,void 0,function*(){try{return{data:yield Ig(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Wr(e))return{data:null,error:e};throw e}})}getBucket(e){return Bc(this,void 0,void 0,function*(){try{return{data:yield Ig(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Wr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Bc(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Bc(this,void 0,void 0,function*(){try{return{data:yield F9(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Wr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Bc(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Wr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Bc(this,void 0,void 0,function*(){try{return{data:yield KR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Wr(t))return{data:null,error:t};throw t}})}}class H9 extends W9{constructor(e,t={},n){super(e,t,n)}from(e){return new z9(this.url,this.headers,e,this.fetch)}}const q9="2.49.8";let fh="";typeof Deno<"u"?fh="deno":typeof document<"u"?fh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fh="react-native":fh="node";const K9={"X-Client-Info":`supabase-js-${fh}/${q9}`},G9={headers:K9},Y9={schema:"public"},J9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Z9={};var X9=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,e||[])).next())})};const Q9=r=>{let e;return r?e=r:typeof fetch>"u"?e=IR:e=fetch,(...t)=>e(...t)},e7=()=>typeof Headers>"u"?LR:Headers,t7=(r,e,t)=>{const n=Q9(t),s=e7();return(i,o)=>X9(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let d=new s(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",r),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var r7=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,[])).next())})};function n7(r){return r.endsWith("/")?r:r+"/"}function s7(r,e){var t,n;const{db:s,auth:i,realtime:o,global:a}=r,{db:l,auth:d,realtime:u,global:f}=e,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>r7(this,void 0,void 0,function*(){return""})};return r.accessToken?p.accessToken=r.accessToken:delete p.accessToken,p}const GR="2.69.1",Yc=30*1e3,ob=3,Iw=ob*Yc,i7="http://localhost:9999",o7="supabase.auth.token",a7={"X-Client-Info":`gotrue-js/${GR}`},ab="X-Supabase-Api-Version",YR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,c7=6e5;class x_ extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function kt(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class u7 extends x_{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function d7(r){return kt(r)&&r.name==="AuthApiError"}class JR extends x_{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ga extends x_{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class na extends Ga{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h7(r){return kt(r)&&r.name==="AuthSessionMissingError"}class Lw extends Ga{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bm extends Ga{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _m extends Ga{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function f7(r){return kt(r)&&r.name==="AuthImplicitGrantRedirectError"}class BA extends Ga{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lb extends Ga{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Fw(r){return kt(r)&&r.name==="AuthRetryableFetchError"}class $A extends Ga{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Eh extends Ga{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),UA=` 	
\r=`.split(""),p7=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<UA.length;e+=1)r[UA[e].charCodeAt(0)]=-2;for(let e=0;e<zA.length;e+=1)r[zA[e].charCodeAt(0)]=e;return r})();function ZR(r,e,t){const n=p7[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function VA(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{y7(o,n,t)};for(let o=0;o<r.length;o+=1)ZR(r.charCodeAt(o),s,i);return e.join("")}function m7(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function g7(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}m7(n,e)}}function y7(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function v7(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<r.length;s+=1)ZR(r.charCodeAt(s),t,n);return new Uint8Array(e)}function w7(r){const e=[];return g7(r,t=>e.push(t)),new Uint8Array(e)}function x7(r){return Math.round(Date.now()/1e3)+r}function b7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const yi=()=>typeof window<"u"&&typeof document<"u",wl={tested:!1,writable:!1},Ah=()=>{if(!yi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wl.tested)return wl.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),wl.tested=!0,wl.writable=!0}catch{wl.tested=!0,wl.writable=!1}return wl.writable};function _7(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const XR=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ra(async()=>{const{default:n}=await Promise.resolve().then(()=>od);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},k7=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",QR=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},km=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Sm=async(r,e)=>{await r.removeItem(e)};class Z0{constructor(){this.promise=new Z0.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Z0.promiseConstructor=Promise;function Bw(r){const e=r.split(".");if(e.length!==3)throw new Eh("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!l7.test(e[n]))throw new Eh("JWT not in base64url format");return{header:JSON.parse(VA(e[0])),payload:JSON.parse(VA(e[1])),signature:v7(e[2]),raw:{header:e[0],payload:e[1]}}}async function S7(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function C7(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function E7(r){return("0"+r.toString(16)).substr(-2)}function A7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,E7).join("")}async function T7(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function N7(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await T7(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $c(r,e,t=!1){const n=A7();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await QR(r,`${e}-code-verifier`,s);const i=await N7(n);return[i,n===i?"plain":"s256"]}const j7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function P7(r){const e=r.headers.get(ab);if(!e||!e.match(j7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function R7(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function O7(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var M7=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const bl=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),D7=[502,503,504];async function WA(r){var e;if(!k7(r))throw new lb(bl(r),0);if(D7.includes(r.status))throw new lb(bl(r),r.status);let t;try{t=await r.json()}catch(i){throw new JR(bl(i),i)}let n;const s=P7(r);if(s&&s.getTime()>=YR["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new $A(bl(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new na}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $A(bl(t),r.status,t.weak_password.reasons);throw new u7(bl(t),r.status||500,n)}const I7=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function jt(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ab]||(i[ab]=YR["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await L7(r,e,t+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function L7(r,e,t,n,s,i){const o=I7(e,n,s,i);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new lb(bl(l),0)}if(a.ok||await WA(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await WA(l)}}function sa(r){var e;let t=null;z7(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=x7(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function HA(r){const e=sa(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ua(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function F7(r){return{data:r,error:null}}function B7(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=M7(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function $7(r){return r}function z7(r){return r.access_token&&r.refresh_token&&r.expires_in}var U7=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class V7{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=XR(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await jt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ua})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=U7(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:B7,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(kt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await jt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ua})}catch(t){if(kt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,o,a,l;try{const d={nextPage:null,lastPage:0,total:0},u=await jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:$7});if(u.error)throw u.error;const f=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);d[`${x}Page`]=w}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(kt(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await jt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ua})}catch(t){if(kt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await jt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ua})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await jt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ua})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await jt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await jt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}}}const W7={getItem:r=>Ah()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Ah()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Ah()&&globalThis.localStorage.removeItem(r)}};function qA(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function H7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zc={debug:!!(globalThis&&Ah()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eO extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class q7 extends eO{}async function K7(r,e,t){zc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),zc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){zc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{zc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw zc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new q7(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(zc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}H7();const G7={url:i7,storageKey:o7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:a7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function KA(r,e,t){return await t()}class Jh{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jh.nextInstanceID,Jh.nextInstanceID+=1,this.instanceID>0&&yi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},G7),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new V7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=XR(s.fetch),this.lock=s.lock||KA,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:yi()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=K7:this.lock=KA,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ah()?this.storage=W7:(this.memoryStorage={},this.storage=qA(this.memoryStorage)):(this.memoryStorage={},this.storage=qA(this.memoryStorage)),yi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${GR}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=_7(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),yi()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),f7(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return kt(t)?{error:t}:{error:new JR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:sa}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(kt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:u,password:f,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await $c(this.storage,this.storageKey)),i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:sa})}else if("phone"in e){const{phone:u,password:f,options:p}=e;i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:sa})}else throw new bm("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(kt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:HA})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:HA})}else throw new bm("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Lw}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(kt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await km(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:o}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:sa});if(await Sm(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Lw}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(kt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:o}=e,a=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:sa}),{data:l,error:d}=a;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Lw}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(t){if(kt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await $c(this.storage,this.storageKey));const{error:f}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:d,error:u}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new bm("You must provide either an email or phone number.")}catch(a){if(kt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:sa});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,d=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(s){if(kt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await $c(this.storage,this.storageKey)),await jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:F7})}catch(i){if(kt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new na;const{error:s}=await jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(kt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await jt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await jt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new bm("You must provide either an email or phone number and a type")}catch(t){if(kt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await km(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Iw:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ua}):await this._useSession(async t=>{var n,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new na}:await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ua})})}catch(t){if(kt(t))return h7(t)&&(await this._removeSession(),await Sm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new na;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await $c(this.storage,this.storageKey));const{data:d,error:u}=await jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ua});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(kt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new na;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:o}=Bw(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(kt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new na;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(kt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!yi())throw new _m("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _m(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new BA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _m("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new BA("No code detected.");const{data:C,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:d}=e;if(!i||!a||!o||!d)throw new _m("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let p=u+f;l&&(p=parseInt(l));const m=p-u;m*1e3<=Yc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=p-f;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,u);const{data:w,error:x}=await this._getUser(i);if(x)throw x;const _={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(n){if(kt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await km(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(d7(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Sm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=b7(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await $c(this.storage,this.storageKey,!0));try{return await jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(kt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,d,u;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await jt(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return yi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(kt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)throw o;return await jt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await C7(async s=>(s>0&&await S7(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:sa})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Fw(i)&&Date.now()+o-n<Yc})}catch(n){if(this._debug(t,"error",n),kt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),yi()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await km(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Iw;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${Iw}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Fw(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Z0;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new na;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),kt(i)){const o={session:null,error:i};return Fw(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await QR(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Sm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Yc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yc}ms, refresh threshold is ${ob} ticks`),s<=ob&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eO)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await $c(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await jt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await jt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(kt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(kt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(kt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bw(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+c7>Date.now()))return n;const{data:s,error:i}=await jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Eh("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===e),!n)throw new Eh("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Bw(n);if(R7(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=O7(s.alg),u=await this.fetchJwk(s.kid,t),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,w7(`${a}.${l}`)))throw new Eh("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(kt(n))return{data:null,error:n};throw n}}}Jh.nextInstanceID=0;const Y7=Jh;class J7 extends Y7{constructor(e){super(e)}}var Z7=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function l(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):s(u.value).then(a,l)}d((n=n.apply(r,[])).next())})};class X7{constructor(e,t,n){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=n7(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Y9,realtime:Z9,auth:Object.assign(Object.assign({},J9),{storageKey:d}),global:G9},f=s7(n??{},u);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=t7(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new g9(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new s9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new H9(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Z7(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new J7({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new P9(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tO=(r,e,t)=>new X7(r,e,t),Q7="https://imlkffbgjdtcujamsfji.supabase.co/",eV="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbGtmZmJnamR0Y3VqYW1zZmppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNzAwMDQsImV4cCI6MjA2Mzk0NjAwNH0.mzN7BemWi527jsu4rXR94bfm-Ddyff7DZNNhDv3P1zg",Nr=tO(Q7,eV);class Ya{constructor(e,t){Mr(this,"client");Mr(this,"table");this.client=e.client,this.table=t}async get(e){const{data:t,error:n}=await this.client.from(this.table).select("*").eq("id",e).single();return{data:t,error:n}}async list(e,t,n){const{page:s=1,per_page:i=10}=e||{};let o=this.client.from(this.table).select("*",{count:"exact"});n&&Object.entries(n).forEach(([f,p])=>{o=o.eq(f,p)}),t&&(o=o.order(t.field,{ascending:t.direction==="asc"}));const a=(s-1)*i;o=o.range(a,a+i-1);const{data:l,error:d,count:u}=await o;return{data:{items:l||[],total:u||0,page:s,per_page:i},error:d}}async create(e){const{data:t,error:n}=await this.client.from(this.table).insert(e).select().single();return{data:t,error:n}}async update(e,t){const{data:n,error:s}=await this.client.from(this.table).update(t).eq("id",e).select().single();return{data:n,error:s}}async delete(e){const{error:t}=await this.client.from(this.table).delete().eq("id",e);return{data:null,error:t}}}class rO extends Ya{constructor(e){super(e,"users")}async getUser(e){return await this.get(e)}async listUsers(e,t){return this.list(e,t)}async updateUser(e,t){const n=await this.update(e,t);return n.error&&console.error("[DEBUG] Supabase update error:",n.error,{id:e,data:t}),n}async getUserByName(e){const{data:t,error:n}=await this.client.from(this.table).select("*").eq("name",e).single();return{data:t,error:n}}async getCurrentUser(){var t,n;const{data:e}=await this.client.auth.getSession();return(n=(t=e==null?void 0:e.session)==null?void 0:t.user)!=null&&n.id?this.getUser(e.session.user.id):{data:null,error:new Error("No authenticated user")}}}function Cm(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $w={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var GA;function tV(){return GA||(GA=1,function(r,e){(function(t){r.exports=t()})(function(){return function t(n,s,i){function o(d,u){if(!s[d]){if(!n[d]){var f=typeof Cm=="function"&&Cm;if(!u&&f)return f(d,!0);if(a)return a(d,!0);var p=new Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p}var m=s[d]={exports:{}};n[d][0].call(m.exports,function(v){var w=n[d][1][v];return o(w||v)},m,m.exports,t,n,s,i)}return s[d].exports}for(var a=typeof Cm=="function"&&Cm,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(t,n,s){var i=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var d,u,f,p,m,v,w,x=[],_=0,C=l.length,A=C,T=i.getTypeOf(l)!=="string";_<l.length;)A=C-_,f=T?(d=l[_++],u=_<C?l[_++]:0,_<C?l[_++]:0):(d=l.charCodeAt(_++),u=_<C?l.charCodeAt(_++):0,_<C?l.charCodeAt(_++):0),p=d>>2,m=(3&d)<<4|u>>4,v=1<A?(15&u)<<2|f>>6:64,w=2<A?63&f:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(v)+a.charAt(w));return x.join("")},s.decode=function(l){var d,u,f,p,m,v,w=0,x=0,_="data:";if(l.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var C,A=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&A--,l.charAt(l.length-2)===a.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=o.uint8array?new Uint8Array(0|A):new Array(0|A);w<l.length;)d=a.indexOf(l.charAt(w++))<<2|(p=a.indexOf(l.charAt(w++)))>>4,u=(15&p)<<4|(m=a.indexOf(l.charAt(w++)))>>2,f=(3&m)<<6|(v=a.indexOf(l.charAt(w++))),C[x++]=d,m!==64&&(C[x++]=u),v!==64&&(C[x++]=f);return C}},{"./support":30,"./utils":32}],2:[function(t,n,s){var i=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function d(u,f,p,m,v){this.compressedSize=u,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=v}d.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,f,p){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,s){var i=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,s){var i=t("./utils"),o=function(){for(var a,l=[],d=0;d<256;d++){a=d;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[d]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(d,u,f,p){var m=o,v=p+f;d^=-1;for(var w=p;w<v;w++)d=d>>>8^m[255&(d^u[w])];return-1^d}(0|l,a,a.length,0):function(d,u,f,p){var m=o,v=p+f;d^=-1;for(var w=p;w<v;w++)d=d>>>8^m[255&(d^u.charCodeAt(w))];return-1^d}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,n,s){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),d=i?"uint8array":"array";function u(f,p){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}s.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(d,f.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},s.compressWorker=function(f){return new u("Deflate",f)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,s){function i(m,v){var w,x="";for(w=0;w<v;w++)x+=String.fromCharCode(255&m),m>>>=8;return x}function o(m,v,w,x,_,C){var A,T,P=m.file,O=m.compression,z=C!==d.utf8encode,M=a.transformTo("string",C(P.name)),D=a.transformTo("string",d.utf8encode(P.name)),H=P.comment,Z=a.transformTo("string",C(H)),R=a.transformTo("string",d.utf8encode(H)),U=D.length!==P.name.length,k=R.length!==H.length,W="",B="",I="",G=P.dir,V=P.date,X={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(X.crc32=m.crc32,X.compressedSize=m.compressedSize,X.uncompressedSize=m.uncompressedSize);var F=0;v&&(F|=8),z||!U&&!k||(F|=2048);var q=0,oe=0;G&&(q|=16),_==="UNIX"?(oe=798,q|=function(ee,ye){var ve=ee;return ee||(ve=ye?16893:33204),(65535&ve)<<16}(P.unixPermissions,G)):(oe=20,q|=function(ee){return 63&(ee||0)}(P.dosPermissions)),A=V.getUTCHours(),A<<=6,A|=V.getUTCMinutes(),A<<=5,A|=V.getUTCSeconds()/2,T=V.getUTCFullYear()-1980,T<<=4,T|=V.getUTCMonth()+1,T<<=5,T|=V.getUTCDate(),U&&(B=i(1,1)+i(u(M),4)+D,W+="up"+i(B.length,2)+B),k&&(I=i(1,1)+i(u(Z),4)+R,W+="uc"+i(I.length,2)+I);var re="";return re+=`
\0`,re+=i(F,2),re+=O.magic,re+=i(A,2),re+=i(T,2),re+=i(X.crc32,4),re+=i(X.compressedSize,4),re+=i(X.uncompressedSize,4),re+=i(M.length,2),re+=i(W.length,2),{fileRecord:f.LOCAL_FILE_HEADER+re+M+W,dirRecord:f.CENTRAL_FILE_HEADER+i(oe,2)+re+i(Z.length,2)+"\0\0\0\0"+i(q,4)+i(x,4)+M+W+Z}}var a=t("../utils"),l=t("../stream/GenericWorker"),d=t("../utf8"),u=t("../crc32"),f=t("../signature");function p(m,v,w,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,l),p.prototype.push=function(m){var v=m.meta.percent||0,w=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-x-1))/w:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var v=this.streamFiles&&!m.file.dir;if(v){var w=o(m,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var v=this.streamFiles&&!m.file.dir,w=o(m,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(x){return f.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-m,x=function(_,C,A,T,P){var O=a.transformTo("string",P(T));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(_,2)+i(_,2)+i(C,4)+i(A,4)+i(O.length,2)+O}(this.dirRecords.length,w,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var v=this;return m.on("data",function(w){v.processChunk(w)}),m.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),m.on("error",function(w){v.error(w)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var v=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var w=0;w<v.length;w++)try{v[w].error(m)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,v=0;v<m.length;v++)m[v].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,s){var i=t("../compressions"),o=t("./ZipFileWorker");s.generateWorker=function(a,l,d){var u=new o(l.streamFiles,d,l.platform,l.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var v=function(C,A){var T=C||A,P=i[T];if(!P)throw new Error(T+" is not a valid compression method !");return P}(m.options.compression,l.compression),w=m.options.compressionOptions||l.compressionOptions||{},x=m.dir,_=m.date;m._compressWorker(v,w).withStreamInfo("file",{name:p,dir:x,date:_,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(p){u.error(p)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,s){var i=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),d=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function f(p){return new o.Promise(function(m,v){var w=p.decompressed.getContentWorker().pipe(new d);w.on("error",function(x){v(x)}).on("end",function(){w.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(p,m){var v=this;return m=i.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(w){var x=new l(m);return x.load(w),x}).then(function(w){var x=[o.Promise.resolve(w)],_=w.files;if(m.checkCRC32)for(var C=0;C<_.length;C++)x.push(f(_[C]));return o.Promise.all(x)}).then(function(w){for(var x=w.shift(),_=x.files,C=0;C<_.length;C++){var A=_[C],T=A.fileNameStr,P=i.resolve(A.fileNameStr);v.file(P,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:m.createFolders}),A.dir||(v.file(P).unsafeOriginalName=T)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,s){var i=t("../utils"),o=t("../stream/GenericWorker");function a(l,d){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(a,o),a.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,s){var i=t("readable-stream").Readable;function o(a,l,d){i.call(this,l),this._helper=a;var u=this;a.on("data",function(f,p){u.push(f)||u._helper.pause(),d&&d(p)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}t("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,s){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,s){function i(P,O,z){var M,D=a.getTypeOf(O),H=a.extend(z||{},u);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(P=_(P)),H.createFolders&&(M=x(P))&&C.call(this,M,!0);var Z=D==="string"&&H.binary===!1&&H.base64===!1;z&&z.binary!==void 0||(H.binary=!Z),(O instanceof f&&O.uncompressedSize===0||H.dir||!O||O.length===0)&&(H.base64=!1,H.binary=!0,O="",H.compression="STORE",D="string");var R=null;R=O instanceof f||O instanceof l?O:v.isNode&&v.isStream(O)?new w(P,O):a.prepareContent(P,O,H.binary,H.optimizedBinaryString,H.base64);var U=new p(P,R,H);this.files[P]=U}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),u=t("./defaults"),f=t("./compressedObject"),p=t("./zipObject"),m=t("./generate"),v=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),x=function(P){P.slice(-1)==="/"&&(P=P.substring(0,P.length-1));var O=P.lastIndexOf("/");return 0<O?P.substring(0,O):""},_=function(P){return P.slice(-1)!=="/"&&(P+="/"),P},C=function(P,O){return O=O!==void 0?O:u.createFolders,P=_(P),this.files[P]||i.call(this,P,null,{dir:!0,createFolders:O}),this.files[P]};function A(P){return Object.prototype.toString.call(P)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var O,z,M;for(O in this.files)M=this.files[O],(z=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&P(z,M)},filter:function(P){var O=[];return this.forEach(function(z,M){P(z,M)&&O.push(M)}),O},file:function(P,O,z){if(arguments.length!==1)return P=this.root+P,i.call(this,P,O,z),this;if(A(P)){var M=P;return this.filter(function(H,Z){return!Z.dir&&M.test(H)})}var D=this.files[this.root+P];return D&&!D.dir?D:null},folder:function(P){if(!P)return this;if(A(P))return this.filter(function(D,H){return H.dir&&P.test(D)});var O=this.root+P,z=C.call(this,O),M=this.clone();return M.root=z.name,M},remove:function(P){P=this.root+P;var O=this.files[P];if(O||(P.slice(-1)!=="/"&&(P+="/"),O=this.files[P]),O&&!O.dir)delete this.files[P];else for(var z=this.filter(function(D,H){return H.name.slice(0,P.length)===P}),M=0;M<z.length;M++)delete this.files[z[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var O,z={};try{if((z=a.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");a.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var M=z.comment||this.comment||"";O=m.generateWorker(this,z,M)}catch(D){(O=new l("error")).error(D)}return new d(O,z.type||"string",z.mimeType)},generateAsync:function(P,O){return this.generateInternalStream(P).accumulate(O)},generateNodeStream:function(P,O){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(O)}};n.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,s){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,s){var i=t("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),d=a.charCodeAt(1),u=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===d&&this.data[p+2]===u&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),d=a.charCodeAt(1),u=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return l===p[0]&&d===p[1]&&u===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,s){var i=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,d=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=a,d},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,s){var i=t("./Uint8ArrayReader");function o(a){i.call(this,a)}t("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,s){var i=t("./DataReader");function o(a){i.call(this,a)}t("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,s){var i=t("./ArrayReader");function o(a){i.call(this,a)}t("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,s){var i=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),d=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");n.exports=function(f){var p=i.getTypeOf(f);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new d(f):o.uint8array?new u(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,s){var i=t("./GenericWorker"),o=t("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,s){var i=t("./GenericWorker"),o=t("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,s){var i=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,s){var i=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){d.dataIsReady=!0,d.data=u,d.max=u&&u.length||0,d.type=i.getTypeOf(u),d.isPaused||d._tickAndRepeat()},function(u){d.error(u)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=i},{}],29:[function(t,n,s){var i=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),d=t("../support"),u=t("../external"),f=null;if(d.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,w){return new u.Promise(function(x,_){var C=[],A=v._internalType,T=v._outputType,P=v._mimeType;v.on("data",function(O,z){C.push(O),w&&w(z)}).on("error",function(O){C=[],_(O)}).on("end",function(){try{var O=function(z,M,D){switch(z){case"blob":return i.newBlob(i.transformTo("arraybuffer",M),D);case"base64":return l.encode(M);default:return i.transformTo(z,M)}}(T,function(z,M){var D,H=0,Z=null,R=0;for(D=0;D<M.length;D++)R+=M[D].length;switch(z){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(Z=new Uint8Array(R),D=0;D<M.length;D++)Z.set(M[D],H),H+=M[D].length;return Z;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+z+"'")}}(A,C),P);x(O)}catch(z){_(z)}C=[]}).resume()})}function m(v,w,x){var _=w;switch(w){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=w,this._mimeType=x,i.checkSupport(_),this._worker=v.pipe(new o(_)),v.lock()}catch(C){this._worker=new a("error"),this._worker.error(C)}}m.prototype={accumulate:function(v){return p(this,v)},on:function(v,w){var x=this;return v==="data"?this._worker.on(v,function(_){w.call(x,_.data,_.meta)}):this._worker.on(v,function(){i.delay(w,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,s){for(var i=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;d[254]=d[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}s.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(v){var w,x,_,C,A,T=v.length,P=0;for(C=0;C<T;C++)(64512&(x=v.charCodeAt(C)))==55296&&C+1<T&&(64512&(_=v.charCodeAt(C+1)))==56320&&(x=65536+(x-55296<<10)+(_-56320),C++),P+=x<128?1:x<2048?2:x<65536?3:4;for(w=o.uint8array?new Uint8Array(P):new Array(P),C=A=0;A<P;C++)(64512&(x=v.charCodeAt(C)))==55296&&C+1<T&&(64512&(_=v.charCodeAt(C+1)))==56320&&(x=65536+(x-55296<<10)+(_-56320),C++),x<128?w[A++]=x:(x<2048?w[A++]=192|x>>>6:(x<65536?w[A++]=224|x>>>12:(w[A++]=240|x>>>18,w[A++]=128|x>>>12&63),w[A++]=128|x>>>6&63),w[A++]=128|63&x);return w}(m)},s.utf8decode=function(m){return o.nodebuffer?i.transformTo("nodebuffer",m).toString("utf-8"):function(v){var w,x,_,C,A=v.length,T=new Array(2*A);for(w=x=0;w<A;)if((_=v[w++])<128)T[x++]=_;else if(4<(C=d[_]))T[x++]=65533,w+=C-1;else{for(_&=C===2?31:C===3?15:7;1<C&&w<A;)_=_<<6|63&v[w++],C--;1<C?T[x++]=65533:_<65536?T[x++]=_:(_-=65536,T[x++]=55296|_>>10&1023,T[x++]=56320|1023&_)}return T.length!==x&&(T.subarray?T=T.subarray(0,x):T.length=x),i.applyFromCharCode(T)}(m=i.transformTo(o.uint8array?"uint8array":"array",m))},i.inherits(f,l),f.prototype.processChunk=function(m){var v=i.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(C,A){var T;for((A=A||C.length)>C.length&&(A=C.length),T=A-1;0<=T&&(192&C[T])==128;)T--;return T<0||T===0?A:T+d[C[T]]>A?T:A}(v),_=v;x!==v.length&&(o.uint8array?(_=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(_=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:s.utf8decode(_),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(p,l),p.prototype.processChunk=function(m){this.push({data:s.utf8encode(m.data),meta:m.meta})},s.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,s){var i=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function d(w){return w}function u(w,x){for(var _=0;_<w.length;++_)x[_]=255&w.charCodeAt(_);return x}t("setimmediate"),s.newBlob=function(w,x){s.checkSupport("blob");try{return new Blob([w],{type:x})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(w),_.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(w,x,_){var C=[],A=0,T=w.length;if(T<=_)return String.fromCharCode.apply(null,w);for(;A<T;)x==="array"||x==="nodebuffer"?C.push(String.fromCharCode.apply(null,w.slice(A,Math.min(A+_,T)))):C.push(String.fromCharCode.apply(null,w.subarray(A,Math.min(A+_,T)))),A+=_;return C.join("")},stringifyByChar:function(w){for(var x="",_=0;_<w.length;_++)x+=String.fromCharCode(w[_]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(w){var x=65536,_=s.getTypeOf(w),C=!0;if(_==="uint8array"?C=f.applyCanBeUsed.uint8array:_==="nodebuffer"&&(C=f.applyCanBeUsed.nodebuffer),C)for(;1<x;)try{return f.stringifyByChunk(w,_,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(w)}function m(w,x){for(var _=0;_<w.length;_++)x[_]=w[_];return x}s.applyFromCharCode=p;var v={};v.string={string:d,array:function(w){return u(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return u(w,new Uint8Array(w.length))},nodebuffer:function(w){return u(w,a.allocBuffer(w.length))}},v.array={string:p,array:d,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return a.newBufferFrom(w)}},v.arraybuffer={string:function(w){return p(new Uint8Array(w))},array:function(w){return m(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:d,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return a.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:p,array:function(w){return m(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:d,nodebuffer:function(w){return a.newBufferFrom(w)}},v.nodebuffer={string:p,array:function(w){return m(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return m(w,new Uint8Array(w.length))},nodebuffer:d},s.transformTo=function(w,x){if(x=x||"",!w)return x;s.checkSupport(w);var _=s.getTypeOf(x);return v[_][w](x)},s.resolve=function(w){for(var x=w.split("/"),_=[],C=0;C<x.length;C++){var A=x[C];A==="."||A===""&&C!==0&&C!==x.length-1||(A===".."?_.pop():_.push(A))}return _.join("/")},s.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(w)?"nodebuffer":i.uint8array&&w instanceof Uint8Array?"uint8array":i.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(w){if(!i[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(w){var x,_,C="";for(_=0;_<(w||"").length;_++)C+="\\x"+((x=w.charCodeAt(_))<16?"0":"")+x.toString(16).toUpperCase();return C},s.delay=function(w,x,_){setImmediate(function(){w.apply(_||null,x||[])})},s.inherits=function(w,x){function _(){}_.prototype=x.prototype,w.prototype=new _},s.extend=function(){var w,x,_={};for(w=0;w<arguments.length;w++)for(x in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],x)&&_[x]===void 0&&(_[x]=arguments[w][x]);return _},s.prepareContent=function(w,x,_,C,A){return l.Promise.resolve(x).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new l.Promise(function(P,O){var z=new FileReader;z.onload=function(M){P(M.target.result)},z.onerror=function(M){O(M.target.error)},z.readAsArrayBuffer(T)}):T}).then(function(T){var P=s.getTypeOf(T);return P?(P==="arraybuffer"?T=s.transformTo("uint8array",T):P==="string"&&(A?T=o.decode(T):_&&C!==!0&&(T=function(O){return u(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(T))),T):l.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,s){var i=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),d=t("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===p;return this.reader.setIndex(m),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=d.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var v=p-m;if(0<v)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,s){var i=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),d=t("./utf8"),u=t("./compressions"),f=t("./support");function p(m,v){this.options=m,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var v,w;if(m.skip(22),this.fileNameLength=m.readInt(2),w=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var _ in u)if(Object.prototype.hasOwnProperty.call(u,_)&&u[_].magic===x)return u[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var v=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(v),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var v,w,x,_=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<_;)v=m.readInt(2),w=m.readInt(2),x=m.readData(w),this.extraFields[v]={id:v,length:w,value:x};m.setIndex(_)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var _=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var v=i(m.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:d.utf8decode(v.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var v=i(m.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:d.utf8decode(v.readData(m.length-5))}return null}},n.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,s){function i(v,w,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=w,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),d=t("./compressedObject"),u=t("./stream/GenericWorker");i.prototype={internalStream:function(v){var w=null,x="string";try{if(!v)throw new Error("No output type specified.");var _=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),w=this._decompressWorker();var C=!this._dataBinary;C&&!_&&(w=w.pipe(new l.Utf8EncodeWorker)),!C&&_&&(w=w.pipe(new l.Utf8DecodeWorker))}catch(A){(w=new u("error")).error(A)}return new o(w,x,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof d&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(x,v,w)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)i.prototype[f[m]]=p;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var d=0,u=new l(v),f=i.document.createTextNode("");u.observe(f,{characterData:!0}),o=function(){f.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var w=i.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var m=[];function v(){var w,x;a=!0;for(var _=m.length;_;){for(x=m,m=[],w=-1;++w<_;)x[w]();_=m.length}a=!1}n.exports=function(w){m.push(w)!==1||a||o()}}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,s){var i=t("immediate");function o(){}var a={},l=["REJECTED"],d=["FULFILLED"],u=["PENDING"];function f(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,_!==o&&w(this,_)}function p(_,C,A){this.promise=_,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function m(_,C,A){i(function(){var T;try{T=C(A)}catch(P){return a.reject(_,P)}T===_?a.reject(_,new TypeError("Cannot resolve promise with itself")):a.resolve(_,T)})}function v(_){var C=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof C=="function")return function(){C.apply(_,arguments)}}function w(_,C){var A=!1;function T(z){A||(A=!0,a.reject(_,z))}function P(z){A||(A=!0,a.resolve(_,z))}var O=x(function(){C(P,T)});O.status==="error"&&T(O.value)}function x(_,C){var A={};try{A.value=_(C),A.status="success"}catch(T){A.status="error",A.value=T}return A}(n.exports=f).prototype.finally=function(_){if(typeof _!="function")return this;var C=this.constructor;return this.then(function(A){return C.resolve(_()).then(function(){return A})},function(A){return C.resolve(_()).then(function(){throw A})})},f.prototype.catch=function(_){return this.then(null,_)},f.prototype.then=function(_,C){if(typeof _!="function"&&this.state===d||typeof C!="function"&&this.state===l)return this;var A=new this.constructor(o);return this.state!==u?m(A,this.state===d?_:C,this.outcome):this.queue.push(new p(A,_,C)),A},p.prototype.callFulfilled=function(_){a.resolve(this.promise,_)},p.prototype.otherCallFulfilled=function(_){m(this.promise,this.onFulfilled,_)},p.prototype.callRejected=function(_){a.reject(this.promise,_)},p.prototype.otherCallRejected=function(_){m(this.promise,this.onRejected,_)},a.resolve=function(_,C){var A=x(v,C);if(A.status==="error")return a.reject(_,A.value);var T=A.value;if(T)w(_,T);else{_.state=d,_.outcome=C;for(var P=-1,O=_.queue.length;++P<O;)_.queue[P].callFulfilled(C)}return _},a.reject=function(_,C){_.state=l,_.outcome=C;for(var A=-1,T=_.queue.length;++A<T;)_.queue[A].callRejected(C);return _},f.resolve=function(_){return _ instanceof this?_:a.resolve(new this(o),_)},f.reject=function(_){var C=new this(o);return a.reject(C,_)},f.all=function(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=_.length,T=!1;if(!A)return this.resolve([]);for(var P=new Array(A),O=0,z=-1,M=new this(o);++z<A;)D(_[z],z);return M;function D(H,Z){C.resolve(H).then(function(R){P[Z]=R,++O!==A||T||(T=!0,a.resolve(M,P))},function(R){T||(T=!0,a.reject(M,R))})}},f.race=function(_){var C=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=_.length,T=!1;if(!A)return this.resolve([]);for(var P=-1,O=new this(o);++P<A;)z=_[P],C.resolve(z).then(function(M){T||(T=!0,a.resolve(O,M))},function(M){T||(T=!0,a.reject(O,M))});var z;return O}},{immediate:36}],38:[function(t,n,s){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,s){var i=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),d=t("./zlib/zstream"),u=Object.prototype.toString,f=0,p=-1,m=0,v=8;function w(_){if(!(this instanceof w))return new w(_);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=i.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(A!==f)throw new Error(l[A]);if(C.header&&i.deflateSetHeader(this.strm,C.header),C.dictionary){var T;if(T=typeof C.dictionary=="string"?a.string2buf(C.dictionary):u.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(A=i.deflateSetDictionary(this.strm,T))!==f)throw new Error(l[A]);this._dict_set=!0}}function x(_,C){var A=new w(C);if(A.push(_,!0),A.err)throw A.msg||l[A.err];return A.result}w.prototype.push=function(_,C){var A,T,P=this.strm,O=this.options.chunkSize;if(this.ended)return!1;T=C===~~C?C:C===!0?4:0,typeof _=="string"?P.input=a.string2buf(_):u.call(_)==="[object ArrayBuffer]"?P.input=new Uint8Array(_):P.input=_,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new o.Buf8(O),P.next_out=0,P.avail_out=O),(A=i.deflate(P,T))!==1&&A!==f)return this.onEnd(A),!(this.ended=!0);P.avail_out!==0&&(P.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(P.output,P.next_out))):this.onData(o.shrinkBuf(P.output,P.next_out)))}while((0<P.avail_in||P.avail_out===0)&&A!==1);return T===4?(A=i.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===f):T!==2||(this.onEnd(f),!(P.avail_out=0))},w.prototype.onData=function(_){this.chunks.push(_)},w.prototype.onEnd=function(_){_===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},s.Deflate=w,s.deflate=x,s.deflateRaw=function(_,C){return(C=C||{}).raw=!0,x(_,C)},s.gzip=function(_,C){return(C=C||{}).gzip=!0,x(_,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,s){var i=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),d=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),p=Object.prototype.toString;function m(w){if(!(this instanceof m))return new m(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||w&&w.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=i.inflateInit2(this.strm,x.windowBits);if(_!==l.Z_OK)throw new Error(d[_]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function v(w,x){var _=new m(x);if(_.push(w,!0),_.err)throw _.msg||d[_.err];return _.result}m.prototype.push=function(w,x){var _,C,A,T,P,O,z=this.strm,M=this.options.chunkSize,D=this.options.dictionary,H=!1;if(this.ended)return!1;C=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof w=="string"?z.input=a.binstring2buf(w):p.call(w)==="[object ArrayBuffer]"?z.input=new Uint8Array(w):z.input=w,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(M),z.next_out=0,z.avail_out=M),(_=i.inflate(z,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&D&&(O=typeof D=="string"?a.string2buf(D):p.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,_=i.inflateSetDictionary(this.strm,O)),_===l.Z_BUF_ERROR&&H===!0&&(_=l.Z_OK,H=!1),_!==l.Z_STREAM_END&&_!==l.Z_OK)return this.onEnd(_),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&_!==l.Z_STREAM_END&&(z.avail_in!==0||C!==l.Z_FINISH&&C!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=a.utf8border(z.output,z.next_out),T=z.next_out-A,P=a.buf2string(z.output,A),z.next_out=T,z.avail_out=M-T,T&&o.arraySet(z.output,z.output,A,T,0),this.onData(P)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(H=!0)}while((0<z.avail_in||z.avail_out===0)&&_!==l.Z_STREAM_END);return _===l.Z_STREAM_END&&(C=l.Z_FINISH),C===l.Z_FINISH?(_=i.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===l.Z_OK):C!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(z.avail_out=0))},m.prototype.onData=function(w){this.chunks.push(w)},m.prototype.onEnd=function(w){w===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},s.Inflate=m,s.inflate=v,s.inflateRaw=function(w,x){return(x=x||{}).raw=!0,v(w,x)},s.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(l[f]=u[f])}}return l},s.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var o={arraySet:function(l,d,u,f,p){if(d.subarray&&l.subarray)l.set(d.subarray(u,u+f),p);else for(var m=0;m<f;m++)l[p+m]=d[u+m]},flattenChunks:function(l){var d,u,f,p,m,v;for(d=f=0,u=l.length;d<u;d++)f+=l[d].length;for(v=new Uint8Array(f),d=p=0,u=l.length;d<u;d++)m=l[d],v.set(m,p),p+=m.length;return v}},a={arraySet:function(l,d,u,f,p){for(var m=0;m<f;m++)l[p+m]=d[u+m]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(t,n,s){var i=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function u(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,p));for(var m="",v=0;v<p;v++)m+=String.fromCharCode(f[v]);return m}l[254]=l[254]=1,s.string2buf=function(f){var p,m,v,w,x,_=f.length,C=0;for(w=0;w<_;w++)(64512&(m=f.charCodeAt(w)))==55296&&w+1<_&&(64512&(v=f.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),w++),C+=m<128?1:m<2048?2:m<65536?3:4;for(p=new i.Buf8(C),w=x=0;x<C;w++)(64512&(m=f.charCodeAt(w)))==55296&&w+1<_&&(64512&(v=f.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),w++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},s.buf2binstring=function(f){return u(f,f.length)},s.binstring2buf=function(f){for(var p=new i.Buf8(f.length),m=0,v=p.length;m<v;m++)p[m]=f.charCodeAt(m);return p},s.buf2string=function(f,p){var m,v,w,x,_=p||f.length,C=new Array(2*_);for(m=v=0;m<_;)if((w=f[m++])<128)C[v++]=w;else if(4<(x=l[w]))C[v++]=65533,m+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&m<_;)w=w<<6|63&f[m++],x--;1<x?C[v++]=65533:w<65536?C[v++]=w:(w-=65536,C[v++]=55296|w>>10&1023,C[v++]=56320|1023&w)}return u(C,v)},s.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+l[f[m]]>p?m:p}},{"./common":41}],43:[function(t,n,s){n.exports=function(i,o,a,l){for(var d=65535&i|0,u=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;u=u+(d=d+o[l++]|0)|0,--f;);d%=65521,u%=65521}return d|u<<16|0}},{}],44:[function(t,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();n.exports=function(o,a,l,d){var u=i,f=d+l;o^=-1;for(var p=d;p<f;p++)o=o>>>8^u[255&(o^a[p])];return-1^o}},{}],46:[function(t,n,s){var i,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),d=t("./crc32"),u=t("./messages"),f=0,p=4,m=0,v=-2,w=-1,x=4,_=2,C=8,A=9,T=286,P=30,O=19,z=2*T+1,M=15,D=3,H=258,Z=H+D+1,R=42,U=113,k=1,W=2,B=3,I=4;function G($,me){return $.msg=u[me],me}function V($){return($<<1)-(4<$?9:0)}function X($){for(var me=$.length;0<=--me;)$[me]=0}function F($){var me=$.state,te=me.pending;te>$.avail_out&&(te=$.avail_out),te!==0&&(o.arraySet($.output,me.pending_buf,me.pending_out,te,$.next_out),$.next_out+=te,me.pending_out+=te,$.total_out+=te,$.avail_out-=te,me.pending-=te,me.pending===0&&(me.pending_out=0))}function q($,me){a._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,me),$.block_start=$.strstart,F($.strm)}function oe($,me){$.pending_buf[$.pending++]=me}function re($,me){$.pending_buf[$.pending++]=me>>>8&255,$.pending_buf[$.pending++]=255&me}function ee($,me){var te,Y,N=$.max_chain_length,L=$.strstart,J=$.prev_length,ne=$.nice_match,Q=$.strstart>$.w_size-Z?$.strstart-($.w_size-Z):0,ie=$.window,le=$.w_mask,de=$.prev,ke=$.strstart+H,Te=ie[L+J-1],De=ie[L+J];$.prev_length>=$.good_match&&(N>>=2),ne>$.lookahead&&(ne=$.lookahead);do if(ie[(te=me)+J]===De&&ie[te+J-1]===Te&&ie[te]===ie[L]&&ie[++te]===ie[L+1]){L+=2,te++;do;while(ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&ie[++L]===ie[++te]&&L<ke);if(Y=H-(ke-L),L=ke-H,J<Y){if($.match_start=me,ne<=(J=Y))break;Te=ie[L+J-1],De=ie[L+J]}}while((me=de[me&le])>Q&&--N!=0);return J<=$.lookahead?J:$.lookahead}function ye($){var me,te,Y,N,L,J,ne,Q,ie,le,de=$.w_size;do{if(N=$.window_size-$.lookahead-$.strstart,$.strstart>=de+(de-Z)){for(o.arraySet($.window,$.window,de,de,0),$.match_start-=de,$.strstart-=de,$.block_start-=de,me=te=$.hash_size;Y=$.head[--me],$.head[me]=de<=Y?Y-de:0,--te;);for(me=te=de;Y=$.prev[--me],$.prev[me]=de<=Y?Y-de:0,--te;);N+=de}if($.strm.avail_in===0)break;if(J=$.strm,ne=$.window,Q=$.strstart+$.lookahead,ie=N,le=void 0,le=J.avail_in,ie<le&&(le=ie),te=le===0?0:(J.avail_in-=le,o.arraySet(ne,J.input,J.next_in,le,Q),J.state.wrap===1?J.adler=l(J.adler,ne,le,Q):J.state.wrap===2&&(J.adler=d(J.adler,ne,le,Q)),J.next_in+=le,J.total_in+=le,le),$.lookahead+=te,$.lookahead+$.insert>=D)for(L=$.strstart-$.insert,$.ins_h=$.window[L],$.ins_h=($.ins_h<<$.hash_shift^$.window[L+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[L+D-1])&$.hash_mask,$.prev[L&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=L,L++,$.insert--,!($.lookahead+$.insert<D)););}while($.lookahead<Z&&$.strm.avail_in!==0)}function ve($,me){for(var te,Y;;){if($.lookahead<Z){if(ye($),$.lookahead<Z&&me===f)return k;if($.lookahead===0)break}if(te=0,$.lookahead>=D&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+D-1])&$.hash_mask,te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),te!==0&&$.strstart-te<=$.w_size-Z&&($.match_length=ee($,te)),$.match_length>=D)if(Y=a._tr_tally($,$.strstart-$.match_start,$.match_length-D),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=D){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+D-1])&$.hash_mask,te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else Y=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(Y&&(q($,!1),$.strm.avail_out===0))return k}return $.insert=$.strstart<D-1?$.strstart:D-1,me===p?(q($,!0),$.strm.avail_out===0?B:I):$.last_lit&&(q($,!1),$.strm.avail_out===0)?k:W}function he($,me){for(var te,Y,N;;){if($.lookahead<Z){if(ye($),$.lookahead<Z&&me===f)return k;if($.lookahead===0)break}if(te=0,$.lookahead>=D&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+D-1])&$.hash_mask,te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=D-1,te!==0&&$.prev_length<$.max_lazy_match&&$.strstart-te<=$.w_size-Z&&($.match_length=ee($,te),$.match_length<=5&&($.strategy===1||$.match_length===D&&4096<$.strstart-$.match_start)&&($.match_length=D-1)),$.prev_length>=D&&$.match_length<=$.prev_length){for(N=$.strstart+$.lookahead-D,Y=a._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-D),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=N&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+D-1])&$.hash_mask,te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=D-1,$.strstart++,Y&&(q($,!1),$.strm.avail_out===0))return k}else if($.match_available){if((Y=a._tr_tally($,0,$.window[$.strstart-1]))&&q($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return k}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(Y=a._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<D-1?$.strstart:D-1,me===p?(q($,!0),$.strm.avail_out===0?B:I):$.last_lit&&(q($,!1),$.strm.avail_out===0)?k:W}function xe($,me,te,Y,N){this.good_length=$,this.max_lazy=me,this.nice_length=te,this.max_chain=Y,this.func=N}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*P+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(M+1),this.heap=new o.Buf16(2*T+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*T+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue($){var me;return $&&$.state?($.total_in=$.total_out=0,$.data_type=_,(me=$.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?R:U,$.adler=me.wrap===2?0:1,me.last_flush=f,a._tr_init(me),m):G($,v)}function _e($){var me=ue($);return me===m&&function(te){te.window_size=2*te.w_size,X(te.head),te.max_lazy_match=i[te.level].max_lazy,te.good_match=i[te.level].good_length,te.nice_match=i[te.level].nice_length,te.max_chain_length=i[te.level].max_chain,te.strstart=0,te.block_start=0,te.lookahead=0,te.insert=0,te.match_length=te.prev_length=D-1,te.match_available=0,te.ins_h=0}($.state),me}function Ie($,me,te,Y,N,L){if(!$)return v;var J=1;if(me===w&&(me=6),Y<0?(J=0,Y=-Y):15<Y&&(J=2,Y-=16),N<1||A<N||te!==C||Y<8||15<Y||me<0||9<me||L<0||x<L)return G($,v);Y===8&&(Y=9);var ne=new Ce;return($.state=ne).strm=$,ne.wrap=J,ne.gzhead=null,ne.w_bits=Y,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=N+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+D-1)/D),ne.window=new o.Buf8(2*ne.w_size),ne.head=new o.Buf16(ne.hash_size),ne.prev=new o.Buf16(ne.w_size),ne.lit_bufsize=1<<N+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new o.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=me,ne.strategy=L,ne.method=te,_e($)}i=[new xe(0,0,0,0,function($,me){var te=65535;for(te>$.pending_buf_size-5&&(te=$.pending_buf_size-5);;){if($.lookahead<=1){if(ye($),$.lookahead===0&&me===f)return k;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var Y=$.block_start+te;if(($.strstart===0||$.strstart>=Y)&&($.lookahead=$.strstart-Y,$.strstart=Y,q($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-Z&&(q($,!1),$.strm.avail_out===0))return k}return $.insert=0,me===p?(q($,!0),$.strm.avail_out===0?B:I):($.strstart>$.block_start&&(q($,!1),$.strm.avail_out),k)}),new xe(4,4,8,4,ve),new xe(4,5,16,8,ve),new xe(4,6,32,32,ve),new xe(4,4,16,16,he),new xe(8,16,32,32,he),new xe(8,16,128,128,he),new xe(8,32,128,256,he),new xe(32,128,258,1024,he),new xe(32,258,258,4096,he)],s.deflateInit=function($,me){return Ie($,me,C,15,8,0)},s.deflateInit2=Ie,s.deflateReset=_e,s.deflateResetKeep=ue,s.deflateSetHeader=function($,me){return $&&$.state?$.state.wrap!==2?v:($.state.gzhead=me,m):v},s.deflate=function($,me){var te,Y,N,L;if(!$||!$.state||5<me||me<0)return $?G($,v):v;if(Y=$.state,!$.output||!$.input&&$.avail_in!==0||Y.status===666&&me!==p)return G($,$.avail_out===0?-5:v);if(Y.strm=$,te=Y.last_flush,Y.last_flush=me,Y.status===R)if(Y.wrap===2)$.adler=0,oe(Y,31),oe(Y,139),oe(Y,8),Y.gzhead?(oe(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),oe(Y,255&Y.gzhead.time),oe(Y,Y.gzhead.time>>8&255),oe(Y,Y.gzhead.time>>16&255),oe(Y,Y.gzhead.time>>24&255),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(oe(Y,255&Y.gzhead.extra.length),oe(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&($.adler=d($.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,0),oe(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),oe(Y,3),Y.status=U);else{var J=C+(Y.w_bits-8<<4)<<8;J|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(J|=32),J+=31-J%31,Y.status=U,re(Y,J),Y.strstart!==0&&(re(Y,$.adler>>>16),re(Y,65535&$.adler)),$.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(N=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>N&&($.adler=d($.adler,Y.pending_buf,Y.pending-N,N)),F($),N=Y.pending,Y.pending!==Y.pending_buf_size));)oe(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>N&&($.adler=d($.adler,Y.pending_buf,Y.pending-N,N)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){N=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>N&&($.adler=d($.adler,Y.pending_buf,Y.pending-N,N)),F($),N=Y.pending,Y.pending===Y.pending_buf_size)){L=1;break}L=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,oe(Y,L)}while(L!==0);Y.gzhead.hcrc&&Y.pending>N&&($.adler=d($.adler,Y.pending_buf,Y.pending-N,N)),L===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){N=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>N&&($.adler=d($.adler,Y.pending_buf,Y.pending-N,N)),F($),N=Y.pending,Y.pending===Y.pending_buf_size)){L=1;break}L=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,oe(Y,L)}while(L!==0);Y.gzhead.hcrc&&Y.pending>N&&($.adler=d($.adler,Y.pending_buf,Y.pending-N,N)),L===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&F($),Y.pending+2<=Y.pending_buf_size&&(oe(Y,255&$.adler),oe(Y,$.adler>>8&255),$.adler=0,Y.status=U)):Y.status=U),Y.pending!==0){if(F($),$.avail_out===0)return Y.last_flush=-1,m}else if($.avail_in===0&&V(me)<=V(te)&&me!==p)return G($,-5);if(Y.status===666&&$.avail_in!==0)return G($,-5);if($.avail_in!==0||Y.lookahead!==0||me!==f&&Y.status!==666){var ne=Y.strategy===2?function(Q,ie){for(var le;;){if(Q.lookahead===0&&(ye(Q),Q.lookahead===0)){if(ie===f)return k;break}if(Q.match_length=0,le=a._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++,le&&(q(Q,!1),Q.strm.avail_out===0))return k}return Q.insert=0,ie===p?(q(Q,!0),Q.strm.avail_out===0?B:I):Q.last_lit&&(q(Q,!1),Q.strm.avail_out===0)?k:W}(Y,me):Y.strategy===3?function(Q,ie){for(var le,de,ke,Te,De=Q.window;;){if(Q.lookahead<=H){if(ye(Q),Q.lookahead<=H&&ie===f)return k;if(Q.lookahead===0)break}if(Q.match_length=0,Q.lookahead>=D&&0<Q.strstart&&(de=De[ke=Q.strstart-1])===De[++ke]&&de===De[++ke]&&de===De[++ke]){Te=Q.strstart+H;do;while(de===De[++ke]&&de===De[++ke]&&de===De[++ke]&&de===De[++ke]&&de===De[++ke]&&de===De[++ke]&&de===De[++ke]&&de===De[++ke]&&ke<Te);Q.match_length=H-(Te-ke),Q.match_length>Q.lookahead&&(Q.match_length=Q.lookahead)}if(Q.match_length>=D?(le=a._tr_tally(Q,1,Q.match_length-D),Q.lookahead-=Q.match_length,Q.strstart+=Q.match_length,Q.match_length=0):(le=a._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++),le&&(q(Q,!1),Q.strm.avail_out===0))return k}return Q.insert=0,ie===p?(q(Q,!0),Q.strm.avail_out===0?B:I):Q.last_lit&&(q(Q,!1),Q.strm.avail_out===0)?k:W}(Y,me):i[Y.level].func(Y,me);if(ne!==B&&ne!==I||(Y.status=666),ne===k||ne===B)return $.avail_out===0&&(Y.last_flush=-1),m;if(ne===W&&(me===1?a._tr_align(Y):me!==5&&(a._tr_stored_block(Y,0,0,!1),me===3&&(X(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),F($),$.avail_out===0))return Y.last_flush=-1,m}return me!==p?m:Y.wrap<=0?1:(Y.wrap===2?(oe(Y,255&$.adler),oe(Y,$.adler>>8&255),oe(Y,$.adler>>16&255),oe(Y,$.adler>>24&255),oe(Y,255&$.total_in),oe(Y,$.total_in>>8&255),oe(Y,$.total_in>>16&255),oe(Y,$.total_in>>24&255)):(re(Y,$.adler>>>16),re(Y,65535&$.adler)),F($),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?m:1)},s.deflateEnd=function($){var me;return $&&$.state?(me=$.state.status)!==R&&me!==69&&me!==73&&me!==91&&me!==103&&me!==U&&me!==666?G($,v):($.state=null,me===U?G($,-3):m):v},s.deflateSetDictionary=function($,me){var te,Y,N,L,J,ne,Q,ie,le=me.length;if(!$||!$.state||(L=(te=$.state).wrap)===2||L===1&&te.status!==R||te.lookahead)return v;for(L===1&&($.adler=l($.adler,me,le,0)),te.wrap=0,le>=te.w_size&&(L===0&&(X(te.head),te.strstart=0,te.block_start=0,te.insert=0),ie=new o.Buf8(te.w_size),o.arraySet(ie,me,le-te.w_size,te.w_size,0),me=ie,le=te.w_size),J=$.avail_in,ne=$.next_in,Q=$.input,$.avail_in=le,$.next_in=0,$.input=me,ye(te);te.lookahead>=D;){for(Y=te.strstart,N=te.lookahead-(D-1);te.ins_h=(te.ins_h<<te.hash_shift^te.window[Y+D-1])&te.hash_mask,te.prev[Y&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=Y,Y++,--N;);te.strstart=Y,te.lookahead=D-1,ye(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=D-1,te.match_available=0,$.next_in=ne,$.input=Q,$.avail_in=J,te.wrap=L,m},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,s){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,s){n.exports=function(i,o){var a,l,d,u,f,p,m,v,w,x,_,C,A,T,P,O,z,M,D,H,Z,R,U,k,W;a=i.state,l=i.next_in,k=i.input,d=l+(i.avail_in-5),u=i.next_out,W=i.output,f=u-(o-i.avail_out),p=u+(i.avail_out-257),m=a.dmax,v=a.wsize,w=a.whave,x=a.wnext,_=a.window,C=a.hold,A=a.bits,T=a.lencode,P=a.distcode,O=(1<<a.lenbits)-1,z=(1<<a.distbits)-1;e:do{A<15&&(C+=k[l++]<<A,A+=8,C+=k[l++]<<A,A+=8),M=T[C&O];t:for(;;){if(C>>>=D=M>>>24,A-=D,(D=M>>>16&255)===0)W[u++]=65535&M;else{if(!(16&D)){if((64&D)==0){M=T[(65535&M)+(C&(1<<D)-1)];continue t}if(32&D){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}H=65535&M,(D&=15)&&(A<D&&(C+=k[l++]<<A,A+=8),H+=C&(1<<D)-1,C>>>=D,A-=D),A<15&&(C+=k[l++]<<A,A+=8,C+=k[l++]<<A,A+=8),M=P[C&z];r:for(;;){if(C>>>=D=M>>>24,A-=D,!(16&(D=M>>>16&255))){if((64&D)==0){M=P[(65535&M)+(C&(1<<D)-1)];continue r}i.msg="invalid distance code",a.mode=30;break e}if(Z=65535&M,A<(D&=15)&&(C+=k[l++]<<A,(A+=8)<D&&(C+=k[l++]<<A,A+=8)),m<(Z+=C&(1<<D)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(C>>>=D,A-=D,(D=u-f)<Z){if(w<(D=Z-D)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(U=_,(R=0)===x){if(R+=v-D,D<H){for(H-=D;W[u++]=_[R++],--D;);R=u-Z,U=W}}else if(x<D){if(R+=v+x-D,(D-=x)<H){for(H-=D;W[u++]=_[R++],--D;);if(R=0,x<H){for(H-=D=x;W[u++]=_[R++],--D;);R=u-Z,U=W}}}else if(R+=x-D,D<H){for(H-=D;W[u++]=_[R++],--D;);R=u-Z,U=W}for(;2<H;)W[u++]=U[R++],W[u++]=U[R++],W[u++]=U[R++],H-=3;H&&(W[u++]=U[R++],1<H&&(W[u++]=U[R++]))}else{for(R=u-Z;W[u++]=W[R++],W[u++]=W[R++],W[u++]=W[R++],2<(H-=3););H&&(W[u++]=W[R++],1<H&&(W[u++]=W[R++]))}break}}break}}while(l<d&&u<p);l-=H=A>>3,C&=(1<<(A-=H<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<d?d-l+5:5-(l-d),i.avail_out=u<p?p-u+257:257-(u-p),a.hold=C,a.bits=A}},{}],49:[function(t,n,s){var i=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),d=t("./inftrees"),u=1,f=2,p=0,m=-2,v=1,w=852,x=592;function _(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(R){var U;return R&&R.state?(U=R.state,R.total_in=R.total_out=U.total=0,R.msg="",U.wrap&&(R.adler=1&U.wrap),U.mode=v,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new i.Buf32(w),U.distcode=U.distdyn=new i.Buf32(x),U.sane=1,U.back=-1,p):m}function T(R){var U;return R&&R.state?((U=R.state).wsize=0,U.whave=0,U.wnext=0,A(R)):m}function P(R,U){var k,W;return R&&R.state?(W=R.state,U<0?(k=0,U=-U):(k=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?m:(W.window!==null&&W.wbits!==U&&(W.window=null),W.wrap=k,W.wbits=U,T(R))):m}function O(R,U){var k,W;return R?(W=new C,(R.state=W).window=null,(k=P(R,U))!==p&&(R.state=null),k):m}var z,M,D=!0;function H(R){if(D){var U;for(z=new i.Buf32(512),M=new i.Buf32(32),U=0;U<144;)R.lens[U++]=8;for(;U<256;)R.lens[U++]=9;for(;U<280;)R.lens[U++]=7;for(;U<288;)R.lens[U++]=8;for(d(u,R.lens,0,288,z,0,R.work,{bits:9}),U=0;U<32;)R.lens[U++]=5;d(f,R.lens,0,32,M,0,R.work,{bits:5}),D=!1}R.lencode=z,R.lenbits=9,R.distcode=M,R.distbits=5}function Z(R,U,k,W){var B,I=R.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new i.Buf8(I.wsize)),W>=I.wsize?(i.arraySet(I.window,U,k-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(W<(B=I.wsize-I.wnext)&&(B=W),i.arraySet(I.window,U,k-W,B,I.wnext),(W-=B)?(i.arraySet(I.window,U,k-W,W,0),I.wnext=W,I.whave=I.wsize):(I.wnext+=B,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=B))),0}s.inflateReset=T,s.inflateReset2=P,s.inflateResetKeep=A,s.inflateInit=function(R){return O(R,15)},s.inflateInit2=O,s.inflate=function(R,U){var k,W,B,I,G,V,X,F,q,oe,re,ee,ye,ve,he,xe,Ce,ue,_e,Ie,$,me,te,Y,N=0,L=new i.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return m;(k=R.state).mode===12&&(k.mode=13),G=R.next_out,B=R.output,X=R.avail_out,I=R.next_in,W=R.input,V=R.avail_in,F=k.hold,q=k.bits,oe=V,re=X,me=p;e:for(;;)switch(k.mode){case v:if(k.wrap===0){k.mode=13;break}for(;q<16;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(2&k.wrap&&F===35615){L[k.check=0]=255&F,L[1]=F>>>8&255,k.check=a(k.check,L,2,0),q=F=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&F)<<8)+(F>>8))%31){R.msg="incorrect header check",k.mode=30;break}if((15&F)!=8){R.msg="unknown compression method",k.mode=30;break}if(q-=4,$=8+(15&(F>>>=4)),k.wbits===0)k.wbits=$;else if($>k.wbits){R.msg="invalid window size",k.mode=30;break}k.dmax=1<<$,R.adler=k.check=1,k.mode=512&F?10:12,q=F=0;break;case 2:for(;q<16;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(k.flags=F,(255&k.flags)!=8){R.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){R.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=F>>8&1),512&k.flags&&(L[0]=255&F,L[1]=F>>>8&255,k.check=a(k.check,L,2,0)),q=F=0,k.mode=3;case 3:for(;q<32;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}k.head&&(k.head.time=F),512&k.flags&&(L[0]=255&F,L[1]=F>>>8&255,L[2]=F>>>16&255,L[3]=F>>>24&255,k.check=a(k.check,L,4,0)),q=F=0,k.mode=4;case 4:for(;q<16;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}k.head&&(k.head.xflags=255&F,k.head.os=F>>8),512&k.flags&&(L[0]=255&F,L[1]=F>>>8&255,k.check=a(k.check,L,2,0)),q=F=0,k.mode=5;case 5:if(1024&k.flags){for(;q<16;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}k.length=F,k.head&&(k.head.extra_len=F),512&k.flags&&(L[0]=255&F,L[1]=F>>>8&255,k.check=a(k.check,L,2,0)),q=F=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(V<(ee=k.length)&&(ee=V),ee&&(k.head&&($=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),i.arraySet(k.head.extra,W,I,ee,$)),512&k.flags&&(k.check=a(k.check,W,ee,I)),V-=ee,I+=ee,k.length-=ee),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(V===0)break e;for(ee=0;$=W[I+ee++],k.head&&$&&k.length<65536&&(k.head.name+=String.fromCharCode($)),$&&ee<V;);if(512&k.flags&&(k.check=a(k.check,W,ee,I)),V-=ee,I+=ee,$)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(V===0)break e;for(ee=0;$=W[I+ee++],k.head&&$&&k.length<65536&&(k.head.comment+=String.fromCharCode($)),$&&ee<V;);if(512&k.flags&&(k.check=a(k.check,W,ee,I)),V-=ee,I+=ee,$)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;q<16;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(F!==(65535&k.check)){R.msg="header crc mismatch",k.mode=30;break}q=F=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),R.adler=k.check=0,k.mode=12;break;case 10:for(;q<32;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}R.adler=k.check=_(F),q=F=0,k.mode=11;case 11:if(k.havedict===0)return R.next_out=G,R.avail_out=X,R.next_in=I,R.avail_in=V,k.hold=F,k.bits=q,2;R.adler=k.check=1,k.mode=12;case 12:if(U===5||U===6)break e;case 13:if(k.last){F>>>=7&q,q-=7&q,k.mode=27;break}for(;q<3;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}switch(k.last=1&F,q-=1,3&(F>>>=1)){case 0:k.mode=14;break;case 1:if(H(k),k.mode=20,U!==6)break;F>>>=2,q-=2;break e;case 2:k.mode=17;break;case 3:R.msg="invalid block type",k.mode=30}F>>>=2,q-=2;break;case 14:for(F>>>=7&q,q-=7&q;q<32;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if((65535&F)!=(F>>>16^65535)){R.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&F,q=F=0,k.mode=15,U===6)break e;case 15:k.mode=16;case 16:if(ee=k.length){if(V<ee&&(ee=V),X<ee&&(ee=X),ee===0)break e;i.arraySet(B,W,I,ee,G),V-=ee,I+=ee,X-=ee,G+=ee,k.length-=ee;break}k.mode=12;break;case 17:for(;q<14;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(k.nlen=257+(31&F),F>>>=5,q-=5,k.ndist=1+(31&F),F>>>=5,q-=5,k.ncode=4+(15&F),F>>>=4,q-=4,286<k.nlen||30<k.ndist){R.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;q<3;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}k.lens[J[k.have++]]=7&F,F>>>=3,q-=3}for(;k.have<19;)k.lens[J[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,te={bits:k.lenbits},me=d(0,k.lens,0,19,k.lencode,0,k.work,te),k.lenbits=te.bits,me){R.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;xe=(N=k.lencode[F&(1<<k.lenbits)-1])>>>16&255,Ce=65535&N,!((he=N>>>24)<=q);){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(Ce<16)F>>>=he,q-=he,k.lens[k.have++]=Ce;else{if(Ce===16){for(Y=he+2;q<Y;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(F>>>=he,q-=he,k.have===0){R.msg="invalid bit length repeat",k.mode=30;break}$=k.lens[k.have-1],ee=3+(3&F),F>>>=2,q-=2}else if(Ce===17){for(Y=he+3;q<Y;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}q-=he,$=0,ee=3+(7&(F>>>=he)),F>>>=3,q-=3}else{for(Y=he+7;q<Y;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}q-=he,$=0,ee=11+(127&(F>>>=he)),F>>>=7,q-=7}if(k.have+ee>k.nlen+k.ndist){R.msg="invalid bit length repeat",k.mode=30;break}for(;ee--;)k.lens[k.have++]=$}}if(k.mode===30)break;if(k.lens[256]===0){R.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,te={bits:k.lenbits},me=d(u,k.lens,0,k.nlen,k.lencode,0,k.work,te),k.lenbits=te.bits,me){R.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,te={bits:k.distbits},me=d(f,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,te),k.distbits=te.bits,me){R.msg="invalid distances set",k.mode=30;break}if(k.mode=20,U===6)break e;case 20:k.mode=21;case 21:if(6<=V&&258<=X){R.next_out=G,R.avail_out=X,R.next_in=I,R.avail_in=V,k.hold=F,k.bits=q,l(R,re),G=R.next_out,B=R.output,X=R.avail_out,I=R.next_in,W=R.input,V=R.avail_in,F=k.hold,q=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;xe=(N=k.lencode[F&(1<<k.lenbits)-1])>>>16&255,Ce=65535&N,!((he=N>>>24)<=q);){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(xe&&(240&xe)==0){for(ue=he,_e=xe,Ie=Ce;xe=(N=k.lencode[Ie+((F&(1<<ue+_e)-1)>>ue)])>>>16&255,Ce=65535&N,!(ue+(he=N>>>24)<=q);){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}F>>>=ue,q-=ue,k.back+=ue}if(F>>>=he,q-=he,k.back+=he,k.length=Ce,xe===0){k.mode=26;break}if(32&xe){k.back=-1,k.mode=12;break}if(64&xe){R.msg="invalid literal/length code",k.mode=30;break}k.extra=15&xe,k.mode=22;case 22:if(k.extra){for(Y=k.extra;q<Y;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}k.length+=F&(1<<k.extra)-1,F>>>=k.extra,q-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;xe=(N=k.distcode[F&(1<<k.distbits)-1])>>>16&255,Ce=65535&N,!((he=N>>>24)<=q);){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if((240&xe)==0){for(ue=he,_e=xe,Ie=Ce;xe=(N=k.distcode[Ie+((F&(1<<ue+_e)-1)>>ue)])>>>16&255,Ce=65535&N,!(ue+(he=N>>>24)<=q);){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}F>>>=ue,q-=ue,k.back+=ue}if(F>>>=he,q-=he,k.back+=he,64&xe){R.msg="invalid distance code",k.mode=30;break}k.offset=Ce,k.extra=15&xe,k.mode=24;case 24:if(k.extra){for(Y=k.extra;q<Y;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}k.offset+=F&(1<<k.extra)-1,F>>>=k.extra,q-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){R.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(X===0)break e;if(ee=re-X,k.offset>ee){if((ee=k.offset-ee)>k.whave&&k.sane){R.msg="invalid distance too far back",k.mode=30;break}ye=ee>k.wnext?(ee-=k.wnext,k.wsize-ee):k.wnext-ee,ee>k.length&&(ee=k.length),ve=k.window}else ve=B,ye=G-k.offset,ee=k.length;for(X<ee&&(ee=X),X-=ee,k.length-=ee;B[G++]=ve[ye++],--ee;);k.length===0&&(k.mode=21);break;case 26:if(X===0)break e;B[G++]=k.length,X--,k.mode=21;break;case 27:if(k.wrap){for(;q<32;){if(V===0)break e;V--,F|=W[I++]<<q,q+=8}if(re-=X,R.total_out+=re,k.total+=re,re&&(R.adler=k.check=k.flags?a(k.check,B,re,G-re):o(k.check,B,re,G-re)),re=X,(k.flags?F:_(F))!==k.check){R.msg="incorrect data check",k.mode=30;break}q=F=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;q<32;){if(V===0)break e;V--,F+=W[I++]<<q,q+=8}if(F!==(4294967295&k.total)){R.msg="incorrect length check",k.mode=30;break}q=F=0}k.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return m}return R.next_out=G,R.avail_out=X,R.next_in=I,R.avail_in=V,k.hold=F,k.bits=q,(k.wsize||re!==R.avail_out&&k.mode<30&&(k.mode<27||U!==4))&&Z(R,R.output,R.next_out,re-R.avail_out)?(k.mode=31,-4):(oe-=R.avail_in,re-=R.avail_out,R.total_in+=oe,R.total_out+=re,k.total+=re,k.wrap&&re&&(R.adler=k.check=k.flags?a(k.check,B,re,R.next_out-re):o(k.check,B,re,R.next_out-re)),R.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(oe==0&&re===0||U===4)&&me===p&&(me=-5),me)},s.inflateEnd=function(R){if(!R||!R.state)return m;var U=R.state;return U.window&&(U.window=null),R.state=null,p},s.inflateGetHeader=function(R,U){var k;return R&&R.state?(2&(k=R.state).wrap)==0?m:((k.head=U).done=!1,p):m},s.inflateSetDictionary=function(R,U){var k,W=U.length;return R&&R.state?(k=R.state).wrap!==0&&k.mode!==11?m:k.mode===11&&o(1,U,W,0)!==k.check?-3:Z(R,U,W,W)?(k.mode=31,-4):(k.havedict=1,p):m},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,s){var i=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,f,p,m,v,w,x,_){var C,A,T,P,O,z,M,D,H,Z=_.bits,R=0,U=0,k=0,W=0,B=0,I=0,G=0,V=0,X=0,F=0,q=null,oe=0,re=new i.Buf16(16),ee=new i.Buf16(16),ye=null,ve=0;for(R=0;R<=15;R++)re[R]=0;for(U=0;U<m;U++)re[f[p+U]]++;for(B=Z,W=15;1<=W&&re[W]===0;W--);if(W<B&&(B=W),W===0)return v[w++]=20971520,v[w++]=20971520,_.bits=1,0;for(k=1;k<W&&re[k]===0;k++);for(B<k&&(B=k),R=V=1;R<=15;R++)if(V<<=1,(V-=re[R])<0)return-1;if(0<V&&(u===0||W!==1))return-1;for(ee[1]=0,R=1;R<15;R++)ee[R+1]=ee[R]+re[R];for(U=0;U<m;U++)f[p+U]!==0&&(x[ee[f[p+U]]++]=U);if(z=u===0?(q=ye=x,19):u===1?(q=o,oe-=257,ye=a,ve-=257,256):(q=l,ye=d,-1),R=k,O=w,G=U=F=0,T=-1,P=(X=1<<(I=B))-1,u===1&&852<X||u===2&&592<X)return 1;for(;;){for(M=R-G,H=x[U]<z?(D=0,x[U]):x[U]>z?(D=ye[ve+x[U]],q[oe+x[U]]):(D=96,0),C=1<<R-G,k=A=1<<I;v[O+(F>>G)+(A-=C)]=M<<24|D<<16|H|0,A!==0;);for(C=1<<R-1;F&C;)C>>=1;if(C!==0?(F&=C-1,F+=C):F=0,U++,--re[R]==0){if(R===W)break;R=f[p+x[U]]}if(B<R&&(F&P)!==T){for(G===0&&(G=B),O+=k,V=1<<(I=R-G);I+G<W&&!((V-=re[I+G])<=0);)I++,V<<=1;if(X+=1<<I,u===1&&852<X||u===2&&592<X)return 1;v[T=F&P]=B<<24|I<<16|O-w|0}}return F!==0&&(v[O+F]=R-G<<24|64<<16|0),_.bits=B,0}},{"../utils/common":41}],51:[function(t,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,s){var i=t("../utils/common"),o=0,a=1;function l(N){for(var L=N.length;0<=--L;)N[L]=0}var d=0,u=29,f=256,p=f+1+u,m=30,v=19,w=2*p+1,x=15,_=16,C=7,A=256,T=16,P=17,O=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(p+2));l(Z);var R=new Array(2*m);l(R);var U=new Array(512);l(U);var k=new Array(256);l(k);var W=new Array(u);l(W);var B,I,G,V=new Array(m);function X(N,L,J,ne,Q){this.static_tree=N,this.extra_bits=L,this.extra_base=J,this.elems=ne,this.max_length=Q,this.has_stree=N&&N.length}function F(N,L){this.dyn_tree=N,this.max_code=0,this.stat_desc=L}function q(N){return N<256?U[N]:U[256+(N>>>7)]}function oe(N,L){N.pending_buf[N.pending++]=255&L,N.pending_buf[N.pending++]=L>>>8&255}function re(N,L,J){N.bi_valid>_-J?(N.bi_buf|=L<<N.bi_valid&65535,oe(N,N.bi_buf),N.bi_buf=L>>_-N.bi_valid,N.bi_valid+=J-_):(N.bi_buf|=L<<N.bi_valid&65535,N.bi_valid+=J)}function ee(N,L,J){re(N,J[2*L],J[2*L+1])}function ye(N,L){for(var J=0;J|=1&N,N>>>=1,J<<=1,0<--L;);return J>>>1}function ve(N,L,J){var ne,Q,ie=new Array(x+1),le=0;for(ne=1;ne<=x;ne++)ie[ne]=le=le+J[ne-1]<<1;for(Q=0;Q<=L;Q++){var de=N[2*Q+1];de!==0&&(N[2*Q]=ye(ie[de]++,de))}}function he(N){var L;for(L=0;L<p;L++)N.dyn_ltree[2*L]=0;for(L=0;L<m;L++)N.dyn_dtree[2*L]=0;for(L=0;L<v;L++)N.bl_tree[2*L]=0;N.dyn_ltree[2*A]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function xe(N){8<N.bi_valid?oe(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function Ce(N,L,J,ne){var Q=2*L,ie=2*J;return N[Q]<N[ie]||N[Q]===N[ie]&&ne[L]<=ne[J]}function ue(N,L,J){for(var ne=N.heap[J],Q=J<<1;Q<=N.heap_len&&(Q<N.heap_len&&Ce(L,N.heap[Q+1],N.heap[Q],N.depth)&&Q++,!Ce(L,ne,N.heap[Q],N.depth));)N.heap[J]=N.heap[Q],J=Q,Q<<=1;N.heap[J]=ne}function _e(N,L,J){var ne,Q,ie,le,de=0;if(N.last_lit!==0)for(;ne=N.pending_buf[N.d_buf+2*de]<<8|N.pending_buf[N.d_buf+2*de+1],Q=N.pending_buf[N.l_buf+de],de++,ne===0?ee(N,Q,L):(ee(N,(ie=k[Q])+f+1,L),(le=z[ie])!==0&&re(N,Q-=W[ie],le),ee(N,ie=q(--ne),J),(le=M[ie])!==0&&re(N,ne-=V[ie],le)),de<N.last_lit;);ee(N,A,L)}function Ie(N,L){var J,ne,Q,ie=L.dyn_tree,le=L.stat_desc.static_tree,de=L.stat_desc.has_stree,ke=L.stat_desc.elems,Te=-1;for(N.heap_len=0,N.heap_max=w,J=0;J<ke;J++)ie[2*J]!==0?(N.heap[++N.heap_len]=Te=J,N.depth[J]=0):ie[2*J+1]=0;for(;N.heap_len<2;)ie[2*(Q=N.heap[++N.heap_len]=Te<2?++Te:0)]=1,N.depth[Q]=0,N.opt_len--,de&&(N.static_len-=le[2*Q+1]);for(L.max_code=Te,J=N.heap_len>>1;1<=J;J--)ue(N,ie,J);for(Q=ke;J=N.heap[1],N.heap[1]=N.heap[N.heap_len--],ue(N,ie,1),ne=N.heap[1],N.heap[--N.heap_max]=J,N.heap[--N.heap_max]=ne,ie[2*Q]=ie[2*J]+ie[2*ne],N.depth[Q]=(N.depth[J]>=N.depth[ne]?N.depth[J]:N.depth[ne])+1,ie[2*J+1]=ie[2*ne+1]=Q,N.heap[1]=Q++,ue(N,ie,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(De,ot){var yt,St,zt,gt,Gt,nr,Ft=ot.dyn_tree,Re=ot.max_code,Ee=ot.stat_desc.static_tree,Xe=ot.stat_desc.has_stree,$e=ot.stat_desc.extra_bits,nt=ot.stat_desc.extra_base,st=ot.stat_desc.max_length,wt=0;for(gt=0;gt<=x;gt++)De.bl_count[gt]=0;for(Ft[2*De.heap[De.heap_max]+1]=0,yt=De.heap_max+1;yt<w;yt++)st<(gt=Ft[2*Ft[2*(St=De.heap[yt])+1]+1]+1)&&(gt=st,wt++),Ft[2*St+1]=gt,Re<St||(De.bl_count[gt]++,Gt=0,nt<=St&&(Gt=$e[St-nt]),nr=Ft[2*St],De.opt_len+=nr*(gt+Gt),Xe&&(De.static_len+=nr*(Ee[2*St+1]+Gt)));if(wt!==0){do{for(gt=st-1;De.bl_count[gt]===0;)gt--;De.bl_count[gt]--,De.bl_count[gt+1]+=2,De.bl_count[st]--,wt-=2}while(0<wt);for(gt=st;gt!==0;gt--)for(St=De.bl_count[gt];St!==0;)Re<(zt=De.heap[--yt])||(Ft[2*zt+1]!==gt&&(De.opt_len+=(gt-Ft[2*zt+1])*Ft[2*zt],Ft[2*zt+1]=gt),St--)}}(N,L),ve(ie,Te,N.bl_count)}function $(N,L,J){var ne,Q,ie=-1,le=L[1],de=0,ke=7,Te=4;for(le===0&&(ke=138,Te=3),L[2*(J+1)+1]=65535,ne=0;ne<=J;ne++)Q=le,le=L[2*(ne+1)+1],++de<ke&&Q===le||(de<Te?N.bl_tree[2*Q]+=de:Q!==0?(Q!==ie&&N.bl_tree[2*Q]++,N.bl_tree[2*T]++):de<=10?N.bl_tree[2*P]++:N.bl_tree[2*O]++,ie=Q,Te=(de=0)===le?(ke=138,3):Q===le?(ke=6,3):(ke=7,4))}function me(N,L,J){var ne,Q,ie=-1,le=L[1],de=0,ke=7,Te=4;for(le===0&&(ke=138,Te=3),ne=0;ne<=J;ne++)if(Q=le,le=L[2*(ne+1)+1],!(++de<ke&&Q===le)){if(de<Te)for(;ee(N,Q,N.bl_tree),--de!=0;);else Q!==0?(Q!==ie&&(ee(N,Q,N.bl_tree),de--),ee(N,T,N.bl_tree),re(N,de-3,2)):de<=10?(ee(N,P,N.bl_tree),re(N,de-3,3)):(ee(N,O,N.bl_tree),re(N,de-11,7));ie=Q,Te=(de=0)===le?(ke=138,3):Q===le?(ke=6,3):(ke=7,4)}}l(V);var te=!1;function Y(N,L,J,ne){re(N,(d<<1)+(ne?1:0),3),function(Q,ie,le,de){xe(Q),oe(Q,le),oe(Q,~le),i.arraySet(Q.pending_buf,Q.window,ie,le,Q.pending),Q.pending+=le}(N,L,J)}s._tr_init=function(N){te||(function(){var L,J,ne,Q,ie,le=new Array(x+1);for(Q=ne=0;Q<u-1;Q++)for(W[Q]=ne,L=0;L<1<<z[Q];L++)k[ne++]=Q;for(k[ne-1]=Q,Q=ie=0;Q<16;Q++)for(V[Q]=ie,L=0;L<1<<M[Q];L++)U[ie++]=Q;for(ie>>=7;Q<m;Q++)for(V[Q]=ie<<7,L=0;L<1<<M[Q]-7;L++)U[256+ie++]=Q;for(J=0;J<=x;J++)le[J]=0;for(L=0;L<=143;)Z[2*L+1]=8,L++,le[8]++;for(;L<=255;)Z[2*L+1]=9,L++,le[9]++;for(;L<=279;)Z[2*L+1]=7,L++,le[7]++;for(;L<=287;)Z[2*L+1]=8,L++,le[8]++;for(ve(Z,p+1,le),L=0;L<m;L++)R[2*L+1]=5,R[2*L]=ye(L,5);B=new X(Z,z,f+1,p,x),I=new X(R,M,0,m,x),G=new X(new Array(0),D,0,v,C)}(),te=!0),N.l_desc=new F(N.dyn_ltree,B),N.d_desc=new F(N.dyn_dtree,I),N.bl_desc=new F(N.bl_tree,G),N.bi_buf=0,N.bi_valid=0,he(N)},s._tr_stored_block=Y,s._tr_flush_block=function(N,L,J,ne){var Q,ie,le=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(de){var ke,Te=4093624447;for(ke=0;ke<=31;ke++,Te>>>=1)if(1&Te&&de.dyn_ltree[2*ke]!==0)return o;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return a;for(ke=32;ke<f;ke++)if(de.dyn_ltree[2*ke]!==0)return a;return o}(N)),Ie(N,N.l_desc),Ie(N,N.d_desc),le=function(de){var ke;for($(de,de.dyn_ltree,de.l_desc.max_code),$(de,de.dyn_dtree,de.d_desc.max_code),Ie(de,de.bl_desc),ke=v-1;3<=ke&&de.bl_tree[2*H[ke]+1]===0;ke--);return de.opt_len+=3*(ke+1)+5+5+4,ke}(N),Q=N.opt_len+3+7>>>3,(ie=N.static_len+3+7>>>3)<=Q&&(Q=ie)):Q=ie=J+5,J+4<=Q&&L!==-1?Y(N,L,J,ne):N.strategy===4||ie===Q?(re(N,2+(ne?1:0),3),_e(N,Z,R)):(re(N,4+(ne?1:0),3),function(de,ke,Te,De){var ot;for(re(de,ke-257,5),re(de,Te-1,5),re(de,De-4,4),ot=0;ot<De;ot++)re(de,de.bl_tree[2*H[ot]+1],3);me(de,de.dyn_ltree,ke-1),me(de,de.dyn_dtree,Te-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,le+1),_e(N,N.dyn_ltree,N.dyn_dtree)),he(N),ne&&xe(N)},s._tr_tally=function(N,L,J){return N.pending_buf[N.d_buf+2*N.last_lit]=L>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&L,N.pending_buf[N.l_buf+N.last_lit]=255&J,N.last_lit++,L===0?N.dyn_ltree[2*J]++:(N.matches++,L--,N.dyn_ltree[2*(k[J]+f+1)]++,N.dyn_dtree[2*q(L)]++),N.last_lit===N.lit_bufsize-1},s._tr_align=function(N){re(N,2,3),ee(N,A,Z),function(L){L.bi_valid===16?(oe(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):8<=L.bi_valid&&(L.pending_buf[L.pending++]=255&L.bi_buf,L.bi_buf>>=8,L.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(t,n,s){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,s){(function(i){(function(o,a){if(!o.setImmediate){var l,d,u,f,p=1,m={},v=!1,w=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,l={}.toString.call(o.process)==="[object process]"?function(T){process.nextTick(function(){C(T)})}:function(){if(o.postMessage&&!o.importScripts){var T=!0,P=o.onmessage;return o.onmessage=function(){T=!1},o.postMessage("","*"),o.onmessage=P,T}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",A,!1):o.attachEvent("onmessage",A),function(T){o.postMessage(f+T,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(T){C(T.data)},function(T){u.port2.postMessage(T)}):w&&"onreadystatechange"in w.createElement("script")?(d=w.documentElement,function(T){var P=w.createElement("script");P.onreadystatechange=function(){C(T),P.onreadystatechange=null,d.removeChild(P),P=null},d.appendChild(P)}):function(T){setTimeout(C,0,T)},x.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var P=new Array(arguments.length-1),O=0;O<P.length;O++)P[O]=arguments[O+1];var z={callback:T,args:P};return m[p]=z,l(p),p++},x.clearImmediate=_}function _(T){delete m[T]}function C(T){if(v)setTimeout(C,0,T);else{var P=m[T];if(P){v=!0;try{(function(O){var z=O.callback,M=O.args;switch(M.length){case 0:z();break;case 1:z(M[0]);break;case 2:z(M[0],M[1]);break;case 3:z(M[0],M[1],M[2]);break;default:z.apply(a,M)}})(P)}finally{_(T),v=!1}}}}function A(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(f)===0&&C(+T.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof window<"u"?window:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}($w)),$w.exports}var rV=tV();const b_=I0(rV);class __ extends Ya{constructor(e){super(e,"project_files")}async getFile(e){return this.get(e)}async listProjectFiles(e,t,n,s){const{page:i=1,per_page:o=50}=n||{};try{let a,l;if(t===void 0){const p=await this.client.rpc("get_all_project_files",{p_project_id:e});a=p.data,l=p.error}else{const p=await this.client.rpc("get_project_files",{p_project_id:e,p_parent_id:t});a=p.data,l=p.error}if(l)return console.error("Error loading project files:",l),{data:{items:[],total:0,page:i,per_page:o},error:new Error(l.message)};const d=(a||[]).map(p=>({id:p.id,project_id:p.project_id,name:p.name,path:p.path,content:p.content,file_type:p.file_type,mime_type:p.mime_type,size_bytes:p.size_bytes,parent_id:p.parent_id,created_at:p.created_at,updated_at:p.updated_at,created_by:p.created_by}));s&&d.sort((p,m)=>{const v=p[s.field],w=m[s.field],x=v>w?1:v<w?-1:0;return s.direction==="asc"?x:-x});const u=(i-1)*o;return{data:{items:d.slice(u,u+o),total:d.length,page:i,per_page:o},error:null}}catch(a){return console.error("Unexpected error in listProjectFiles:",a),{data:{items:[],total:0,page:1,per_page:50},error:a instanceof Error?a:new Error("An unexpected error occurred")}}}async createFile(e){try{const{data:t,error:n}=await this.client.rpc("upsert_project_file",{p_file_id:null,p_project_id:e.project_id,p_name:e.name,p_path:e.path,p_content:e.content||"",p_file_type:e.file_type,p_mime_type:"text/plain",p_parent_id:e.parent_id});if(n)return console.error("File creation error:",n),{data:null,error:new Error(n.message)};const{data:s,error:i}=await this.getFile(t);return i?(console.error("Error fetching created file:",i),{data:null,error:i}):{data:s,error:null}}catch(t){return console.error("Unexpected error in createFile:",t),{data:null,error:t instanceof Error?t:new Error("An unexpected error occurred")}}}async updateFile(e,t){try{const{data:n,error:s}=await this.getFile(e);if(s||!n)return{data:null,error:s||new Error("File not found")};const{data:i,error:o}=await this.client.rpc("upsert_project_file",{p_file_id:e,p_project_id:n.project_id,p_name:t.name||n.name,p_path:t.path||n.path,p_content:t.content!==void 0?t.content:n.content,p_file_type:t.file_type||n.file_type,p_mime_type:t.mime_type||n.mime_type,p_parent_id:t.parent_id!==void 0?t.parent_id:n.parent_id});if(o)return console.error("File update error:",o),{data:null,error:new Error(o.message)};const{data:a,error:l}=await this.getFile(e);return l?(console.error("Error fetching updated file:",l),{data:null,error:l}):{data:a,error:null}}catch(n){return console.error("Unexpected error in updateFile:",n),{data:null,error:n instanceof Error?n:new Error("An unexpected error occurred")}}}async deleteFile(e){try{const{data:t,error:n}=await this.getFile(e);if(n||!t)return{data:null,error:n||new Error("File not found")};const{data:s,error:i}=await this.client.rpc("can_edit_project_files",{p_project_id:t.project_id});if(i||!s)return{data:null,error:new Error("Insufficient permissions to delete this file")};const{error:o}=await this.client.from(this.table).delete().eq("id",e);return o?(console.error("File deletion error:",o),{data:null,error:new Error(o.message)}):{data:null,error:null}}catch(t){return console.error("Unexpected error in deleteFile:",t),{data:null,error:t instanceof Error?t:new Error("An unexpected error occurred")}}}async getFileByPath(e,t){const{data:n,error:s}=await this.client.from(this.table).select("*").eq("project_id",e).eq("path",t).single();return{data:n,error:s}}async moveFile(e,t,n){return this.updateFile(e,{parent_id:t,path:n,updated_at:new Date().toISOString()})}async searchFiles(e,t,n){try{const{data:s,error:i}=await this.client.rpc("get_all_project_files",{p_project_id:e});if(i)return{data:{items:[],total:0,page:1,per_page:10},error:new Error(i.message)};const o=(s||[]).filter(f=>f.name.toLowerCase().includes(t.toLowerCase())).map(f=>({id:f.id,project_id:f.project_id,name:f.name,path:f.path,content:f.content,file_type:f.file_type,mime_type:f.mime_type,size_bytes:f.size_bytes,parent_id:f.parent_id,created_at:f.created_at,updated_at:f.updated_at,created_by:f.created_by})),{page:a=1,per_page:l=10}=n||{},d=(a-1)*l;return{data:{items:o.slice(d,d+l),total:o.length,page:a,per_page:l},error:null}}catch(s){return console.error("Unexpected error in searchFiles:",s),{data:{items:[],total:0,page:1,per_page:10},error:s instanceof Error?s:new Error("An unexpected error occurred")}}}async exportProjectAsBase64Zip(e,t,n){const{data:s,error:i}=await this.client.from(this.table).select("name, path, content, file_type").eq("project_id",e);if(i)throw new Error("Failed to fetch project files: "+i.message);const o=(s||[]).filter(d=>d.file_type==="file"),a=new b_;for(const d of o){const u=d.path;a.file(u,d.content||"")}return a.file("/compile.sh",`#!/bin/bash

`+t),a.file("/run.sh",`#!/bin/bash

`+n),await a.generateAsync({type:"base64"})}}async function nV(r,e,t){switch(e.toLowerCase()){case"java":await sV(r,t);break;case"python":await iV(r,t);break;case"javascript":case"js":await oV(r,t);break;case"typescript":case"ts":await aV(r,t);break;case"c++":case"cpp":await lV(r,t);break;case"c":await dV(r,t);break;case"go":await cV(r,t);break;case"rust":await uV(r,t);break;default:await hV(r,t,e);break}}async function sV(r,e){const t=await e.createFile({project_id:r,name:"src",path:"/src",file_type:"directory",parent_id:null,content:""});t.data&&(await e.createFile({project_id:r,name:"Main.java",path:"/src/Main.java",file_type:"file",mime_type:"text/x-java",parent_id:t.data.id,content:`public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# Java Project

A simple Java project created with MocsCode.

## Getting Started

Compile: \`javac src/Main.java\`

Run: \`java -cp src Main\``}))}async function iV(r,e){await e.createFile({project_id:r,name:"main.py",path:"/main.py",file_type:"file",mime_type:"text/x-python",parent_id:null,content:`def main():
    print("Hello, World!")

if __name__ == "__main__":
    main()
`}),await e.createFile({project_id:r,name:"requirements.txt",path:"/requirements.txt",file_type:"file",mime_type:"text/plain",parent_id:null,content:`# Python dependencies
# Add your dependencies here
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# Python Project

A simple Python project created with MocsCode.

## Getting Started

Run: \`python main.py\`

Install dependencies: \`pip install -r requirements.txt\`
`})}async function oV(r,e){await e.createFile({project_id:r,name:"index.js",path:"/index.js",file_type:"file",mime_type:"application/javascript",parent_id:null,content:`console.log("Hello, World!");

function main() {
  console.log("Welcome to MocsCode!");
}

main();
`}),await e.createFile({project_id:r,name:"package.json",path:"/package.json",file_type:"file",mime_type:"application/json",parent_id:null,content:`{
  "name": "javascript-project",
  "version": "1.0.0",
  "description": "A JavaScript project created with MocsCode",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "test": "echo \\"Error: no test specified\\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# JavaScript Project

A simple JavaScript project created with MocsCode.

## Getting Started

Run: \`node index.js\`

or

\`npm start\`
`})}async function aV(r,e){const t=await e.createFile({project_id:r,name:"src",path:"/src",file_type:"directory",parent_id:null,content:""});t.data&&(await e.createFile({project_id:r,name:"index.ts",path:"/src/index.ts",file_type:"file",mime_type:"application/typescript",parent_id:t.data.id,content:`interface Message {
  text: string;
  priority: number;
}

function displayMessage(message: Message): void {
  console.log(\`Message [\${message.priority}]: \${message.text}\`);
}

function main(): void {
  const greeting: Message = {
    text: "Hello, TypeScript World!",
    priority: 1
  };
  
  displayMessage(greeting);
}

main();
`}),await e.createFile({project_id:r,name:"tsconfig.json",path:"/tsconfig.json",file_type:"file",mime_type:"application/json",parent_id:null,content:`{
  "compilerOptions": {
    "target": "es2016",
    "module": "commonjs",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true,
    "outDir": "./dist"
  },
  "include": ["src/**/*"]
}
`}),await e.createFile({project_id:r,name:"package.json",path:"/package.json",file_type:"file",mime_type:"application/json",parent_id:null,content:`{
  "name": "typescript-project",
  "version": "1.0.0",
  "description": "A TypeScript project created with MocsCode",
  "main": "dist/index.js",
  "scripts": {
    "build": "tsc",
    "start": "tsc && node dist/index.js",
    "test": "echo \\"Error: no test specified\\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "typescript": "^4.9.5"
  }
}
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# TypeScript Project

A TypeScript project created with MocsCode.

## Getting Started

Build: \`npm run build\`

Run: \`npm start\`
`}))}async function lV(r,e){const t=await e.createFile({project_id:r,name:"src",path:"/src",file_type:"directory",parent_id:null,content:""});t.data&&(await e.createFile({project_id:r,name:"main.cpp",path:"/src/main.cpp",file_type:"file",mime_type:"text/x-c++src",parent_id:t.data.id,content:`#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}
`}),await e.createFile({project_id:r,name:"CMakeLists.txt",path:"/CMakeLists.txt",file_type:"file",mime_type:"text/plain",parent_id:null,content:`cmake_minimum_required(VERSION 3.10)
project(CppProject)

set(CMAKE_CXX_STANDARD 17)

add_executable(main src/main.cpp)
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# C++ Project

A C++ project created with MocsCode.

## Getting Started

Build with CMake:

\`\`\`bash
mkdir -p build && cd build
cmake ..
make
\`\`\`

Run:
\`\`\`bash
./main
\`\`\`
`}))}async function cV(r,e){await e.createFile({project_id:r,name:"main.go",path:"/main.go",file_type:"file",mime_type:"text/x-go",parent_id:null,content:`package main

import "fmt"

func main() {
	fmt.Println("Hello, World!")
}
`}),await e.createFile({project_id:r,name:"go.mod",path:"/go.mod",file_type:"file",mime_type:"text/plain",parent_id:null,content:`module example.com/goproject

go 1.21
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# Go Project

A Go project created with MocsCode.

## Getting Started

Run: \`go run main.go\`

Build: \`go build\`
`})}async function uV(r,e){const t=await e.createFile({project_id:r,name:"src",path:"/src",file_type:"directory",parent_id:null,content:""});t.data&&(await e.createFile({project_id:r,name:"main.rs",path:"/src/main.rs",file_type:"file",mime_type:"text/x-rustsrc",parent_id:t.data.id,content:`fn main() {
    println!("Hello, World!");
}
`}),await e.createFile({project_id:r,name:"Cargo.toml",path:"/Cargo.toml",file_type:"file",mime_type:"text/plain",parent_id:null,content:`[package]
name = "rust_project"
version = "0.1.0"
edition = "2021"

[dependencies]
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# Rust Project

A Rust project created with MocsCode.

## Getting Started

Build and run: \`cargo run\`

Build only: \`cargo build\`
`}))}async function dV(r,e){await e.createFile({project_id:r,name:"main.c",path:"/main.c",file_type:"file",mime_type:"text/x-c",parent_id:null,content:`#include <stdio.h>

int main() {
    printf("Hello, World!");
    return 0;
}
`}),await e.createFile({project_id:r,name:"Makefile",path:"/Makefile",file_type:"file",mime_type:"text/plain",parent_id:null,content:`CC=gcc
CFLAGS=-Wall -Wextra -std=c99

all: main

main: main.c
	$(CC) $(CFLAGS) -o main main.c

clean:
	rm -f main
`}),await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# C Project

A simple C project created with MocsCode.

## Getting Started

Build: \`make\`

Run: \`./main\`

Clean: \`make clean\`
`})}async function hV(r,e,t){await e.createFile({project_id:r,name:"README.md",path:"/README.md",file_type:"file",mime_type:"text/markdown",parent_id:null,content:`# ${t} Project

A project created with MocsCode.

## Getting Started

Add your ${t} code files to get started.
`})}class fV extends Ya{constructor(t){super(t,"projects");Mr(this,"config");this.config=t}async getProject(t){try{const{data:n,error:s}=await this.client.rpc("get_project_safe",{p_project_id:t}).single();return s?(console.error("Error getting project:",s),{data:null,error:new Error(s.message)}):n?{data:n,error:null}:{data:null,error:new Error("Project not found or access denied")}}catch(n){return console.error("Unexpected error in getProject:",n),{data:null,error:n instanceof Error?n:new Error("An unexpected error occurred")}}}async listUserProjects(t,n={page:1,per_page:50},s){try{const{page:i=1,per_page:o=50}=n,{data:a,error:l}=await this.client.rpc("get_user_projects",{p_user_id:t});if(l){console.warn("RPC get_user_projects failed, falling back to direct query");const{data:p,error:m}=await this.client.from("projects").select("*").or(`owner_id.eq.${t},id.in.(
            select project_id from project_members where user_id = '${t}'
          )`);if(m)return console.error("Error loading user projects (fallback query):",m),{data:{items:[],total:0,page:i,per_page:o},error:new Error("Failed to load projects")};let v=p||[];v=v.map(w=>({...w,user_role:w.owner_id===t?"owner":"member"}))}const d=a||[];s&&d.sort((p,m)=>{const v=p[s.field],w=m[s.field],x=v>w?1:v<w?-1:0;return s.direction==="asc"?x:-x});const u=(i-1)*o;return{data:{items:d.slice(u,u+o),total:d.length,page:i,per_page:o},error:null}}catch(i){return console.error("Unexpected error in listUserProjects:",i),{data:{items:[],total:0,page:1,per_page:50},error:i instanceof Error?i:new Error("An unexpected error occurred")}}}async checkProjectAccess(t,n){try{const{data:s,error:i}=await this.client.rpc("check_project_access",{p_project_id:t,p_user_id:n}).single();return i?{data:null,error:new Error(i.message)}:{data:{can_access:!1,user_role:"",is_owner:!1,is_member:!1},error:null}}catch(s){return console.error("Error checking project access:",s),{data:null,error:s instanceof Error?s:new Error("Failed to check project access")}}}async createProject(t){try{const{data:n,error:s}=await this.client.from(this.table).insert([{name:t.name,description:t.description,owner_id:t.owner_id,is_public:t.is_public,language:t.language}]).select().single();return s?(console.error("Project creation error:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),{data:null,error:new Error(s.message)}):{data:n,error:null}}catch(n){return console.error("Unexpected error in createProject:",n),{data:null,error:n instanceof Error?n:new Error("An unexpected error occurred")}}}async createProjectTemplate(t,n){try{const{data:s,error:i}=await this.getProject(t);if(i||!s)return{data:null,error:i||new Error("Project not found")};const o=new __(this.config);return await nV(t,n,o),{data:s,error:null}}catch(s){return console.error("Error creating project template:",s),{data:null,error:s instanceof Error?s:new Error("Failed to create project template")}}}async updateProject(t,n){return console.log("Updating project:",t,n),this.update(t,n)}async deleteProject(t){return this.delete(t)}async listProjects(t,n,s){return this.list(t,n,s)}async getProjectWithMembership(t,n){try{const{data:s,error:i}=await this.getProject(t);if(i||!s)return{data:null,error:i||new Error("Project not found")};const{data:o,error:a}=await this.checkProjectAccess(t,n);return a?{data:{...s,is_member:!1},error:null}:{data:{...s,user_role:(o==null?void 0:o.user_role)||void 0,can_edit:o!=null&&o.user_role?["owner","editor"].includes(o.user_role):!1,is_member:(o==null?void 0:o.is_member)||!1},error:null}}catch(s){return console.error("Error getting project with membership:",s),{data:null,error:s instanceof Error?s:new Error("Failed to get project with membership")}}}}class pV extends Ya{constructor(e){super(e,"project_members")}async getMember(e){return this.get(e)}async listProjectMembers(e,t,n){const{page:s=1,per_page:i=50}=t||{};try{const{data:o,error:a}=await this.client.rpc("get_project_members",{p_project_id:e});if(a)return console.error("Error fetching project members:",a),{data:{items:[],total:0,page:s,per_page:i},error:new Error(a.message)};const d=(o||[]).map(p=>({id:p.id,project_id:p.project_id,user_id:p.user_id,role:p.role,joined_at:p.joined_at,user:p.user?{id:p.user.id,email:p.user.email,name:p.user.name,avatar_url:p.user.avatar_url,created_at:p.user.created_at,updated_at:p.user.updated_at,last_active_at:p.user.last_active_at}:null})).filter(p=>!p.user||!p.user.email?(console.warn("Found member without valid user data:",{memberId:p.id,userId:p.user_id,projectId:p.project_id}),!1):!0),u=(s-1)*i;return{data:{items:d.slice(u,u+i),total:d.length,page:s,per_page:i},error:null}}catch(o){return console.error("Unexpected error in listProjectMembers:",o),{data:{items:[],total:0,page:1,per_page:50},error:o instanceof Error?o:new Error("An unexpected error occurred")}}}async addMember(e){try{const{data:t,error:n}=await this.client.from("users").select("id, email, name, avatar_url, created_at, updated_at, last_active_at").eq("id",e.user_id).single();if(n||!t)return console.error("User not found when adding member:",n,e.user_id),{data:null,error:new Error("User not found. Please ensure the user exists before adding them as a member.")};const{data:s,error:i}=await this.client.from(this.table).select("id").eq("project_id",e.project_id).eq("user_id",e.user_id).single();if(s)return{data:null,error:new Error("User is already a member of this project")};const o={...e,joined_at:new Date().toISOString()},{data:a,error:l}=await this.client.from(this.table).insert([o]).select().single();return l?(console.error("Error creating project member:",l),{data:null,error:new Error(`Failed to add member: ${l.message}`)}):{data:{...a,user:t},error:null}}catch(t){return console.error("Unexpected error in addMember:",t),{data:null,error:t instanceof Error?t:new Error("An unexpected error occurred")}}}async inviteByEmail(e,t,n,s){try{const{data:i,error:o}=await this.client.from("users").select("id, email, name, avatar_url").eq("email",t).single();return o&&o.code!=="PGRST116"?(console.error("Error checking for existing user:",o),{data:null,error:new Error(`Failed to check user existence: ${o.message}`)}):i?await this.addMember({project_id:e,user_id:i.id,role:n,permissions:{},invited_by:s}):{data:null,error:new Error("User not found. They need to create an account first before being added to projects.")}}catch(i){return console.error("Unexpected error in inviteByEmail:",i),{data:null,error:i instanceof Error?i:new Error("An unexpected error occurred during invitation")}}}async updateMember(e,t){return this.update(e,t)}async removeMember(e){return this.delete(e)}async getUserRole(e,t){const{data:n,error:s}=await this.client.from(this.table).select("*").eq("project_id",e).eq("user_id",t).single();return{data:n,error:s}}async updateMemberRole(e,t,n){const{data:s,error:i}=await this.client.from(this.table).update({role:n}).eq("project_id",e).eq("user_id",t).select().single();return{data:s,error:i}}async updatePermissions(e,t,n){try{const{data:s,error:i}=await this.client.from(this.table).update({role:t}).eq("id",e).select().single();return i?(console.error("Error updating member permissions:",i),{data:null,error:new Error(`Failed to update permissions: ${i.message}`)}):{data:s,error:null}}catch(s){return console.error("Unexpected error in updatePermissions:",s),{data:null,error:s instanceof Error?s:new Error("An unexpected error occurred during permission update")}}}async removeMemberFromProject(e,t){try{const{error:n}=await this.client.from(this.table).delete().eq("id",e);return n?(console.error("Error removing member:",n),{data:null,error:new Error(`Failed to remove member: ${n.message}`)}):{data:null,error:null}}catch(n){return console.error("Unexpected error in removeMemberFromProject:",n),{data:null,error:n instanceof Error?n:new Error("An unexpected error occurred during member removal")}}}async canManageMembers(e,t){try{const{data:n,error:s}=await this.client.rpc("check_project_access",{p_project_id:e,p_user_id:t}).single();return s?{data:!1,error:new Error(`Failed to check permissions: ${s.message}`)}:{data:(n==null?void 0:n.user_role)==="owner",error:null}}catch(n){return console.error("Unexpected error in canManageMembers:",n),{data:!1,error:n instanceof Error?n:new Error("An unexpected error occurred")}}}async getMemberCount(e){try{const{data:t,error:n}=await this.client.rpc("get_project_members",{p_project_id:e});return n?{data:0,error:new Error(`Failed to get member count: ${n.message}`)}:{data:(t||[]).length,error:null}}catch(t){return console.error("Unexpected error in getMemberCount:",t),{data:0,error:t instanceof Error?t:new Error("An unexpected error occurred")}}}}class mV extends Ya{constructor(e){super(e,"sharing_permissions")}async sendEmailInvitation(e,t,n,s,i,o){var a;try{console.log(`Sending email invitation to ${t} for project ${s}`);const{data:{session:l}}=await this.client.auth.getSession();if(!l)return{data:null,error:new Error("Not authenticated")};const d={projectId:e,email:t,permissions:n,message:i,expiresAt:o==null?void 0:o.toISOString()};console.log("Sending request to Edge Function with payload:",JSON.stringify(d,null,2));try{const u=await fetch(`${this.client.functions.url}/send-invitation-email`,{method:"POST",body:JSON.stringify(d),headers:{Authorization:`Bearer ${l.access_token}`,"Content-Type":"application/json"}}),f=await u.text();let p;try{p=f?JSON.parse(f):null}catch{throw console.error("Failed to parse response as JSON:",f),new Error(`Invalid JSON response: ${f}`)}if(!u.ok){const m={status:u.status,statusText:u.statusText,url:u.url,headers:Object.fromEntries(u.headers.entries()),data:p,responseText:f};console.error("Edge Function returned error:",JSON.stringify(m,null,2));let v=`Request failed with status ${u.status}`;return(a=p==null?void 0:p.error)!=null&&a.message?v=p.error.message:typeof p=="string"?v=p:p&&typeof p=="object"&&(v=JSON.stringify(p)),{data:null,error:new Error(v)}}return{data:p,error:null}}catch(u){return console.error("Error calling Edge Function:",u),{data:null,error:u instanceof Error?u:new Error("Failed to send email invitation")}}return data.success?(console.log("Email invitation sent successfully"),{data:{shareLink:data.shareLink,emailSent:!0},error:null}):{data:null,error:new Error(data.error||"Failed to send email invitation")}}catch(l){return console.error("Error sending email invitation:",l),{data:null,error:l instanceof Error?l:new Error("Failed to send email invitation")}}}async joinProjectByToken(e,t){try{console.log("Starting project join process with token:",e.substring(0,8)+"...");const{data:n,error:s}=await this.client.rpc("join_project_via_token",{share_token_param:e});if(s)return console.error("Error in join_project_via_token:",s),{data:null,error:new Error(s.message||"Failed to join project")};let i;try{i=typeof n=="string"?JSON.parse(n):n}catch(l){return console.error("Error parsing join result:",l),{data:null,error:new Error("Invalid response from join operation")}}if(!i.success)return console.error("Database function returned error:",i.error),{data:null,error:new Error(i.error||"Failed to join project")};console.log("Successfully joined project:",{projectId:i.project_id,memberId:i.member_id,role:i.role});const[o,a]=await Promise.all([this.client.from("projects").select("*").eq("id",i.project_id).single(),this.client.from("project_members").select(`
            *,
            user:users!project_members_user_id_fkey(
              id,
              email,
              name,
              avatar_url,
              created_at,
              updated_at,
              last_active_at
            )
          `).eq("id",i.member_id).single()]);return o.error?(console.error("Error fetching project data:",o.error),{data:null,error:new Error(`Failed to fetch project data: ${o.error.message}`)}):a.error?(console.error("Error fetching member data:",a.error),{data:null,error:new Error(`Failed to fetch member data: ${a.error.message}`)}):(console.log("Successfully fetched complete project and member data"),{data:{member:a.data,project:o.data},error:null})}catch(n){return console.error("Unexpected error in joinProjectByToken:",n),{data:null,error:n instanceof Error?n:new Error("An unexpected error occurred while joining project")}}}async validateShareToken(e){try{console.log("Validating share token:",e.substring(0,8)+"...");const{data:t,error:n}=await this.client.from(this.table).select(`
          *,
          project:projects(
            id,
            name,
            description,
            owner_id,
            is_public
          )
        `).eq("share_token",e).eq("is_active",!0).single();if(console.log("RESULT:",t),n)return n.code==="PGRST116"?(console.log("Share token not found or inactive"),{data:null,error:new Error("Invalid or expired share link")}):(console.error("Error validating share token:",n),{data:null,error:new Error(`Failed to validate share link: ${n.message}`)});if(!t)return console.log("No data returned for share token"),{data:null,error:new Error("Share link not found")};const s=t;return s.expires_at&&new Date(s.expires_at)<new Date?(console.log("Share link has expired:",s.expires_at),{data:null,error:new Error("This share link has expired")}):(console.log("Share token validated successfully:",{projectId:s.project_id,hasExpiry:!!s.expires_at}),{data:s,error:null})}catch(t){return console.error("Unexpected error in validateShareToken:",t),{data:null,error:t instanceof Error?t:new Error("An unexpected error occurred while validating share link")}}}async generateShareableLink(e,t,n,s){try{console.log("Generating shareable link for project:",e,"with permissions:",t);const{data:i,error:o}=await this.client.rpc("generate_secure_token");if(o||!i)return{data:null,error:new Error("Failed to generate secure token")};const a=i,l={project_id:e,share_token:a,role:t,expires_at:s==null?void 0:s.toISOString(),created_by:n,created_at:new Date().toISOString(),is_active:!0},{data:d,error:u}=await this.client.from(this.table).insert([l]).select().single();return u?(console.error("Error creating shareable link:",u),{data:null,error:new Error(`Failed to create shareable link: ${u.message}`)}):(console.log("Shareable link created successfully:",{projectId:e,permissions:t,tokenPrefix:a.substring(0,8)+"..."}),{data:d,error:null})}catch(i){return console.error("Unexpected error in generateShareableLink:",i),{data:null,error:i instanceof Error?i:new Error("An unexpected error occurred while creating share link")}}}async listProjectShareLinks(e,t,n){try{const{page:s=1,per_page:i=10}=n||{},o=(s-1)*i;console.log("Listing share links for project:",e);const{data:a,error:l,count:d}=await this.client.from(this.table).select("*",{count:"exact"}).eq("project_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).range(o,o+i-1);return l?(console.error("Error listing share links:",l),{data:{items:[],total:0,page:s,per_page:i},error:new Error(`Failed to list share links: ${l.message}`)}):(console.log(`Found ${(a==null?void 0:a.length)||0} active share links for project`),{data:{items:a||[],total:d||0,page:s,per_page:i},error:null})}catch(s){return console.error("Unexpected error in listProjectShareLinks:",s),{data:{items:[],total:0,page:1,per_page:10},error:s instanceof Error?s:new Error("An unexpected error occurred")}}}async revokeShareLink(e,t){try{console.log("Revoking share link:",e);const{data:n,error:s}=await this.client.from(this.table).update({is_active:!1}).eq("id",e).select().single();if(s)return console.error("Error revoking share link:",s),{data:null,error:new Error(`Failed to revoke share link: ${s.message}`)};const{data:i,error:o}=await this.client.from("email_invitations").select().eq("share_link_id",e).maybeSingle();if(o)console.error("Email invitation not found:",o);else if(i){const{error:a}=await this.client.from("email_invitations").update({status:"revoked"}).eq("id",i.id);a&&console.error("Error updating email invitation status:",a)}return console.log("Share link revoked successfully"),{data:n,error:null}}catch(n){return console.error("Unexpected error in revokeShareLink:",n),{data:null,error:n instanceof Error?n:new Error("An unexpected error occurred while revoking share link")}}}}class gV extends Ya{constructor(t){super(t,"users");Mr(this,"usersApi");this.usersApi=new rO(t)}async createUser(t){const n=await this.generateUniqueName(t.email.split("@")[0]),s=new Date().toISOString(),o={...{email:t.email,name:n,avatar_url:t.avatar_url,created_at:s,updated_at:s,last_active_at:s},id:t.id};console.log("[DEBUG] Attempting to insert user payload:",o);const{data:a,error:l}=await this.client.from(this.table).insert([o]).select().single();return l&&(console.error("[DEBUG] Supabase insert error:",l,{payload:o}),console.error("Error inserting user:",l,{payload:o}),Gj({title:"User Creation Error",description:l.message||"Failed to create user. Check console for details.",variant:"destructive",duration:1e4})),{data:a,error:l}}async findUserByEmail(t){const{data:n,error:s}=await this.client.from(this.table).select("*").eq("email",t).single();return{data:n,error:s}}async updateLastActive(t){return this.usersApi.updateUser(t,{last_active_at:new Date().toISOString()})}async generateUniqueName(t){let n=t.toLowerCase().replace(/[^a-z0-9]/g,""),s=0,i=!1;for(;!i;){const o=s===0?n:`${n}${s}`,{data:a}=await this.usersApi.getUserByName(o);a?s++:(n=o,i=!0)}return n}async syncOAuthUser(t){if(!(t!=null&&t.id)||!(t!=null&&t.email)){const l=new Error("Invalid OAuth data: Missing required fields");return console.error("OAuth sync failed:",l),{data:null,error:l}}const n=5,s=200;let i=0,o=null,a=null;try{for(;i<n;){const l=await this.client.auth.getSession(),{data:d,error:u}=await this.client.from("users").select("*").eq("id",t.id).single();if(d){o=d;break}a=u,u&&console.error("[syncOAuthUser] getUser error:",u),await new Promise(f=>setTimeout(f,s)),i++}}catch(l){console.error("[syncOAuthUser] Exception in fetch loop:",l)}if(!o){const l=new Error("User row not found after signup. Trigger may have failed or RLS is blocking SELECT.");return console.error("OAuth sync failed:",l,{lastError:a}),{data:null,error:l}}return{data:o,error:null}}}const Uc={client:Nr},nO={usersApi:new rO(Uc),projectsApi:new fV(Uc),projectMembersApi:new pV(Uc),projectFilesApi:new __(Uc),collaborationApi:new mV(Uc),authApi:new gV(Uc),supabase:Nr},sO=S.createContext(null),yV=({children:r})=>g.jsx(sO.Provider,{value:nO,children:r}),Vi=()=>{const r=S.useContext(sO);if(!r)throw new Error("useApi must be used within an ApiProvider");return r},{usersApi:Loe,projectsApi:Foe,projectMembersApi:Boe,projectFilesApi:$oe,collaborationApi:zoe,authApi:Uoe}=nO,iO=S.createContext(void 0),vV=({children:r})=>{const[e,t]=S.useState(null),[n,s]=S.useState(null),[i,o]=S.useState(!0),[a,l]=S.useState(!1),[d,u]=S.useState(!1),[f,p]=S.useState(!1),[m,v]=S.useState(!1),[w,x]=S.useState(!1),[_,C]=S.useState(null),A=m&&!w&&!i&&!!e,{authApi:T,usersApi:P}=Vi(),{toast:O}=qn(),z=()=>C(null);S.useEffect(()=>{if(!e||!e.email)return;const k=Nr.channel("email-invite-listener").on("postgres_changes",{event:"INSERT",schema:"public",table:"email_invitations",filter:`invited_email=eq.${e.email}`},async W=>{var X;const B=(X=W.new)==null?void 0:X.share_link_id;if(!B)return;const{data:I,error:G}=await Nr.from("sharing_permissions").select("share_token").eq("id",B).single(),V=I==null?void 0:I.share_token;O({title:"You've been invited to a project!",description:g.jsxs("span",{children:["Click ",g.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>{V?window.location.href=`/join/${V}`:window.location.href="/joinproject"},children:"here"})," to accept your invitation."]}),duration:1/0})}).subscribe();return()=>{Nr.removeChannel(k)}},[e,O]),S.useEffect(()=>{if(!m||!e){s(null);return}(async()=>{x(!0);try{const{data:W,error:B}=await P.getCurrentUser();if(B||!W){s(null),C("Failed to load user profile. Please refresh the page."),x(!1);return}s({...W,avatar_url:W.avatar_url})}catch(W){console.error("User sync error:",W),C("Failed to sync user data. Please refresh the page.")}finally{x(!1)}})()},[m,e,T]),S.useEffect(()=>{let k=!0;(async()=>{var I;try{const{data:G,error:V}=await Nr.auth.getSession();if(!k)return;V&&(console.error("Error restoring session:",V),C("Failed to restore session")),(I=G==null?void 0:G.session)!=null&&I.user?t(G.session.user):t(null)}catch(G){console.error("Unexpected error during auth initialization:",G),C("Failed to initialize authentication")}finally{k&&(v(!0),o(!1))}})();const{data:{subscription:B}}=Nr.auth.onAuthStateChange(async(I,G)=>{k&&(o(!1),G!=null&&G.user?t(G.user):(t(null),s(null)))});return()=>{k=!1,B.unsubscribe()}},[]);const M=async()=>{try{z(),o(!0);const k=new URL("/auth/callback",window.location.origin).toString(),{data:W,error:B}=await Nr.auth.signInWithOAuth({provider:"google",options:{redirectTo:k,queryParams:{access_type:"offline",prompt:"consent"},scopes:"email profile"}});if(B){const I=B.message||"Failed to sign in with Google";throw C(I),O({title:"Sign in failed",description:I,variant:"destructive"}),B}if(W!=null&&W.url)window.location.href=W.url;else{const I="No redirect URL received from authentication provider";C(I),O({title:"Sign in failed",description:I,variant:"destructive"})}}catch(k){throw console.error("Error signing in with Google:",k),C(k instanceof Error?k.message:"An unknown error occurred"),k}finally{o(!1)}},D=async(k,W)=>{try{z(),u(!0);const{data:B,error:I}=await Nr.auth.signInWithPassword({email:k,password:W});if(I){const G=I.message||"Failed to sign in";throw C(G),O({title:"Sign in failed",description:G,variant:"destructive"}),I}return O({title:"Signed in successfully",description:"Welcome back!"}),B}catch(B){throw console.error("Error signing in with email:",B),C(B instanceof Error?B.message:"An unknown error occurred"),B}finally{u(!1)}},H=async(k,W,B)=>{try{z(),l(!0);const{data:I,error:G}=await Nr.auth.signUp({email:k,password:W,options:{data:{name:B},emailRedirectTo:`${window.location.origin}/dashboard`}});if(G){const V=G.message||"Failed to create account";throw C(V),O({title:"Sign up failed",description:V,variant:"destructive"}),G}return O({title:"Account created!",description:"Please check your email to confirm your account."}),I}catch(I){throw console.error("Error signing up with email:",I),C(I instanceof Error?I.message:"An unknown error occurred"),I}finally{l(!1)}},Z=async k=>{try{z(),o(!0);const W=await fetch("https://imlkffbgjdtcujamsfji.supabase.co//functions/v1/send-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:k})}),B=await W.json();if(!W.ok)throw new Error(B.error||"Failed to send password reset email");O({title:"Password reset email sent",description:"Check your email for instructions to reset your password."})}catch(W){console.error("Error sending password reset:",W);const B=W.message||"Failed to send password reset email";throw C(B),O({title:"Password reset failed",description:B,variant:"destructive"}),W}finally{o(!1)}},R=async()=>{p(!0);try{t(null),s(null),z(),localStorage.setItem("theme","light"),document.documentElement.classList.remove("dark");const{error:k}=await Nr.auth.signOut();if(k)throw k}catch(k){throw console.error("Error signing out:",k),t(null),s(null),k}finally{p(!1)}},U=S.useMemo(()=>({user:e,dbUser:n,isLoading:i,isSigningUp:a,isSigningIn:d,isSigningOut:f,isInitialized:m,isSyncing:w,isReady:A,error:_,signInWithGoogle:M,signInWithEmail:D,signUpWithEmail:H,resetPassword:Z,signOut:R,clearError:z}),[e,n,i,a,d,f,m,w,A,_]);return g.jsx(iO.Provider,{value:U,children:r})};function An(){const r=S.useContext(iO);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}const wV=r=>{let e,t,n;if(r.startsWith("#")){const i=r.replace("#","");e=parseInt(i.substring(0,2),16),t=parseInt(i.substring(2,4),16),n=parseInt(i.substring(4,6),16)}else if(r.startsWith("rgb")){const i=r.match(/\d+/g);if(i&&i.length>=3)e=parseInt(i[0]),t=parseInt(i[1]),n=parseInt(i[2]);else return!0}else return!0;return(.299*e+.587*t+.114*n)/255>.6};function xV(){const[r,e]=S.useState(!0);return S.useEffect(()=>{const t=()=>{try{const s=[document.body,document.documentElement,document.querySelector("main"),document.querySelector(".min-h-screen")];let i=null;for(const o of s)if(o){const l=window.getComputedStyle(o).backgroundColor;if(l&&l!=="rgba(0, 0, 0, 0)"&&l!=="transparent"){i=l;break}}if(!i){const o=window.getComputedStyle(document.body),a=window.getComputedStyle(document.documentElement),l=o.backgroundImage,d=a.backgroundImage;if(l!=="none"&&l.includes("gradient")){e(!l.includes("slate")&&!l.includes("black"));return}if(d!=="none"&&d.includes("gradient")){e(!d.includes("slate")&&!d.includes("black"));return}i="rgb(255, 255, 255)"}e(wV(i))}catch(s){console.error("Error detecting background color:",s),e(!0)}};t();const n=new MutationObserver(()=>{setTimeout(t,100)});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]}),n.observe(document.body,{attributes:!0,attributeFilter:["class","style"]}),window.addEventListener("resize",t),window.addEventListener("scroll",t),()=>{n.disconnect(),window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}},[]),r}const bV=()=>{const r=si(),e=xV(),{user:t,signOut:n}=An(),s=e?"text-gray-900":"text-white",i=e?"text-gray-600":"text-gray-200",o=e?"bg-white":"bg-gray-800",a=e?"text-gray-900":"text-white",l=e?"text-gray-600":"text-gray-300";S.useEffect(()=>{t&&r("/dashboard")},[t,r]);const d=async()=>{try{await n(),r("/")}catch(u){console.error("Error signing out:",u)}};return g.jsxs("div",{className:"min-h-screen dark:bg-gradient-to-br dark:from-slate-900 dark:via-slate-800 dark:to-indigo-900",children:[g.jsx("header",{className:`${e?"bg-white border-gray-200":"bg-slate-900/95 border-slate-700"} backdrop-blur-sm shadow-lg border-b`,children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between items-center h-16",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(po,{className:"h-6 w-6 text-blue-500"}),g.jsx("h1",{className:"text-xl sm:text-2xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent whitespace-nowrap",children:"MocsCode"})]}),g.jsx("div",{className:"flex items-center space-x-4",children:t?g.jsx(tt,{variant:"outline",onClick:d,className:"text-red-600 dark:text-red-500 border-red-300 dark:border-red-500 hover:bg-red-50 dark:hover:bg-red-950/50",children:"Logout"}):g.jsxs(g.Fragment,{children:[g.jsx(tt,{variant:"outline",onClick:()=>r("/signin"),className:`${e?"text-gray-600 border-gray-300 hover:bg-gray-50":"text-slate-300 border-slate-600 hover:bg-slate-700"}`,children:"Sign In"}),g.jsx(tt,{onClick:()=>r("/register"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Register"})]})})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"text-center py-20",children:[g.jsx("h1",{className:`text-5xl font-bold ${s} mb-6`,children:"Code Together, Create Together"}),g.jsx("p",{className:`text-xl ${i} mb-8 max-w-3xl mx-auto`,children:"The ultimate collaborative coding platform for students and developers. Work on projects together in real-time with powerful tools and seamless collaboration."}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[g.jsx(tt,{size:"lg",onClick:()=>r("/register"),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 text-lg",children:"Start Collaborating"}),g.jsx(tt,{variant:"outline",size:"lg",onClick:()=>r("/signin"),className:"text-gray-600 dark:text-slate-300 border-gray-300 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700/50",children:"Sign In"})]})]}),g.jsxs("div",{className:"py-20",children:[g.jsx("h2",{className:`text-3xl font-bold text-center ${s} mb-12`,children:"Why Choose MocsCode?"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[g.jsxs(It,{className:`p-8 text-center ${o} rounded-xl shadow-sm hover:shadow-md transition-shadow`,children:[g.jsx(po,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),g.jsx("h3",{className:`text-xl font-semibold ${a} mb-3`,children:"Multi-Language Support"}),g.jsx("p",{className:l,children:"Code in Java, Python, JavaScript, C, C++, and C# with full syntax highlighting and error detection."})]}),g.jsxs(It,{className:`p-8 text-center ${o} rounded-xl shadow-sm hover:shadow-md transition-shadow`,children:[g.jsx(Vh,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),g.jsx("h3",{className:`text-xl font-semibold ${a} mb-3`,children:"Real-time Collaboration"}),g.jsx("p",{className:l,children:"Work together with your team in real-time. See changes instantly and communicate seamlessly."})]}),g.jsxs(It,{className:`p-8 text-center ${o} rounded-xl shadow-sm hover:shadow-md transition-shadow`,children:[g.jsx(SP,{className:"h-12 w-12 text-purple-500 mx-auto mb-4"}),g.jsx("h3",{className:`text-xl font-semibold ${a} mb-3`,children:"Project Management"}),g.jsx("p",{className:l,children:"Import and export projects seamlessly. Track usage and view detailed statistics for all your coding projects."})]})]})]}),g.jsx("div",{className:"py-20 text-center",children:g.jsxs(It,{className:"p-12 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl",children:[g.jsx(BB,{className:"h-16 w-16 mx-auto mb-6"}),g.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Start Coding?"}),g.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of developers already collaborating on MocsCode"}),g.jsx(tt,{size:"lg",onClick:()=>r("/register"),className:"bg-white text-blue-600 hover:bg-gray-100 px-8 py-4 text-lg",children:"Create Free Account"})]})})]}),g.jsx("footer",{className:"bg-slate-900 text-white py-12",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[g.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[g.jsx(po,{className:"h-6 w-6"}),g.jsx("span",{className:"text-lg font-semibold",children:"MocsCode"})]}),g.jsxs("p",{className:"text-slate-400",children:[" ",new Date().getFullYear()," MocsCode. Empowering collaborative development."]})]})})]})};async function _V({zipFile:r,projectName:e,userId:t,projectsApi:n,projectFilesApi:s,onProgress:i,isPublic:o=!1,description:a="",language:l="JavaScript"}){const{data:d,error:u}=await n.listUserProjects(t);if(u)return{project:null,error:u};const f=e.trim().toLowerCase();if(d!=null&&d.items.some(P=>P.name.trim().toLowerCase()===f))return{project:null,error:new Error("A project with this name already exists.")};const{data:p,error:m}=await n.createProject({name:e,description:a,owner_id:t,is_public:o,language:l});if(m||!p)return{project:null,error:m||new Error("Failed to create project")};const v=await b_.loadAsync(r),w=Object.values(v.files),x=w.length;let _=0;const C=w.map(P=>P.name.split("/").filter(Boolean)[0]).filter(Boolean),A=C.length>0&&C.every(P=>P===C[0])?C[0]:"",T={"":null};for(const P of w){let O=P.name;if(A&&O.startsWith(A+"/"))O=O.slice(A.length+1);else if(A&&O===A)continue;const z=O.replace(/\/$/,"");if(!z)continue;const M=z.split("/"),D=M[M.length-1],H=M.slice(0,-1).join("/");if(P.dir){const{data:Z,error:R}=await s.createFile({project_id:p.id,name:D,path:O,file_type:"directory",mime_type:void 0,size_bytes:0,parent_id:T[H]||null,content:void 0,created_by:t});if(R)return{project:p,error:R};T[z]=(Z==null?void 0:Z.id)||null}else{const Z=await P.async("string"),{data:R,error:U}=await s.createFile({project_id:p.id,name:D,path:O,file_type:"file",mime_type:void 0,size_bytes:Z.length,parent_id:T[H]||null,content:Z,created_by:t});if(U)return{project:p,error:U}}_++,i&&i(Math.round(_/x*100))}return{project:p,error:null}}const kV=Ff("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _o({className:r,variant:e,...t}){return g.jsx("div",{className:Ye(kV({variant:e}),r),...t})}const SV=r=>({Java:"bg-orange-100 dark:bg-orange-500/20 text-orange-800 dark:text-orange-200 border border-orange-200 dark:border-orange-500/30",JavaScript:"bg-yellow-100 dark:bg-yellow-500/20 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-500/30",Python:"bg-blue-100 dark:bg-blue-500/20 text-blue-800 dark:text-blue-200 border border-blue-200 dark:border-blue-500/30",C:"bg-gray-100 dark:bg-gray-500/20 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-500/30","C++":"bg-purple-100 dark:bg-purple-500/20 text-purple-800 dark:text-purple-200 border border-purple-200 dark:border-purple-500/30","C#":"bg-green-100 dark:bg-green-500/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-500/30"})[r]||"bg-gray-100 text-gray-800",CV=({project:r,onOpen:e,onDelete:t,onLeave:n,isDeleting:s=!1,currentDeletingId:i=null,isLeaving:o=!1,currentLeavingId:a=null})=>{const[l,d]=S.useState(!1),u=async w=>{w.stopPropagation(),t&&window.confirm(`Are you sure you want to delete "${r.name}"? This action cannot be undone.`)&&await t(r.id)},f=async w=>{w.stopPropagation(),n&&window.confirm(`Are you sure you want to leave "${r.name}"?`)&&await n(r.id)},p=Array.isArray(r.collaborator_avatars)&&r.collaborator_avatars.length>0,m=p?r.collaborator_avatars.slice(0,3):[],v=p?Math.max(0,r.collaborator_avatars.length-3):0;return g.jsxs(It,{className:"p-6 bg-card/90 dark:bg-card/80 text-card-foreground rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 cursor-pointer border border-border/50 hover:border-primary/50 flex flex-col min-h-[200px] relative group backdrop-blur-sm dark:backdrop-blur-sm",onClick:()=>e(r),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),tabIndex:0,"aria-label":`Project: ${r.name}`,role:"button",onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&e(r)},children:[g.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[n&&!r.is_owner&&g.jsx(tt,{variant:"ghost",size:"sm",className:`h-8 px-2 text-xs rounded-full opacity-0 group-hover:opacity-100 transition-opacity ${o&&a===r.id?"opacity-100":""}`,onClick:f,disabled:o&&a===r.id,"aria-label":`Leave project ${r.name}`,children:o&&a===r.id?g.jsx(Zt,{className:"h-3 w-3 mr-1 animate-spin"}):"Leave"}),r.is_owner&&t&&g.jsx(tt,{variant:"ghost",size:"icon",className:`h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity ${s&&i===r.id?"opacity-100":""}`,onClick:u,disabled:s&&i===r.id,"aria-label":`Delete project ${r.name}`,children:s&&i===r.id?g.jsx(Zt,{className:"h-4 w-4 animate-spin"}):g.jsx(zh,{className:"h-4 w-4 text-red-500 hover:text-red-600"})})]}),g.jsxs("div",{className:"flex justify-between items-start mb-4",children:[g.jsx("h4",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1 leading-tight line-clamp-2",children:r.name}),r.is_owner&&g.jsx(_o,{variant:"secondary",className:"text-xs",children:"Owner"})]}),r.description&&g.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:r.description}),g.jsxs("div",{className:"space-y-3 mt-auto",children:[g.jsx(_o,{className:`${SV(r.language)} text-xs font-medium`,children:r.language}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex items-center space-x-2",children:p?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex -space-x-1",children:[m.map(w=>g.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium text-white border-2 border-white shadow-sm hover:shadow-md transition-shadow",style:{backgroundColor:w.color,cursor:"help"},title:w.name||`User ${w.initials}`,"aria-label":`Avatar for ${w.name||w.email||"user"}`,children:w.initials},w.id)),v>0&&g.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-xs font-medium text-gray-600 dark:text-gray-300 border-2 border-white shadow-sm",title:`${v} more collaborator${v>1?"s":""}`,children:["+",v]})]}),g.jsxs("span",{className:"text-sm text-gray-500",children:[r.collaborators," collaborator",r.collaborators!==1?"s":""]})]}):g.jsx("div",{className:"text-sm text-gray-500"})}),g.jsxs("div",{className:"flex items-center space-x-1",children:[g.jsx(kP,{className:"h-4 w-4 text-gray-400"}),g.jsx("span",{className:"text-sm text-gray-500",children:r.last_modified})]})]})]})]})};var zw="focusScope.autoFocusOnMount",Uw="focusScope.autoFocusOnUnmount",YA={bubbles:!1,cancelable:!0},EV="FocusScope",Uf=S.forwardRef((r,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=r,[a,l]=S.useState(null),d=Xr(s),u=Xr(i),f=S.useRef(null),p=Pt(e,w=>l(w)),m=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(n){let w=function(A){if(m.paused||!a)return;const T=A.target;a.contains(T)?f.current=T:ia(f.current,{select:!0})},x=function(A){if(m.paused||!a)return;const T=A.relatedTarget;T!==null&&(a.contains(T)||ia(f.current,{select:!0}))},_=function(A){if(document.activeElement===document.body)for(const P of A)P.removedNodes.length>0&&ia(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",x);const C=new MutationObserver(_);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",x),C.disconnect()}}},[n,a,m.paused]),S.useEffect(()=>{if(a){ZA.add(m);const w=document.activeElement;if(!a.contains(w)){const _=new CustomEvent(zw,YA);a.addEventListener(zw,d),a.dispatchEvent(_),_.defaultPrevented||(AV(RV(oO(a)),{select:!0}),document.activeElement===w&&ia(a))}return()=>{a.removeEventListener(zw,d),setTimeout(()=>{const _=new CustomEvent(Uw,YA);a.addEventListener(Uw,u),a.dispatchEvent(_),_.defaultPrevented||ia(w??document.body,{select:!0}),a.removeEventListener(Uw,u),ZA.remove(m)},0)}}},[a,d,u,m]);const v=S.useCallback(w=>{if(!t&&!n||m.paused)return;const x=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,_=document.activeElement;if(x&&_){const C=w.currentTarget,[A,T]=TV(C);A&&T?!w.shiftKey&&_===T?(w.preventDefault(),t&&ia(A,{select:!0})):w.shiftKey&&_===A&&(w.preventDefault(),t&&ia(T,{select:!0})):_===C&&w.preventDefault()}},[t,n,m.paused]);return g.jsx(at.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});Uf.displayName=EV;function AV(r,{select:e=!1}={}){const t=document.activeElement;for(const n of r)if(ia(n,{select:e}),document.activeElement!==t)return}function TV(r){const e=oO(r),t=JA(e,r),n=JA(e.reverse(),r);return[t,n]}function oO(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function JA(r,e){for(const t of r)if(!NV(t,{upTo:e}))return t}function NV(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function jV(r){return r instanceof HTMLInputElement&&"select"in r}function ia(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&jV(r)&&e&&r.select()}}var ZA=PV();function PV(){let r=[];return{add(e){const t=r[0];e!==t&&(t==null||t.pause()),r=XA(r,e),r.unshift(e)},remove(e){var t;r=XA(r,e),(t=r[0])==null||t.resume()}}}function XA(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function RV(r){return r.filter(e=>e.tagName!=="A")}var Vw=0;function X0(){S.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??QA()),document.body.insertAdjacentElement("beforeend",r[1]??QA()),Vw++,()=>{Vw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vw--}},[])}function QA(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var ki=function(){return ki=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ki.apply(this,arguments)};function aO(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function OV(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var sg="right-scroll-bar-position",ig="width-before-scroll-bar",MV="with-scroll-bars-hidden",DV="--removed-body-scroll-bar-size";function Ww(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function IV(r,e){var t=S.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var LV=typeof window<"u"?S.useLayoutEffect:S.useEffect,eT=new WeakMap;function FV(r,e){var t=IV(null,function(n){return r.forEach(function(s){return Ww(s,n)})});return LV(function(){var n=eT.get(t);if(n){var s=new Set(n),i=new Set(r),o=t.current;s.forEach(function(a){i.has(a)||Ww(a,null)}),i.forEach(function(a){s.has(a)||Ww(a,o)})}eT.set(t,r)},[r]),t}function BV(r){return r}function $V(r,e){e===void 0&&(e=BV);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(i){var o=e(i,n);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){n=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(l)};d(),t={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),t}}}};return s}function zV(r){r===void 0&&(r={});var e=$V(null);return e.options=ki({async:!0,ssr:!1},r),e}var lO=function(r){var e=r.sideCar,t=aO(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,ki({},t))};lO.isSideCarExport=!0;function UV(r,e){return r.useMedium(e),lO}var cO=zV(),Hw=function(){},Q0=S.forwardRef(function(r,e){var t=S.useRef(null),n=S.useState({onScrollCapture:Hw,onWheelCapture:Hw,onTouchMoveCapture:Hw}),s=n[0],i=n[1],o=r.forwardProps,a=r.children,l=r.className,d=r.removeScrollBar,u=r.enabled,f=r.shards,p=r.sideCar,m=r.noIsolation,v=r.inert,w=r.allowPinchZoom,x=r.as,_=x===void 0?"div":x,C=r.gapMode,A=aO(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=p,P=FV([t,e]),O=ki(ki({},A),s);return S.createElement(S.Fragment,null,u&&S.createElement(T,{sideCar:cO,removeScrollBar:d,shards:f,noIsolation:m,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:C}),o?S.cloneElement(S.Children.only(a),ki(ki({},O),{ref:P})):S.createElement(_,ki({},O,{className:l,ref:P}),a))});Q0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Q0.classNames={fullWidth:ig,zeroRight:sg};var VV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WV(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=VV();return e&&r.setAttribute("nonce",e),r}function HV(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function qV(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var KV=function(){var r=0,e=null;return{add:function(t){r==0&&(e=WV())&&(HV(e,t),qV(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},GV=function(){var r=KV();return function(e,t){S.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},uO=function(){var r=GV(),e=function(t){var n=t.styles,s=t.dynamic;return r(n,s),null};return e},YV={left:0,top:0,right:0,gap:0},qw=function(r){return parseInt(r||"",10)||0},JV=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],n=e[r==="padding"?"paddingTop":"marginTop"],s=e[r==="padding"?"paddingRight":"marginRight"];return[qw(t),qw(n),qw(s)]},ZV=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return YV;var e=JV(r),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},XV=uO(),lu="data-scroll-locked",QV=function(r,e,t,n){var s=r.left,i=r.top,o=r.right,a=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(MV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(lu,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sg,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(ig,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(sg," .").concat(sg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ig," .").concat(ig,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(lu,`] {
    `).concat(DV,": ").concat(a,`px;
  }
`)},tT=function(){var r=parseInt(document.body.getAttribute(lu)||"0",10);return isFinite(r)?r:0},eW=function(){S.useEffect(function(){return document.body.setAttribute(lu,(tT()+1).toString()),function(){var r=tT()-1;r<=0?document.body.removeAttribute(lu):document.body.setAttribute(lu,r.toString())}},[])},tW=function(r){var e=r.noRelative,t=r.noImportant,n=r.gapMode,s=n===void 0?"margin":n;eW();var i=S.useMemo(function(){return ZV(s)},[s]);return S.createElement(XV,{styles:QV(i,!e,s,t?"":"!important")})},cb=!1;if(typeof window<"u")try{var Em=Object.defineProperty({},"passive",{get:function(){return cb=!0,!0}});window.addEventListener("test",Em,Em),window.removeEventListener("test",Em,Em)}catch{cb=!1}var Vc=cb?{passive:!1}:!1,rW=function(r){return r.tagName==="TEXTAREA"},dO=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!rW(r)&&t[e]==="visible")},nW=function(r){return dO(r,"overflowY")},sW=function(r){return dO(r,"overflowX")},rT=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=hO(r,n);if(s){var i=fO(r,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},iW=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},oW=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},hO=function(r,e){return r==="v"?nW(e):sW(e)},fO=function(r,e){return r==="v"?iW(e):oW(e)},aW=function(r,e){return r==="h"&&e==="rtl"?-1:1},lW=function(r,e,t,n,s){var i=aW(r,window.getComputedStyle(e).direction),o=i*n,a=t.target,l=e.contains(a),d=!1,u=o>0,f=0,p=0;do{var m=fO(r,a),v=m[0],w=m[1],x=m[2],_=w-x-i*v;(v||_)&&hO(r,a)&&(f+=_,p+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(p)<1)&&(d=!0),d},Am=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},nT=function(r){return[r.deltaX,r.deltaY]},sT=function(r){return r&&"current"in r?r.current:r},cW=function(r,e){return r[0]===e[0]&&r[1]===e[1]},uW=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},dW=0,Wc=[];function hW(r){var e=S.useRef([]),t=S.useRef([0,0]),n=S.useRef(),s=S.useState(dW++)[0],i=S.useState(uO)[0],o=S.useRef(r);S.useEffect(function(){o.current=r},[r]),S.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(s));var w=OV([r.lockRef.current],(r.shards||[]).map(sT),!0).filter(Boolean);return w.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[r.inert,r.lockRef.current,r.shards]);var a=S.useCallback(function(w,x){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var _=Am(w),C=t.current,A="deltaX"in w?w.deltaX:C[0]-_[0],T="deltaY"in w?w.deltaY:C[1]-_[1],P,O=w.target,z=Math.abs(A)>Math.abs(T)?"h":"v";if("touches"in w&&z==="h"&&O.type==="range")return!1;var M=rT(z,O);if(!M)return!0;if(M?P=z:(P=z==="v"?"h":"v",M=rT(z,O)),!M)return!1;if(!n.current&&"changedTouches"in w&&(A||T)&&(n.current=P),!P)return!0;var D=n.current||P;return lW(D,x,w,D==="h"?A:T)},[]),l=S.useCallback(function(w){var x=w;if(!(!Wc.length||Wc[Wc.length-1]!==i)){var _="deltaY"in x?nT(x):Am(x),C=e.current.filter(function(P){return P.name===x.type&&(P.target===x.target||x.target===P.shadowParent)&&cW(P.delta,_)})[0];if(C&&C.should){x.cancelable&&x.preventDefault();return}if(!C){var A=(o.current.shards||[]).map(sT).filter(Boolean).filter(function(P){return P.contains(x.target)}),T=A.length>0?a(x,A[0]):!o.current.noIsolation;T&&x.cancelable&&x.preventDefault()}}},[]),d=S.useCallback(function(w,x,_,C){var A={name:w,delta:x,target:_,should:C,shadowParent:fW(_)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(T){return T!==A})},1)},[]),u=S.useCallback(function(w){t.current=Am(w),n.current=void 0},[]),f=S.useCallback(function(w){d(w.type,nT(w),w.target,a(w,r.lockRef.current))},[]),p=S.useCallback(function(w){d(w.type,Am(w),w.target,a(w,r.lockRef.current))},[]);S.useEffect(function(){return Wc.push(i),r.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Vc),document.addEventListener("touchmove",l,Vc),document.addEventListener("touchstart",u,Vc),function(){Wc=Wc.filter(function(w){return w!==i}),document.removeEventListener("wheel",l,Vc),document.removeEventListener("touchmove",l,Vc),document.removeEventListener("touchstart",u,Vc)}},[]);var m=r.removeScrollBar,v=r.inert;return S.createElement(S.Fragment,null,v?S.createElement(i,{styles:uW(s)}):null,m?S.createElement(tW,{gapMode:r.gapMode}):null)}function fW(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const pW=UV(cO,hW);var Vf=S.forwardRef(function(r,e){return S.createElement(Q0,ki({},r,{ref:e,sideCar:pW}))});Vf.classNames=Q0.classNames;var mW=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},Hc=new WeakMap,Tm=new WeakMap,Nm={},Kw=0,pO=function(r){return r&&(r.host||pO(r.parentNode))},gW=function(r,e){return e.map(function(t){if(r.contains(t))return t;var n=pO(t);return n&&r.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},yW=function(r,e,t,n){var s=gW(e,Array.isArray(r)?r:[r]);Nm[t]||(Nm[t]=new WeakMap);var i=Nm[t],o=[],a=new Set,l=new Set(s),d=function(f){!f||a.has(f)||(a.add(f),d(f.parentNode))};s.forEach(d);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(n),v=m!==null&&m!=="false",w=(Hc.get(p)||0)+1,x=(i.get(p)||0)+1;Hc.set(p,w),i.set(p,x),o.push(p),w===1&&v&&Tm.set(p,!0),x===1&&p.setAttribute(t,"true"),v||p.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return u(e),a.clear(),Kw++,function(){o.forEach(function(f){var p=Hc.get(f)-1,m=i.get(f)-1;Hc.set(f,p),i.set(f,m),p||(Tm.has(f)||f.removeAttribute(n),Tm.delete(f)),m||f.removeAttribute(t)}),Kw--,Kw||(Hc=new WeakMap,Hc=new WeakMap,Tm=new WeakMap,Nm={})}},ey=function(r,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),s=mW(r);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),yW(n,s,t,"aria-hidden")):function(){return null}},k_="Dialog",[mO,gO]=ni(k_),[vW,ii]=mO(k_),yO=r=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=r,a=S.useRef(null),l=S.useRef(null),[d=!1,u]=wo({prop:n,defaultProp:s,onChange:i});return g.jsx(vW,{scope:e,triggerRef:a,contentRef:l,contentId:Ys(),titleId:Ys(),descriptionId:Ys(),open:d,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(f=>!f),[u]),modal:o,children:t})};yO.displayName=k_;var vO="DialogTrigger",wO=S.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=ii(vO,t),i=Pt(e,s.triggerRef);return g.jsx(at.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":E_(s.open),...n,ref:i,onClick:Le(r.onClick,s.onOpenToggle)})});wO.displayName=vO;var S_="DialogPortal",[wW,xO]=mO(S_,{forceMount:void 0}),bO=r=>{const{__scopeDialog:e,forceMount:t,children:n,container:s}=r,i=ii(S_,e);return g.jsx(wW,{scope:e,forceMount:t,children:S.Children.map(n,o=>g.jsx(as,{present:t||i.open,children:g.jsx(Xu,{asChild:!0,container:s,children:o})}))})};bO.displayName=S_;var Lg="DialogOverlay",_O=S.forwardRef((r,e)=>{const t=xO(Lg,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,i=ii(Lg,r.__scopeDialog);return i.modal?g.jsx(as,{present:n||i.open,children:g.jsx(xW,{...s,ref:e})}):null});_O.displayName=Lg;var xW=S.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=ii(Lg,t);return g.jsx(Vf,{as:Mi,allowPinchZoom:!0,shards:[s.contentRef],children:g.jsx(at.div,{"data-state":E_(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),$l="DialogContent",kO=S.forwardRef((r,e)=>{const t=xO($l,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,i=ii($l,r.__scopeDialog);return g.jsx(as,{present:n||i.open,children:i.modal?g.jsx(bW,{...s,ref:e}):g.jsx(_W,{...s,ref:e})})});kO.displayName=$l;var bW=S.forwardRef((r,e)=>{const t=ii($l,r.__scopeDialog),n=S.useRef(null),s=Pt(e,t.contentRef,n);return S.useEffect(()=>{const i=n.current;if(i)return ey(i)},[]),g.jsx(SO,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(r.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Le(r.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Le(r.onFocusOutside,i=>i.preventDefault())})}),_W=S.forwardRef((r,e)=>{const t=ii($l,r.__scopeDialog),n=S.useRef(!1),s=S.useRef(!1);return g.jsx(SO,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=r.onCloseAutoFocus)==null||o.call(r,i),i.defaultPrevented||(n.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var l,d;(l=r.onInteractOutside)==null||l.call(r,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),SO=S.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=r,a=ii($l,t),l=S.useRef(null),d=Pt(e,l);return X0(),g.jsxs(g.Fragment,{children:[g.jsx(Uf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:g.jsx(Ql,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":E_(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(SW,{titleId:a.titleId}),g.jsx(EW,{contentRef:l,descriptionId:a.descriptionId})]})]})}),C_="DialogTitle",CO=S.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=ii(C_,t);return g.jsx(at.h2,{id:s.titleId,...n,ref:e})});CO.displayName=C_;var EO="DialogDescription",AO=S.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=ii(EO,t);return g.jsx(at.p,{id:s.descriptionId,...n,ref:e})});AO.displayName=EO;var TO="DialogClose",NO=S.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=ii(TO,t);return g.jsx(at.button,{type:"button",...n,ref:e,onClick:Le(r.onClick,()=>s.onOpenChange(!1))})});NO.displayName=TO;function E_(r){return r?"open":"closed"}var jO="DialogTitleWarning",[kW,PO]=R6(jO,{contentName:$l,titleName:C_,docsSlug:"dialog"}),SW=({titleId:r})=>{const e=PO(jO),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{r&&(document.getElementById(r)||console.error(t))},[t,r]),null},CW="DialogDescriptionWarning",EW=({contentRef:r,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PO(CW).contentName}}.`;return S.useEffect(()=>{var i;const s=(i=r.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,r,e]),null},RO=yO,AW=wO,OO=bO,A_=_O,T_=kO,N_=CO,j_=AO,P_=NO;const Zh=RO,TW=OO,MO=S.forwardRef(({className:r,...e},t)=>g.jsx(A_,{ref:t,className:Ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));MO.displayName=A_.displayName;const Ru=S.forwardRef(({className:r,children:e,...t},n)=>g.jsxs(TW,{children:[g.jsx(MO,{}),g.jsxs(T_,{ref:n,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,g.jsxs(P_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(Qu,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ru.displayName=T_.displayName;const Ou=({className:r,...e})=>g.jsx("div",{className:Ye("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Ou.displayName="DialogHeader";const DO=({className:r,...e})=>g.jsx("div",{className:Ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});DO.displayName="DialogFooter";const Mu=S.forwardRef(({className:r,...e},t)=>g.jsx(N_,{ref:t,className:Ye("text-lg font-semibold leading-none tracking-tight",r),...e}));Mu.displayName=N_.displayName;const Fg=S.forwardRef(({className:r,...e},t)=>g.jsx(j_,{ref:t,className:Ye("text-sm text-muted-foreground",r),...e}));Fg.displayName=j_.displayName;const _n=S.forwardRef(({className:r,type:e,...t},n)=>g.jsx("input",{type:e,className:Ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));_n.displayName="Input";var NW=S.createContext(void 0);function ty(r){const e=S.useContext(NW);return r||e||"ltr"}function jW(r,e=[]){let t=[];function n(i,o){const a=S.createContext(o),l=t.length;t=[...t,o];function d(f){const{scope:p,children:m,...v}=f,w=(p==null?void 0:p[r][l])||a,x=S.useMemo(()=>v,Object.values(v));return g.jsx(w.Provider,{value:x,children:m})}function u(f,p){const m=(p==null?void 0:p[r][l])||a,v=S.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const s=()=>{const i=t.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return S.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,PW(s,...e)]}function PW(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:d})=>{const f=l(i)[`__scope${d}`];return{...a,...f}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Gw="rovingFocusGroup.onEntryFocus",RW={bubbles:!1,cancelable:!0},ry="RovingFocusGroup",[ub,IO,OW]=F0(ry),[MW,ny]=jW(ry,[OW]),[DW,IW]=MW(ry),LO=S.forwardRef((r,e)=>g.jsx(ub.Provider,{scope:r.__scopeRovingFocusGroup,children:g.jsx(ub.Slot,{scope:r.__scopeRovingFocusGroup,children:g.jsx(LW,{...r,ref:e})})}));LO.displayName=ry;var LW=S.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=r,p=S.useRef(null),m=Pt(e,p),v=ty(i),[w=null,x]=wo({prop:o,defaultProp:a,onChange:l}),[_,C]=S.useState(!1),A=Xr(d),T=IO(t),P=S.useRef(!1),[O,z]=S.useState(0);return S.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(Gw,A),()=>M.removeEventListener(Gw,A)},[A]),g.jsx(DW,{scope:t,orientation:n,dir:v,loop:s,currentTabStopId:w,onItemFocus:S.useCallback(M=>x(M),[x]),onItemShiftTab:S.useCallback(()=>C(!0),[]),onFocusableItemAdd:S.useCallback(()=>z(M=>M+1),[]),onFocusableItemRemove:S.useCallback(()=>z(M=>M-1),[]),children:g.jsx(at.div,{tabIndex:_||O===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...r.style},onMouseDown:Le(r.onMouseDown,()=>{P.current=!0}),onFocus:Le(r.onFocus,M=>{const D=!P.current;if(M.target===M.currentTarget&&D&&!_){const H=new CustomEvent(Gw,RW);if(M.currentTarget.dispatchEvent(H),!H.defaultPrevented){const Z=T().filter(B=>B.focusable),R=Z.find(B=>B.active),U=Z.find(B=>B.id===w),W=[R,U,...Z].filter(Boolean).map(B=>B.ref.current);$O(W,u)}}P.current=!1}),onBlur:Le(r.onBlur,()=>C(!1))})})}),FO="RovingFocusGroupItem",BO=S.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:s=!1,tabStopId:i,...o}=r,a=Ys(),l=i||a,d=IW(FO,t),u=d.currentTabStopId===l,f=IO(t),{onFocusableItemAdd:p,onFocusableItemRemove:m}=d;return S.useEffect(()=>{if(n)return p(),()=>m()},[n,p,m]),g.jsx(ub.ItemSlot,{scope:t,id:l,focusable:n,active:s,children:g.jsx(at.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:Le(r.onMouseDown,v=>{n?d.onItemFocus(l):v.preventDefault()}),onFocus:Le(r.onFocus,()=>d.onItemFocus(l)),onKeyDown:Le(r.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=$W(v,d.orientation,d.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let _=f().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")_.reverse();else if(w==="prev"||w==="next"){w==="prev"&&_.reverse();const C=_.indexOf(v.currentTarget);_=d.loop?zW(_,C+1):_.slice(C+1)}setTimeout(()=>$O(_))}})})})});BO.displayName=FO;var FW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BW(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function $W(r,e,t){const n=BW(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return FW[n]}function $O(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function zW(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var zO=LO,UO=BO,db=["Enter"," "],UW=["ArrowDown","PageUp","Home"],VO=["ArrowUp","PageDown","End"],VW=[...UW,...VO],WW={ltr:[...db,"ArrowRight"],rtl:[...db,"ArrowLeft"]},HW={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wf="Menu",[Xh,qW,KW]=F0(Wf),[tc,WO]=ni(Wf,[KW,qa,ny]),sy=qa(),HO=ny(),[GW,rc]=tc(Wf),[YW,Hf]=tc(Wf),qO=r=>{const{__scopeMenu:e,open:t=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=r,a=sy(e),[l,d]=S.useState(null),u=S.useRef(!1),f=Xr(i),p=ty(s);return S.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),g.jsx(o_,{...a,children:g.jsx(GW,{scope:e,open:t,onOpenChange:f,content:l,onContentChange:d,children:g.jsx(YW,{scope:e,onClose:S.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:p,modal:o,children:n})})})};qO.displayName=Wf;var JW="MenuAnchor",R_=S.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,s=sy(t);return g.jsx($f,{...s,...n,ref:e})});R_.displayName=JW;var O_="MenuPortal",[ZW,KO]=tc(O_,{forceMount:void 0}),GO=r=>{const{__scopeMenu:e,forceMount:t,children:n,container:s}=r,i=rc(O_,e);return g.jsx(ZW,{scope:e,forceMount:t,children:g.jsx(as,{present:t||i.open,children:g.jsx(Xu,{asChild:!0,container:s,children:n})})})};GO.displayName=O_;var As="MenuContent",[XW,M_]=tc(As),YO=S.forwardRef((r,e)=>{const t=KO(As,r.__scopeMenu),{forceMount:n=t.forceMount,...s}=r,i=rc(As,r.__scopeMenu),o=Hf(As,r.__scopeMenu);return g.jsx(Xh.Provider,{scope:r.__scopeMenu,children:g.jsx(as,{present:n||i.open,children:g.jsx(Xh.Slot,{scope:r.__scopeMenu,children:o.modal?g.jsx(QW,{...s,ref:e}):g.jsx(eH,{...s,ref:e})})})})}),QW=S.forwardRef((r,e)=>{const t=rc(As,r.__scopeMenu),n=S.useRef(null),s=Pt(e,n);return S.useEffect(()=>{const i=n.current;if(i)return ey(i)},[]),g.jsx(D_,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Le(r.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),eH=S.forwardRef((r,e)=>{const t=rc(As,r.__scopeMenu);return g.jsx(D_,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),D_=S.forwardRef((r,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:v,...w}=r,x=rc(As,t),_=Hf(As,t),C=sy(t),A=HO(t),T=qW(t),[P,O]=S.useState(null),z=S.useRef(null),M=Pt(e,z,x.onContentChange),D=S.useRef(0),H=S.useRef(""),Z=S.useRef(0),R=S.useRef(null),U=S.useRef("right"),k=S.useRef(0),W=v?Vf:S.Fragment,B=v?{as:Mi,allowPinchZoom:!0}:void 0,I=V=>{var ve,he;const X=H.current+V,F=T().filter(xe=>!xe.disabled),q=document.activeElement,oe=(ve=F.find(xe=>xe.ref.current===q))==null?void 0:ve.textValue,re=F.map(xe=>xe.textValue),ee=hH(re,X,oe),ye=(he=F.find(xe=>xe.textValue===ee))==null?void 0:he.ref.current;(function xe(Ce){H.current=Ce,window.clearTimeout(D.current),Ce!==""&&(D.current=window.setTimeout(()=>xe(""),1e3))})(X),ye&&setTimeout(()=>ye.focus())};S.useEffect(()=>()=>window.clearTimeout(D.current),[]),X0();const G=S.useCallback(V=>{var F,q;return U.current===((F=R.current)==null?void 0:F.side)&&pH(V,(q=R.current)==null?void 0:q.area)},[]);return g.jsx(XW,{scope:t,searchRef:H,onItemEnter:S.useCallback(V=>{G(V)&&V.preventDefault()},[G]),onItemLeave:S.useCallback(V=>{var X;G(V)||((X=z.current)==null||X.focus(),O(null))},[G]),onTriggerLeave:S.useCallback(V=>{G(V)&&V.preventDefault()},[G]),pointerGraceTimerRef:Z,onPointerGraceIntentChange:S.useCallback(V=>{R.current=V},[]),children:g.jsx(W,{...B,children:g.jsx(Uf,{asChild:!0,trapped:s,onMountAutoFocus:Le(i,V=>{var X;V.preventDefault(),(X=z.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:g.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:g.jsx(zO,{asChild:!0,...A,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:P,onCurrentTabStopIdChange:O,onEntryFocus:Le(l,V=>{_.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(W0,{role:"menu","aria-orientation":"vertical","data-state":dM(x.open),"data-radix-menu-content":"",dir:_.dir,...C,...w,ref:M,style:{outline:"none",...w.style},onKeyDown:Le(w.onKeyDown,V=>{const F=V.target.closest("[data-radix-menu-content]")===V.currentTarget,q=V.ctrlKey||V.altKey||V.metaKey,oe=V.key.length===1;F&&(V.key==="Tab"&&V.preventDefault(),!q&&oe&&I(V.key));const re=z.current;if(V.target!==re||!VW.includes(V.key))return;V.preventDefault();const ye=T().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);VO.includes(V.key)&&ye.reverse(),uH(ye)}),onBlur:Le(r.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(D.current),H.current="")}),onPointerMove:Le(r.onPointerMove,Qh(V=>{const X=V.target,F=k.current!==V.clientX;if(V.currentTarget.contains(X)&&F){const q=V.clientX>k.current?"right":"left";U.current=q,k.current=V.clientX}}))})})})})})})});YO.displayName=As;var tH="MenuGroup",I_=S.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return g.jsx(at.div,{role:"group",...n,ref:e})});I_.displayName=tH;var rH="MenuLabel",JO=S.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return g.jsx(at.div,{...n,ref:e})});JO.displayName=rH;var Bg="MenuItem",iT="menu.itemSelect",iy=S.forwardRef((r,e)=>{const{disabled:t=!1,onSelect:n,...s}=r,i=S.useRef(null),o=Hf(Bg,r.__scopeMenu),a=M_(Bg,r.__scopeMenu),l=Pt(e,i),d=S.useRef(!1),u=()=>{const f=i.current;if(!t&&f){const p=new CustomEvent(iT,{bubbles:!0,cancelable:!0});f.addEventListener(iT,m=>n==null?void 0:n(m),{once:!0}),V1(f,p),p.defaultPrevented?d.current=!1:o.onClose()}};return g.jsx(ZO,{...s,ref:l,disabled:t,onClick:Le(r.onClick,u),onPointerDown:f=>{var p;(p=r.onPointerDown)==null||p.call(r,f),d.current=!0},onPointerUp:Le(r.onPointerUp,f=>{var p;d.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:Le(r.onKeyDown,f=>{const p=a.searchRef.current!=="";t||p&&f.key===" "||db.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});iy.displayName=Bg;var ZO=S.forwardRef((r,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:s,...i}=r,o=M_(Bg,t),a=HO(t),l=S.useRef(null),d=Pt(e,l),[u,f]=S.useState(!1),[p,m]=S.useState("");return S.useEffect(()=>{const v=l.current;v&&m((v.textContent??"").trim())},[i.children]),g.jsx(Xh.ItemSlot,{scope:t,disabled:n,textValue:s??p,children:g.jsx(UO,{asChild:!0,...a,focusable:!n,children:g.jsx(at.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:Le(r.onPointerMove,Qh(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Le(r.onPointerLeave,Qh(v=>o.onItemLeave(v))),onFocus:Le(r.onFocus,()=>f(!0)),onBlur:Le(r.onBlur,()=>f(!1))})})})}),nH="MenuCheckboxItem",XO=S.forwardRef((r,e)=>{const{checked:t=!1,onCheckedChange:n,...s}=r;return g.jsx(nM,{scope:r.__scopeMenu,checked:t,children:g.jsx(iy,{role:"menuitemcheckbox","aria-checked":$g(t)?"mixed":t,...s,ref:e,"data-state":F_(t),onSelect:Le(s.onSelect,()=>n==null?void 0:n($g(t)?!0:!t),{checkForDefaultPrevented:!1})})})});XO.displayName=nH;var QO="MenuRadioGroup",[sH,iH]=tc(QO,{value:void 0,onValueChange:()=>{}}),eM=S.forwardRef((r,e)=>{const{value:t,onValueChange:n,...s}=r,i=Xr(n);return g.jsx(sH,{scope:r.__scopeMenu,value:t,onValueChange:i,children:g.jsx(I_,{...s,ref:e})})});eM.displayName=QO;var tM="MenuRadioItem",rM=S.forwardRef((r,e)=>{const{value:t,...n}=r,s=iH(tM,r.__scopeMenu),i=t===s.value;return g.jsx(nM,{scope:r.__scopeMenu,checked:i,children:g.jsx(iy,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":F_(i),onSelect:Le(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,t)},{checkForDefaultPrevented:!1})})})});rM.displayName=tM;var L_="MenuItemIndicator",[nM,oH]=tc(L_,{checked:!1}),sM=S.forwardRef((r,e)=>{const{__scopeMenu:t,forceMount:n,...s}=r,i=oH(L_,t);return g.jsx(as,{present:n||$g(i.checked)||i.checked===!0,children:g.jsx(at.span,{...s,ref:e,"data-state":F_(i.checked)})})});sM.displayName=L_;var aH="MenuSeparator",iM=S.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return g.jsx(at.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});iM.displayName=aH;var lH="MenuArrow",oM=S.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,s=sy(t);return g.jsx(H0,{...s,...n,ref:e})});oM.displayName=lH;var cH="MenuSub",[Voe,aM]=tc(cH),ph="MenuSubTrigger",lM=S.forwardRef((r,e)=>{const t=rc(ph,r.__scopeMenu),n=Hf(ph,r.__scopeMenu),s=aM(ph,r.__scopeMenu),i=M_(ph,r.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,d={__scopeMenu:r.__scopeMenu},u=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>u,[u]),S.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),g.jsx(R_,{asChild:!0,...d,children:g.jsx(ZO,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":dM(t.open),...r,ref:L0(e,s.onTriggerChange),onClick:f=>{var p;(p=r.onClick)==null||p.call(r,f),!(r.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Le(r.onPointerMove,Qh(f=>{i.onItemEnter(f),!f.defaultPrevented&&!r.disabled&&!t.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:Le(r.onPointerLeave,Qh(f=>{var m,v;u();const p=(m=t.content)==null?void 0:m.getBoundingClientRect();if(p){const w=(v=t.content)==null?void 0:v.dataset.side,x=w==="right",_=x?-5:5,C=p[x?"left":"right"],A=p[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:C,y:p.top},{x:A,y:p.top},{x:A,y:p.bottom},{x:C,y:p.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Le(r.onKeyDown,f=>{var m;const p=i.searchRef.current!=="";r.disabled||p&&f.key===" "||WW[n.dir].includes(f.key)&&(t.onOpenChange(!0),(m=t.content)==null||m.focus(),f.preventDefault())})})})});lM.displayName=ph;var cM="MenuSubContent",uM=S.forwardRef((r,e)=>{const t=KO(As,r.__scopeMenu),{forceMount:n=t.forceMount,...s}=r,i=rc(As,r.__scopeMenu),o=Hf(As,r.__scopeMenu),a=aM(cM,r.__scopeMenu),l=S.useRef(null),d=Pt(e,l);return g.jsx(Xh.Provider,{scope:r.__scopeMenu,children:g.jsx(as,{present:n||i.open,children:g.jsx(Xh.Slot,{scope:r.__scopeMenu,children:g.jsx(D_,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;o.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Le(r.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Le(r.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Le(r.onKeyDown,u=>{var m;const f=u.currentTarget.contains(u.target),p=HW[o.dir].includes(u.key);f&&p&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});uM.displayName=cM;function dM(r){return r?"open":"closed"}function $g(r){return r==="indeterminate"}function F_(r){return $g(r)?"indeterminate":r?"checked":"unchecked"}function uH(r){const e=document.activeElement;for(const t of r)if(t===e||(t.focus(),document.activeElement!==e))return}function dH(r,e){return r.map((t,n)=>r[(e+n)%r.length])}function hH(r,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let o=dH(r,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==t));const l=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function fH(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,d=e[o].x,u=e[o].y;l>n!=u>n&&t<(d-a)*(n-l)/(u-l)+a&&(s=!s)}return s}function pH(r,e){if(!e)return!1;const t={x:r.clientX,y:r.clientY};return fH(t,e)}function Qh(r){return e=>e.pointerType==="mouse"?r(e):void 0}var mH=qO,gH=R_,yH=GO,vH=YO,wH=I_,xH=JO,bH=iy,_H=XO,kH=eM,SH=rM,CH=sM,EH=iM,AH=oM,TH=lM,NH=uM,B_="DropdownMenu",[jH,Woe]=ni(B_,[WO]),Tn=WO(),[PH,hM]=jH(B_),fM=r=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=r,l=Tn(e),d=S.useRef(null),[u=!1,f]=wo({prop:s,defaultProp:i,onChange:o});return g.jsx(PH,{scope:e,triggerId:Ys(),triggerRef:d,contentId:Ys(),open:u,onOpenChange:f,onOpenToggle:S.useCallback(()=>f(p=>!p),[f]),modal:a,children:g.jsx(mH,{...l,open:u,onOpenChange:f,dir:n,modal:a,children:t})})};fM.displayName=B_;var pM="DropdownMenuTrigger",mM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...s}=r,i=hM(pM,t),o=Tn(t);return g.jsx(gH,{asChild:!0,...o,children:g.jsx(at.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:L0(e,i.triggerRef),onPointerDown:Le(r.onPointerDown,a=>{!n&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Le(r.onKeyDown,a=>{n||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});mM.displayName=pM;var RH="DropdownMenuPortal",gM=r=>{const{__scopeDropdownMenu:e,...t}=r,n=Tn(e);return g.jsx(yH,{...n,...t})};gM.displayName=RH;var yM="DropdownMenuContent",vM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=hM(yM,t),i=Tn(t),o=S.useRef(!1);return g.jsx(vH,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:Le(r.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Le(r.onInteractOutside,a=>{const l=a.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;(!s.modal||u)&&(o.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vM.displayName=yM;var OH="DropdownMenuGroup",MH=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(wH,{...s,...n,ref:e})});MH.displayName=OH;var DH="DropdownMenuLabel",wM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(xH,{...s,...n,ref:e})});wM.displayName=DH;var IH="DropdownMenuItem",xM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(bH,{...s,...n,ref:e})});xM.displayName=IH;var LH="DropdownMenuCheckboxItem",bM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(_H,{...s,...n,ref:e})});bM.displayName=LH;var FH="DropdownMenuRadioGroup",BH=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(kH,{...s,...n,ref:e})});BH.displayName=FH;var $H="DropdownMenuRadioItem",_M=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(SH,{...s,...n,ref:e})});_M.displayName=$H;var zH="DropdownMenuItemIndicator",kM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(CH,{...s,...n,ref:e})});kM.displayName=zH;var UH="DropdownMenuSeparator",SM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(EH,{...s,...n,ref:e})});SM.displayName=UH;var VH="DropdownMenuArrow",WH=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(AH,{...s,...n,ref:e})});WH.displayName=VH;var HH="DropdownMenuSubTrigger",CM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(TH,{...s,...n,ref:e})});CM.displayName=HH;var qH="DropdownMenuSubContent",EM=S.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,s=Tn(t);return g.jsx(NH,{...s,...n,ref:e,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});EM.displayName=qH;var KH=fM,GH=mM,YH=gM,AM=vM,TM=wM,NM=xM,jM=bM,PM=_M,RM=kM,OM=SM,MM=CM,DM=EM;const hb=KH,fb=GH,JH=S.forwardRef(({className:r,inset:e,children:t,...n},s)=>g.jsxs(MM,{ref:s,className:Ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",r),...n,children:[t,g.jsx(wB,{className:"ml-auto h-4 w-4"})]}));JH.displayName=MM.displayName;const ZH=S.forwardRef(({className:r,...e},t)=>g.jsx(DM,{ref:t,className:Ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...e}));ZH.displayName=DM.displayName;const zg=S.forwardRef(({className:r,sideOffset:e=4,...t},n)=>g.jsx(YH,{children:g.jsx(AM,{ref:n,sideOffset:e,className:Ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t})}));zg.displayName=AM.displayName;const aa=S.forwardRef(({className:r,inset:e,...t},n)=>g.jsx(NM,{ref:n,className:Ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",r),...t}));aa.displayName=NM.displayName;const XH=S.forwardRef(({className:r,children:e,checked:t,...n},s)=>g.jsxs(jM,{ref:s,className:Ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...n,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(RM,{children:g.jsx($h,{className:"h-4 w-4"})})}),e]}));XH.displayName=jM.displayName;const QH=S.forwardRef(({className:r,children:e,...t},n)=>g.jsxs(PM,{ref:n,className:Ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(RM,{children:g.jsx(kB,{className:"h-2 w-2 fill-current"})})}),e]}));QH.displayName=PM.displayName;const eq=S.forwardRef(({className:r,inset:e,...t},n)=>g.jsx(TM,{ref:n,className:Ye("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));eq.displayName=TM.displayName;const tq=S.forwardRef(({className:r,...e},t)=>g.jsx(OM,{ref:t,className:Ye("-mx-1 my-1 h-px bg-muted",r),...e}));tq.displayName=OM.displayName;function oT(r,[e,t]){return Math.min(t,Math.max(e,r))}function IM(r){const e=S.useRef({value:r,previous:r});return S.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var rq=[" ","Enter","ArrowUp","ArrowDown"],nq=[" ","Enter"],qf="Select",[oy,ay,sq]=F0(qf),[ad,Hoe]=ni(qf,[sq,qa]),ly=qa(),[iq,Ja]=ad(qf),[oq,aq]=ad(qf),LM=r=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:d,name:u,autoComplete:f,disabled:p,required:m,form:v}=r,w=ly(e),[x,_]=S.useState(null),[C,A]=S.useState(null),[T,P]=S.useState(!1),O=ty(d),[z=!1,M]=wo({prop:n,defaultProp:s,onChange:i}),[D,H]=wo({prop:o,defaultProp:a,onChange:l}),Z=S.useRef(null),R=x?v||!!x.closest("form"):!0,[U,k]=S.useState(new Set),W=Array.from(U).map(B=>B.props.value).join(";");return g.jsx(o_,{...w,children:g.jsxs(iq,{required:m,scope:e,trigger:x,onTriggerChange:_,valueNode:C,onValueNodeChange:A,valueNodeHasChildren:T,onValueNodeHasChildrenChange:P,contentId:Ys(),value:D,onValueChange:H,open:z,onOpenChange:M,dir:O,triggerPointerDownPosRef:Z,disabled:p,children:[g.jsx(oy.Provider,{scope:e,children:g.jsx(oq,{scope:r.__scopeSelect,onNativeOptionAdd:S.useCallback(B=>{k(I=>new Set(I).add(B))},[]),onNativeOptionRemove:S.useCallback(B=>{k(I=>{const G=new Set(I);return G.delete(B),G})},[]),children:t})}),R?g.jsxs(lD,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:f,value:D,onChange:B=>H(B.target.value),disabled:p,form:v,children:[D===void 0?g.jsx("option",{value:""}):null,Array.from(U)]},W):null]})})};LM.displayName=qf;var FM="SelectTrigger",BM=S.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:n=!1,...s}=r,i=ly(t),o=Ja(FM,t),a=o.disabled||n,l=Pt(e,o.onTriggerChange),d=ay(t),u=S.useRef("touch"),[f,p,m]=cD(w=>{const x=d().filter(A=>!A.disabled),_=x.find(A=>A.value===o.value),C=uD(x,w,_);C!==void 0&&o.onValueChange(C.value)}),v=w=>{a||(o.onOpenChange(!0),m()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return g.jsx($f,{asChild:!0,...i,children:g.jsx(at.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":aD(o.value)?"":void 0,...s,ref:l,onClick:Le(s.onClick,w=>{w.currentTarget.focus(),u.current!=="mouse"&&v(w)}),onPointerDown:Le(s.onPointerDown,w=>{u.current=w.pointerType;const x=w.target;x.hasPointerCapture(w.pointerId)&&x.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:Le(s.onKeyDown,w=>{const x=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&p(w.key),!(x&&w.key===" ")&&rq.includes(w.key)&&(v(),w.preventDefault())})})})});BM.displayName=FM;var $M="SelectValue",zM=S.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:s,children:i,placeholder:o="",...a}=r,l=Ja($M,t),{onValueNodeHasChildrenChange:d}=l,u=i!==void 0,f=Pt(e,l.onValueNodeChange);return Kr(()=>{d(u)},[d,u]),g.jsx(at.span,{...a,ref:f,style:{pointerEvents:"none"},children:aD(l.value)?g.jsx(g.Fragment,{children:o}):i})});zM.displayName=$M;var lq="SelectIcon",UM=S.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,...s}=r;return g.jsx(at.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});UM.displayName=lq;var cq="SelectPortal",VM=r=>g.jsx(Xu,{asChild:!0,...r});VM.displayName=cq;var zl="SelectContent",WM=S.forwardRef((r,e)=>{const t=Ja(zl,r.__scopeSelect),[n,s]=S.useState();if(Kr(()=>{s(new DocumentFragment)},[]),!t.open){const i=n;return i?Zu.createPortal(g.jsx(HM,{scope:r.__scopeSelect,children:g.jsx(oy.Slot,{scope:r.__scopeSelect,children:g.jsx("div",{children:r.children})})}),i):null}return g.jsx(qM,{...r,ref:e})});WM.displayName=zl;var $s=10,[HM,Za]=ad(zl),uq="SelectContentImpl",qM=S.forwardRef((r,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:w,avoidCollisions:x,..._}=r,C=Ja(zl,t),[A,T]=S.useState(null),[P,O]=S.useState(null),z=Pt(e,ve=>T(ve)),[M,D]=S.useState(null),[H,Z]=S.useState(null),R=ay(t),[U,k]=S.useState(!1),W=S.useRef(!1);S.useEffect(()=>{if(A)return ey(A)},[A]),X0();const B=S.useCallback(ve=>{const[he,...xe]=R().map(_e=>_e.ref.current),[Ce]=xe.slice(-1),ue=document.activeElement;for(const _e of ve)if(_e===ue||(_e==null||_e.scrollIntoView({block:"nearest"}),_e===he&&P&&(P.scrollTop=0),_e===Ce&&P&&(P.scrollTop=P.scrollHeight),_e==null||_e.focus(),document.activeElement!==ue))return},[R,P]),I=S.useCallback(()=>B([M,A]),[B,M,A]);S.useEffect(()=>{U&&I()},[U,I]);const{onOpenChange:G,triggerPointerDownPosRef:V}=C;S.useEffect(()=>{if(A){let ve={x:0,y:0};const he=Ce=>{var ue,_e;ve={x:Math.abs(Math.round(Ce.pageX)-(((ue=V.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((_e=V.current)==null?void 0:_e.y)??0))}},xe=Ce=>{ve.x<=10&&ve.y<=10?Ce.preventDefault():A.contains(Ce.target)||G(!1),document.removeEventListener("pointermove",he),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",xe,{capture:!0})}}},[A,G,V]),S.useEffect(()=>{const ve=()=>G(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[G]);const[X,F]=cD(ve=>{const he=R().filter(ue=>!ue.disabled),xe=he.find(ue=>ue.ref.current===document.activeElement),Ce=uD(he,ve,xe);Ce&&setTimeout(()=>Ce.ref.current.focus())}),q=S.useCallback((ve,he,xe)=>{const Ce=!W.current&&!xe;(C.value!==void 0&&C.value===he||Ce)&&(D(ve),Ce&&(W.current=!0))},[C.value]),oe=S.useCallback(()=>A==null?void 0:A.focus(),[A]),re=S.useCallback((ve,he,xe)=>{const Ce=!W.current&&!xe;(C.value!==void 0&&C.value===he||Ce)&&Z(ve)},[C.value]),ee=n==="popper"?pb:KM,ye=ee===pb?{side:a,sideOffset:l,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:w,avoidCollisions:x}:{};return g.jsx(HM,{scope:t,content:A,viewport:P,onViewportChange:O,itemRefCallback:q,selectedItem:M,onItemLeave:oe,itemTextRefCallback:re,focusSelectedItem:I,selectedItemText:H,position:n,isPositioned:U,searchRef:X,children:g.jsx(Vf,{as:Mi,allowPinchZoom:!0,children:g.jsx(Uf,{asChild:!0,trapped:C.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:Le(s,ve=>{var he;(he=C.trigger)==null||he.focus({preventScroll:!0}),ve.preventDefault()}),children:g.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:g.jsx(ee,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ve=>ve.preventDefault(),..._,...ye,onPlaced:()=>k(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Le(_.onKeyDown,ve=>{const he=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!he&&ve.key.length===1&&F(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let Ce=R().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const ue=ve.target,_e=Ce.indexOf(ue);Ce=Ce.slice(_e+1)}setTimeout(()=>B(Ce)),ve.preventDefault()}})})})})})})});qM.displayName=uq;var dq="SelectItemAlignedPosition",KM=S.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:n,...s}=r,i=Ja(zl,t),o=Za(zl,t),[a,l]=S.useState(null),[d,u]=S.useState(null),f=Pt(e,z=>u(z)),p=ay(t),m=S.useRef(!1),v=S.useRef(!0),{viewport:w,selectedItem:x,selectedItemText:_,focusSelectedItem:C}=o,A=S.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&d&&w&&x&&_){const z=i.trigger.getBoundingClientRect(),M=d.getBoundingClientRect(),D=i.valueNode.getBoundingClientRect(),H=_.getBoundingClientRect();if(i.dir!=="rtl"){const ue=H.left-M.left,_e=D.left-ue,Ie=z.left-_e,$=z.width+Ie,me=Math.max($,M.width),te=window.innerWidth-$s,Y=oT(_e,[$s,Math.max($s,te-me)]);a.style.minWidth=$+"px",a.style.left=Y+"px"}else{const ue=M.right-H.right,_e=window.innerWidth-D.right-ue,Ie=window.innerWidth-z.right-_e,$=z.width+Ie,me=Math.max($,M.width),te=window.innerWidth-$s,Y=oT(_e,[$s,Math.max($s,te-me)]);a.style.minWidth=$+"px",a.style.right=Y+"px"}const Z=p(),R=window.innerHeight-$s*2,U=w.scrollHeight,k=window.getComputedStyle(d),W=parseInt(k.borderTopWidth,10),B=parseInt(k.paddingTop,10),I=parseInt(k.borderBottomWidth,10),G=parseInt(k.paddingBottom,10),V=W+B+U+G+I,X=Math.min(x.offsetHeight*5,V),F=window.getComputedStyle(w),q=parseInt(F.paddingTop,10),oe=parseInt(F.paddingBottom,10),re=z.top+z.height/2-$s,ee=R-re,ye=x.offsetHeight/2,ve=x.offsetTop+ye,he=W+B+ve,xe=V-he;if(he<=re){const ue=Z.length>0&&x===Z[Z.length-1].ref.current;a.style.bottom="0px";const _e=d.clientHeight-w.offsetTop-w.offsetHeight,Ie=Math.max(ee,ye+(ue?oe:0)+_e+I),$=he+Ie;a.style.height=$+"px"}else{const ue=Z.length>0&&x===Z[0].ref.current;a.style.top="0px";const Ie=Math.max(re,W+w.offsetTop+(ue?q:0)+ye)+xe;a.style.height=Ie+"px",w.scrollTop=he-re+w.offsetTop}a.style.margin=`${$s}px 0`,a.style.minHeight=X+"px",a.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,a,d,w,x,_,i.dir,n]);Kr(()=>A(),[A]);const[T,P]=S.useState();Kr(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const O=S.useCallback(z=>{z&&v.current===!0&&(A(),C==null||C(),v.current=!1)},[A,C]);return g.jsx(fq,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:O,children:g.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:g.jsx(at.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});KM.displayName=dq;var hq="SelectPopperPosition",pb=S.forwardRef((r,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:s=$s,...i}=r,o=ly(t);return g.jsx(W0,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pb.displayName=hq;var[fq,$_]=ad(zl,{}),mb="SelectViewport",GM=S.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:n,...s}=r,i=Za(mb,t),o=$_(mb,t),a=Pt(e,i.onViewportChange),l=S.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),g.jsx(oy.Slot,{scope:t,children:g.jsx(at.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Le(s.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const m=Math.abs(l.current-u.scrollTop);if(m>0){const v=window.innerHeight-$s*2,w=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),_=Math.max(w,x);if(_<v){const C=_+m,A=Math.min(v,C),T=C-A;f.style.height=A+"px",f.style.bottom==="0px"&&(u.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});GM.displayName=mb;var YM="SelectGroup",[pq,mq]=ad(YM),gq=S.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=Ys();return g.jsx(pq,{scope:t,id:s,children:g.jsx(at.div,{role:"group","aria-labelledby":s,...n,ref:e})})});gq.displayName=YM;var JM="SelectLabel",ZM=S.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=mq(JM,t);return g.jsx(at.div,{id:s.id,...n,ref:e})});ZM.displayName=JM;var Ug="SelectItem",[yq,XM]=ad(Ug),QM=S.forwardRef((r,e)=>{const{__scopeSelect:t,value:n,disabled:s=!1,textValue:i,...o}=r,a=Ja(Ug,t),l=Za(Ug,t),d=a.value===n,[u,f]=S.useState(i??""),[p,m]=S.useState(!1),v=Pt(e,C=>{var A;return(A=l.itemRefCallback)==null?void 0:A.call(l,C,n,s)}),w=Ys(),x=S.useRef("touch"),_=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(yq,{scope:t,value:n,disabled:s,textId:w,isSelected:d,onItemTextChange:S.useCallback(C=>{f(A=>A||((C==null?void 0:C.textContent)??"").trim())},[]),children:g.jsx(oy.ItemSlot,{scope:t,value:n,disabled:s,textValue:u,children:g.jsx(at.div,{role:"option","aria-labelledby":w,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:Le(o.onFocus,()=>m(!0)),onBlur:Le(o.onBlur,()=>m(!1)),onClick:Le(o.onClick,()=>{x.current!=="mouse"&&_()}),onPointerUp:Le(o.onPointerUp,()=>{x.current==="mouse"&&_()}),onPointerDown:Le(o.onPointerDown,C=>{x.current=C.pointerType}),onPointerMove:Le(o.onPointerMove,C=>{var A;x.current=C.pointerType,s?(A=l.onItemLeave)==null||A.call(l):x.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Le(o.onPointerLeave,C=>{var A;C.currentTarget===document.activeElement&&((A=l.onItemLeave)==null||A.call(l))}),onKeyDown:Le(o.onKeyDown,C=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&C.key===" "||(nq.includes(C.key)&&_(),C.key===" "&&C.preventDefault())})})})})});QM.displayName=Ug;var mh="SelectItemText",eD=S.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:s,...i}=r,o=Ja(mh,t),a=Za(mh,t),l=XM(mh,t),d=aq(mh,t),[u,f]=S.useState(null),p=Pt(e,_=>f(_),l.onItemTextChange,_=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,_,l.value,l.disabled)}),m=u==null?void 0:u.textContent,v=S.useMemo(()=>g.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:w,onNativeOptionRemove:x}=d;return Kr(()=>(w(v),()=>x(v)),[w,x,v]),g.jsxs(g.Fragment,{children:[g.jsx(at.span,{id:l.textId,...i,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zu.createPortal(i.children,o.valueNode):null]})});eD.displayName=mh;var tD="SelectItemIndicator",rD=S.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return XM(tD,t).isSelected?g.jsx(at.span,{"aria-hidden":!0,...n,ref:e}):null});rD.displayName=tD;var gb="SelectScrollUpButton",nD=S.forwardRef((r,e)=>{const t=Za(gb,r.__scopeSelect),n=$_(gb,r.__scopeSelect),[s,i]=S.useState(!1),o=Pt(e,n.onScrollButtonChange);return Kr(()=>{if(t.viewport&&t.isPositioned){let a=function(){const d=l.scrollTop>0;i(d)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(iD,{...r,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});nD.displayName=gb;var yb="SelectScrollDownButton",sD=S.forwardRef((r,e)=>{const t=Za(yb,r.__scopeSelect),n=$_(yb,r.__scopeSelect),[s,i]=S.useState(!1),o=Pt(e,n.onScrollButtonChange);return Kr(()=>{if(t.viewport&&t.isPositioned){let a=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;i(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?g.jsx(iD,{...r,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});sD.displayName=yb;var iD=S.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:n,...s}=r,i=Za("SelectScrollButton",t),o=S.useRef(null),a=ay(t),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),Kr(()=>{var u;const d=a().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),g.jsx(at.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Le(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Le(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Le(s.onPointerLeave,()=>{l()})})}),vq="SelectSeparator",oD=S.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return g.jsx(at.div,{"aria-hidden":!0,...n,ref:e})});oD.displayName=vq;var vb="SelectArrow",wq=S.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=ly(t),i=Ja(vb,t),o=Za(vb,t);return i.open&&o.position==="popper"?g.jsx(H0,{...s,...n,ref:e}):null});wq.displayName=vb;function aD(r){return r===""||r===void 0}var lD=S.forwardRef((r,e)=>{const{value:t,...n}=r,s=S.useRef(null),i=Pt(e,s),o=IM(t);return S.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const f=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(f)}},[o,t]),g.jsx(Lf,{asChild:!0,children:g.jsx("select",{...n,ref:i,defaultValue:t})})});lD.displayName="BubbleSelect";function cD(r){const e=Xr(r),t=S.useRef(""),n=S.useRef(0),s=S.useCallback(o=>{const a=t.current+o;e(a),function l(d){t.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=S.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,s,i]}function uD(r,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let o=xq(r,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==t));const l=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function xq(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var bq=LM,dD=BM,_q=zM,kq=UM,Sq=VM,hD=WM,Cq=GM,fD=ZM,pD=QM,Eq=eD,Aq=rD,mD=nD,gD=sD,yD=oD;const Th=bq,Nh=_q,cu=S.forwardRef(({className:r,children:e,...t},n)=>g.jsxs(dD,{ref:n,className:Ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,g.jsx(kq,{asChild:!0,children:g.jsx(K1,{className:"h-4 w-4 opacity-50"})})]}));cu.displayName=dD.displayName;const vD=S.forwardRef(({className:r,...e},t)=>g.jsx(mD,{ref:t,className:Ye("flex cursor-default items-center justify-center py-1",r),...e,children:g.jsx(xB,{className:"h-4 w-4"})}));vD.displayName=mD.displayName;const wD=S.forwardRef(({className:r,...e},t)=>g.jsx(gD,{ref:t,className:Ye("flex cursor-default items-center justify-center py-1",r),...e,children:g.jsx(K1,{className:"h-4 w-4"})}));wD.displayName=gD.displayName;const uu=S.forwardRef(({className:r,children:e,position:t="popper",...n},s)=>g.jsx(Sq,{children:g.jsxs(hD,{ref:s,className:Ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...n,children:[g.jsx(vD,{}),g.jsx(Cq,{className:Ye("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(wD,{})]})}));uu.displayName=hD.displayName;const Tq=S.forwardRef(({className:r,...e},t)=>g.jsx(fD,{ref:t,className:Ye("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...e}));Tq.displayName=fD.displayName;const vs=S.forwardRef(({className:r,children:e,...t},n)=>g.jsxs(pD,{ref:n,className:Ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Aq,{children:g.jsx($h,{className:"h-4 w-4"})})}),g.jsx(Eq,{children:e})]}));vs.displayName=pD.displayName;const Nq=S.forwardRef(({className:r,...e},t)=>g.jsx(yD,{ref:t,className:Ye("-mx-1 my-1 h-px bg-muted",r),...e}));Nq.displayName=yD.displayName;function oi(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function Ul(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const xD=6048e5,jq=864e5;let Pq={};function cy(){return Pq}function ef(r,e){var a,l,d,u;const t=cy(),n=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=oi(r),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Vg(r){return ef(r,{weekStartsOn:1})}function bD(r){const e=oi(r),t=e.getFullYear(),n=Ul(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const s=Vg(n),i=Ul(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=Vg(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function aT(r){const e=oi(r);return e.setHours(0,0,0,0),e}function lT(r){const e=oi(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function Rq(r,e){const t=aT(r),n=aT(e),s=+t-lT(t),i=+n-lT(n);return Math.round((s-i)/jq)}function Oq(r){const e=bD(r),t=Ul(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Vg(t)}function Mq(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Dq(r){if(!Mq(r)&&typeof r!="number")return!1;const e=oi(r);return!isNaN(Number(e))}function Iq(r){const e=oi(r),t=Ul(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Lq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fq=(r,e,t)=>{let n;const s=Lq[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Yw(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Bq={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$q={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Uq={date:Yw({formats:Bq,defaultWidth:"full"}),time:Yw({formats:$q,defaultWidth:"full"}),dateTime:Yw({formats:zq,defaultWidth:"full"})},Vq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wq=(r,e,t,n)=>Vq[r];function rh(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,a=t!=null&&t.width?String(t.width):o;s=r.formattingValues[a]||r.formattingValues[o]}else{const o=r.defaultWidth,a=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[a]||r.values[o]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const Hq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Gq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zq=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Xq={ordinalNumber:Zq,era:rh({values:Hq,defaultWidth:"wide"}),quarter:rh({values:qq,defaultWidth:"wide",argumentCallback:r=>r-1}),month:rh({values:Kq,defaultWidth:"wide"}),day:rh({values:Gq,defaultWidth:"wide"}),dayPeriod:rh({values:Yq,defaultWidth:"wide",formattingValues:Jq,defaultFormattingWidth:"wide"})};function nh(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(a)?eK(a,f=>f.test(o)):Qq(a,f=>f.test(o));let d;d=r.valueCallback?r.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function Qq(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function eK(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function tK(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let o=r.valueCallback?r.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const rK=/^(\d+)(th|st|nd|rd)?/i,nK=/\d+/i,sK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iK={any:[/^b/i,/^(a|c)/i]},oK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aK={any:[/1/i,/2/i,/3/i,/4/i]},lK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pK={ordinalNumber:tK({matchPattern:rK,parsePattern:nK,valueCallback:r=>parseInt(r,10)}),era:nh({matchPatterns:sK,defaultMatchWidth:"wide",parsePatterns:iK,defaultParseWidth:"any"}),quarter:nh({matchPatterns:oK,defaultMatchWidth:"wide",parsePatterns:aK,defaultParseWidth:"any",valueCallback:r=>r+1}),month:nh({matchPatterns:lK,defaultMatchWidth:"wide",parsePatterns:cK,defaultParseWidth:"any"}),day:nh({matchPatterns:uK,defaultMatchWidth:"wide",parsePatterns:dK,defaultParseWidth:"any"}),dayPeriod:nh({matchPatterns:hK,defaultMatchWidth:"any",parsePatterns:fK,defaultParseWidth:"any"})},mK={code:"en-US",formatDistance:Fq,formatLong:Uq,formatRelative:Wq,localize:Xq,match:pK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gK(r){const e=oi(r);return Rq(e,Iq(e))+1}function yK(r){const e=oi(r),t=+Vg(e)-+Oq(e);return Math.round(t/xD)+1}function _D(r,e){var u,f,p,m;const t=oi(r),n=t.getFullYear(),s=cy(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ul(r,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const a=ef(o,e),l=Ul(r,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const d=ef(l,e);return t.getTime()>=a.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function vK(r,e){var a,l,d,u;const t=cy(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=_D(r,e),i=Ul(r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),ef(i,e)}function wK(r,e){const t=oi(r),n=+ef(t,e)-+vK(t,e);return Math.round(n/xD)+1}function Kt(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const ta={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return Kt(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Kt(t+1,2)},d(r,e){return Kt(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Kt(r.getHours()%12||12,e.length)},H(r,e){return Kt(r.getHours(),e.length)},m(r,e){return Kt(r.getMinutes(),e.length)},s(r,e){return Kt(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return Kt(s,e.length)}},qc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cT={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return ta.y(r,e)},Y:function(r,e,t,n){const s=_D(r,n),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Kt(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Kt(i,e.length)},R:function(r,e){const t=bD(r);return Kt(t,e.length)},u:function(r,e){const t=r.getFullYear();return Kt(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Kt(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Kt(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return ta.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return Kt(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=wK(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Kt(s,e.length)},I:function(r,e,t){const n=yK(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Kt(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):ta.d(r,e)},D:function(r,e,t){const n=gK(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Kt(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Kt(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Kt(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Kt(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=qc.noon:n===0?s=qc.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=qc.evening:n>=12?s=qc.afternoon:n>=4?s=qc.morning:s=qc.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return ta.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):ta.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Kt(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Kt(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):ta.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):ta.s(r,e)},S:function(r,e){return ta.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return dT(n);case"XXXX":case"XX":return _l(n);case"XXXXX":case"XXX":default:return _l(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return dT(n);case"xxxx":case"xx":return _l(n);case"xxxxx":case"xxx":default:return _l(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+uT(n,":");case"OOOO":default:return"GMT"+_l(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+uT(n,":");case"zzzz":default:return"GMT"+_l(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return Kt(n,e.length)},T:function(r,e,t){const n=r.getTime();return Kt(n,e.length)}};function uT(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+Kt(i,2)}function dT(r,e){return r%60===0?(r>0?"-":"+")+Kt(Math.abs(r)/60,2):_l(r,e)}function _l(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Kt(Math.trunc(n/60),2),i=Kt(n%60,2);return t+s+e+i}const hT=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},kD=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},xK=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return hT(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",hT(n,e)).replace("{{time}}",kD(s,e))},bK={p:kD,P:xK},_K=/^D+$/,kK=/^Y+$/,SK=["D","DD","YY","YYYY"];function CK(r){return _K.test(r)}function EK(r){return kK.test(r)}function AK(r,e,t){const n=TK(r,e,t);if(console.warn(n),SK.includes(r))throw new RangeError(n)}function TK(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,PK=/^'([^]*?)'?$/,RK=/''/g,OK=/[a-zA-Z]/;function MK(r,e,t){var u,f,p,m;const n=cy(),s=n.locale??mK,i=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,a=oi(r);if(!Dq(a))throw new RangeError("Invalid time value");let l=e.match(jK).map(v=>{const w=v[0];if(w==="p"||w==="P"){const x=bK[w];return x(v,s.formatLong)}return v}).join("").match(NK).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:DK(v)};if(cT[w])return{isToken:!0,value:v};if(w.match(OK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(v=>{if(!v.isToken)return v.value;const w=v.value;(EK(w)||CK(w))&&AK(w,e,String(r));const x=cT[w[0]];return x(a,w,s.localize,d)}).join("")}function DK(r){const e=r.match(PK);return e?e[1].replace(RK,"'"):r}var z_="Avatar",[IK,qoe]=ni(z_),[LK,SD]=IK(z_),CD=S.forwardRef((r,e)=>{const{__scopeAvatar:t,...n}=r,[s,i]=S.useState("idle");return g.jsx(LK,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:g.jsx(at.span,{...n,ref:e})})});CD.displayName=z_;var ED="AvatarImage",AD=S.forwardRef((r,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:s=()=>{},...i}=r,o=SD(ED,t),a=FK(n,i.referrerPolicy),l=Xr(d=>{s(d),o.onImageLoadingStatusChange(d)});return Kr(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?g.jsx(at.img,{...i,ref:e,src:n}):null});AD.displayName=ED;var TD="AvatarFallback",ND=S.forwardRef((r,e)=>{const{__scopeAvatar:t,delayMs:n,...s}=r,i=SD(TD,t),[o,a]=S.useState(n===void 0);return S.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(l)}},[n]),o&&i.imageLoadingStatus!=="loaded"?g.jsx(at.span,{...s,ref:e}):null});ND.displayName=TD;function FK(r,e){const[t,n]=S.useState("idle");return Kr(()=>{if(!r){n("error");return}let s=!0;const i=new window.Image,o=a=>()=>{s&&n(a)};return n("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=r,e&&(i.referrerPolicy=e),()=>{s=!1}},[r,e]),t}var jD=CD,PD=AD,RD=ND;const U_=S.forwardRef(({className:r,...e},t)=>g.jsx(jD,{ref:t,className:Ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...e}));U_.displayName=jD.displayName;const V_=S.forwardRef(({className:r,...e},t)=>g.jsx(PD,{ref:t,className:Ye("aspect-square h-full w-full",r),...e}));V_.displayName=PD.displayName;const W_=S.forwardRef(({className:r,...e},t)=>g.jsx(RD,{ref:t,className:Ye("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...e}));W_.displayName=RD.displayName;const BK={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12"};function OD({avatar_url:r,fallbackInitials:e="U",fallbackColor:t,className:n="",size:s="md"}){const[i,o]=be.useState(!1),[a,l]=be.useState(!!r),u=t||(x=>{let _=0;for(let C=0;C<x.length;C++)_=x.charCodeAt(C)+((_<<5)-_);return"hsl(221 83.2% 53.3%)"})(e),[f,p]=be.useState(null);be.useEffect(()=>{if(!r){p(null);return}if(r.startsWith("http")){p(r);return}let x=!1;return Nr.storage.from("avatar-images").createSignedUrl(r,60*60*24*365).then(({data:_,error:C})=>{x||p((_==null?void 0:_.signedUrl)||null)}),()=>{x=!0}},[r]);const m=f&&!i?f:void 0,v=()=>l(!1),w=()=>{o(!0),l(!1)};return g.jsxs(U_,{className:`${BK[s]} ${n}`,children:[m&&!i&&g.jsx(V_,{src:m,alt:e,onLoad:v,onError:w}),g.jsx(W_,{className:"text-white font-medium flex items-center justify-center "+(a?"bg-neutral-300":""),style:a?void 0:{backgroundColor:u},children:a?g.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin","aria-label":"Loading avatar"}):g.jsx(Uh,{size:18})})]})}const $K=()=>{var Ft;const r=si(),{toast:e}=qn(),{user:t,dbUser:n,signInWithGoogle:s,signOut:i,isLoading:o,isSigningOut:a,isReady:l}=An(),{projectsApi:d,projectMembersApi:u,projectFilesApi:f}=Vi();S.useEffect(()=>{!o&&!t&&r("/landing")},[t,o,r]);const[p,m]=S.useState(!1),[v,w]=S.useState(""),[x,_]=S.useState(null),[C,A]=S.useState(0),[T,P]=S.useState(null),[O,z]=S.useState(!1),[M,D]=S.useState(""),[H,Z]=S.useState("JavaScript"),[R,U]=S.useState(!1),[k,W]=S.useState(""),[B,I]=S.useState("all"),[G,V]=S.useState(!1),[X,F]=S.useState([]),[q,oe]=S.useState({}),[re,ee]=S.useState(!1),[ye,ve]=S.useState(null),[he,xe]=S.useState(!1),[Ce,ue]=S.useState(null),[_e,Ie]=S.useState(!1),[$,me]=S.useState(null),[te,Y]=S.useState(0),N=[{name:"Java",extension:"java"},{name:"Python",extension:"py"},{name:"JavaScript",extension:"js"},{name:"C",extension:"c"},{name:"C++",extension:"cpp"}],L=Re=>{let Ee=0;for(let $e=0;$e<Re.length;$e++)Ee=Re.charCodeAt($e)+((Ee<<5)-Ee);return`hsl(${Math.abs(Ee%360)}, 70%, 80%)`},J=Re=>(Re.username||Re.email||"U").split(" ").map(Xe=>{var $e;return(($e=Xe[0])==null?void 0:$e.toUpperCase())||""}).slice(0,2).join(""),ne=Re=>{const Ee=Re.toLowerCase();for(const Xe of N)if(Ee.includes(Xe.name.toLowerCase()))return Xe.name;return"JavaScript"},Q=Re=>{const Ee=new Date,Xe=new Date(Re),$e=Math.floor((Ee.getTime()-Xe.getTime())/(1e3*60*60));return $e<1?"Just now":$e<24?`${$e} hours ago`:$e<48?"Yesterday":$e<168?`${Math.floor($e/24)} days ago`:"1+ week ago"},ie=async Re=>{try{const{data:Ee}=await d.getProject(Re);if(!Ee)return;const Xe=Ee.owner_id,{data:$e}=await u.listProjectMembers(Re);if($e!=null&&$e.items){const nt=$e.items.filter(st=>st.user_id!==t.id).map(st=>{var wt,ur,en;return{id:st.user_id,email:((wt=st.user)==null?void 0:wt.email)||"",username:((ur=st.user)==null?void 0:ur.name)||"",avatar_url:((en=st.user)==null?void 0:en.avatar_url)||null}});oe(st=>({...st,[Re]:nt}))}}catch(Ee){console.error("Error loading project collaborators:",Ee)}},le=async()=>{U(!0);try{const{data:Re,error:Ee}=await d.listUserProjects(t.id);if(!t||!n)return;if(Ee){console.error("API Error:",Ee),e({title:"Error",description:"Failed to load projects. Please try again.",variant:"destructive"}),F([]),Y(0);return}if(!Re||!Re.items||Re.items.length===0){F([]),Y(0);return}const Xe=[],$e=new Date,nt=new Date($e);nt.setDate(nt.getDate()-1);const st=Re.items.filter(wt=>wt.updated_at?new Date(wt.updated_at)>=nt:!1);Y(st.length);for(const wt of Re.items){const ur={id:wt.id,name:wt.name,description:wt.description,language:ne(wt.name),last_modified:wt.updated_at?Q(wt.updated_at):"Unknown",collaborators:1,is_owner:wt.owner_id===t.id,collaborator_avatars:[],initials:wt.name.substring(0,2).toUpperCase(),color:`hsl(${Math.floor(Math.random()*360)}, 70%, 80%)`};Xe.push(ur),ie(wt.id)}F(Xe)}catch(Re){console.error("Failed to load projects:",Re),t&&n&&e({title:"Error",description:"Failed to load projects. Please try again.",variant:"destructive"}),F([]),Y(0)}finally{U(!1)}},de=()=>{let Re=X;switch(B){case"owned":Re=X.filter(Ee=>Ee.is_owner);break;case"shared":Re=X.filter(Ee=>!Ee.is_owner);break;default:Re=X}return Re.filter(Ee=>Ee.name.toLowerCase().includes(k.toLowerCase()))},ke=Re=>{Re.target.files&&Re.target.files[0]&&(_(Re.target.files[0]),P(null))},Te=async()=>{if(P(null),!v.trim()){P("Project name is required.");return}if(!x){P("Please select a ZIP file.");return}if(!t||!d||!f){P("Missing user or API context.");return}z(!0),A(0);try{const{project:Re,error:Ee}=await _V({zipFile:x,projectName:v,userId:t.id,projectsApi:d,projectFilesApi:f,description:M,language:H,onProgress:A});if(Ee||!Re){P((Ee==null?void 0:Ee.message)||"Import failed."),z(!1);return}A(100),e({title:"Import Complete",description:`Project "${Re.name}" imported successfully.`}),setTimeout(()=>{m(!1),_(null),w(""),D(""),Z("JavaScript"),A(0),z(!1)},1200),le()}catch{P("Failed to process ZIP file."),z(!1)}},De=async(Re,Ee)=>{if(!t){e({title:"Error",description:"You must be logged in to create a project",variant:"destructive"});return}V(!0);try{const Xe=MK(new Date,"yyyy-MM-dd-HH-mm"),$e=Ee||`${Re} Project - ${Xe}`,{data:nt,error:st}=await d.createProject({name:$e,description:`A new ${Re} project`,owner_id:t.id,is_public:!1,language:Re});if(st){console.error("Project creation failed:",st),e({title:"Error creating project",description:st.message||"Failed to create project. Please try again.",variant:"destructive"});return}if(!nt){console.error("No project data returned from API"),e({title:"Error",description:"No project data returned",variant:"destructive"});return}await d.createProjectTemplate(nt.id,Re);const wt={id:nt.id,name:nt.name,language:Re,last_modified:"Just now",collaborators:1,is_owner:!0,description:nt.description,collaborator_avatars:[],initials:"",color:""};F(en=>[wt,...en]),e({title:"Success",description:"Project created successfully"});const ur=$e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");r(`/editor/${wt.id}/${ur}`)}catch(Xe){console.error("Failed to create project:",Xe),e({title:"Error",description:"Failed to create project. Please try again.",variant:"destructive"})}finally{V(!1)}},ot=async()=>{try{me(null),Ie(!0),await s()}catch(Re){console.error("Sign in error:",Re),me("Failed to sign in. Please try again.")}finally{Ie(!1)}},yt=async()=>{try{me(null),await i(),r("/")}catch(Re){console.error("Sign out error:",Re),me("Failed to sign out. Please try again.")}},St=async Re=>{if(t){ee(!0),ve(Re);try{const{error:Ee}=await d.deleteProject(Re);if(Ee){console.error("Failed to delete project:",Ee),e({title:"Error",description:Ee.message||"Failed to delete project",variant:"destructive"});return}F(Xe=>Xe.filter($e=>$e.id!==Re)),e({title:"Success",description:"Project deleted successfully"})}catch(Ee){console.error("Error deleting project:",Ee),e({title:"Error",description:"An unexpected error occurred while deleting the project",variant:"destructive"})}finally{ee(!1),ve(null)}}},zt=async Re=>{if(t!=null&&t.id){xe(!0),ue(Re);try{const{data:Ee,error:Xe}=await u.getUserRole(Re,t.id);if(Xe||!Ee){console.error("Failed to find project member:",Xe),e({title:"Error",description:"Failed to find your membership in this project",variant:"destructive"});return}const{error:$e}=await u.removeMemberFromProject(Ee.id,t.id);if($e){console.error("Failed to leave project:",$e),e({title:"Error",description:$e.message||"Failed to leave project",variant:"destructive"});return}F(nt=>nt.filter(st=>st.id!==Re)),e({title:"Success",description:"You have left the project"})}catch(Ee){console.error("Error leaving project:",Ee),e({title:"Error",description:"An unexpected error occurred while leaving the project",variant:"destructive"})}finally{xe(!1),ue(null)}}},gt=()=>{r("/profile")};S.useEffect(()=>{if(!l){U(!0);return}if(!t||!(n!=null&&n.id)){U(!0),F([]);return}le()},[l,t,n,d]);const Gt=de(),nr=Re=>!Re||!Re.name?"U":Re.name.split(" ").map(Xe=>Xe[0]).join("").toUpperCase().substring(0,2);return g.jsxs("div",{className:"min-h-screen dark:bg-gradient-to-br dark:from-slate-900 dark:via-slate-800 dark:to-indigo-900",children:[g.jsx("header",{className:"bg-white dark:bg-slate-900/95 dark:backdrop-blur-sm shadow-lg dark:shadow-indigo-900/20 border-b dark:border-slate-700",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between items-center h-16",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(po,{className:"h-6 w-6 text-blue-500"}),g.jsx("h1",{className:"text-xl sm:text-2xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent whitespace-nowrap",children:"MocsCode"})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[o?g.jsxs(tt,{variant:"ghost",disabled:!0,children:[g.jsx(Zt,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]}):t?g.jsx(tt,{variant:"ghost",onClick:yt,disabled:a,className:"text-gray-600 hover:text-gray-900 disabled:opacity-50",children:a?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 animate-spin mr-2"}),"Signing out..."]}):g.jsxs(g.Fragment,{children:[g.jsx(TB,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}):g.jsx(tt,{variant:"ghost",onClick:ot,disabled:_e,className:"text-gray-600 hover:text-gray-900 disabled:opacity-50",children:_e?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 animate-spin mr-2"}),"Signing in..."]}):g.jsxs(g.Fragment,{children:[g.jsx(AB,{className:"h-4 w-4 mr-2"}),"Sign In with Google"]})}),g.jsx("div",{className:"relative",children:t?g.jsx("div",{onClick:gt,className:"cursor-pointer transition-transform hover:scale-105",role:"button",tabIndex:0,onKeyDown:Re=>{(Re.key==="Enter"||Re.key===" ")&&(Re.preventDefault(),gt())},"aria-label":"Go to profile",children:g.jsx(OD,{avatar_url:n==null?void 0:n.avatar_url,size:"sm",className:"ring-2 ring-transparent hover:ring-blue-300 transition-all duration-200",fallbackInitials:nr(n)})}):g.jsx(Uh,{className:"h-8 w-8 text-gray-400 bg-gray-100 rounded-full p-1 hover:bg-gray-200 dark:bg-slate-800/50 dark:hover:bg-slate-700/70 transition-colors duration-200"})})]})]})})}),g.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"mb-8",children:[g.jsxs("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["Welcome back, ",(n==null?void 0:n.name)||((Ft=n==null?void 0:n.email)==null?void 0:Ft.split("@")[0]),"!"]}),g.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Continue working on your collaborative projects or start something new."})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[g.jsxs("div",{className:"flex flex-row gap-2",children:[g.jsxs(hb,{children:[g.jsx(fb,{asChild:!0,children:g.jsxs(tt,{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center space-x-2",children:[g.jsx(CP,{className:"h-5 w-5"}),g.jsx("span",{children:"Create Project"}),g.jsx(K1,{className:"h-4 w-4"})]})}),g.jsx(zg,{align:"start",children:N.map(Re=>g.jsx(aa,{onClick:()=>De(Re.name,""),disabled:G,children:g.jsxs("div",{className:"flex items-center gap-2",children:[G&&g.jsx(Zt,{className:"h-4 w-4 animate-spin mr-2"}),g.jsx("span",{className:"text-sm font-medium",children:Re.name}),g.jsxs(_o,{variant:"outline",className:"text-xs",children:[".",Re.extension]})]})},Re.name))})]}),g.jsxs(tt,{variant:"outline",className:"px-6 py-3 rounded-lg flex items-center space-x-2",onClick:()=>m(!0),disabled:O,children:[O?g.jsx(Zt,{className:"h-5 w-5 mr-2 animate-spin"}):g.jsx(SB,{className:"h-5 w-5 mr-2"}),g.jsx("span",{children:"Import Project"})]}),g.jsx(Zh,{open:p,onOpenChange:m,children:g.jsxs(Ru,{children:[g.jsxs(Ou,{children:[g.jsx(Mu,{children:"Import Project"}),g.jsx(Fg,{children:"Upload a ZIP file containing your project. All files and folders will be imported."})]}),g.jsxs("div",{className:"space-y-4 mt-2",children:[g.jsx(_n,{placeholder:"Project Name",value:v,onChange:Re=>w(Re.target.value),disabled:O,maxLength:64}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs font-medium mb-1",children:"Language"}),g.jsxs(Th,{value:H,onValueChange:Z,disabled:O,children:[g.jsx(cu,{className:"w-full",children:g.jsx(Nh,{placeholder:"Select language"})}),g.jsx(uu,{children:N.map(Re=>g.jsx(vs,{value:Re.name,children:Re.name},Re.name))})]})]}),g.jsx("textarea",{className:"w-full rounded border border-gray-300 dark:border-slate-600 px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Project Description (optional)",rows:2,value:M,onChange:Re=>D(Re.target.value),disabled:O,maxLength:256}),g.jsx(_n,{type:"file",accept:".zip",onChange:ke,disabled:O}),x&&g.jsx("div",{className:"text-xs text-gray-500",children:x.name}),T&&g.jsx("div",{className:"text-xs text-red-500",children:T}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs(tt,{onClick:Te,disabled:O||!v.trim()||!x,className:"w-full",children:[O?g.jsx(Zt,{className:"w-4 h-4 animate-spin mr-2"}):null,"Import"]}),g.jsx(tt,{variant:"ghost",onClick:()=>m(!1),disabled:O,className:"w-full",children:"Cancel"})]}),g.jsx("div",{className:"w-full h-2 bg-gray-200 rounded overflow-hidden",children:g.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${C}%`}})}),O&&g.jsxs("div",{className:"text-xs text-gray-500",children:["Processing ZIP... (",C,"%)"]})]})]})})]}),g.jsxs("div",{className:"relative flex-1 max-w-md",children:[g.jsx(OB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),g.jsx(_n,{type:"text",placeholder:"Search projects...",value:k,onChange:Re=>W(Re.target.value),className:"pl-10"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsx(It,{className:"p-6 bg-white dark:bg-slate-800/40 dark:backdrop-blur-sm rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-200 dark:border-gray-700",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-white",children:"Total Projects"}),g.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:X.length})]}),g.jsx(po,{className:"h-12 w-12 text-blue-500"})]})}),g.jsx(It,{className:"p-6 bg-white dark:bg-slate-800/40 dark:backdrop-blur-sm rounded-xl shadow-sm hover:shadow-md transition-shadow",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-white",children:"Collaborations"}),g.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:X.filter(Re=>!Re.is_owner).length})]}),g.jsx(Vh,{className:"h-12 w-12 text-green-500"})]})}),g.jsx(It,{className:"p-6 bg-white dark:bg-slate-800/40 dark:backdrop-blur-sm rounded-xl shadow-sm hover:shadow-md transition-shadow",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-white",children:"Active Today"}),g.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:te})]}),g.jsx(kP,{className:"h-12 w-12 text-purple-500"})]})})]}),g.jsx("div",{className:"mb-6",children:g.jsxs("div",{className:"flex space-x-6 border-b border-gray-200",children:[g.jsx("button",{onClick:()=>I("all"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${B==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"All Projects"}),g.jsx("button",{onClick:()=>I("owned"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${B==="owned"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Owned by me"}),g.jsx("button",{onClick:()=>I("shared"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${B==="shared"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Shared with me"})]})}),!l||R?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.jsx(zK,{})}):Gt.length===0?g.jsx("div",{className:"col-span-full",children:g.jsx(UK,{activeTab:B})}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Gt.map(Ee=>{var Xe,$e;return g.jsx(CV,{project:{...Ee,collaborators:((Xe=q[Ee.id])==null?void 0:Xe.length)||Ee.collaborators,collaborator_avatars:(($e=q[Ee.id])==null?void 0:$e.map(nt=>({id:nt.id,initials:J(nt),color:L(nt.email||nt.id),name:nt.username||nt.email||"U",email:nt.email})))||[]},onOpen:nt=>{const st=nt.name.toLowerCase().replace(/\s+/g,"-");r(`/editor/${nt.id}/${st}`)},onDelete:Ee.is_owner?St:void 0,onLeave:Ee.is_owner?void 0:zt,isDeleting:re,currentDeletingId:ye,isLeaving:he,currentLeavingId:Ce},Ee.id)})})]}),$&&g.jsx("div",{className:"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md shadow-lg",children:$})]})},zK=()=>g.jsx(g.Fragment,{children:[...Array(6)].map((r,e)=>g.jsxs(It,{className:"p-6 animate-pulse bg-white dark:bg-slate-800/40 dark:backdrop-blur-sm rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),g.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),g.jsxs("div",{className:"space-x-2",children:[g.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-16 inline-block"}),g.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-20 inline-block"})]})]}),g.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[g.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),g.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})]})]},e))}),UK=({activeTab:r})=>{const t=(()=>{switch(r){case"owned":return{title:"No projects created yet",description:"Start by creating your first project using the Create Project button above.",action:"Create your first project"};case"shared":return{title:"No shared projects",description:"You haven't been invited to any projects yet. Ask colleagues to share their projects with you.",action:"Learn about collaboration"};default:return{title:"No projects found",description:"Try adjusting your search or create a new project to get started.",action:"Create a project"}}})();return g.jsxs("div",{className:"text-center py-16",children:[g.jsx(po,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),g.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-3",children:t.title}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:t.description})]})},VK=()=>{const{user:r,isLoading:e}=An();return e?g.jsx("div",{className:"h-screen flex items-center justify-center",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?g.jsx($K,{}):g.jsx(p_,{to:"/landing",replace:!0})};let wb=[],MD=[];(()=>{let r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<r.length;e++)(e%2?MD:wb).push(t=t+r[e])})();function WK(r){if(r<768)return!1;for(let e=0,t=wb.length;;){let n=e+t>>1;if(r<wb[n])t=n;else if(r>=MD[n])e=n+1;else return!0;if(e==t)return!1}}function fT(r){return r>=127462&&r<=127487}const pT=8205;function HK(r,e,t=!0,n=!0){return(t?DD:qK)(r,e,n)}function DD(r,e,t){if(e==r.length)return e;e&&ID(r.charCodeAt(e))&&LD(r.charCodeAt(e-1))&&e--;let n=Jw(r,e);for(e+=mT(n);e<r.length;){let s=Jw(r,e);if(n==pT||s==pT||t&&WK(s))e+=mT(s),n=s;else if(fT(s)){let i=0,o=e-2;for(;o>=0&&fT(Jw(r,o));)i++,o-=2;if(i%2==0)break;e+=2}else break}return e}function qK(r,e,t){for(;e>0;){let n=DD(r,e-2,t);if(n<e)return n;e--}return 0}function Jw(r,e){let t=r.charCodeAt(e);if(!LD(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return ID(n)?(t-55296<<10)+(n-56320)+65536:t}function ID(r){return r>=56320&&r<57344}function LD(r){return r>=55296&&r<56320}function mT(r){return r<65536?1:2}class Lt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Du(this,e,t);let s=[];return this.decompose(0,e,s,2),n.length&&n.decompose(0,n.length,s,3),this.decompose(t,this.length,s,1),Si.from(s,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Du(this,e,t);let n=[];return this.decompose(e,t,n,0),Si.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),s=new jh(this),i=new jh(e);for(let o=t,a=t;;){if(s.next(o),i.next(o),o=0,s.lineBreak!=i.lineBreak||s.done!=i.done||s.value!=i.value)return!1;if(a+=s.value.length,s.done||a>=n)return!0}}iter(e=1){return new jh(this,e)}iterRange(e,t=this.length){return new FD(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;n=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new BD(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Lt.empty:e.length<=32?new kr(e):Si.from(kr.split(e,[]))}}class kr extends Lt{constructor(e,t=KK(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,s){for(let i=0;;i++){let o=this.text[i],a=s+o.length;if((t?n:a)>=e)return new GK(s,a,n,o);s=a+1,n++}}decompose(e,t,n,s){let i=e<=0&&t>=this.length?this:new kr(gT(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let o=n.pop(),a=og(i.text,o.text.slice(),0,i.length);if(a.length<=32)n.push(new kr(a,o.length+i.length));else{let l=a.length>>1;n.push(new kr(a.slice(0,l)),new kr(a.slice(l)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof kr))return super.replace(e,t,n);[e,t]=Du(this,e,t);let s=og(this.text,og(n.text,gT(this.text,0,e)),t),i=this.length+n.length-(t-e);return s.length<=32?new kr(s,i):Si.from(kr.split(s,[]),i)}sliceString(e,t=this.length,n=`
`){[e,t]=Du(this,e,t);let s="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let a=this.text[o],l=i+a.length;i>e&&o&&(s+=n),e<l&&t>i&&(s+=a.slice(Math.max(0,e-i),t-i)),i=l+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],s=-1;for(let i of e)n.push(i),s+=i.length+1,n.length==32&&(t.push(new kr(n,s)),n=[],s=-1);return s>-1&&t.push(new kr(n,s)),t}}class Si extends Lt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,s){for(let i=0;;i++){let o=this.children[i],a=s+o.length,l=n+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,n,s);s=a+1,n=l+1}}decompose(e,t,n,s){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let a=this.children[i],l=o+a.length;if(e<=l&&t>=o){let d=s&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!d?n.push(a):a.decompose(e-o,t-o,n,d)}o=l+1}}replace(e,t,n){if([e,t]=Du(this,e,t),n.lines<this.lines)for(let s=0,i=0;s<this.children.length;s++){let o=this.children[s],a=i+o.length;if(e>=i&&t<=a){let l=o.replace(e-i,t-i,n),d=this.lines-o.lines+l.lines;if(l.lines<d>>4&&l.lines>d>>6){let u=this.children.slice();return u[s]=l,new Si(u,this.length-(t-e)+n.length)}return super.replace(i,a,l)}i=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=Du(this,e,t);let s="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let a=this.children[i],l=o+a.length;o>e&&i&&(s+=n),e<l&&t>o&&(s+=a.sliceString(e-o,t-o,n)),o=l+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Si))return 0;let n=0,[s,i,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,i+=t){if(s==o||i==a)return n;let l=this.children[s],d=e.children[i];if(l!=d)return n+l.scanIdentical(d,t);n+=l.length+1}}static from(e,t=e.reduce((n,s)=>n+s.length+1,-1)){let n=0;for(let m of e)n+=m.lines;if(n<32){let m=[];for(let v of e)v.flatten(m);return new kr(m,t)}let s=Math.max(32,n>>5),i=s<<1,o=s>>1,a=[],l=0,d=-1,u=[];function f(m){let v;if(m.lines>i&&m instanceof Si)for(let w of m.children)f(w);else m.lines>o&&(l>o||!l)?(p(),a.push(m)):m instanceof kr&&l&&(v=u[u.length-1])instanceof kr&&m.lines+v.lines<=32?(l+=m.lines,d+=m.length+1,u[u.length-1]=new kr(v.text.concat(m.text),v.length+1+m.length)):(l+m.lines>s&&p(),l+=m.lines,d+=m.length+1,u.push(m))}function p(){l!=0&&(a.push(u.length==1?u[0]:Si.from(u,d)),d=-1,l=u.length=0)}for(let m of e)f(m);return p(),a.length==1?a[0]:new Si(a,t)}}Lt.empty=new kr([""],0);function KK(r){let e=-1;for(let t of r)e+=t.length+1;return e}function og(r,e,t=0,n=1e9){for(let s=0,i=0,o=!0;i<r.length&&s<=n;i++){let a=r[i],l=s+a.length;l>=t&&(l>n&&(a=a.slice(0,n-s)),s<t&&(a=a.slice(t-s)),o?(e[e.length-1]+=a,o=!1):e.push(a)),s=l+1}return e}function gT(r,e,t){return og(r,[""],e,t)}class jh{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof kr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,s=this.nodes[n],i=this.offsets[n],o=i>>1,a=s instanceof kr?s.text.length:s.children.length;if(o==(t>0?a:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((i&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof kr){let l=s.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof kr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class FD{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new jh(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=n?s:t<0?s.slice(s.length-n):s.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class BD{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Lt.prototype[Symbol.iterator]=function(){return this.iter()},jh.prototype[Symbol.iterator]=FD.prototype[Symbol.iterator]=BD.prototype[Symbol.iterator]=function(){return this});class GK{constructor(e,t,n,s){this.from=e,this.to=t,this.number=n,this.text=s}get length(){return this.to-this.from}}function Du(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}function kn(r,e,t=!0,n=!0){return HK(r,e,t,n)}function YK(r){return r>=56320&&r<57344}function JK(r){return r>=55296&&r<56320}function $D(r,e){let t=r.charCodeAt(e);if(!JK(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return YK(n)?(t-55296<<10)+(n-56320)+65536:t}function Koe(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function ZK(r){return r<65536?1:2}const xb=/\r\n?|\n/;var $n=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}($n||($n={}));class ji{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,s=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,s,i),s+=i):s+=o,n+=i}}iterChangedRanges(e,t=!1){bb(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],s=this.sections[t++];s<0?e.push(n,s):e.push(s,n)}return new ji(e)}composeDesc(e){return this.empty?e:e.empty?this:zD(this,e)}mapDesc(e,t=!1){return e.empty?this:_b(this,e,t)}mapPos(e,t=-1,n=$n.Simple){let s=0,i=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],d=s+a;if(l<0){if(d>e)return i+(e-s);i+=a}else{if(n!=$n.Simple&&d>=e&&(n==$n.TrackDel&&s<e&&d>e||n==$n.TrackBefore&&s<e||n==$n.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!a)return e==s||t<0?i:i+l;i+=l}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return i}touchesRange(e,t=e){for(let n=0,s=0;n<this.sections.length&&s<=t;){let i=this.sections[n++],o=this.sections[n++],a=s+i;if(o>=0&&s<=t&&a>=e)return s<e&&a>t?"cover":!0;s=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+n+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ji(e)}static create(e){return new ji(e)}}class Ir extends ji{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return bb(this,(t,n,s,i,o)=>e=e.replace(s,s+(n-t),o),!1),e}mapDesc(e,t=!1){return _b(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let s=0,i=0;s<t.length;s+=2){let o=t[s],a=t[s+1];if(a>=0){t[s]=a,t[s+1]=o;let l=s>>1;for(;n.length<l;)n.push(Lt.empty);n.push(o?e.slice(i,i+o):Lt.empty)}i+=o}return new Ir(t,n)}compose(e){return this.empty?e:e.empty?this:zD(this,e,!0)}map(e,t=!1){return e.empty?this:_b(this,e,t,!0)}iterChanges(e,t=!1){bb(this,e,t)}get desc(){return ji.create(this.sections)}filter(e){let t=[],n=[],s=[],i=new tf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&i.len==0;){if(i.done)break e;let u=Math.min(i.len,l-a);dn(s,u,-1);let f=i.ins==-1?-1:i.off==0?i.ins:0;dn(t,u,f),f>0&&ba(n,t,i.text),i.forward(u),a+=u}let d=e[o++];for(;a<d;){if(i.done)break e;let u=Math.min(i.len,d-a);dn(t,u,-1),dn(s,u,i.ins==-1?-1:i.off==0?i.ins:0),i.forward(u),a+=u}}return{changes:new Ir(t,n),filtered:ji.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],s=this.sections[t+1];s<0?e.push(n):s==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let s=[],i=[],o=0,a=null;function l(u=!1){if(!u&&!s.length)return;o<t&&dn(s,t-o,-1);let f=new Ir(s,i);a=a?a.compose(f.map(a)):f,s=[],i=[],o=0}function d(u){if(Array.isArray(u))for(let f of u)d(f);else if(u instanceof Ir){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:f,to:p=f,insert:m}=u;if(f>p||f<0||p>t)throw new RangeError(`Invalid change range ${f} to ${p} (in doc of length ${t})`);let v=m?typeof m=="string"?Lt.of(m.split(n||xb)):m:Lt.empty,w=v.length;if(f==p&&w==0)return;f<o&&l(),f>o&&dn(s,f-o,-1),dn(s,p-f,w),ba(i,s,v),o=p}}return d(e),l(!a),a}static empty(e){return new Ir(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let s=0;s<e.length;s++){let i=e[s];if(typeof i=="number")t.push(i,-1);else{if(!Array.isArray(i)||typeof i[0]!="number"||i.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(i.length==1)t.push(i[0],0);else{for(;n.length<s;)n.push(Lt.empty);n[s]=Lt.of(i.slice(1)),t.push(i[0],n[s].length)}}}return new Ir(t,n)}static createSet(e,t){return new Ir(e,t)}}function dn(r,e,t,n=!1){if(e==0&&t<=0)return;let s=r.length-2;s>=0&&t<=0&&t==r[s+1]?r[s]+=e:s>=0&&e==0&&r[s]==0?r[s+1]+=t:n?(r[s]+=e,r[s+1]+=t):r.push(e,t)}function ba(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(Lt.empty);r.push(t)}}function bb(r,e,t){let n=r.inserted;for(let s=0,i=0,o=0;o<r.sections.length;){let a=r.sections[o++],l=r.sections[o++];if(l<0)s+=a,i+=a;else{let d=s,u=i,f=Lt.empty;for(;d+=a,u+=l,l&&n&&(f=f.append(n[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)a=r.sections[o++],l=r.sections[o++];e(s,d,i,u,f),s=d,i=u}}}function _b(r,e,t,n=!1){let s=[],i=n?[]:null,o=new tf(r),a=new tf(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let d=Math.min(o.len,a.len);dn(s,d,-1),o.forward(d),a.forward(d)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let d=a.len;for(dn(s,a.ins,-1);d;){let u=Math.min(o.len,d);o.ins>=0&&l<o.i&&o.len<=u&&(dn(s,0,o.ins),i&&ba(i,s,o.text),l=o.i),o.forward(u),d-=u}a.next()}else if(o.ins>=0){let d=0,u=o.len;for(;u;)if(a.ins==-1){let f=Math.min(u,a.len);d+=f,u-=f,a.forward(f)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;dn(s,d,l<o.i?o.ins:0),i&&l<o.i&&ba(i,s,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return i?Ir.createSet(s,i):ji.create(s);throw new Error("Mismatched change set lengths")}}}function zD(r,e,t=!1){let n=[],s=t?[]:null,i=new tf(r),o=new tf(e);for(let a=!1;;){if(i.done&&o.done)return s?Ir.createSet(n,s):ji.create(n);if(i.ins==0)dn(n,i.len,0,a),i.next();else if(o.len==0&&!o.done)dn(n,0,o.ins,a),s&&ba(s,n,o.text),o.next();else{if(i.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(i.len2,o.len),d=n.length;if(i.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;dn(n,l,u,a),s&&u&&ba(s,n,o.text)}else o.ins==-1?(dn(n,i.off?0:i.len,l,a),s&&ba(s,n,i.textBit(l))):(dn(n,i.off?0:i.len,o.off?0:o.ins,a),s&&!o.off&&ba(s,n,o.text));a=(i.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>d),i.forward2(l),o.forward(l)}}}}class tf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Lt.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Lt.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Al{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,s;return this.empty?n=s=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),n==this.from&&s==this.to?this:new Al(n,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Oe.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Oe.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Oe.range(e.anchor,e.head)}static create(e,t,n){return new Al(e,t,n)}}class Oe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Oe.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Oe([this.main],0)}addRange(e,t=!0){return Oe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,Oe.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Oe(e.ranges.map(t=>Al.fromJSON(t)),e.main)}static single(e,t=e){return new Oe([Oe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,s=0;s<e.length;s++){let i=e[s];if(i.empty?i.from<=n:i.from<n)return Oe.normalized(e.slice(),t);n=i.to}return new Oe(e,t)}static cursor(e,t=0,n,s){return Al.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(s??16777215)<<6)}static range(e,t,n,s){let i=(n??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Al.create(t,e,48|i):Al.create(e,t,(t>e?8:0)|i)}static normalized(e,t=0){let n=e[t];e.sort((s,i)=>s.from-i.from),t=e.indexOf(n);for(let s=1;s<e.length;s++){let i=e[s],o=e[s-1];if(i.empty?i.from<=o.to:i.from<o.to){let a=o.from,l=Math.max(i.to,o.to);s<=t&&t--,e.splice(--s,2,i.anchor>i.head?Oe.range(l,a):Oe.range(a,l))}}return new Oe(e,t)}}function UD(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let H_=0;class Je{constructor(e,t,n,s,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=s,this.id=H_++,this.default=e([]),this.extensions=typeof i=="function"?i(this):i}get reader(){return this}static define(e={}){return new Je(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:q_),!!e.static,e.enables)}of(e){return new ag([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ag(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ag(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function q_(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}class ag{constructor(e,t,n,s){this.dependencies=e,this.facet=t,this.type=n,this.value=s,this.id=H_++}dynamicSlot(e){var t;let n=this.value,s=this.facet.compareInput,i=this.id,o=e[i]>>1,a=this.type==2,l=!1,d=!1,u=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?d=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[f.id]);return{create(f){return f.values[o]=n(f),1},update(f,p){if(l&&p.docChanged||d&&(p.docChanged||p.selection)||kb(f,u)){let m=n(f);if(a?!yT(m,f.values[o],s):!s(m,f.values[o]))return f.values[o]=m,1}return 0},reconfigure:(f,p)=>{let m,v=p.config.address[i];if(v!=null){let w=Hg(p,v);if(this.dependencies.every(x=>x instanceof Je?p.facet(x)===f.facet(x):x instanceof js?p.field(x,!1)==f.field(x,!1):!0)||(a?yT(m=n(f),w,s):s(m=n(f),w)))return f.values[o]=w,0}else m=n(f);return f.values[o]=m,1}}}}function yT(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function kb(r,e){let t=!1;for(let n of e)Ph(r,n)&1&&(t=!0);return t}function XK(r,e,t){let n=t.map(l=>r[l.id]),s=t.map(l=>l.type),i=n.filter(l=>!(l&1)),o=r[e.id]>>1;function a(l){let d=[];for(let u=0;u<n.length;u++){let f=Hg(l,n[u]);if(s[u]==2)for(let p of f)d.push(p);else d.push(f)}return e.combine(d)}return{create(l){for(let d of n)Ph(l,d);return l.values[o]=a(l),1},update(l,d){if(!kb(l,i))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,d){let u=kb(l,n),f=d.config.facets[e.id],p=d.facet(e);if(f&&!u&&q_(t,f))return l.values[o]=p,0;let m=a(l);return e.compare(m,p)?(l.values[o]=p,0):(l.values[o]=m,1)}}}const jm=Je.define({static:!0});class js{constructor(e,t,n,s,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=s,this.spec=i,this.provides=void 0}static define(e){let t=new js(H_++,e.create,e.update,e.compare||((n,s)=>n===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(jm).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,s)=>{let i=n.values[t],o=this.updateF(i,s);return this.compareF(i,o)?0:(n.values[t]=o,1)},reconfigure:(n,s)=>{let i=n.facet(jm),o=s.facet(jm),a;return(a=i.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(n.values[t]=a.create(n),1):s.config.address[this.id]!=null?(n.values[t]=s.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,jm.of({field:this,create:e})]}get extension(){return this}}const Cl={lowest:4,low:3,default:2,high:1,highest:0};function sh(r){return e=>new VD(e,r)}const uy={highest:sh(Cl.highest),high:sh(Cl.high),default:sh(Cl.default),low:sh(Cl.low),lowest:sh(Cl.lowest)};class VD{constructor(e,t){this.inner=e,this.prec=t}}class dy{of(e){return new Sb(this,e)}reconfigure(e){return dy.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Sb{constructor(e,t){this.compartment=e,this.inner=t}}class Wg{constructor(e,t,n,s,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=s,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let s=[],i=Object.create(null),o=new Map;for(let p of QK(e,t,o))p instanceof js?s.push(p):(i[p.facet.id]||(i[p.facet.id]=[])).push(p);let a=Object.create(null),l=[],d=[];for(let p of s)a[p.id]=d.length<<1,d.push(m=>p.slot(m));let u=n==null?void 0:n.config.facets;for(let p in i){let m=i[p],v=m[0].facet,w=u&&u[p]||[];if(m.every(x=>x.type==0))if(a[v.id]=l.length<<1|1,q_(w,m))l.push(n.facet(v));else{let x=v.combine(m.map(_=>_.value));l.push(n&&v.compare(x,n.facet(v))?n.facet(v):x)}else{for(let x of m)x.type==0?(a[x.id]=l.length<<1|1,l.push(x.value)):(a[x.id]=d.length<<1,d.push(_=>x.dynamicSlot(_)));a[v.id]=d.length<<1,d.push(x=>XK(x,v,m))}}let f=d.map(p=>p(a));return new Wg(e,o,f,a,l,i)}}function QK(r,e,t){let n=[[],[],[],[],[]],s=new Map;function i(o,a){let l=s.get(o);if(l!=null){if(l<=a)return;let d=n[l].indexOf(o);d>-1&&n[l].splice(d,1),o instanceof Sb&&t.delete(o.compartment)}if(s.set(o,a),Array.isArray(o))for(let d of o)i(d,a);else if(o instanceof Sb){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(o.compartment)||o.inner;t.set(o.compartment,d),i(d,a)}else if(o instanceof VD)i(o.inner,o.prec);else if(o instanceof js)n[a].push(o),o.provides&&i(o.provides,a);else if(o instanceof ag)n[a].push(o),o.facet.extensions&&i(o.facet.extensions,Cl.default);else{let d=o.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);i(d,a)}}return i(r,Cl.default),n.reduce((o,a)=>o.concat(a))}function Ph(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let s=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|s}function Hg(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const WD=Je.define(),Cb=Je.define({combine:r=>r.some(e=>e),static:!0}),HD=Je.define({combine:r=>r.length?r[0]:void 0,static:!0}),qD=Je.define(),KD=Je.define(),GD=Je.define(),YD=Je.define({combine:r=>r.length?r[0]:!1});class Xa{constructor(e,t){this.type=e,this.value=t}static define(){return new eG}}class eG{of(e){return new Xa(this,e)}}class tG{constructor(e){this.map=e}of(e){return new Qt(this,e)}}class Qt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Qt(this.type,t)}is(e){return this.type==e}static define(e={}){return new tG(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let s of e){let i=s.map(t);i&&n.push(i)}return n}}Qt.reconfigure=Qt.define();Qt.appendConfig=Qt.define();let Vn=class gh{constructor(e,t,n,s,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=s,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&UD(n,t.newLength),i.some(a=>a.type==gh.time)||(this.annotations=i.concat(gh.time.of(Date.now())))}static create(e,t,n,s,i,o){return new gh(e,t,n,s,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(gh.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};Vn.time=Xa.define();Vn.userEvent=Xa.define();Vn.addToHistory=Xa.define();Vn.remote=Xa.define();function rG(r,e){let t=[];for(let n=0,s=0;;){let i,o;if(n<r.length&&(s==e.length||e[s]>=r[n]))i=r[n++],o=r[n++];else if(s<e.length)i=e[s++],o=e[s++];else return t;!t.length||t[t.length-1]<i?t.push(i,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function JD(r,e,t){var n;let s,i,o;return t?(s=e.changes,i=Ir.empty(e.changes.length),o=r.changes.compose(e.changes)):(s=e.changes.map(r.changes),i=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(i):(n=r.selection)===null||n===void 0?void 0:n.map(s),effects:Qt.mapEffects(r.effects,s).concat(Qt.mapEffects(e.effects,i)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Eb(r,e,t){let n=e.selection,s=du(e.annotations);return e.userEvent&&(s=s.concat(Vn.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ir?e.changes:Ir.of(e.changes||[],t,r.facet(HD)),selection:n&&(n instanceof Oe?n:Oe.single(n.anchor,n.head)),effects:du(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function ZD(r,e,t){let n=Eb(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let i=1;i<e.length;i++){e[i].filter===!1&&(t=!1);let o=!!e[i].sequential;n=JD(n,Eb(r,e[i],o?n.changes.newLength:r.doc.length),o)}let s=Vn.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return sG(t?nG(s):s)}function nG(r){let e=r.startState,t=!0;for(let s of e.facet(qD)){let i=s(r);if(i===!1){t=!1;break}Array.isArray(i)&&(t=t===!0?i:rG(t,i))}if(t!==!0){let s,i;if(t===!1)i=r.changes.invertedDesc,s=Ir.empty(e.doc.length);else{let o=r.changes.filter(t);s=o.changes,i=o.filtered.mapDesc(o.changes).invertedDesc}r=Vn.create(e,s,r.selection&&r.selection.map(i),Qt.mapEffects(r.effects,i),r.annotations,r.scrollIntoView)}let n=e.facet(KD);for(let s=n.length-1;s>=0;s--){let i=n[s](r);i instanceof Vn?r=i:Array.isArray(i)&&i.length==1&&i[0]instanceof Vn?r=i[0]:r=ZD(e,du(i),!1)}return r}function sG(r){let e=r.startState,t=e.facet(GD),n=r;for(let s=t.length-1;s>=0;s--){let i=t[s](r);i&&Object.keys(i).length&&(n=JD(n,Eb(e,i,r.changes.newLength),!0))}return n==r?r:Vn.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const iG=[];function du(r){return r==null?iG:Array.isArray(r)?r:[r]}var ho=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(ho||(ho={}));const oG=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ab;try{Ab=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function aG(r){if(Ab)return Ab.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||oG.test(t)))return!0}return!1}function lG(r){return e=>{if(!/\S/.test(e))return ho.Space;if(aG(e))return ho.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return ho.Word;return ho.Other}}class Wt{constructor(e,t,n,s,i,o){this.config=e,this.doc=t,this.selection=n,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ph(this,a<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Ph(this,n),Hg(this,n)}update(...e){return ZD(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:s}=t;for(let a of e.effects)a.is(dy.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,d)=>s.set(d,l)),t=null),s.set(a.value.compartment,a.value.extension)):a.is(Qt.reconfigure)?(t=null,n=a.value):a.is(Qt.appendConfig)&&(t=null,n=du(n).concat(a.value));let i;t?i=e.startState.values.slice():(t=Wg.resolve(n,s,this),i=new Wt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,d)=>d.reconfigure(l,this),null).values);let o=e.startState.facet(Cb)?e.newSelection:e.newSelection.asSingle();new Wt(t,e.newDoc,o,i,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Oe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),s=this.changes(n.changes),i=[n.range],o=du(n.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),d=this.changes(l.changes),u=d.map(s);for(let p=0;p<a;p++)i[p]=i[p].map(u);let f=s.mapDesc(d,!0);i.push(l.range.map(f)),s=s.compose(u),o=Qt.mapEffects(o,u).concat(Qt.mapEffects(du(l.effects),f))}return{changes:s,selection:Oe.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ir?e:Ir.of(e,this.doc.length,this.facet(Wt.lineSeparator))}toText(e){return Lt.of(e.split(this.facet(Wt.lineSeparator)||xb))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Ph(this,t),Hg(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let s=e[n];s instanceof js&&this.config.address[s.id]!=null&&(t[n]=s.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(n){for(let i in n)if(Object.prototype.hasOwnProperty.call(e,i)){let o=n[i],a=e[i];s.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Wt.create({doc:e.doc,selection:Oe.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=Wg.resolve(e.extensions||[],new Map),n=e.doc instanceof Lt?e.doc:Lt.of((e.doc||"").split(t.staticFacet(Wt.lineSeparator)||xb)),s=e.selection?e.selection instanceof Oe?e.selection:Oe.single(e.selection.anchor,e.selection.head):Oe.single(0);return UD(s,n.length),t.staticFacet(Cb)||(s=s.asSingle()),new Wt(t,n,s,t.dynamicSlots.map(()=>null),(i,o)=>o.create(i),null)}get tabSize(){return this.facet(Wt.tabSize)}get lineBreak(){return this.facet(Wt.lineSeparator)||`
`}get readOnly(){return this.facet(YD)}phrase(e,...t){for(let n of this.facet(Wt.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,s)=>{if(s=="$")return"$";let i=+(s||1);return!i||i>t.length?n:t[i-1]})),e}languageDataAt(e,t,n=-1){let s=[];for(let i of this.facet(WD))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return lG(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:s}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let l=kn(t,o,!1);if(i(t.slice(l,o))!=ho.Word)break;o=l}for(;a<s;){let l=kn(t,a);if(i(t.slice(a,l))!=ho.Word)break;a=l}return o==a?null:Oe.range(o+n,a+n)}}Wt.allowMultipleSelections=Cb;Wt.tabSize=Je.define({combine:r=>r.length?r[0]:4});Wt.lineSeparator=HD;Wt.readOnly=YD;Wt.phrases=Je.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(s=>r[s]==e[s])}});Wt.languageData=WD;Wt.changeFilter=qD;Wt.transactionFilter=KD;Wt.transactionExtender=GD;dy.reconfigure=Qt.define();function ld(r,e,t={}){let n={};for(let s of r)for(let i of Object.keys(s)){let o=s[i],a=n[i];if(a===void 0)n[i]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,i))n[i]=t[i](a,o);else throw new Error("Config merge conflict for field "+i)}for(let s in e)n[s]===void 0&&(n[s]=e[s]);return n}class Iu{eq(e){return this==e}range(e,t=e){return Tb.create(e,t,this)}}Iu.prototype.startSide=Iu.prototype.endSide=0;Iu.prototype.point=!1;Iu.prototype.mapMode=$n.TrackDel;let Tb=class XD{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new XD(e,t,n)}};function Nb(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class K_{constructor(e,t,n,s){this.from=e,this.to=t,this.value=n,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,s=0){let i=n?this.to:this.from;for(let o=s,a=i.length;;){if(o==a)return o;let l=o+a>>1,d=i[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return d>=0?o:a;d>=0?a=l:o=l+1}}between(e,t,n,s){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(s(this.from[i]+e,this.to[i]+e,this.value[i])===!1)return!1}map(e,t){let n=[],s=[],i=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let d=this.value[l],u=this.from[l]+e,f=this.to[l]+e,p,m;if(u==f){let v=t.mapPos(u,d.startSide,d.mapMode);if(v==null||(p=m=v,d.startSide!=d.endSide&&(m=t.mapPos(u,d.endSide),m<p)))continue}else if(p=t.mapPos(u,d.startSide),m=t.mapPos(f,d.endSide),p>m||p==m&&d.startSide>0&&d.endSide<=0)continue;(m-p||d.endSide-d.startSide)<0||(o<0&&(o=p),d.point&&(a=Math.max(a,m-p)),n.push(d),s.push(p-o),i.push(m-o))}return{mapped:n.length?new K_(s,i,n,a):null,pos:o}}}class $t{constructor(e,t,n,s){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=s}static create(e,t,n,s){return new $t(e,t,n,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:s=0,filterTo:i=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(Nb)),this.isEmpty)return t.length?$t.of(t):this;let a=new QD(this,null,-1).goto(0),l=0,d=[],u=new Vl;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let f=t[l++];u.addInner(f.from,f.to,f.value)||d.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||s>this.chunkEnd(a.chunkIndex)||i<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||s>a.to||i<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||d.push(Tb.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!d.length?$t.empty:this.nextLayer.update({add:d,filter:o,filterFrom:s,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],s=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],d=e.touchesRange(a,a+l.length);if(d===!1)s=Math.max(s,l.maxPoint),t.push(l),n.push(e.mapPos(a));else if(d===!0){let{mapped:u,pos:f}=l.map(a,e);u&&(s=Math.max(s,u.maxPoint),t.push(u),n.push(f))}}let i=this.nextLayer.map(e);return t.length==0?i:new $t(n,t,i||$t.empty,s)}between(e,t,n){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let i=this.chunkPos[s],o=this.chunk[s];if(t>=i&&e<=i+o.length&&o.between(i,e-i,t-i,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return rf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return rf.from(e).goto(t)}static compare(e,t,n,s,i=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=i),a=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=i),l=vT(o,a,n),d=new ih(o,l,i),u=new ih(a,l,i);n.iterGaps((f,p,m)=>wT(d,f,u,p,m,s)),n.empty&&n.length==0&&wT(d,0,u,0,0,s)}static eq(e,t,n=0,s){s==null&&(s=999999999);let i=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(i.length!=o.length)return!1;if(!i.length)return!0;let a=vT(i,o),l=new ih(i,a,0).goto(n),d=new ih(o,a,0).goto(n);for(;;){if(l.to!=d.to||!jb(l.active,d.active)||l.point&&(!d.point||!l.point.eq(d.point)))return!1;if(l.to>s)return!0;l.next(),d.next()}}static spans(e,t,n,s,i=-1){let o=new ih(e,null,i).goto(t),a=t,l=o.openStart;for(;;){let d=Math.min(o.to,n);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);s.point(a,d,o.point,u,f,o.pointRank),l=Math.min(o.openEnd(d),u.length)}else d>a&&(s.span(a,d,o.active,l),l=o.openEnd(d));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,t=!1){let n=new Vl;for(let s of e instanceof Tb?[e]:t?cG(e):e)n.add(s.from,s.to,s.value);return n.finish()}static join(e){if(!e.length)return $t.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let s=e[n];s!=$t.empty;s=s.nextLayer)t=new $t(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}$t.empty=new $t([],[],null,-1);function cG(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(Nb(e,n)>0)return r.slice().sort(Nb);e=n}return r}$t.empty.nextLayer=$t.empty;class Vl{finishChunk(e){this.chunks.push(new K_(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Vl)).add(e,t,n)}addInner(e,t,n){let s=e-this.lastTo||n.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner($t.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=$t.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function vT(r,e,t){let n=new Map;for(let i of r)for(let o=0;o<i.chunk.length;o++)i.chunk[o].maxPoint<=0&&n.set(i.chunk[o],i.chunkPos[o]);let s=new Set;for(let i of e)for(let o=0;o<i.chunk.length;o++){let a=n.get(i.chunk[o]);a!=null&&(t?t.mapPos(a):a)==i.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+i.chunk[o].length))&&s.add(i.chunk[o])}return s}class QD{constructor(e,t,n,s=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class rf{constructor(e){this.heap=e}static from(e,t=null,n=-1){let s=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&s.push(new QD(o,t,n,i));return s.length==1?s[0]:new rf(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)Zw(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)Zw(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Zw(this.heap,0)}}}function Zw(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let s=r[n];if(n+1<r.length&&s.compare(r[n+1])>=0&&(s=r[n+1],n++),t.compare(s)<0)break;r[n]=t,r[e]=s,e=n}}class ih{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=rf.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Pm(this.active,e),Pm(this.activeTo,e),Pm(this.activeRank,e),this.minActive=xT(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:s,rank:i}=this.cursor;for(;t<this.activeRank.length&&(i-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Rm(this.active,t,n),Rm(this.activeTo,t,s),Rm(this.activeRank,t,i),e&&Rm(e,t,this.cursor.from),this.minActive=xT(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),n&&Pm(n,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let i=this.cursor.value;if(!i.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let s=n.length-1;s>=0&&n[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function wT(r,e,t,n,s,i){r.goto(e),t.goto(n);let o=n+s,a=n,l=n-e;for(;;){let d=r.to+l-t.to,u=d||r.endSide-t.endSide,f=u<0?r.to+l:t.to,p=Math.min(f,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&jb(r.activeForPoint(r.to),t.activeForPoint(t.to))||i.comparePoint(a,p,r.point,t.point):p>a&&!jb(r.active,t.active)&&i.compareRange(a,p,r.active,t.active),f>o)break;(d||r.openEnd!=t.openEnd)&&i.boundChange&&i.boundChange(f),a=f,u<=0&&r.next(),u>=0&&t.next()}}function jb(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function Pm(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function Rm(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function xT(r,e){let t=-1,n=1e9;for(let s=0;s<e.length;s++)(e[s]-n||r[s].endSide-r[t].endSide)<0&&(t=s,n=e[s]);return t}function cd(r,e,t=r.length){let n=0;for(let s=0;s<t&&s<r.length;)r.charCodeAt(s)==9?(n+=e-n%e,s++):(n++,s=kn(r,s));return n}function Pb(r,e,t,n){for(let s=0,i=0;;){if(i>=e)return s;if(s==r.length)break;i+=r.charCodeAt(s)==9?t-i%t:1,s=kn(r,s)}return n===!0?-1:r.length}const Rb="",bT=typeof Symbol>"u"?"__"+Rb:Symbol.for(Rb),Ob=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Oa{constructor(e,t){this.rules=[];let{finish:n}=t||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function i(o,a,l,d){let u=[],f=/^@(\w+)\b/.exec(o[0]),p=f&&f[1]=="keyframes";if(f&&a==null)return l.push(o[0]+";");for(let m in a){let v=a[m];if(/&/.test(m))i(m.split(/,\s*/).map(w=>o.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),v,l);else if(v&&typeof v=="object"){if(!f)throw new RangeError("The value of a property ("+m+") should be a primitive value.");i(s(m),v,u,p)}else v!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+v+";")}(u.length||p)&&l.push((n&&!f&&!d?o.map(n):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)i(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_T[bT]||1;return _T[bT]=e+1,Rb+e.toString(36)}static mount(e,t,n){let s=e[Ob],i=n&&n.nonce;s?i&&s.setNonce(i):s=new uG(e,i),s.mount(Array.isArray(t)?t:[t],e)}}let kT=new Map;class uG{constructor(e,t){let n=e.ownerDocument||e,s=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let i=kT.get(n);if(i)return e[Ob]=i;this.sheet=new s.CSSStyleSheet,kT.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Ob]=this}mount(e,t){let n=this.sheet,s=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<i&&l>-1&&(this.modules.splice(l,1),i--,l=-1),l==-1){if(this.modules.splice(i++,0,a),n)for(let d=0;d<a.rules.length;d++)n.insertRule(a.rules[d],s++)}else{for(;i<l;)s+=this.modules[i++].rules.length;s+=a.rules.length,i++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ma={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},nf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dG=typeof navigator<"u"&&/Mac/.test(navigator.platform),hG=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Zr=0;Zr<10;Zr++)Ma[48+Zr]=Ma[96+Zr]=String(Zr);for(var Zr=1;Zr<=24;Zr++)Ma[Zr+111]="F"+Zr;for(var Zr=65;Zr<=90;Zr++)Ma[Zr]=String.fromCharCode(Zr+32),nf[Zr]=String.fromCharCode(Zr);for(var Xw in Ma)nf.hasOwnProperty(Xw)||(nf[Xw]=Ma[Xw]);function fG(r){var e=dG&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||hG&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?nf:Ma)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function sf(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Mb(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function lg(r,e){if(!e.anchorNode)return!1;try{return Mb(r,e.anchorNode)}catch{return!1}}function of(r){return r.nodeType==3?Hl(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Rh(r,e,t,n){return t?ST(r,e,t,n,-1)||ST(r,e,t,n,1):!1}function Wl(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function qg(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function ST(r,e,t,n,s){for(;;){if(r==t&&e==n)return!0;if(e==(s<0?0:Ii(r))){if(r.nodeName=="DIV")return!1;let i=r.parentNode;if(!i||i.nodeType!=1)return!1;e=Wl(r)+(s<0?0:1),r=i}else if(r.nodeType==1){if(r=r.childNodes[e+(s<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=s<0?Ii(r):0}else return!1}}function Ii(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function hy(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function pG(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function e2(r,e){let t=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function mG(r,e,t,n,s,i,o,a){let l=r.ownerDocument,d=l.defaultView||window;for(let u=r,f=!1;u&&!f;)if(u.nodeType==1){let p,m=u==l.body,v=1,w=1;if(m)p=pG(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let C=u.getBoundingClientRect();({scaleX:v,scaleY:w}=e2(u,C)),p={left:C.left,right:C.left+u.clientWidth*v,top:C.top,bottom:C.top+u.clientHeight*w}}let x=0,_=0;if(s=="nearest")e.top<p.top?(_=e.top-(p.top+o),t>0&&e.bottom>p.bottom+_&&(_=e.bottom-p.bottom+o)):e.bottom>p.bottom&&(_=e.bottom-p.bottom+o,t<0&&e.top-_<p.top&&(_=e.top-(p.top+o)));else{let C=e.bottom-e.top,A=p.bottom-p.top;_=(s=="center"&&C<=A?e.top+C/2-A/2:s=="start"||s=="center"&&t<0?e.top-o:e.bottom-A+o)-p.top}if(n=="nearest"?e.left<p.left?(x=e.left-(p.left+i),t>0&&e.right>p.right+x&&(x=e.right-p.right+i)):e.right>p.right&&(x=e.right-p.right+i,t<0&&e.left<p.left+x&&(x=e.left-(p.left+i))):x=(n=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:n=="start"==a?e.left-i:e.right-(p.right-p.left)+i)-p.left,x||_)if(m)d.scrollBy(x,_);else{let C=0,A=0;if(_){let T=u.scrollTop;u.scrollTop+=_/w,A=(u.scrollTop-T)*w}if(x){let T=u.scrollLeft;u.scrollLeft+=x/v,C=(u.scrollLeft-T)*v}e={left:e.left-C,top:e.top-A,right:e.right-C,bottom:e.bottom-A},C&&Math.abs(C-x)<1&&(n="nearest"),A&&Math.abs(A-_)<1&&(s="nearest")}if(m)break;(e.top<p.top||e.bottom>p.bottom||e.left<p.left||e.right>p.right)&&(e={left:Math.max(e.left,p.left),right:Math.min(e.right,p.right),top:Math.max(e.top,p.top),bottom:Math.min(e.bottom,p.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function gG(r){let e=r.ownerDocument,t,n;for(let s=r.parentNode;s&&!(s==e.body||t&&n);)if(s.nodeType==1)!n&&s.scrollHeight>s.clientHeight&&(n=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:n}}class yG{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Ii(t):0),n,Math.min(e.focusOffset,n?Ii(n):0))}set(e,t,n,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=s}}let Kc=null;function t2(r){if(r.setActive)return r.setActive();if(Kc)return r.focus(Kc);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Kc==null?{get preventScroll(){return Kc={preventScroll:!0},!0}}:void 0),!Kc){Kc=!1;for(let t=0;t<e.length;){let n=e[t++],s=e[t++],i=e[t++];n.scrollTop!=s&&(n.scrollTop=s),n.scrollLeft!=i&&(n.scrollLeft=i)}}}let CT;function Hl(r,e,t=e){let n=CT||(CT=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function hu(r,e,t,n){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=n);let i=new KeyboardEvent("keydown",s);i.synthetic=!0,r.dispatchEvent(i);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,r.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function vG(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function r2(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function wG(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Ii(t));;)if(n){if(t.nodeType!=1)return!1;let s=t.childNodes[n-1];s.contentEditable=="false"?n--:(t=s,n=Ii(t))}else{if(t==r)return!0;n=Wl(t),t=t.parentNode}}function n2(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function s2(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=Ii(t)}else if(t.parentNode&&!qg(t))n=Wl(t),t=t.parentNode;else return null}}function i2(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!qg(t))n=Wl(t)+1,t=t.parentNode;else return null}}class hn{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new hn(e.parentNode,Wl(e),t)}static after(e,t){return new hn(e.parentNode,Wl(e)+1,t)}}const G_=[];class Xt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,s=null,i;for(let o of this.children){if(o.flags&7){if(!o.dom&&(i=s?s.nextSibling:n.firstChild)){let a=Xt.get(i);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(i)}o.sync(e,t),o.flags&=-8}if(i=s?s.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&i!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;i&&i!=o.dom;)i=ET(i);else n.insertBefore(o.dom,i);s=o.dom}for(i=s?s.nextSibling:n.firstChild,i&&t&&t.node==n&&(t.written=!0);i;)i=ET(i)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let s=Ii(e)==0?0:t==0?-1:1;for(;;){let i=e.parentNode;if(i==this.dom)break;s==0&&i.firstChild!=i.lastChild&&(e==i.firstChild?s=-1:s=1),e=i}s<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Xt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let s=0,i=0;;s++){let o=this.children[s];if(o.dom==n)return i;i+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let s=-1,i=-1,o=-1,a=-1;for(let l=0,d=n,u=n;l<this.children.length;l++){let f=this.children[l],p=d+f.length;if(d<e&&p>t)return f.domBoundsAround(e,t,d);if(p>=e&&s==-1&&(s=l,i=d),d>t&&f.dom.parentNode==this.dom){o=l,a=u;break}u=p,d=p+f.breakAfter}return{from:i,to:a<0?n+this.length:a,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=G_){this.markDirty();for(let s=e;s<t;s++){let i=this.children[s];i.parent==this&&n.indexOf(i)<0&&i.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let s=0;s<n.length;s++)n[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new o2(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,s,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Xt.prototype.breakAfter=0;function ET(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class o2{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function a2(r,e,t,n,s,i,o,a,l){let{children:d}=r,u=d.length?d[e]:null,f=i.length?i[i.length-1]:null,p=f?f.breakAfter:o;if(!(e==n&&u&&!o&&!p&&i.length<2&&u.merge(t,s,i.length?f:null,t==0,a,l))){if(n<d.length){let m=d[n];m&&(s<m.length||m.breakAfter&&(f!=null&&f.breakAfter))?(e==n&&(m=m.split(s),s=0),!p&&f&&m.merge(0,s,f,!0,0,l)?i[i.length-1]=m:((s||m.children.length&&!m.children[0].length)&&m.merge(0,s,null,!1,0,l),i.push(m))):m!=null&&m.breakAfter&&(f?f.breakAfter=1:o=1),n++}for(u&&(u.breakAfter=o,t>0&&(!o&&i.length&&u.merge(t,u.length,i[0],!1,a,0)?u.breakAfter=i.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<n&&i.length;)if(d[n-1].become(i[i.length-1]))n--,i.pop(),l=i.length?0:a;else if(d[e].become(i[0]))e++,i.shift(),a=i.length?0:l;else break;!i.length&&e&&n<d.length&&!d[e-1].breakAfter&&d[n].merge(0,0,d[e-1],!1,a,l)&&e--,(e<n||i.length)&&r.replaceChildren(e,n,i)}}function l2(r,e,t,n,s,i){let o=r.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:d,off:u}=o.findPos(e,-1),f=e-t;for(let p of n)f+=p.length;r.length+=f,a2(r,d,u,a,l,n,0,s,i)}let Fn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Db=typeof document<"u"?document:{documentElement:{style:{}}};const Ib=/Edge\/(\d+)/.exec(Fn.userAgent),c2=/MSIE \d/.test(Fn.userAgent),Lb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fn.userAgent),fy=!!(c2||Lb||Ib),AT=!fy&&/gecko\/(\d+)/i.test(Fn.userAgent),Qw=!fy&&/Chrome\/(\d+)/.exec(Fn.userAgent),xG="webkitFontSmoothing"in Db.documentElement.style,u2=!fy&&/Apple Computer/.test(Fn.vendor),TT=u2&&(/Mobile\/\w+/.test(Fn.userAgent)||Fn.maxTouchPoints>2);var qe={mac:TT||/Mac/.test(Fn.platform),windows:/Win/.test(Fn.platform),linux:/Linux|X11/.test(Fn.platform),ie:fy,ie_version:c2?Db.documentMode||6:Lb?+Lb[1]:Ib?+Ib[1]:0,gecko:AT,gecko_version:AT?+(/Firefox\/(\d+)/.exec(Fn.userAgent)||[0,0])[1]:0,chrome:!!Qw,chrome_version:Qw?+Qw[1]:0,ios:TT,android:/Android\b/.test(Fn.userAgent),safari:u2,webkit_version:xG?+(/\bAppleWebKit\/(\d+)/.exec(Fn.userAgent)||[0,0])[1]:0,tabSize:Db.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const bG=256;class Qs extends Xt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof Qs)||this.length-(t-e)+n.length>bG||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Qs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new hn(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return _G(this.dom,e,t)}}class ko extends Xt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let s of t)s.setParent(this)}setAttrs(e){if(r2(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,s,i,o){return n&&(!(n instanceof ko&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0)?!1:(l2(this,e,t,n?n.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,s=-1,i=0;for(let a of this.children){let l=n+a.length;l>e&&t.push(n<e?a.split(e-n):a),s<0&&n>=e&&(s=i),n=l,i++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new ko(this.mark,t,o)}domAtPos(e){return d2(this,e)}coordsAt(e,t){return f2(this,e,t)}}function _G(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let s=e,i=e,o=0;e==0&&t<0||e==n&&t>=0?qe.chrome||qe.gecko||(e?(s--,o=1):i<n&&(i++,o=-1)):t<0?s--:i<n&&i++;let a=Hl(r,s,i).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return qe.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,d=>d.width)||l),o?hy(l,o<0):l||null}class _a extends Xt{static create(e,t,n){return new _a(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=_a.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,s,i,o){return n&&(!(n instanceof _a)||!this.widget.compare(n.widget)||e>0&&i<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof _a&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Lt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,s=this.posAtStart;return n?n.slice(s,s+this.length):Lt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?hn.before(this.dom):hn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let s=this.dom.getClientRects(),i=null;if(!s.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?s.length-1:0;i=s[a],!(e>0?a==0:a==s.length-1||i.top<i.bottom);a+=o?-1:1);return hy(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Lu extends Xt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Lu&&e.side==this.side}split(){return new Lu(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?hn.before(this.dom):hn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Lt.empty}get isHidden(){return!0}}Qs.prototype.children=_a.prototype.children=Lu.prototype.children=G_;function d2(r,e){let t=r.dom,{children:n}=r,s=0;for(let i=0;s<n.length;s++){let o=n[s],a=i+o.length;if(!(a==i&&o.getSide()<=0)){if(e>i&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-i);if(e<=i)break;i=a}}for(let i=s;i>0;i--){let o=n[i-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let i=s;i<n.length;i++){let o=n[i];if(o.dom.parentNode==t)return o.domAtPos(0)}return new hn(t,0)}function h2(r,e,t){let n,{children:s}=r;t>0&&e instanceof ko&&s.length&&(n=s[s.length-1])instanceof ko&&n.mark.eq(e.mark)?h2(n,e.children[0],t-1):(s.push(e),e.setParent(r)),r.length+=e.length}function f2(r,e,t){let n=null,s=-1,i=null,o=-1;function a(d,u){for(let f=0,p=0;f<d.children.length&&p<=u;f++){let m=d.children[f],v=p+m.length;v>=u&&(m.children.length?a(m,u-p):(!i||i.isHidden&&(t>0||SG(i,m)))&&(v>u||p==v&&m.getSide()>0)?(i=m,o=u-p):(p<u||p==v&&m.getSide()<0&&!m.isHidden)&&(n=m,s=u-p)),p=v}}a(r,e);let l=(t<0?n:i)||n||i;return l?l.coordsAt(Math.max(0,l==n?s:o),t):kG(r)}function kG(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=of(e);return t[t.length-1]||null}function SG(r,e){let t=r.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function Fb(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const NT=Object.create(null);function Kg(r,e,t){if(r==e)return!0;r||(r=NT),e||(e=NT);let n=Object.keys(r),s=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let i of n)if(i!=t&&(s.indexOf(i)==-1||r[i]!==e[i]))return!1;return!0}function Bb(r,e,t){let n=!1;if(e)for(let s in e)t&&s in t||(n=!0,s=="style"?r.style.cssText="":r.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(n=!0,s=="style"?r.style.cssText=t[s]:r.setAttribute(s,t[s]));return n}function CG(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}class nc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Sn=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(Sn||(Sn={}));class Ht extends Iu{constructor(e,t,n,s){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Kf(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Da(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,s;if(e.isBlockGap)n=-5e8,s=4e8;else{let{start:i,end:o}=p2(e,t);n=(i?t?-3e8:-1:5e8)-1,s=(o?t?2e8:1:-6e8)+1}return new Da(e,n,s,t,e.widget||null,!0)}static line(e){return new Gf(e)}static set(e,t=!1){return $t.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ht.none=$t.empty;class Kf extends Ht{constructor(e){let{start:t,end:n}=p2(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Kf&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Kg(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Kf.prototype.point=!1;class Gf extends Ht{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Gf&&this.spec.class==e.spec.class&&Kg(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Gf.prototype.mapMode=$n.TrackBefore;Gf.prototype.point=!0;class Da extends Ht{constructor(e,t,n,s,i,o){super(t,n,i,e),this.block=s,this.isReplace=o,this.mapMode=s?t<=0?$n.TrackBefore:$n.TrackAfter:$n.TrackDel}get type(){return this.startSide!=this.endSide?Sn.WidgetRange:this.startSide<=0?Sn.WidgetBefore:Sn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Da&&EG(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Da.prototype.point=!0;function p2(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t??e,end:n??e}}function EG(r,e){return r==e||!!(r&&e&&r.compare(e))}function cg(r,e,t,n=0){let s=t.length-1;s>=0&&t[s]+n>=r?t[s]=Math.max(t[s],e):t.push(r,e)}class Tr extends Xt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,s,i,o){if(n){if(!(n instanceof Tr))return!1;this.dom||n.transferDOM(this)}return s&&this.setDeco(n?n.attrs:null),l2(this,e,t,n?n.children.slice():[],i,o),!0}split(e){let t=new Tr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:s}=this.childPos(e);s&&(t.append(this.children[n].split(s),0),this.children[n].merge(s,this.children[n].length,null,!1,0,0),n++);for(let i=n;i<this.children.length;i++)t.append(this.children[i],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Kg(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){h2(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Fb(t,this.attrs||{})),n&&(this.attrs=Fb({class:n},this.attrs||{}))}domAtPos(e){return d2(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(r2(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Bb(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&Xt.get(s)instanceof ko;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((n=Xt.get(s))===null||n===void 0?void 0:n.isEditable)==!1&&(!qe.ios||!this.children.some(i=>i instanceof Qs))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Qs)||/[^ -~]/.test(n.text))return null;let s=of(n.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=f2(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:s}=this.parent.view.viewState,i=n.bottom-n.top;if(Math.abs(i-s.lineHeight)<2&&s.textHeight<i){let o=(i-s.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return e instanceof Tr&&this.children.length==0&&e.children.length==0&&Kg(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,s=0;n<e.children.length;n++){let i=e.children[n],o=s+i.length;if(o>=t){if(i instanceof Tr)return i;if(o>t)break}s=o+i.breakAfter}return null}}class go extends Xt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,s,i,o){return n&&(!(n instanceof go)||!this.widget.compare(n.widget)||e>0&&i<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?hn.before(this.dom):hn.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new go(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return G_}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Lt.empty}domBoundsAround(){return null}become(e){return e instanceof go&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof $b?null:hy(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class $b extends nc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Oh{constructor(e,t,n,s){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof go&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Tr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Om(new Lu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof go)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=i,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Om(new Qs(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}}span(e,t,n,s){this.buildText(t-e,n,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,n,s,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Da){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(n instanceof Da)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new go(n.widget||Fu.block,a,n));else{let l=_a.create(n.widget||Fu.inline,a,a?0:n.startSide),d=this.atCursorPos&&!l.isEditable&&i<=s.length&&(e<t||n.startSide>0),u=!l.isEditable&&(e<t||i>s.length||n.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!d&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),d&&(f.append(Om(new Lu(1),s),i),i=s.length+Math.max(0,i-s.length)),f.append(Om(l,s),i),this.atCursorPos=u,this.pendingBuffer=u?e<t||i>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,s,i){let o=new Oh(e,t,n,i);return o.openEnd=$t.spans(s,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Om(r,e){for(let t of e)r=new ko(t,[r],r.length);return r}class Fu extends nc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Fu.inline=new Fu("span");Fu.block=new Fu("div");var cr=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(cr||(cr={}));const ql=cr.LTR,Y_=cr.RTL;function m2(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const AG=m2("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),TG=m2("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zb=Object.create(null),fi=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);zb[e]=t,zb[t]=-e}function g2(r){return r<=247?AG[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?TG[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const NG=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ka{get dir(){return this.level%2?Y_:ql}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,s){let i=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(i<0||(s!=0?s<0?a.from<t:a.to>t:e[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function y2(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],s=e[t];if(n.from!=s.from||n.to!=s.to||n.direction!=s.direction||!y2(n.inner,s.inner))return!1}return!0}const Yt=[];function jG(r,e,t,n,s){for(let i=0;i<=n.length;i++){let o=i?n[i-1].to:e,a=i<n.length?n[i].from:t,l=i?256:s;for(let d=o,u=l,f=l;d<a;d++){let p=g2(r.charCodeAt(d));p==512?p=u:p==8&&f==4&&(p=16),Yt[d]=p==4?2:p,p&7&&(f=p),u=p}for(let d=o,u=l,f=l;d<a;d++){let p=Yt[d];if(p==128)d<a-1&&u==Yt[d+1]&&u&24?p=Yt[d]=u:Yt[d]=256;else if(p==64){let m=d+1;for(;m<a&&Yt[m]==64;)m++;let v=d&&u==8||m<t&&Yt[m]==8?f==1?1:8:256;for(let w=d;w<m;w++)Yt[w]=v;d=m-1}else p==8&&f==1&&(Yt[d]=1);u=p,p&7&&(f=p)}}}function PG(r,e,t,n,s){let i=s==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let d=o?n[o-1].to:e,u=o<n.length?n[o].from:t;for(let f=d,p,m,v;f<u;f++)if(m=zb[p=r.charCodeAt(f)])if(m<0){for(let w=a-3;w>=0;w-=3)if(fi[w+1]==-m){let x=fi[w+2],_=x&2?s:x&4?x&1?i:s:0;_&&(Yt[f]=Yt[fi[w]]=_),a=w;break}}else{if(fi.length==189)break;fi[a++]=f,fi[a++]=p,fi[a++]=l}else if((v=Yt[f])==2||v==1){let w=v==s;l=w?0:1;for(let x=a-3;x>=0;x-=3){let _=fi[x+2];if(_&2)break;if(w)fi[x+2]|=2;else{if(_&4)break;fi[x+2]|=4}}}}}function RG(r,e,t,n){for(let s=0,i=n;s<=t.length;s++){let o=s?t[s-1].to:r,a=s<t.length?t[s].from:e;for(let l=o;l<a;){let d=Yt[l];if(d==256){let u=l+1;for(;;)if(u==a){if(s==t.length)break;u=t[s++].to,a=s<t.length?t[s].from:e}else if(Yt[u]==256)u++;else break;let f=i==1,p=(u<e?Yt[u]:n)==1,m=f==p?f?1:2:n;for(let v=u,w=s,x=w?t[w-1].to:r;v>l;)v==x&&(v=t[--w].from,x=w?t[w-1].to:r),Yt[--v]=m;l=u}else i=d,l++}}}function Ub(r,e,t,n,s,i,o){let a=n%2?2:1;if(n%2==s%2)for(let l=e,d=0;l<t;){let u=!0,f=!1;if(d==i.length||l<i[d].from){let w=Yt[l];w!=a&&(u=!1,f=w==16)}let p=!u&&a==1?[]:null,m=u?n:n+1,v=l;e:for(;;)if(d<i.length&&v==i[d].from){if(f)break e;let w=i[d];if(!u)for(let x=w.to,_=d+1;;){if(x==t)break e;if(_<i.length&&i[_].from==x)x=i[_++].to;else{if(Yt[x]==a)break e;break}}if(d++,p)p.push(w);else{w.from>l&&o.push(new ka(l,w.from,m));let x=w.direction==ql!=!(m%2);Vb(r,x?n+1:n,s,w.inner,w.from,w.to,o),l=w.to}v=w.to}else{if(v==t||(u?Yt[v]!=a:Yt[v]==a))break;v++}p?Ub(r,l,v,n+1,s,p,o):l<v&&o.push(new ka(l,v,m)),l=v}else for(let l=t,d=i.length;l>e;){let u=!0,f=!1;if(!d||l>i[d-1].to){let w=Yt[l-1];w!=a&&(u=!1,f=w==16)}let p=!u&&a==1?[]:null,m=u?n:n+1,v=l;e:for(;;)if(d&&v==i[d-1].to){if(f)break e;let w=i[--d];if(!u)for(let x=w.from,_=d;;){if(x==e)break e;if(_&&i[_-1].to==x)x=i[--_].from;else{if(Yt[x-1]==a)break e;break}}if(p)p.push(w);else{w.to<l&&o.push(new ka(w.to,l,m));let x=w.direction==ql!=!(m%2);Vb(r,x?n+1:n,s,w.inner,w.from,w.to,o),l=w.from}v=w.from}else{if(v==e||(u?Yt[v-1]!=a:Yt[v-1]==a))break;v--}p?Ub(r,v,l,n+1,s,p,o):v<l&&o.push(new ka(v,l,m)),l=v}}function Vb(r,e,t,n,s,i,o){let a=e%2?2:1;jG(r,s,i,n,a),PG(r,s,i,n,a),RG(s,i,n,a),Ub(r,s,i,e,t,n,o)}function OG(r,e,t){if(!r)return[new ka(0,0,e==Y_?1:0)];if(e==ql&&!t.length&&!NG.test(r))return v2(r.length);if(t.length)for(;r.length>Yt.length;)Yt[Yt.length]=256;let n=[],s=e==ql?0:1;return Vb(r,s,s,t,0,r.length,n),n}function v2(r){return[new ka(0,r,0)]}let w2="";function MG(r,e,t,n,s){var i;let o=n.head-r.from,a=ka.find(e,o,(i=n.bidiLevel)!==null&&i!==void 0?i:-1,n.assoc),l=e[a],d=l.side(s,t);if(o==d){let p=a+=s?1:-1;if(p<0||p>=e.length)return null;l=e[a=p],o=l.side(!s,t),d=l.side(s,t)}let u=kn(r.text,o,l.forward(s,t));(u<l.from||u>l.to)&&(u=d),w2=r.text.slice(Math.min(o,u),Math.max(o,u));let f=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return f&&u==d&&f.level+(s?0:1)<l.level?Oe.cursor(f.side(!s,t)+r.from,f.forward(s,t)?1:-1,f.level):Oe.cursor(u+r.from,l.forward(s,t)?-1:1,l.level)}function DG(r,e,t){for(let n=e;n<t;n++){let s=g2(r.charCodeAt(n));if(s==1)return ql;if(s==2||s==4)return Y_}return ql}const x2=Je.define(),b2=Je.define(),_2=Je.define(),k2=Je.define(),Wb=Je.define(),S2=Je.define(),C2=Je.define(),J_=Je.define(),Z_=Je.define(),E2=Je.define({combine:r=>r.some(e=>e)}),A2=Je.define({combine:r=>r.some(e=>e)}),T2=Je.define();class fu{constructor(e,t="nearest",n="nearest",s=5,i=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=s,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new fu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new fu(Oe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Mm=Qt.define({map:(r,e)=>r.map(e)}),N2=Qt.define();function qs(r,e,t){let n=r.facet(k2);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const uo=Je.define({combine:r=>r.length?r[0]:!0});let IG=0;const Qc=Je.define({combine(r){return r.filter((e,t)=>{for(let n=0;n<t;n++)if(r[n].plugin==e.plugin)return!1;return!0})}});class Qr{constructor(e,t,n,s,i){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=s,this.baseExtensions=i(this),this.extension=this.baseExtensions.concat(Qc.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Qc.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:s,provide:i,decorations:o}=t||{};return new Qr(IG++,e,n,s,a=>{let l=[];return o&&l.push(af.of(d=>{let u=d.plugin(a);return u?o(u):Ht.none})),i&&l.push(i(a)),l})}static fromClass(e,t){return Qr.define((n,s)=>new e(n,s),t)}}class ex{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(qs(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){qs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){qs(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const j2=Je.define(),X_=Je.define(),af=Je.define(),P2=Je.define(),Q_=Je.define(),R2=Je.define();function jT(r,e){let t=r.state.facet(R2);if(!t.length)return t;let n=t.map(i=>i instanceof Function?i(r):i),s=[];return $t.spans(n,e.from,e.to,{point(){},span(i,o,a,l){let d=i-e.from,u=o-e.from,f=s;for(let p=a.length-1;p>=0;p--,l--){let m=a[p].spec.bidiIsolate,v;if(m==null&&(m=DG(e.text,d,u)),l>0&&f.length&&(v=f[f.length-1]).to==d&&v.direction==m)v.to=u,f=v.inner;else{let w={from:d,to:u,direction:m,inner:[]};f.push(w),f=w.inner}}}}),s}const O2=Je.define();function ek(r){let e=0,t=0,n=0,s=0;for(let i of r.state.facet(O2)){let o=i(r);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:t,top:n,bottom:s}}const yh=Je.define();class Ts{constructor(e,t,n,s){this.fromA=e,this.toA=t,this.fromB=n,this.toB=s}join(e){return new Ts(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>n.toA)){if(s.toA<n.fromA)break;n=n.join(s),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let s=0,i=0,o=0,a=0;;s++){let l=s==e.length?null:e[s],d=o-a,u=l?l.fromB:1e9;for(;i<t.length&&t[i]<u;){let f=t[i],p=t[i+1],m=Math.max(a,f),v=Math.min(u,p);if(m<=v&&new Ts(m+d,v+d,m,v).addToSet(n),p>u)break;i+=2}if(!l)return n;new Ts(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,a=l.toB}}}class Gg{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Ir.empty(this.startState.doc.length);for(let i of n)this.changes=this.changes.compose(i.changes);let s=[];this.changes.iterChangedRanges((i,o,a,l)=>s.push(new Ts(i,o,a,l))),this.changedRanges=s}static create(e,t,n){return new Gg(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class PT extends Xt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ht.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Tr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ts(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:d,toA:u})=>u<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!VG(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let i=s>-1?FG(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:u}=this.hasComposition;n=new Ts(d,u,e.changes.mapPos(d,-1),e.changes.mapPos(u,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(qe.ie||qe.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=zG(o,a,e.changes);return n=Ts.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=qe.chrome||qe.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||s.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof go&&o.widget instanceof $b&&i.push(o.dom);s.updateGaps(i)}updateChildren(e,t,n){let s=n?n.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let o=s.length-1;;o--){let a=o>=0?s[o]:null;if(!a)break;let{fromA:l,toA:d,fromB:u,toB:f}=a,p,m,v,w;if(n&&n.range.fromB<f&&n.range.toB>u){let T=Oh.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),P=Oh.build(this.view.state.doc,n.range.toB,f,this.decorations,this.dynamicDecorationMap);m=T.breakAtStart,v=T.openStart,w=P.openEnd;let O=this.compositionView(n);P.breakAtStart?O.breakAfter=1:P.content.length&&O.merge(O.length,O.length,P.content[0],!1,P.openStart,0)&&(O.breakAfter=P.content[0].breakAfter,P.content.shift()),T.content.length&&O.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),p=T.content.concat(O).concat(P.content)}else({content:p,breakAtStart:m,openStart:v,openEnd:w}=Oh.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:x,off:_}=i.findPos(d,1),{i:C,off:A}=i.findPos(l,-1);a2(this,C,A,x,_,p,m,v,w)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(N2)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new Qs(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new ko(s,[t],t.length);let n=new Tr;return n.append(t,0),n}fixCompositionDOM(e){let t=(i,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Xt.get(i);a&&a!=o&&(a.dom=null),o.setDOM(i)},n=this.childPos(e.range.fromB,1),s=this.children[n.i];t(e.line,s);for(let i=e.marks.length-1;i>=-1;i--)n=s.childPos(n.off,1),s=s.children[n.i],t(i>=0?e.marks[i].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,s=n==this.dom,i=!s&&!(this.view.state.facet(uo)||this.dom.tabIndex>-1)&&lg(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(s||t||i))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),d=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(qe.gecko&&a.empty&&!this.hasComposition&&LG(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=d=new hn(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Rh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Rh(d.node,d.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{qe.android&&qe.chrome&&this.dom.contains(u.focusNode)&&UG(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=sf(this.view.root);if(f)if(a.empty){if(qe.gecko){let p=BG(l.node,l.offset);if(p&&p!=3){let m=(p==1?s2:i2)(l.node,l.offset);m&&(l=new hn(m.node,m.offset))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(d.node,d.offset)}catch{}}else{let p=document.createRange();a.anchor>a.head&&([l,d]=[d,l]),p.setEnd(d.node,d.offset),p.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(p)}i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,d)),this.impreciseAnchor=l.precise?null:new hn(u.anchorNode,u.anchorOffset),this.impreciseHead=d.precise?null:new hn(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Rh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=sf(e.root),{anchorNode:s,anchorOffset:i}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=Tr.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!l||!d||l.bottom>d.top)return;let u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&n.collapse(s,i)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let s=e.offset;!n&&s<t.childNodes.length;s++){let i=Xt.get(t.childNodes[s]);i instanceof Tr&&(n=i.domAtPos(0))}for(let s=e.offset-1;!n&&s>=0;s--){let i=Xt.get(t.childNodes[s]);i instanceof Tr&&(n=i.domAtPos(i.length))}return n?new hn(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=Xt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(n<s.length||s instanceof Tr)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,s=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=i-a.breakAfter,d=l-a.length;if(l<e)break;if(d<=e&&(d<e||a.covers(-1))&&(l>e||a.covers(1))&&(!n||a instanceof Tr&&!(n instanceof Tr&&t>=0)))n=a,s=d;else if(n&&d==e&&l==e&&a instanceof go&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(n=null)}i=d}return n?n.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),s=this.children[t];if(!(s instanceof Tr))return null;for(;s.children.length;){let{i:a,off:l}=s.childPos(n,1);for(;;a++){if(a==s.children.length)return null;if((s=s.children[a]).length)break}n=l}if(!(s instanceof Qs))return null;let i=kn(s.text,n);if(i==n)return null;let o=Hl(s.dom,n,i).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:s}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==cr.LTR;for(let d=0,u=0;u<this.children.length;u++){let f=this.children[u],p=d+f.length;if(p>s)break;if(d>=n){let m=f.dom.getBoundingClientRect();if(t.push(m.height),o){let v=f.dom.lastChild,w=v?of(v):[];if(w.length){let x=w[w.length-1],_=l?x.right-m.left:m.right-x.left;_>a&&(a=_,this.minWidth=i,this.minWidthFrom=d,this.minWidthTo=p)}}}d=p+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?cr.RTL:cr.LTR}measureTextSize(){for(let i of this.children)if(i instanceof Tr){let o=i.measureTextSize();if(o)return o}let e=document.createElement("div"),t,n,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=of(e.firstChild)[0];t=e.getBoundingClientRect().height,n=i?i.width/27:7,s=i?i.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new o2(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,s=0;;s++){let i=s==t.viewports.length?null:t.viewports[s],o=i?i.from-1:this.length;if(o>n){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Ht.replace({widget:new $b(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Ht.set(e)}updateDeco(){let e=1,t=this.view.state.facet(af).map(i=>(this.dynamicDecorationMap[e++]=typeof i=="function")?i(this.view):i),n=!1,s=this.view.state.facet(P2).map((i,o)=>{let a=typeof i=="function";return a&&(n=!0),a?i(this.view):i});for(s.length&&(this.dynamicDecorationMap[e++]=n,t.push($t.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(T2))try{if(d(this.view,e.range,e))return!0}catch(u){qs(this.view.state,u,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!n)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,s.left),top:Math.min(n.top,s.top),right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)});let i=ek(this.view),o={left:n.left-i.left,top:n.top-i.top,right:n.right+i.right,bottom:n.bottom+i.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;mG(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==cr.LTR)}}function LG(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function M2(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let n=s2(t.focusNode,t.focusOffset),s=i2(t.focusNode,t.focusOffset),i=n||s;if(s&&n&&s.node!=n.node){let a=Xt.get(s.node);if(!a||a instanceof Qs&&a.text!=s.node.nodeValue)i=s;else if(r.docView.lastCompositionAfterCursor){let l=Xt.get(n.node);!l||l instanceof Qs&&l.text!=n.node.nodeValue||(i=s)}}if(r.docView.lastCompositionAfterCursor=i!=n,!i)return null;let o=e-i.offset;return{from:o,to:o+i.node.nodeValue.length,node:i.node}}function FG(r,e,t){let n=M2(r,t);if(!n)return null;let{node:s,from:i,to:o}=n,a=s.nodeValue;if(/[\n\r]/.test(a)||r.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc,d=new Ts(l.mapPos(i),l.mapPos(o),i,o),u=[];for(let f=s.parentNode;;f=f.parentNode){let p=Xt.get(f);if(p instanceof ko)u.push({node:f,deco:p.mark});else{if(p instanceof Tr||f.nodeName=="DIV"&&f.parentNode==r.contentDOM)return{range:d,text:s,marks:u,line:f};if(f!=r.contentDOM)u.push({node:f,deco:new Kf({inclusive:!0,attributes:CG(f),tagName:f.tagName.toLowerCase()})});else return null}}}function BG(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let $G=class{constructor(){this.changes=[]}compareRange(e,t){cg(e,t,this.changes)}comparePoint(e,t){cg(e,t,this.changes)}boundChange(e){cg(e,e,this.changes)}};function zG(r,e,t){let n=new $G;return $t.compare(r,e,t,n),n.changes}function UG(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function VG(r,e){let t=!1;return e&&r.iterChangedRanges((n,s)=>{n<e.to&&s>e.from&&(t=!0)}),t}function WG(r,e,t=1){let n=r.charCategorizer(e),s=r.doc.lineAt(e),i=e-s.from;if(s.length==0)return Oe.cursor(e);i==0?t=1:i==s.length&&(t=-1);let o=i,a=i;t<0?o=kn(s.text,i,!1):a=kn(s.text,i);let l=n(s.text.slice(o,a));for(;o>0;){let d=kn(s.text,o,!1);if(n(s.text.slice(d,o))!=l)break;o=d}for(;a<s.length;){let d=kn(s.text,a);if(n(s.text.slice(a,d))!=l)break;a=d}return Oe.range(o+s.from,a+s.from)}function HG(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function qG(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function tx(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function RT(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function OT(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Hb(r,e,t){let n,s,i,o,a=!1,l,d,u,f;for(let v=r.firstChild;v;v=v.nextSibling){let w=of(v);for(let x=0;x<w.length;x++){let _=w[x];s&&tx(s,_)&&(_=RT(OT(_,s.bottom),s.top));let C=HG(e,_),A=qG(t,_);if(C==0&&A==0)return v.nodeType==3?MT(v,e,t):Hb(v,e,t);if(!n||o>A||o==A&&i>C){n=v,s=_,i=C,o=A;let T=A?t<_.top?-1:1:C?e<_.left?-1:1:0;a=!T||(T>0?x<w.length-1:x>0)}C==0?t>_.bottom&&(!u||u.bottom<_.bottom)?(l=v,u=_):t<_.top&&(!f||f.top>_.top)&&(d=v,f=_):u&&tx(u,_)?u=OT(u,_.bottom):f&&tx(f,_)&&(f=RT(f,_.top))}}if(u&&u.bottom>=t?(n=l,s=u):f&&f.top<=t&&(n=d,s=f),!n)return{node:r,offset:0};let p=Math.max(s.left,Math.min(s.right,e));if(n.nodeType==3)return MT(n,p,t);if(a&&n.contentEditable!="false")return Hb(n,p,t);let m=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(s.left+s.right)/2?1:0);return{node:r,offset:m}}function MT(r,e,t){let n=r.nodeValue.length,s=-1,i=1e9,o=0;for(let a=0;a<n;a++){let l=Hl(r,a,a+1).getClientRects();for(let d=0;d<l.length;d++){let u=l[d];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<i){let p=e>=(u.left+u.right)/2,m=p;if((qe.chrome||qe.gecko)&&Hl(r,a).getBoundingClientRect().left==u.right&&(m=!p),f<=0)return{node:r,offset:a+(m?1:0)};s=a+(m?1:0),i=f}}}return{node:r,offset:s>-1?s:o>0?r.nodeValue.length:0}}function D2(r,e,t,n=-1){var s,i;let o=r.contentDOM.getBoundingClientRect(),a=o.top+r.viewState.paddingTop,l,{docHeight:d}=r.viewState,{x:u,y:f}=e,p=f-a;if(p<0)return 0;if(p>d)return r.state.doc.length;for(let T=r.viewState.heightOracle.textHeight/2,P=!1;l=r.elementAtHeight(p),l.type!=Sn.Text;)for(;p=n>0?l.bottom+T:l.top-T,!(p>=0&&p<=d);){if(P)return t?null:0;P=!0,n=-n}f=a+p;let m=l.from;if(m<r.viewport.from)return r.viewport.from==0?0:t?null:DT(r,o,l,u,f);if(m>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:DT(r,o,l,u,f);let v=r.dom.ownerDocument,w=r.root.elementFromPoint?r.root:v,x=w.elementFromPoint(u,f);x&&!r.contentDOM.contains(x)&&(x=null),x||(u=Math.max(o.left+1,Math.min(o.right-1,u)),x=w.elementFromPoint(u,f),x&&!r.contentDOM.contains(x)&&(x=null));let _,C=-1;if(x&&((s=r.docView.nearest(x))===null||s===void 0?void 0:s.isEditable)!=!1){if(v.caretPositionFromPoint){let T=v.caretPositionFromPoint(u,f);T&&({offsetNode:_,offset:C}=T)}else if(v.caretRangeFromPoint){let T=v.caretRangeFromPoint(u,f);T&&({startContainer:_,startOffset:C}=T,(!r.contentDOM.contains(_)||qe.safari&&KG(_,C,u)||qe.chrome&&GG(_,C,u))&&(_=void 0))}_&&(C=Math.min(Ii(_),C))}if(!_||!r.docView.dom.contains(_)){let T=Tr.find(r.docView,m);if(!T)return p>l.top+l.height/2?l.to:l.from;({node:_,offset:C}=Hb(T.dom,u,f))}let A=r.docView.nearest(_);if(!A)return null;if(A.isWidget&&((i=A.dom)===null||i===void 0?void 0:i.nodeType)==1){let T=A.dom.getBoundingClientRect();return e.y<T.top||e.y<=T.bottom&&e.x<=(T.left+T.right)/2?A.posAtStart:A.posAtEnd}else return A.localPosFromDOM(_,C)+A.posAtStart}function DT(r,e,t,n,s){let i=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let a=r.viewState.heightOracle.textHeight,l=Math.floor((s-t.top-(r.defaultLineHeight-a)*.5)/a);i+=l*r.viewState.heightOracle.lineLength}let o=r.state.sliceDoc(t.from,t.to);return t.from+Pb(o,i,r.state.tabSize)}function KG(r,e,t){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let s=r.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Hl(r,n-1,n).getBoundingClientRect().left>t}function GG(r,e,t){if(e!=0)return!1;for(let s=r;;){let i=s.parentNode;if(!i||i.nodeType!=1||i.firstChild!=s)return!1;if(i.classList.contains("cm-line"))break;s=i}let n=r.nodeType==1?r.getBoundingClientRect():Hl(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function qb(r,e,t){let n=r.lineBlockAt(e);if(Array.isArray(n.type)){let s;for(let i of n.type){if(i.from>e)break;if(!(i.to<e)){if(i.from<e&&i.to>e)return i;(!s||i.type==Sn.Text&&(s.type!=i.type||(t<0?i.from<e:i.to>e)))&&(s=i)}}return s||n}return n}function YG(r,e,t,n){let s=qb(r,e.head,e.assoc||-1),i=!n||s.type!=Sn.Text||!(r.lineWrapping||s.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(i){let o=r.dom.getBoundingClientRect(),a=r.textDirectionAt(s.from),l=r.posAtCoords({x:t==(a==cr.LTR)?o.right-1:o.left+1,y:(i.top+i.bottom)/2});if(l!=null)return Oe.cursor(l,t?-1:1)}return Oe.cursor(t?s.to:s.from,t?-1:1)}function IT(r,e,t,n){let s=r.state.doc.lineAt(e.head),i=r.bidiSpans(s),o=r.textDirectionAt(s.from);for(let a=e,l=null;;){let d=MG(s,i,o,a,t),u=w2;if(!d){if(s.number==(t?r.state.doc.lines:1))return a;u=`
`,s=r.state.doc.line(s.number+(t?1:-1)),i=r.bidiSpans(s),d=r.visualLineSide(s,!t)}if(l){if(!l(u))return a}else{if(!n)return d;l=n(u)}a=d}}function JG(r,e,t){let n=r.state.charCategorizer(e),s=n(t);return i=>{let o=n(i);return s==ho.Space&&(s=o),s==o}}function ZG(r,e,t,n){let s=e.head,i=t?1:-1;if(s==(t?r.state.doc.length:0))return Oe.cursor(s,e.assoc);let o=e.goalColumn,a,l=r.contentDOM.getBoundingClientRect(),d=r.coordsAtPos(s,e.assoc||-1),u=r.documentTop;if(d)o==null&&(o=d.left-l.left),a=i<0?d.top:d.bottom;else{let m=r.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,r.defaultCharacterWidth*(s-m.from))),a=(i<0?m.top:m.bottom)+u}let f=l.left+o,p=n??r.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let v=a+(p+m)*i,w=D2(r,{x:f,y:v},!1,i);if(v<l.top||v>l.bottom||(i<0?w<s:w>s)){let x=r.docView.coordsForChar(w),_=!x||v<x.top?-1:1;return Oe.cursor(w,_,void 0,o)}}}function ug(r,e,t){for(;;){let n=0;for(let s of r)s.between(e-1,e+1,(i,o,a)=>{if(e>i&&e<o){let l=n||t||(e-i<o-e?-1:1);e=l<0?i:o,n=l}});if(!n)return e}}function rx(r,e,t){let n=ug(r.state.facet(Q_).map(s=>s(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:Oe.cursor(n,n<t.from?1:-1)}const vh="";class XG{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Wt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=vh}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let s=e;;){this.findPointBefore(n,s);let i=this.text.length;this.readNode(s);let o=s.nextSibling;if(o==t)break;let a=Xt.get(s),l=Xt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:qg(s))||qg(o)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>i)&&this.lineBreak(),s=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let i=-1,o=1,a;if(this.lineSeparator?(i=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=s.exec(t))&&(i=a.index,o=a[0].length),this.append(t.slice(n,i<0?t.length:i)),i<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=i+o}}readNode(e){if(e.cmIgnore)return;let t=Xt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let s=n.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(QG(e,n.node,n.offset)?t:0))}}function QG(r,e,t){for(;;){if(!e||t<Ii(e))return!1;if(e==r)return!0;t=Wl(e)+1,e=e.parentNode}}class LT{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class eY{constructor(e,t,n,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let a=i||o?[]:nY(e),l=new XG(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=sY(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=i&&i.node==a.focusNode&&i.offset==a.focusOffset||!Mb(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),d=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Mb(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((qe.ios||qe.chrome)&&e.state.selection.main.empty&&l!=d&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(l,d),p=Math.max(l,d),m=u.from-f,v=u.to-p;(m==0||m==1||f==0)&&(v==0||v==-1||p==e.state.doc.length)&&(l=0,d=e.state.doc.length)}this.newSel=Oe.single(d,l)}}}function I2(r,e){let t,{newSel:n}=e,s=r.state.selection.main,i=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=s.from,d=null;(i===8||qe.android&&e.text.length<a-o)&&(l=s.to,d="end");let u=rY(r.state.doc.sliceString(o,a,vh),e.text,l-o,d);u&&(qe.chrome&&i==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==vh+vh&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:Lt.of(e.text.slice(u.from,u.toB).split(vh))})}else n&&(!r.hasFocus&&r.state.facet(uo)||n.main.eq(s))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!s.empty&&n&&n.main.empty?t={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,s.to)}:(qe.mac||qe.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=Oe.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:Lt.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,s.to))}:qe.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=Oe.single(n.main.anchor-1,n.main.head-1)),t={from:s.from,to:s.to,insert:Lt.of([" "])}),t)return tk(r,t,n,i);if(n&&!n.main.eq(s)){let o=!1,a="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),a=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function tk(r,e,t,n=-1){if(qe.ios&&r.inputState.flushIOSKey(e))return!0;let s=r.state.selection.main;if(qe.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&r.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&hu(r.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&hu(r.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&hu(r.contentDOM,"Delete",46)))return!0;let i=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let o,a=()=>o||(o=tY(r,e,t));return r.state.facet(S2).some(l=>l(r,e.from,e.to,i,a))||r.dispatch(a()),!0}function tY(r,e,t){let n,s=r.state,i=s.selection.main;if(e.from>=i.from&&e.to<=i.to&&e.to-e.from>=(i.to-i.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let a=i.from<e.from?s.sliceDoc(i.from,e.from):"",l=i.to>e.to?s.sliceDoc(e.to,i.to):"";n=s.replaceSelection(r.state.toText(a+e.insert.sliceString(0,void 0,r.state.lineBreak)+l))}else{let a=s.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(s.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=i.to&&e.to>=i.to-10){let d=r.state.sliceDoc(e.from,e.to),u,f=t&&M2(r,t.main.head);if(f){let v=e.insert.length-(e.to-e.from);u={from:f.from,to:f.to-v}}else u=r.state.doc.lineAt(i.head);let p=i.to-e.to,m=i.to-i.from;n=s.changeByRange(v=>{if(v.from==i.from&&v.to==i.to)return{changes:a,range:l||v.map(a)};let w=v.to-p,x=w-d.length;if(v.to-v.from!=m||r.state.sliceDoc(x,w)!=d||v.to>=u.from&&v.from<=u.to)return{range:v};let _=s.changes({from:x,to:w,insert:e.insert}),C=v.to-i.to;return{changes:_,range:l?Oe.range(Math.max(0,l.anchor+C),Math.max(0,l.head+C)):v.map(_)}})}else n={changes:a,selection:l&&s.selection.replaceRange(l)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),s.update(n,{userEvent:o,scrollIntoView:!0})}function rY(r,e,t,n){let s=Math.min(r.length,e.length),i=0;for(;i<s&&r.charCodeAt(i)==e.charCodeAt(i);)i++;if(i==s&&r.length==e.length)return null;let o=r.length,a=e.length;for(;o>0&&a>0&&r.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,i-Math.min(o,a));t-=o+l-i}if(o<i&&r.length<e.length){let l=t<=i&&t>=o?i-t:0;i-=l,a=i+(a-o),o=i}else if(a<i){let l=t<=i&&t>=a?i-t:0;i-=l,o=i+(o-a),a=i}return{from:i,toA:o,toB:a}}function nY(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:i}=r.observer.selectionRange;return t&&(e.push(new LT(t,n)),(s!=t||i!=n)&&e.push(new LT(s,i))),e}function sY(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?Oe.single(t+e,n+e):null}class iY{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,qe.safari&&e.contentDOM.addEventListener("input",()=>null),qe.gecko&&bY(e.contentDOM.ownerDocument)}handleEvent(e){!fY(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let s of n.observers)s(this.view,t);for(let s of n.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=oY(e),n=this.handlers,s=this.view.contentDOM;for(let i in t)if(i!="scroll"){let o=!t[i].handlers.length,a=n[i];a&&o!=!a.handlers.length&&(s.removeEventListener(i,this.handleEvent),a=null),a||s.addEventListener(i,this.handleEvent,{passive:o})}for(let i in n)i!="scroll"&&!t[i]&&s.removeEventListener(i,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&F2.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),qe.android&&qe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return qe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=L2.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||aY.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,hu(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:qe.safari&&!qe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function FT(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(s){qs(t.state,s)}}}function oY(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let s=n.spec,i=s&&s.plugin.domEventHandlers,o=s&&s.plugin.domEventObservers;if(i)for(let a in i){let l=i[a];l&&t(a).handlers.push(FT(n.value,l))}if(o)for(let a in o){let l=o[a];l&&t(a).observers.push(FT(n.value,l))}}for(let n in ei)t(n).handlers.push(ei[n]);for(let n in Ns)t(n).observers.push(Ns[n]);return e}const L2=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],aY="dthko",F2=[16,17,18,20,91,92,224,225],Dm=6;function Im(r){return Math.max(0,r)*.7+8}function lY(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class cY{constructor(e,t,n,s){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=gG(e.contentDOM),this.atoms=e.state.facet(Q_).map(o=>o(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Wt.allowMultipleSelections)&&uY(e,t),this.dragging=hY(e,t)&&z2(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&lY(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,s=0,i=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:i,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=ek(this.view);e.clientX-l.left<=s+Dm?t=-Im(s-e.clientX):e.clientX+l.right>=o-Dm&&(t=Im(e.clientX-o)),e.clientY-l.top<=i+Dm?n=-Im(i-e.clientY):e.clientY+l.bottom>=a-Dm&&(n=Im(e.clientY-a)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let s=e.ranges[n],i=null;if(s.empty){let o=ug(this.atoms,s.from,0);o!=s.from&&(i=Oe.cursor(o,-1))}else{let o=ug(this.atoms,s.from,-1),a=ug(this.atoms,s.to,1);(o!=s.from||a!=s.to)&&(i=Oe.range(s.from==s.anchor?o:a,s.from==s.head?o:a))}i&&(t||(t=e.ranges.slice()),t[n]=i)}return t?Oe.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function uY(r,e){let t=r.state.facet(x2);return t.length?t[0](e):qe.mac?e.metaKey:e.ctrlKey}function dY(r,e){let t=r.state.facet(b2);return t.length?t[0](e):qe.mac?!e.altKey:!e.ctrlKey}function hY(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=sf(r.root);if(!n||n.rangeCount==0)return!0;let s=n.getRangeAt(0).getClientRects();for(let i=0;i<s.length;i++){let o=s[i];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function fY(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Xt.get(t))&&n.ignoreEvent(e))return!1;return!0}const ei=Object.create(null),Ns=Object.create(null),B2=qe.ie&&qe.ie_version<15||qe.ios&&qe.webkit_version<604;function pY(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),$2(r,t.value)},50)}function py(r,e,t){for(let n of r.facet(e))t=n(t,r);return t}function $2(r,e){e=py(r.state,J_,e);let{state:t}=r,n,s=1,i=t.toText(e),o=i.lines==t.selection.ranges.length;if(Kb!=null&&t.selection.ranges.every(l=>l.empty)&&Kb==i.toString()){let l=-1;n=t.changeByRange(d=>{let u=t.doc.lineAt(d.from);if(u.from==l)return{range:d};l=u.from;let f=t.toText((o?i.line(s++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:Oe.cursor(d.from+f.length)}})}else o?n=t.changeByRange(l=>{let d=i.line(s++);return{changes:{from:l.from,to:l.to,insert:d.text},range:Oe.cursor(l.from+d.length)}}):n=t.replaceSelection(i);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ns.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};ei.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);Ns.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};Ns.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};ei.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(_2))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=yY(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new cY(r,e,t,n)),n&&r.observer.ignore(()=>{t2(r.contentDOM);let i=r.root.activeElement;i&&!i.contains(r.contentDOM)&&i.blur()});let s=r.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function BT(r,e,t,n){if(n==1)return Oe.cursor(e,t);if(n==2)return WG(r.state,e,t);{let s=Tr.find(r.docView,e),i=r.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:i.from,a=s?s.posAtEnd:i.to;return a<r.state.doc.length&&a==i.to&&a++,Oe.range(o,a)}}let $T=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function mY(r,e,t,n){let s=Tr.find(r.docView,e);if(!s)return 1;let i=e-s.posAtStart;if(i==0)return 1;if(i==s.length)return-1;let o=s.coordsAt(i,-1);if(o&&$T(t,n,o))return-1;let a=s.coordsAt(i,1);return a&&$T(t,n,a)?1:o&&o.bottom>=n?-1:1}function zT(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:mY(r,t,e.clientX,e.clientY)}}const gY=qe.ie&&qe.ie_version<=11;let UT=null,VT=0,WT=0;function z2(r){if(!gY)return r.detail;let e=UT,t=WT;return UT=r,WT=Date.now(),VT=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(VT+1)%3:1}function yY(r,e){let t=zT(r,e),n=z2(e),s=r.state.selection;return{update(i){i.docChanged&&(t.pos=i.changes.mapPos(t.pos),s=s.map(i.changes))},get(i,o,a){let l=zT(r,i),d,u=BT(r,l.pos,l.bias,n);if(t.pos!=l.pos&&!o){let f=BT(r,t.pos,t.bias,n),p=Math.min(f.from,u.from),m=Math.max(f.to,u.to);u=p<u.from?Oe.range(p,m):Oe.range(m,p)}return o?s.replaceRange(s.main.extend(u.from,u.to)):a&&n==1&&s.ranges.length>1&&(d=vY(s,l.pos))?d:a?s.addRange(u):Oe.create([u])}}}function vY(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:s}=r.ranges[t];if(n<=e&&s>=e)return Oe.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}ei.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let s=r.docView.nearest(e.target);if(s&&s.isWidget){let i=s.posAtStart,o=i+s.length;(i>=t.to||o<=t.from)&&(t=Oe.range(i,o))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",py(r.state,Z_,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ei.dragend=r=>(r.inputState.draggedContent=null,!1);function HT(r,e,t,n){if(t=py(r.state,J_,t),!t)return;let s=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:i}=r.inputState,o=n&&i&&dY(r,e)?{from:i.from,to:i.to}:null,a={from:s,insert:t},l=r.state.changes(o?[o,a]:a);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),r.inputState.draggedContent=null}ei.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),s=0,i=()=>{++s==t.length&&HT(r,e,n.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=i,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),i()},a.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return HT(r,e,n,!0),!0}return!1};ei.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=B2?null:e.clipboardData;return t?($2(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(pY(r),!1)};function wY(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function xY(r){let e=[],t=[],n=!1;for(let s of r.selection.ranges)s.empty||(e.push(r.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:i}of r.selection.ranges){let o=r.doc.lineAt(i);o.number>s&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),s=o.number}n=!0}return{text:py(r,Z_,e.join(r.lineBreak)),ranges:t,linewise:n}}let Kb=null;ei.copy=ei.cut=(r,e)=>{let{text:t,ranges:n,linewise:s}=xY(r.state);if(!t&&!s)return!1;Kb=s?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let i=B2?null:e.clipboardData;return i?(i.clearData(),i.setData("text/plain",t),!0):(wY(r,t),!1)};const U2=Xa.define();function V2(r,e){let t=[];for(let n of r.facet(C2)){let s=n(r,e);s&&t.push(s)}return t.length?r.update({effects:t,annotations:U2.of(!0)}):null}function W2(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=V2(r.state,e);t?r.dispatch(t):r.update([])}},10)}Ns.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),W2(r)};Ns.blur=r=>{r.observer.clearSelectionRange(),W2(r)};Ns.compositionstart=Ns.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};Ns.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,qe.chrome&&qe.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};Ns.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};ei.beforeinput=(r,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let i=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(i&&o.length){let a=o[0],l=r.posAtDOM(a.startContainer,a.startOffset),d=r.posAtDOM(a.endContainer,a.endOffset);return tk(r,{from:l,to:d,insert:r.state.toText(i)},null),!0}}let s;if(qe.chrome&&qe.android&&(s=L2.find(i=>i.inputType==e.inputType))&&(r.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return qe.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),qe.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>Ns.compositionend(r,e),20),!1};const qT=new Set;function bY(r){qT.has(r)||(qT.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const KT=["pre-wrap","normal","pre-line","break-spaces"];let Bu=!1;function GT(){Bu=!1}class _Y{constructor(e){this.lineWrapping=e,this.doc=Lt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return KT.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let s=e[n];s<0?n++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,n,s,i,o){let a=KT.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=s,this.lineLength=i,l){this.heightSamples={};for(let d=0;d<o.length;d++){let u=o[d];u<0?d++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class kY{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ci{constructor(e,t,n,s,i){this.from=e,this.length=t,this.top=n,this.height=s,this._content=i}get type(){return typeof this._content=="number"?Sn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Da?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ci(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ar=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ar||(ar={}));const dg=.001;class Cn{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>dg&&(Bu=!0),this.height=e)}replace(e,t,n){return Cn.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,s){let i=this,o=n.doc;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:d,fromB:u,toB:f}=s[a],p=i.lineAt(l,ar.ByPosNoHeight,n.setDoc(t),0,0),m=p.to>=d?p:i.lineAt(d,ar.ByPosNoHeight,n,0,0);for(f+=m.to-d,d=m.to;a>0&&p.from<=s[a-1].toA;)l=s[a-1].fromA,u=s[a-1].fromB,a--,l<p.from&&(p=i.lineAt(l,ar.ByPosNoHeight,n,0,0));u+=p.from-l,l=p.from;let v=rk.build(n.setDoc(o),e,u,f);i=Yg(i,i.replace(l,d,v))}return i.updateHeight(n,0)}static empty(){return new ts(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,s=0,i=0;for(;;)if(t==n)if(s>i*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),n+=1+a.break,s-=a.size}else if(i>s*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,i-=a.size}else break;else if(s<i){let a=e[t++];a&&(s+=a.size)}else{let a=e[--n];a&&(i+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new SY(Cn.of(e.slice(0,t)),o,Cn.of(e.slice(n)))}}function Yg(r,e){return r==e?r:(r.constructor!=e.constructor&&(Bu=!0),e)}Cn.prototype.size=1;class H2 extends Cn{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,s){return new Ci(s,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,s,i){return this.blockAt(0,n,s,i)}forEachLine(e,t,n,s,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,s,i))}updateHeight(e,t=0,n=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ts extends H2{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,s){return new Ci(s,this.length,n,this.height,this.breaks)}replace(e,t,n){let s=n[0];return n.length==1&&(s instanceof ts||s instanceof Jr&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Jr?s=new ts(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Cn.of(n)}updateHeight(e,t=0,n=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jr extends Cn{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,i=s-n+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*i);o=l/i,this.length>i+1&&(a=(this.height-l)/(this.length-i-1))}else o=this.height/i;return{firstLine:n,lastLine:s,perLine:o,perChar:a}}blockAt(e,t,n,s){let{firstLine:i,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=t.doc.lineAt(d),f=a+u.length*l,p=Math.max(n,e-f/2);return new Ci(u.from,u.length,p,f,0)}else{let d=Math.max(0,Math.min(o-i,Math.floor((e-n)/a))),{from:u,length:f}=t.doc.line(i+d);return new Ci(u,f,n+a*d,a,0)}}lineAt(e,t,n,s,i){if(t==ar.ByHeight)return this.blockAt(e,n,s,i);if(t==ar.ByPosNoHeight){let{from:m,to:v}=n.doc.lineAt(e);return new Ci(m,v-m,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i),d=n.doc.lineAt(e),u=a+d.length*l,f=d.number-o,p=s+a*f+l*(d.from-i-f);return new Ci(d.from,d.length,Math.max(s,Math.min(p,s+this.height-u)),u,0)}forEachLine(e,t,n,s,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:a,perLine:l,perChar:d}=this.heightMetrics(n,i);for(let u=e,f=s;u<=t;){let p=n.doc.lineAt(u);if(u==e){let v=p.number-a;f+=l*v+d*(e-i-v)}let m=l+d*p.length;o(new Ci(p.from,p.length,f,m,0)),f+=m,u=p.to+1}}replace(e,t,n){let s=this.length-t;if(s>0){let i=n[n.length-1];i instanceof Jr?n[n.length-1]=new Jr(i.length+s):n.push(null,new Jr(s-1))}if(e>0){let i=n[0];i instanceof Jr?n[0]=new Jr(e+i.length):n.unshift(new Jr(e-1),null)}return Cn.of(n)}decomposeLeft(e,t){t.push(new Jr(e-1),null)}decomposeRight(e,t){t.push(null,new Jr(this.length-e-1))}updateHeight(e,t=0,n=!1,s){let i=t+this.length;if(s&&s.from<=t+this.length&&s.more){let o=[],a=Math.max(t,s.from),l=-1;for(s.from>t&&o.push(new Jr(s.from-t-1).updateHeight(e,t));a<=i&&s.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let f=s.heights[s.index++];l==-1?l=f:Math.abs(f-l)>=dg&&(l=-2);let p=new ts(u,f);p.outdated=!1,o.push(p),a+=u+1}a<=i&&o.push(null,new Jr(i-a).updateHeight(e,a));let d=Cn.of(o);return(l<0||Math.abs(d.height-this.height)>=dg||Math.abs(l-this.heightMetrics(e,t).perLine)>=dg)&&(Bu=!0),Yg(this,d)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class SY extends Cn{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,s){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,s):this.right.blockAt(e,t,i,s+this.left.length+this.break)}lineAt(e,t,n,s,i){let o=s+this.left.height,a=i+this.left.length+this.break,l=t==ar.ByHeight?e<o:e<a,d=l?this.left.lineAt(e,t,n,s,i):this.right.lineAt(e,t,n,o,a);if(this.break||(l?d.to<a:d.from>a))return d;let u=t==ar.ByPosNoHeight?ar.ByPosNoHeight:ar.ByPos;return l?d.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,s,i).join(d)}forEachLine(e,t,n,s,i,o){let a=s+this.left.height,l=i+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,s,i,o),t>=l&&this.right.forEachLine(e,t,n,a,l,o);else{let d=this.lineAt(l,ar.ByPos,n,s,i);e<d.from&&this.left.forEachLine(e,d.from-1,n,s,i,o),d.to>=e&&d.from<=t&&o(d),t>d.to&&this.right.forEachLine(d.to+1,t,n,a,l,o)}}replace(e,t,n){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let a of n)i.push(a);if(e>0&&YT(i,o-1),t<this.length){let a=i.length;this.decomposeRight(t,i),YT(i,a)}return Cn.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,s=n+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Cn.of(this.break?[e,null,t]:[e,t]):(this.left=Yg(this.left,e),this.right=Yg(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,s){let{left:i,right:o}=this,a=t+i.length+this.break,l=null;return s&&s.from<=t+i.length&&s.more?l=i=i.updateHeight(e,t,n,s):i.updateHeight(e,t,n),s&&s.from<=a+o.length&&s.more?l=o=o.updateHeight(e,a,n,s):o.updateHeight(e,a,n),l?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function YT(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof Jr&&(n=r[e+1])instanceof Jr&&r.splice(e-1,3,new Jr(t.length+1+n.length))}const CY=5;class rk{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof ts?s.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new ts(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let s=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new H2(o,s,n)):(o||i||s>=CY)&&this.addLineDeco(s,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ts(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Jr(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ts)return e;let t=new ts(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let s=this.ensureLine();s.length+=n,s.collapsed+=n,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ts)&&!this.isCovered?this.nodes.push(new ts(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let s of this.nodes)s instanceof ts&&s.updateHeight(this.oracle,n),n+=s?s.length:1;return this.nodes}static build(e,t,n,s){let i=new rk(n,e);return $t.spans(t,n,s,i,0),i.finish(n)}}function EY(r,e,t){let n=new AY;return $t.compare(r,e,t,n,0),n.changes}class AY{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,s){(e<t||n&&n.heightRelevant||s&&s.heightRelevant)&&cg(e,t,this.changes,5)}}function TY(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,s=n.defaultView||window,i=Math.max(0,t.left),o=Math.min(s.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(s.innerHeight,t.bottom);for(let d=r.parentNode;d&&d!=n.body;)if(d.nodeType==1){let u=d,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let p=u.getBoundingClientRect();i=Math.max(i,p.left),o=Math.min(o,p.right),a=Math.max(a,p.top),l=Math.min(d==r.parentNode?s.innerHeight:l,p.bottom)}d=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:i-t.left,right:Math.max(i,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function NY(r){let e=r.getBoundingClientRect(),t=r.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function jY(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class nx{constructor(e,t,n,s){this.from=e,this.to=t,this.size=n,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let s=e[n],i=t[n];if(s.from!=i.from||s.to!=i.to||s.size!=i.size)return!1}return!0}draw(e,t){return Ht.replace({widget:new PY(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class PY extends nc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class JT{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ZT,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=cr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(X_).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new _Y(t),this.stateDeco=e.facet(af).filter(n=>typeof n!="function"),this.heightMap=Cn.empty().applyChanges(this.stateDeco,Lt.empty,this.heightOracle.setDoc(e.doc),[new Ts(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ht.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let s=n?t.head:t.anchor;if(!e.some(({from:i,to:o})=>s>=i&&s<=o)){let{from:i,to:o}=this.lineBlockAt(s);e.push(new Lm(i,o))}}return this.viewports=e.sort((n,s)=>n.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?ZT:new nk(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(wh(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(af).filter(u=>typeof u!="function");let s=e.changedRanges,i=Ts.extendWithRanges(s,EY(n,this.stateDeco,e?e.changes:Ir.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);GT(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||Bu)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let d=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(A2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),s=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?cr.RTL:cr.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let d=0,u=0;if(a.width&&a.height){let{scaleX:T,scaleY:P}=e2(t,a);(T>.005&&Math.abs(this.scaleX-T)>.005||P>.005&&Math.abs(this.scaleY-P)>.005)&&(this.scaleX=T,this.scaleY=P,d|=16,o=l=!0)}let f=(parseInt(n.paddingTop)||0)*this.scaleY,p=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=p)&&(this.paddingTop=f,this.paddingBottom=p,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=n2(e.scrollDOM);let v=(this.printing?jY:TY)(t,this.paddingTop),w=v.top-this.pixelViewport.top,x=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(l=!0)),!this.inView&&!this.scrollTarget&&!NY(e.dom))return 0;let C=a.width;if((this.contentDOMWidth!=C||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),l){let T=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(T)&&(o=!0),o||s.lineWrapping&&Math.abs(C-this.contentDOMWidth)>s.charWidth){let{lineHeight:P,charWidth:O,textHeight:z}=e.docView.measureTextSize();o=P>0&&s.refresh(i,P,O,z,C/O,T),o&&(e.docView.minWidth=0,d|=16)}w>0&&x>0?u=Math.max(w,x):w<0&&x<0&&(u=Math.min(w,x)),GT();for(let P of this.viewports){let O=P.from==this.viewport.from?T:e.docView.measureVisibleLineHeights(P);this.heightMap=(o?Cn.empty().applyChanges(this.stateDeco,Lt.empty,this.heightOracle,[new Ts(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new kY(P.from,O))}Bu&&(d|=2)}let A=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),d|=this.updateForViewport()),(d&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Lm(s.lineAt(o-n*1e3,ar.ByHeight,i,0,0).from,s.lineAt(a+(1-n)*1e3,ar.ByHeight,i,0,0).to);if(t){let{head:d}=t.range;if(d<l.from||d>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=s.lineAt(d,ar.ByPos,i,0,0),p;t.y=="center"?p=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&d<l.from?p=f.top:p=f.bottom-u,l=new Lm(s.lineAt(p-1e3/2,ar.ByHeight,i,0,0).from,s.lineAt(p+u+1e3/2,ar.ByHeight,i,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Lm(this.heightMap.lineAt(n,ar.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,ar.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,ar.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||s<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=a+Math.max(10,Math.min(n,250)))&&s>o-2*1e3&&i<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let s of e)t.touchesRange(s.from,s.to)||n.push(new nx(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,s=n?1e4:2e3,i=s>>1,o=s<<1;if(this.defaultTextDirection!=cr.LTR&&!n)return[];let a=[],l=(u,f,p,m)=>{if(f-u<i)return;let v=this.state.selection.main,w=[v.from];v.empty||w.push(v.to);for(let _ of w)if(_>u&&_<f){l(u,_-10,p,m),l(_+10,f,p,m);return}let x=OY(e,_=>_.from>=p.from&&_.to<=p.to&&Math.abs(_.from-u)<i&&Math.abs(_.to-f)<i&&!w.some(C=>_.from<C&&_.to>C));if(!x){if(f<p.to&&t&&n&&t.visibleRanges.some(A=>A.from<=f&&A.to>=f)){let A=t.moveToLineBoundary(Oe.cursor(f),!1,!0).head;A>u&&(f=A)}let _=this.gapSize(p,u,f,m),C=n||_<2e6?_:2e6;x=new nx(u,f,_,C)}a.push(x)},d=u=>{if(u.length<o||u.type!=Sn.Text)return;let f=RY(u.from,u.to,this.stateDeco);if(f.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,m,v;if(n){let w=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,_;if(p!=null){let C=Bm(f,p),A=((this.visibleBottom-this.visibleTop)/2+w)/u.height;x=C-A,_=C+A}else x=(this.visibleTop-u.top-w)/u.height,_=(this.visibleBottom-u.top+w)/u.height;m=Fm(f,x),v=Fm(f,_)}else{let w=f.total*this.heightOracle.charWidth,x=s*this.heightOracle.charWidth,_=0;if(w>2e6)for(let O of e)O.from>=u.from&&O.from<u.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=O.size-O.displaySize);let C=this.pixelViewport.left+_,A=this.pixelViewport.right+_,T,P;if(p!=null){let O=Bm(f,p),z=((A-C)/2+x)/w;T=O-z,P=O+z}else T=(C-x)/w,P=(A+x)/w;m=Fm(f,T),v=Fm(f,P)}m>u.from&&l(u.from,m,u,f),v<u.to&&l(v,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(d):d(u);return a}gapSize(e,t,n,s){let i=Bm(s,n)-Bm(s,t);return this.heightOracle.lineWrapping?e.height*i:s.total*this.heightOracle.charWidth*i}updateLineGaps(e){nx.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ht.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];$t.spans(t,this.viewport.from,this.viewport.to,{span(i,o){n.push({from:i,to:o})},point(){}},20);let s=0;if(n.length!=this.visibleRanges.length)s=12;else for(let i=0;i<n.length&&!(s&8);i++){let o=this.visibleRanges[i],a=n[i];(o.from!=a.from||o.to!=a.to)&&(s|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(s|=8))}return this.visibleRanges=n,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||wh(this.heightMap.lineAt(e,ar.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||wh(this.heightMap.lineAt(this.scaler.fromDOM(e),ar.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return wh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Lm{constructor(e,t){this.from=e,this.to=t}}function RY(r,e,t){let n=[],s=r,i=0;return $t.spans(t,r,e,{span(){},point(o,a){o>s&&(n.push({from:s,to:o}),i+=o-s),s=a}},20),s<e&&(n.push({from:s,to:e}),i+=e-s),{total:i,ranges:n}}function Fm({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let s=0;;s++){let{from:i,to:o}=e[s],a=o-i;if(n<=a)return i+n;n-=a}}function Bm(r,e){let t=0;for(let{from:n,to:s}of r.ranges){if(e<=s){t+=e-n;break}t+=s-n}return t/r.total}function OY(r,e){for(let t of r)if(e(t))return t}const ZT={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class nk{constructor(e,t,n){let s=0,i=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let d=t.lineAt(a,ar.ByPos,e,0,0).top,u=t.lineAt(l,ar.ByPos,e,0,0).bottom;return s+=u-d,{from:a,to:l,top:d,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let a of this.viewports)a.domTop=o+(a.top-i)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),i=a.bottom}toDOM(e){for(let t=0,n=0,s=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return s+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,s=i.domBottom}}fromDOM(e){for(let t=0,n=0,s=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-s)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,s=i.domBottom}}eq(e){return e instanceof nk?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function wh(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new Ci(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(s=>wh(s,e)):r._content)}const $m=Je.define({combine:r=>r.join(" ")}),Gb=Je.define({combine:r=>r.indexOf(!0)>-1}),Yb=Oa.newName(),q2=Oa.newName(),K2=Oa.newName(),G2={"&light":"."+q2,"&dark":"."+K2};function Jb(r,e,t){return new Oa(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,s=>{if(s=="&")return r;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):r+" "+n}})}const MY=Jb("."+Yb,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},G2),DY={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},sx=qe.ie&&qe.ie_version<=11;class IY{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new yG,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(qe.ie&&qe.ie_version<=11||qe.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(qe.chrome&&qe.chrome_version<126)&&(this.editContext=new FY(e),e.state.facet(uo)&&(e.contentDOM.editContext=this.editContext.editContext)),sx&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,s=this.selectionRange;if(n.state.facet(uo)?n.root.activeElement!=this.dom:!lg(this.dom,s))return;let i=s.anchorNode&&n.docView.nearest(s.anchorNode);if(i&&i.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(qe.ie&&qe.ie_version<=11||qe.android&&qe.chrome)&&!n.state.selection.main.empty&&s.focusNode&&Rh(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=sf(e.root);if(!t)return!1;let n=qe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&LY(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let s=lg(this.dom,n);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&wG(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,DY),sx&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),sx&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let s=()=>{let i=this.delayedAndroidKey;i&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=i.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&i.force&&hu(this.dom,i.key,i.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,s=!1;for(let i of e){let o=this.readMutation(i);o&&(o.typeOver&&(s=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:s}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),s=this.selectionChanged&&lg(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new eY(this.view,e,t,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,s=I2(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=XT(t,e.previousSibling||e.target.previousSibling,-1),s=XT(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(uo)!=e.state.facet(uo)&&(e.view.contentDOM.editContext=e.state.facet(uo)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function XT(r,e,t){for(;e;){let n=Xt.get(e);if(n&&n.parent==r)return n;let s=e.parentNode;e=s!=r.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function QT(r,e){let t=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return Rh(o.node,o.offset,s,i)&&([t,n,s,i]=[s,i,t,n]),{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:i}}function LY(r,e){if(e.getComposedRanges){let s=e.getComposedRanges(r.root)[0];if(s)return QT(r,s)}let t=null;function n(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),t?QT(r,t):null}class FY{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let s=e.state.selection.main,{anchor:i,head:o}=s,a=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let d={from:a,to:l,insert:Lt.of(n.text.split(`
`))};if(d.from==this.from&&i<this.from?d.from=i:d.to==this.to&&i>this.to&&(d.to=i),d.from==d.to&&!d.insert.length){let u=Oe.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));u.main.eq(s)||e.dispatch({selection:u,userEvent:"select"});return}if((qe.mac||qe.android)&&d.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:a,to:l,insert:Lt.of([n.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let u=this.to-this.from+(d.to-d.from+d.insert.length);tk(e,d,Oe.single(this.toEditorPos(n.selectionStart,u),this.toEditorPos(n.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let s=[],i=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=e.coordsForChar(o);i=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||i||new DOMRect,s.push(i)}t.updateCharacterBounds(n.rangeStart,s)},this.handlers.textformatupdate=n=>{let s=[];for(let i of n.getTextFormats()){let o=i.underlineStyle,a=i.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(i.rangeStart),d=this.toEditorPos(i.rangeEnd);if(l<d){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;s.push(Ht.mark({attributes:{style:u}}).range(l,d))}}}e.dispatch({effects:N2.of(Ht.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let s=sf(n.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,s=this.pendingContextChange;return e.changes.iterChanges((i,o,a,l,d)=>{if(n)return;let u=d.length-(o-i);if(s&&o>=s.to)if(s.from==i&&s.to==o&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=u,this.to+=u;return}else s=null,this.revertPending(e.state);if(i+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+d.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),d.toString()),this.to+=u}t+=u}),s&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(n,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class ht{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(s=>s.forEach(i=>n(i,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||vG(e.parent)||document,this.viewState=new JT(e.state||Wt.create(e)),e.scrollTo&&e.scrollTo.is(Mm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Qc).map(s=>new ex(s));for(let s of this.plugins)s.update(this);this.observer=new IY(this),this.inputState=new iY(this),this.inputState.ensureHandlers(this.plugins),this.docView=new PT(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Vn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,s,i=this.state;for(let p of e){if(p.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=p.state}if(this.destroyed){this.viewState.state=i;return}let o=this.hasFocus,a=0,l=null;e.some(p=>p.annotation(U2))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=V2(i,o),l||(a=1));let d=this.observer.delayedAndroidKey,u=null;if(d?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(u=null)):this.observer.clear(),i.facet(Wt.phrases)!=this.state.facet(Wt.phrases))return this.setState(i);s=Gg.create(this,i,e),s.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(f&&(f=f.map(p.changes)),p.scrollIntoView){let{main:m}=p.state.selection;f=new fu(m.empty?m:Oe.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of p.effects)m.is(Mm)&&(f=m.value.clip(this.state))}this.viewState.update(s,f),this.bidiCache=Jg.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(yh)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet($m)!=s.state.facet($m)&&(this.viewState.mustMeasureContent=!0),(t||n||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let p of this.state.facet(Wb))try{p(s)}catch(m){qs(this.state,m,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!I2(this,u)&&d.force&&hu(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new JT(e),this.plugins=e.facet(Qc).map(n=>new ex(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new PT(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Qc),n=e.state.facet(Qc);if(t!=n){let s=[];for(let i of n){let o=t.indexOf(i);if(o<0)s.push(new ex(i));else{let a=this.plugins[o];a.mustUpdate=e,s.push(a)}}for(let i of this.plugins)i.mustUpdate!=e&&i.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){qs(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,s=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(n2(n))i=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(s);i=m.from,o=m.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];l&4||([this.measureRequests,d]=[d,this.measureRequests]);let u=d.map(m=>{try{return m.read(this)}catch(v){return qs(this.state,v),eN}}),f=Gg.create(this,this.state,[]),p=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),p=this.docView.update(f),p&&this.docViewUpdate());for(let m=0;m<d.length;m++)if(u[m]!=eN)try{let v=d[m];v.write&&v.write(u[m],this)}catch(v){qs(this.state,v)}if(p&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(v>1||v<-1){s=s+v,n.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Wb))a(t)}get themeClasses(){return Yb+" "+(this.state.facet(Gb)?K2:q2)+" "+this.state.facet($m)}updateAttrs(){let e=tN(this,j2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(uo)?"true":"false",class:"cm-content",style:`${qe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),tN(this,X_,t);let n=this.observer.ignore(()=>{let s=Bb(this.contentDOM,this.contentAttrs,t),i=Bb(this.dom,this.editorAttrs,e);return s||i});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let s of n.effects)if(s.is(ht.announce)){t&&(this.announceDOM.textContent=""),t=!1;let i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(yh);let e=this.state.facet(ht.cspNonce);Oa.mount(this.root,this.styleModules.concat(MY).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return rx(this,e,IT(this,e,t,n))}moveByGroup(e,t){return rx(this,e,IT(this,e,t,n=>JG(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),s=this.textDirectionAt(e.from),i=n[t?n.length-1:0];return Oe.cursor(i.side(t,s)+e.from,i.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,n=!0){return YG(this,e,t,n)}moveVertically(e,t,n){return rx(this,e,ZG(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),D2(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let s=this.state.doc.lineAt(e),i=this.bidiSpans(s),o=i[ka.find(i,e-s.from,-1,t)];return hy(n,o.dir==cr.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(E2)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>BY)return v2(e.length);let t=this.textDirectionAt(e.from),n;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t&&(i.fresh||y2(i.isolates,n=jT(this,e))))return i.order;n||(n=jT(this,e));let s=OG(e.text,t,n);return this.bidiCache.push(new Jg(e.from,e.to,t,n,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||qe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{t2(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Mm.of(new fu(typeof e=="number"?Oe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Mm.of(new fu(Oe.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Qr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Qr.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Oa.newName(),s=[$m.of(n),yh.of(Jb(`.${n}`,e))];return t&&t.dark&&s.push(Gb.of(!0)),s}static baseTheme(e){return uy.lowest(yh.of(Jb("."+Yb,e,G2)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),s=n&&Xt.get(n)||Xt.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}ht.styleModule=yh;ht.inputHandler=S2;ht.clipboardInputFilter=J_;ht.clipboardOutputFilter=Z_;ht.scrollHandler=T2;ht.focusChangeEffect=C2;ht.perLineTextDirection=E2;ht.exceptionSink=k2;ht.updateListener=Wb;ht.editable=uo;ht.mouseSelectionStyle=_2;ht.dragMovesSelection=b2;ht.clickAddsSelectionRange=x2;ht.decorations=af;ht.outerDecorations=P2;ht.atomicRanges=Q_;ht.bidiIsolatedRanges=R2;ht.scrollMargins=O2;ht.darkTheme=Gb;ht.cspNonce=Je.define({combine:r=>r.length?r[0]:""});ht.contentAttributes=X_;ht.editorAttributes=j2;ht.lineWrapping=ht.contentAttributes.of({class:"cm-lineWrapping"});ht.announce=Qt.define();const BY=4096,eN={};class Jg{constructor(e,t,n,s,i,o){this.from=e,this.to=t,this.dir=n,this.isolates=s,this.fresh=i,this.order=o}static update(e,t){if(t.empty&&!e.some(i=>i.fresh))return e;let n=[],s=e.length?e[e.length-1].dir:cr.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir==s&&!t.touchesRange(o.from,o.to)&&n.push(new Jg(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function tN(r,e,t){for(let n=r.state.facet(e),s=n.length-1;s>=0;s--){let i=n[s],o=typeof i=="function"?i(r):i;o&&Fb(o,t)}return t}const $Y=qe.mac?"mac":qe.windows?"win":qe.linux?"linux":"key";function zY(r,e){const t=r.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let s,i,o,a;for(let l=0;l<t.length-1;++l){const d=t[l];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e=="mac"?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(n="Alt-"+n),i&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function zm(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const UY=uy.default(ht.domEventHandlers({keydown(r,e){return J2(Y2(e.state),r,e,"editor")}})),VY=Je.define({enables:UY}),rN=new WeakMap;function Y2(r){let e=r.facet(VY),t=rN.get(e);return t||rN.set(e,t=HY(e.reduce((n,s)=>n.concat(s),[]))),t}function Yoe(r,e,t){return J2(Y2(r.state),e,r,t)}let da=null;const WY=4e3;function HY(r,e=$Y){let t=Object.create(null),n=Object.create(null),s=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},i=(o,a,l,d,u)=>{var f,p;let m=t[o]||(t[o]=Object.create(null)),v=a.split(/ (?!$)/).map(_=>zY(_,e));for(let _=1;_<v.length;_++){let C=v.slice(0,_).join(" ");s(C,!0),m[C]||(m[C]={preventDefault:!0,stopPropagation:!1,run:[A=>{let T=da={view:A,prefix:C,scope:o};return setTimeout(()=>{da==T&&(da=null)},WY),!0}]})}let w=v.join(" ");s(w,!1);let x=m[w]||(m[w]={preventDefault:!1,stopPropagation:!1,run:((p=(f=m._any)===null||f===void 0?void 0:f.run)===null||p===void 0?void 0:p.slice())||[]});l&&x.run.push(l),d&&(x.preventDefault=!0),u&&(x.stopPropagation=!0)};for(let o of r){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let d of a){let u=t[d]||(t[d]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let p in u)u[p].run.push(m=>f(m,Zb))}let l=o[e]||o.key;if(l)for(let d of a)i(d,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&i(d,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let Zb=null;function J2(r,e,t,n){Zb=e;let s=fG(e),i=$D(s,0),o=ZK(i)==s.length&&s!=" ",a="",l=!1,d=!1,u=!1;da&&da.view==t&&da.scope==n&&(a=da.prefix+" ",F2.indexOf(e.keyCode)<0&&(d=!0,da=null));let f=new Set,p=x=>{if(x){for(let _ of x.run)if(!f.has(_)&&(f.add(_),_(t)))return x.stopPropagation&&(u=!0),!0;x.preventDefault&&(x.stopPropagation&&(u=!0),d=!0)}return!1},m=r[n],v,w;return m&&(p(m[a+zm(s,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(qe.windows&&e.ctrlKey&&e.altKey)&&(v=Ma[e.keyCode])&&v!=s?(p(m[a+zm(v,e,!0)])||e.shiftKey&&(w=nf[e.keyCode])!=s&&w!=v&&p(m[a+zm(w,e,!1)]))&&(l=!0):o&&e.shiftKey&&p(m[a+zm(s,e,!0)])&&(l=!0),!l&&p(m._any)&&(l=!0)),d&&(l=!0),l&&u&&e.stopPropagation(),Zb=null,l}class Yf{constructor(e,t,n,s,i){this.className=e,this.left=t,this.top=n,this.width=s,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let s=e.coordsAtPos(n.head,n.assoc||1);if(!s)return[];let i=Z2(e);return[new Yf(t,s.left-i.left,s.top-i.top,null,s.bottom-s.top)]}else return qY(e,t,n)}}function Z2(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==cr.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function nN(r,e,t,n){let s=r.coordsAtPos(e,t*2);if(!s)return n;let i=r.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,a=r.posAtCoords({x:i.left+1,y:o}),l=r.posAtCoords({x:i.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function qY(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let n=Math.max(t.from,r.viewport.from),s=Math.min(t.to,r.viewport.to),i=r.textDirection==cr.LTR,o=r.contentDOM,a=o.getBoundingClientRect(),l=Z2(r),d=o.querySelector(".cm-line"),u=d&&window.getComputedStyle(d),f=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),p=a.right-(u?parseInt(u.paddingRight):0),m=qb(r,n,1),v=qb(r,s,-1),w=m.type==Sn.Text?m:null,x=v.type==Sn.Text?v:null;if(w&&(r.lineWrapping||m.widgetLineBreaks)&&(w=nN(r,n,1,w)),x&&(r.lineWrapping||v.widgetLineBreaks)&&(x=nN(r,s,-1,x)),w&&x&&w.from==x.from&&w.to==x.to)return C(A(t.from,t.to,w));{let P=w?A(t.from,null,w):T(m,!1),O=x?A(null,t.to,x):T(v,!0),z=[];return(w||m).to<(x||v).from-(w&&x?1:0)||m.widgetLineBreaks>1&&P.bottom+r.defaultLineHeight/2<O.top?z.push(_(f,P.bottom,p,O.top)):P.bottom<O.top&&r.elementAtHeight((P.bottom+O.top)/2).type==Sn.Text&&(P.bottom=O.top=(P.bottom+O.top)/2),C(P).concat(z).concat(C(O))}function _(P,O,z,M){return new Yf(e,P-l.left,O-l.top,z-P,M-O)}function C({top:P,bottom:O,horizontal:z}){let M=[];for(let D=0;D<z.length;D+=2)M.push(_(z[D],P,z[D+1],O));return M}function A(P,O,z){let M=1e9,D=-1e9,H=[];function Z(k,W,B,I,G){let V=r.coordsAtPos(k,k==z.to?-2:2),X=r.coordsAtPos(B,B==z.from?2:-2);!V||!X||(M=Math.min(V.top,X.top,M),D=Math.max(V.bottom,X.bottom,D),G==cr.LTR?H.push(i&&W?f:V.left,i&&I?p:X.right):H.push(!i&&I?f:X.left,!i&&W?p:V.right))}let R=P??z.from,U=O??z.to;for(let k of r.visibleRanges)if(k.to>R&&k.from<U)for(let W=Math.max(k.from,R),B=Math.min(k.to,U);;){let I=r.state.doc.lineAt(W);for(let G of r.bidiSpans(I)){let V=G.from+I.from,X=G.to+I.from;if(V>=B)break;X>W&&Z(Math.max(V,W),P==null&&V<=R,Math.min(X,B),O==null&&X>=U,G.dir)}if(W=I.to+1,W>=B)break}return H.length==0&&Z(R,P==null,U,O==null,r.textDirection),{top:M,bottom:D,horizontal:H}}function T(P,O){let z=a.top+(O?P.top:P.bottom);return{top:z,bottom:z,horizontal:[]}}}function KY(r,e){return r.constructor==e.constructor&&r.eq(e)}class GY{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(hg)!=e.state.facet(hg)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(hg);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!KY(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[n].constructor&&s.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const hg=Je.define();function X2(r){return[Qr.define(e=>new GY(e,r)),hg.of(r)]}const lf=Je.define({combine(r){return ld(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Joe(r={}){return[lf.of(r),YY,JY,ZY,A2.of(!0)]}function Q2(r){return r.startState.facet(lf)!=r.state.facet(lf)}const YY=X2({above:!0,markers(r){let{state:e}=r,t=e.facet(lf),n=[];for(let s of e.selection.ranges){let i=s==e.selection.main;if(s.empty||t.drawRangeCursor){let o=i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=s.empty?s:Oe.cursor(s.head,s.head>s.anchor?-1:1);for(let l of Yf.forRange(r,o,a))n.push(l)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Q2(r);return t&&sN(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){sN(e.state,r)},class:"cm-cursorLayer"});function sN(r,e){e.style.animationDuration=r.facet(lf).cursorBlinkRate+"ms"}const JY=X2({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Yf.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||Q2(r)},class:"cm-selectionLayer"}),ZY=uy.highest(ht.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),eI=Qt.define({map(r,e){return r==null?null:e.mapPos(r)}}),xh=js.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,n)=>n.is(eI)?n.value:t,r)}}),XY=Qr.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(xh);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(xh)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(xh),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(xh)!=r&&this.view.dispatch({effects:eI.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Zoe(){return[xh,XY]}function iN(r,e,t,n,s){e.lastIndex=0;for(let i=r.iterRange(t,n),o=t,a;!i.next().done;o+=i.value.length)if(!i.lineBreak)for(;a=e.exec(i.value);)s(o+a.index,a)}function QY(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let n=[];for(let{from:s,to:i}of t)s=Math.max(r.state.doc.lineAt(s).from,s-e),i=Math.min(r.state.doc.lineAt(i).to,i+e),n.length&&n[n.length-1].to>=s?n[n.length-1].to=i:n.push({from:s,to:i});return n}class eJ{constructor(e){const{regexp:t,decoration:n,decorate:s,boundary:i,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(a,l,d,u)=>s(u,d,d+a[0].length,a,l);else if(typeof n=="function")this.addMatch=(a,l,d,u)=>{let f=n(a,l,d);f&&u(d,d+a[0].length,f)};else if(n)this.addMatch=(a,l,d,u)=>u(d,d+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=i,this.maxLength=o}createDeco(e){let t=new Vl,n=t.add.bind(t);for(let{from:s,to:i}of QY(e,this.maxLength))iN(e.state.doc,this.regexp,s,i,(o,a)=>this.addMatch(a,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((i,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(n=Math.min(a,n),s=Math.max(l,s))}),e.viewportMoved||s-n>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),n,s):t}updateRange(e,t,n,s){for(let i of e.visibleRanges){let o=Math.max(i.from,n),a=Math.min(i.to,s);if(a>=o){let l=e.state.doc.lineAt(o),d=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(i.from,l.from),f=Math.min(i.to,d.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<d.to;a++)if(this.boundary.test(d.text[a-d.from])){f=a;break}}let p=[],m,v=(w,x,_)=>p.push(_.range(w,x));if(l==d)for(this.regexp.lastIndex=u-l.from;(m=this.regexp.exec(l.text))&&m.index<f-l.from;)this.addMatch(m,e,m.index+l.from,v);else iN(e.state.doc,this.regexp,u,f,(w,x)=>this.addMatch(x,e,w,v));t=t.update({filterFrom:u,filterTo:f,filter:(w,x)=>w<u||x>f,add:p})}}return t}}const Xb=/x/.unicode!=null?"gu":"g",tJ=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Xb),rJ={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ix=null;function nJ(){var r;if(ix==null&&typeof document<"u"&&document.body){let e=document.body.style;ix=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return ix||!1}const fg=Je.define({combine(r){let e=ld(r,{render:null,specialChars:tJ,addSpecialChars:null});return(e.replaceTabs=!nJ())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Xb)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Xb)),e}});function Xoe(r={}){return[fg.of(r),sJ()]}let oN=null;function sJ(){return oN||(oN=Qr.fromClass(class{constructor(r){this.view=r,this.decorations=Ht.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(fg)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new eJ({regexp:r.specialChars,decoration:(e,t,n)=>{let{doc:s}=t.state,i=$D(e[0],0);if(i==9){let o=s.lineAt(n),a=t.state.tabSize,l=cd(o.text,a,n-o.from);return Ht.replace({widget:new lJ((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[i]||(this.decorationCache[i]=Ht.replace({widget:new aJ(r,i)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(fg);r.startState.facet(fg)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const iJ="";function oJ(r){return r>=32?iJ:r==10?"":String.fromCharCode(9216+r)}class aJ extends nc{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=oJ(this.code),n=e.state.phrase("Control character")+" "+(rJ[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,n,t);if(s)return s;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class lJ extends nc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Qoe(){return uJ}const cJ=Ht.line({class:"cm-activeLine"}),uJ=Qr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let n of r.state.selection.ranges){let s=r.lineBlockAt(n.head);s.from>e&&(t.push(cJ.range(s.from)),e=s.from)}return Ht.set(t)}},{decorations:r=>r.decorations}),Qb=2e3;function dJ(r,e,t){let n=Math.min(e.line,t.line),s=Math.max(e.line,t.line),i=[];if(e.off>Qb||t.off>Qb||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=n;l<=s;l++){let d=r.doc.line(l);d.length<=a&&i.push(Oe.range(d.from+o,d.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=n;l<=s;l++){let d=r.doc.line(l),u=Pb(d.text,o,r.tabSize,!0);if(u<0)i.push(Oe.cursor(d.to));else{let f=Pb(d.text,a,r.tabSize);i.push(Oe.range(d.from+u,d.from+f))}}}return i}function hJ(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function aN(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(t),s=t-n.from,i=s>Qb?-1:s==n.length?hJ(r,e.clientX):cd(n.text,r.state.tabSize,t-n.from);return{line:n.number,col:i,off:s}}function fJ(r,e){let t=aN(r,e),n=r.state.selection;return t?{update(s){if(s.docChanged){let i=s.changes.mapPos(s.startState.doc.line(t.line).from),o=s.state.doc.lineAt(i);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(s.changes)}},get(s,i,o){let a=aN(r,s);if(!a)return n;let l=dJ(r.state,t,a);return l.length?o?Oe.create(l.concat(n.ranges)):Oe.create(l):n}}:null}function eae(r){let e=t=>t.altKey&&t.button==0;return ht.mouseSelectionStyle.of((t,n)=>e(n)?fJ(t,n):null)}const pJ={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},mJ={style:"cursor: crosshair"};function tae(r={}){let[e,t]=pJ[r.key||"Alt"],n=Qr.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[n,ht.contentAttributes.of(s=>{var i;return!((i=s.plugin(n))===null||i===void 0)&&i.isDown?mJ:null})]}const oh="-10000px";class tI{constructor(e,t,n,s){this.facet=t,this.createTooltipView=n,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let i=null;this.tooltipViews=this.tooltips.map(o=>i=n(o,i))}update(e,t){var n;let s=e.state.facet(this.facet),i=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<i.length;l++){let d=i[l],u=-1;if(d){for(let f=0;f<this.tooltips.length;f++){let p=this.tooltips[f];p&&p.create==d.create&&(u=f)}if(u<0)o[l]=this.createTooltipView(d,l?o[l-1]:null),a&&(a[l]=!!d.above);else{let f=o[l]=this.tooltipViews[u];a&&(a[l]=t[u]),f.update&&f.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(a.forEach((l,d)=>t[d]=l),t.length=a.length),this.input=s,this.tooltips=i,this.tooltipViews=o,!0}}function gJ(r){let e=r.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const ox=Je.define({combine:r=>{var e,t,n;return{position:qe.ios?"absolute":((e=r.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(s=>s.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||gJ}}}),lN=new WeakMap,sk=Qr.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(ox);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new tI(r,rI,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(ox);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=oh,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(qe.gecko)t=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==oh&&i.style.left=="0px"){let o=i.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(r=i.width/this.parent.offsetWidth,e=i.height/this.parent.offsetHeight)}else({scaleX:r,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),s=ek(this.view);return{visible:{left:n.left+s.left,top:n.top+s.top,right:n.right-s.right,bottom:n.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((i,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(ox).tooltipSpace(this.view),scaleX:r,scaleY:e,makeAbsolute:t}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:n,scaleX:s,scaleY:i}=r,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],d=this.manager.tooltipViews[a],{dom:u}=d,f=r.pos[a],p=r.size[a];if(!f||l.clip!==!1&&(f.bottom<=Math.max(t.top,n.top)||f.top>=Math.min(t.bottom,n.bottom)||f.right<Math.max(t.left,n.left)-.1||f.left>Math.min(t.right,n.right)+.1)){u.style.top=oh;continue}let m=l.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,v=m?7:0,w=p.right-p.left,x=(e=lN.get(d))!==null&&e!==void 0?e:p.bottom-p.top,_=d.offset||vJ,C=this.view.textDirection==cr.LTR,A=p.width>n.right-n.left?C?n.left:n.right-p.width:C?Math.max(n.left,Math.min(f.left-(m?14:0)+_.x,n.right-w)):Math.min(Math.max(n.left,f.left-w+(m?14:0)-_.x),n.right-w),T=this.above[a];!l.strictSide&&(T?f.top-x-v-_.y<n.top:f.bottom+x+v+_.y>n.bottom)&&T==n.bottom-f.bottom>f.top-n.top&&(T=this.above[a]=!T);let P=(T?f.top-n.top:n.bottom-f.bottom)-v;if(P<x&&d.resize!==!1){if(P<this.view.defaultLineHeight){u.style.top=oh;continue}lN.set(d,x),u.style.height=(x=P)/i+"px"}else u.style.height&&(u.style.height="");let O=T?f.top-x-v-_.y:f.bottom+v+_.y,z=A+w;if(d.overlap!==!0)for(let M of o)M.left<z&&M.right>A&&M.top<O+x&&M.bottom>O&&(O=T?M.top-x-2-v:M.bottom+v+2);if(this.position=="absolute"?(u.style.top=(O-r.parent.top)/i+"px",cN(u,(A-r.parent.left)/s)):(u.style.top=O/i+"px",cN(u,A/s)),m){let M=f.left+(C?_.x:-_.x)-(A+14-7);m.style.left=M/s+"px"}d.overlap!==!0&&o.push({left:A,top:O,right:z,bottom:O+x}),u.classList.toggle("cm-tooltip-above",T),u.classList.toggle("cm-tooltip-below",!T),d.positioned&&d.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=oh}},{eventObservers:{scroll(){this.maybeMeasure()}}});function cN(r,e){let t=parseInt(r.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(r.style.left=e+"px")}const yJ=ht.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),vJ={x:0,y:0},rI=Je.define({enables:[sk,yJ]}),Zg=Je.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class my{static create(e){return new my(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new tI(e,Zg,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let s=n[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const wJ=rI.compute([Zg],r=>{let e=r.facet(Zg);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:my.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class xJ{constructor(e,t,n,s,i){this.view=e,this.source=t,this.field=n,this.setHover=s,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let s,i=1;if(n instanceof _a)s=n.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let a=e.coordsAtPos(s);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(s)).find(u=>u.from<=s&&u.to>=s),d=l&&l.dir==cr.RTL?-1:1;i=t.x<a.left?-d:d}let o=this.source(e,s,i);if(o!=null&&o.then){let a=this.pending={pos:s};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>qs(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(sk),t=e?e.manager.tooltips.findIndex(n=>n.create==my.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:i}=this;if(s.length&&i&&!bJ(i.dom,e)||this.pending){let{pos:o}=s[0]||this.pending,a=(n=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!_J(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Um=4;function bJ(r,e){let{left:t,right:n,top:s,bottom:i}=r.getBoundingClientRect(),o;if(o=r.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();s=Math.min(a.top,s),i=Math.max(a.bottom,i)}return e.clientX>=t-Um&&e.clientX<=n+Um&&e.clientY>=s-Um&&e.clientY<=i+Um}function _J(r,e,t,n,s,i){let o=r.scrollDOM.getBoundingClientRect(),a=r.documentTop+r.documentPadding.top+r.contentHeight;if(o.left>n||o.right<n||o.top>s||Math.min(o.bottom,a)<s)return!1;let l=r.posAtCoords({x:n,y:s},!1);return l>=e&&l<=t}function rae(r,e={}){let t=Qt.define(),n=js.define({create(){return[]},update(s,i){if(s.length&&(e.hideOnChange&&(i.docChanged||i.selection)?s=[]:e.hideOn&&(s=s.filter(o=>!e.hideOn(i,o))),i.docChanged)){let o=[];for(let a of s){let l=i.changes.mapPos(a.pos,-1,$n.TrackDel);if(l!=null){let d=Object.assign(Object.create(null),a);d.pos=l,d.end!=null&&(d.end=i.changes.mapPos(d.end)),o.push(d)}}s=o}for(let o of i.effects)o.is(t)&&(s=o.value),o.is(kJ)&&(s=[]);return s},provide:s=>Zg.from(s)});return{active:n,extension:[n,Qr.define(s=>new xJ(s,r,n,t,e.hoverTime||300)),wJ]}}function nae(r,e){let t=r.plugin(sk);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const kJ=Qt.define(),uN=Je.define({combine(r){let e,t;for(let n of r)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function sae(r,e){let t=r.plugin(nI),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const nI=Qr.fromClass(class{constructor(r){this.input=r.state.facet(hN),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(uN);this.top=new Vm(r,!0,e.topContainer),this.bottom=new Vm(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(uN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Vm(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Vm(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(hN);if(t!=this.input){let n=t.filter(l=>l),s=[],i=[],o=[],a=[];for(let l of n){let d=this.specs.indexOf(l),u;d<0?(u=l(r.view),a.push(u)):(u=this.panels[d],u.update&&u.update(r)),s.push(u),(u.top?i:o).push(u)}this.specs=n,this.panels=s,this.top.sync(i),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>ht.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Vm{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=dN(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=dN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function dN(r){let e=r.nextSibling;return r.remove(),e}const hN=Je.define({enables:nI});class So extends Iu{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}So.prototype.elementClass="";So.prototype.toDOM=void 0;So.prototype.mapMode=$n.TrackBefore;So.prototype.startSide=So.prototype.endSide=-1;So.prototype.point=!0;const pg=Je.define(),SJ=Je.define(),CJ={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>$t.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Mh=Je.define();function EJ(r){return[sI(),Mh.of({...CJ,...r})]}const fN=Je.define({combine:r=>r.some(e=>e)});function sI(r){return[AJ]}const AJ=Qr.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(Mh).map(e=>new mN(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(fN),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(fN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=$t.iter(this.view.state.facet(pg),this.view.viewport.from),n=[],s=this.gutters.map(i=>new TJ(i,this.view.viewport,-this.view.documentPadding.top));for(let i of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(i.type)){let o=!0;for(let a of i.type)if(a.type==Sn.Text&&o){e1(t,n,a.from);for(let l of s)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of s)l.widget(this.view,a)}else if(i.type==Sn.Text){e1(t,n,i.from);for(let o of s)o.line(this.view,i,n)}else if(i.widget)for(let o of s)o.widget(this.view,i);for(let i of s)i.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(Mh),t=r.state.facet(Mh),n=r.docChanged||r.heightChanged||r.viewportChanged||!$t.eq(r.startState.facet(pg),r.state.facet(pg),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(r)&&(n=!0);else{n=!0;let s=[];for(let i of t){let o=e.indexOf(i);o<0?s.push(new mN(this.view,i)):(this.gutters[o].update(r),s.push(this.gutters[o]))}for(let i of this.gutters)i.dom.remove(),s.indexOf(i)<0&&i.destroy();for(let i of s)this.dom.appendChild(i.dom);this.gutters=s}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>ht.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==cr.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function pN(r){return Array.isArray(r)?r:[r]}function e1(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class TJ{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=$t.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:s}=this,i=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==s.elements.length){let a=new iI(e,o,i,n);s.elements.push(a),s.dom.appendChild(a.dom)}else s.elements[this.i].update(e,o,i,n);this.height=t.bottom,this.i++}line(e,t,n){let s=[];e1(this.cursor,s,t.from),n.length&&(s=s.concat(n));let i=this.gutter.config.lineMarker(e,t,s);i&&s.unshift(i);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),s=n?[n]:null;for(let i of e.state.facet(SJ)){let o=i(e,t.widget,t);o&&(s||(s=[])).push(o)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class mN{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,s=>{let i=s.target,o;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let l=i.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,a,s)&&s.preventDefault()});this.markers=pN(t.markers(e)),t.initialSpacer&&(this.spacer=new iI(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=pN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let n=e.view.viewport;return!$t.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class iI{constructor(e,t,n,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,s)}update(e,t,n,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),NJ(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let n="cm-gutterElement",s=this.dom.firstChild;for(let i=0,o=0;;){let a=o,l=i<t.length?t[i++]:null,d=!1;if(l){let u=l.elementClass;u&&(n+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,d=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let f=s.nextSibling;s.remove(),s=f}}if(!l)break;l.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),d&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function NJ(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const jJ=Je.define(),PJ=Je.define(),eu=Je.define({combine(r){return ld(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let s in t){let i=n[s],o=t[s];n[s]=i?(a,l,d)=>i(a,l,d)||o(a,l,d):o}return n}})}});class ax extends So{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lx(r,e){return r.state.facet(eu).formatNumber(e,r.state)}const RJ=Mh.compute([eu],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(jJ)},lineMarker(e,t,n){return n.some(s=>s.toDOM)?null:new ax(lx(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let s of e.state.facet(PJ)){let i=s(e,t,n);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(eu)!=e.state.facet(eu),initialSpacer(e){return new ax(lx(e,gN(e.state.doc.lines)))},updateSpacer(e,t){let n=lx(t.view,gN(t.view.state.doc.lines));return n==e.number?e:new ax(n)},domEventHandlers:r.facet(eu).domEventHandlers}));function iae(r={}){return[eu.of(r),sI(),RJ]}function gN(r){let e=9;for(;e<r;)e=e*10+9;return e}const OJ=new class extends So{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},MJ=pg.compute(["selection"],r=>{let e=[],t=-1;for(let n of r.selection.ranges){let s=r.doc.lineAt(n.head).from;s>t&&(t=s,e.push(OJ.range(s)))}return $t.of(e)});function oae(){return MJ}const DJ=1024;let IJ=0;class Cs{constructor(e,t){this.from=e,this.to=t}}class Nt{constructor(e={}){this.id=IJ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Hn.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Nt.closedBy=new Nt({deserialize:r=>r.split(" ")});Nt.openedBy=new Nt({deserialize:r=>r.split(" ")});Nt.group=new Nt({deserialize:r=>r.split(" ")});Nt.isolate=new Nt({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});Nt.contextHash=new Nt({perNode:!0});Nt.lookAhead=new Nt({perNode:!0});Nt.mounted=new Nt({perNode:!0});class cf{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Nt.mounted.id]}}const LJ=Object.create(null);class Hn{constructor(e,t,n,s=0){this.name=e,this.props=t,this.id=n,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):LJ,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Hn(e.name||"",t,e.id,n);if(e.props){for(let i of e.props)if(Array.isArray(i)||(i=i(s)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Nt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let s of n.split(" "))t[s]=e[n];return n=>{for(let s=n.prop(Nt.group),i=-1;i<(s?s.length:0);i++){let o=t[i<0?n.name:s[i]];if(o)return o}}}}Hn.none=new Hn("",Object.create(null),0,8);class oI{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let s=null;for(let i of e){let o=i(n);o&&(s||(s=Object.assign({},n.props)),s[o[0].id]=o[1])}t.push(s?new Hn(n.name,s,n.id,n.flags):n)}return new oI(t)}}const Wm=new WeakMap,yN=new WeakMap;var gr;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(gr||(gr={}));class Lr{constructor(e,t,n,s,i){if(this.type=e,this.children=t,this.positions=n,this.length=s,this.props=null,i&&i.length){this.props=Object.create(null);for(let[o,a]of i)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=cf.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let s=n.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Xg(this.topNode,e)}cursorAt(e,t=0,n=0){let s=Wm.get(this)||this.topNode,i=new Xg(s);return i.moveTo(e,t),Wm.set(this,i._tree),i}get topNode(){return new fn(this,0,0,null)}resolve(e,t=0){let n=uf(Wm.get(this)||this.topNode,e,t,!1);return Wm.set(this,n),n}resolveInner(e,t=0){let n=uf(yN.get(this)||this.topNode,e,t,!0);return yN.set(this,n),n}resolveStack(e,t=0){return $J(this,e,t)}iterate(e){let{enter:t,leave:n,from:s=0,to:i=this.length}=e,o=e.mode||0,a=(o&gr.IncludeAnonymous)>0;for(let l=this.cursor(o|gr.IncludeAnonymous);;){let d=!1;if(l.from<=i&&l.to>=s&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;d=!0}for(;d&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ak(Hn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,s)=>new Lr(this.type,t,n,s,this.propValues),e.makeTree||((t,n,s)=>new Lr(Hn.none,t,n,s)))}static build(e){return zJ(e)}}Lr.empty=new Lr(Hn.none,[],[],0);class ik{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ik(this.buffer,this.index)}}class Ia{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Hn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],s=this.set.types[t],i=s.name;if(/\W/.test(i)&&!s.isError&&(i=JSON.stringify(i)),e+=4,n==e)return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,s,i){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(aI(i,s,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,t,n){let s=this.buffer,i=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){i[l++]=s[a++],i[l++]=s[a++]-n;let d=i[l++]=s[a++]-n;i[l++]=s[a++]-e,o=Math.max(o,d)}return new Ia(i,o,this.set)}}function aI(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function uf(r,e,t,n){for(var s;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!n&&r instanceof fn&&r.index<0?null:r.parent;if(!o)return r;r=o}let i=n?0:gr.IgnoreOverlays;if(n)for(let o=r,a=o.parent;a;o=a,a=o.parent)o instanceof fn&&o.index<0&&((s=a.enter(e,t,i))===null||s===void 0?void 0:s.from)!=o.from&&(r=a);for(;;){let o=r.enter(e,t,i);if(!o)return r;r=o}}class lI{cursor(e=0){return new Xg(this,e)}getChild(e,t=null,n=null){let s=vN(this,e,t,n);return s.length?s[0]:null}getChildren(e,t=null,n=null){return vN(this,e,t,n)}resolve(e,t=0){return uf(this,e,t,!1)}resolveInner(e,t=0){return uf(this,e,t,!0)}matchContext(e){return t1(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(n=t,t=s.prevSibling):t=s}return n}get node(){return this}get next(){return this.parent}}class fn extends lI{constructor(e,t,n,s){super(),this._tree=e,this.from=t,this.index=n,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,s,i=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,d=t>0?a.length:-1;e!=d;e+=t){let u=a[e],f=l[e]+o.from;if(aI(s,n,f,f+u.length)){if(u instanceof Ia){if(i&gr.ExcludeBuffers)continue;let p=u.findChild(0,u.buffer.length,t,n-f,s);if(p>-1)return new Ei(new FJ(o,u,e,f),null,p)}else if(i&gr.IncludeAnonymous||!u.type.isAnonymous||ok(u)){let p;if(!(i&gr.IgnoreMounts)&&(p=cf.get(u))&&!p.overlay)return new fn(p.tree,f,e,o);let m=new fn(u,f,e,o);return i&gr.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(t<0?u.children.length-1:0,t,n,s)}}}if(i&gr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let s;if(!(n&gr.IgnoreOverlays)&&(s=cf.get(this._tree))&&s.overlay){let i=e-this.from;for(let{from:o,to:a}of s.overlay)if((t>0?o<=i:o<i)&&(t<0?a>=i:a>i))return new fn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function vN(r,e,t,n){let s=r.cursor(),i=[];if(!s.firstChild())return i;if(t!=null){for(let o=!1;!o;)if(o=s.type.is(t),!s.nextSibling())return i}for(;;){if(n!=null&&s.type.is(n))return i;if(s.type.is(e)&&i.push(s.node),!s.nextSibling())return n==null?i:[]}}function t1(r,e,t=e.length-1){for(let n=r;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class FJ{constructor(e,t,n,s){this.parent=e,this.buffer=t,this.index=n,this.start=s}}class Ei extends lI{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Ei(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&gr.ExcludeBuffers)return null;let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Ei(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ei(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ei(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,s=this.index+4,i=n.buffer[this.index+3];if(i>s){let o=n.buffer[this.index+1];e.push(n.slice(s,i,o)),t.push(0)}return new Lr(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function cI(r){if(!r.length)return null;let e=0,t=r[0];for(let i=1;i<r.length;i++){let o=r[i];(o.from>t.from||o.to<t.to)&&(t=o,e=i)}let n=t instanceof fn&&t.index<0?null:t.parent,s=r.slice();return n?s[e]=n:s.splice(e,1),new BJ(s,t)}class BJ{constructor(e,t){this.heads=e,this.node=t}get next(){return cI(this.heads)}}function $J(r,e,t){let n=r.resolveInner(e,t),s=null;for(let i=n instanceof fn?n:n.context.parent;i;i=i.parent)if(i.index<0){let o=i.parent;(s||(s=[n])).push(o.resolve(e,t)),i=o}else{let o=cf.get(i.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new fn(o.tree,o.overlay[0].from+i.from,-1,i);(s||(s=[n])).push(uf(a,e,t,!1))}}return s?cI(s):n}class Xg{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof fn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=n+s.buffer[e+1],this.to=n+s.buffer[e+2],!0}yield(e){return e?e instanceof fn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:s}=this.buffer,i=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,n);return i<0?!1:(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&gr.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&gr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&gr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let s=n<0?0:this.stack[n]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(s)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(s.buffer.buffer[i+3]<this.index)return!1;({index:t,parent:n}=s)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let i=t+e,o=e<0?-1:n._tree.children.length;i!=o;i+=e){let a=n._tree.children[i];if(this.mode&gr.IncludeAnonymous||a instanceof Ia||!a.type.isAnonymous||ok(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let s=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;t=o,n=i+1;break e}s=this.stack[--i]}for(let s=n;s<this.stack.length;s++)t=new Ei(this.buffer,t,this.stack[s]);return this.bufferNode=new Ei(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,s=!0}}}matchContext(e){if(!this.buffer)return t1(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let s=e.length-1,i=this.stack.length-1;s>=0;i--){if(i<0)return t1(this._tree,e,s);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function ok(r){return r.children.some(e=>e instanceof Ia||!e.type.isAnonymous||ok(e))}function zJ(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:s=DJ,reused:i=[],minRepeatType:o=n.types.length}=r,a=Array.isArray(t)?new ik(t,t.length):t,l=n.types,d=0,u=0;function f(P,O,z,M,D,H){let{id:Z,start:R,end:U,size:k}=a,W=u,B=d;for(;k<0;)if(a.next(),k==-1){let F=i[Z];z.push(F),M.push(R-P);return}else if(k==-3){d=Z;return}else if(k==-4){u=Z;return}else throw new RangeError(`Unrecognized record size: ${k}`);let I=l[Z],G,V,X=R-P;if(U-R<=s&&(V=x(a.pos-O,D))){let F=new Uint16Array(V.size-V.skip),q=a.pos-V.size,oe=F.length;for(;a.pos>q;)oe=_(V.start,F,oe);G=new Ia(F,U-V.start,n),X=V.start-P}else{let F=a.pos-k;a.next();let q=[],oe=[],re=Z>=o?Z:-1,ee=0,ye=U;for(;a.pos>F;)re>=0&&a.id==re&&a.size>=0?(a.end<=ye-s&&(v(q,oe,R,ee,a.end,ye,re,W,B),ee=q.length,ye=a.end),a.next()):H>2500?p(R,F,q,oe):f(R,F,q,oe,re,H+1);if(re>=0&&ee>0&&ee<q.length&&v(q,oe,R,ee,R,ye,re,W,B),q.reverse(),oe.reverse(),re>-1&&ee>0){let ve=m(I,B);G=ak(I,q,oe,0,q.length,0,U-R,ve,ve)}else G=w(I,q,oe,U-R,W-U,B)}z.push(G),M.push(X)}function p(P,O,z,M){let D=[],H=0,Z=-1;for(;a.pos>O;){let{id:R,start:U,end:k,size:W}=a;if(W>4)a.next();else{if(Z>-1&&U<Z)break;Z<0&&(Z=k-s),D.push(R,U,k),H++,a.next()}}if(H){let R=new Uint16Array(H*4),U=D[D.length-2];for(let k=D.length-3,W=0;k>=0;k-=3)R[W++]=D[k],R[W++]=D[k+1]-U,R[W++]=D[k+2]-U,R[W++]=W;z.push(new Ia(R,D[2]-U,n)),M.push(U-P)}}function m(P,O){return(z,M,D)=>{let H=0,Z=z.length-1,R,U;if(Z>=0&&(R=z[Z])instanceof Lr){if(!Z&&R.type==P&&R.length==D)return R;(U=R.prop(Nt.lookAhead))&&(H=M[Z]+R.length+U)}return w(P,z,M,D,H,O)}}function v(P,O,z,M,D,H,Z,R,U){let k=[],W=[];for(;P.length>M;)k.push(P.pop()),W.push(O.pop()+z-D);P.push(w(n.types[Z],k,W,H-D,R-H,U)),O.push(D-z)}function w(P,O,z,M,D,H,Z){if(H){let R=[Nt.contextHash,H];Z=Z?[R].concat(Z):[R]}if(D>25){let R=[Nt.lookAhead,D];Z=Z?[R].concat(Z):[R]}return new Lr(P,O,z,M,Z)}function x(P,O){let z=a.fork(),M=0,D=0,H=0,Z=z.end-s,R={size:0,start:0,skip:0};e:for(let U=z.pos-P;z.pos>U;){let k=z.size;if(z.id==O&&k>=0){R.size=M,R.start=D,R.skip=H,H+=4,M+=4,z.next();continue}let W=z.pos-k;if(k<0||W<U||z.start<Z)break;let B=z.id>=o?4:0,I=z.start;for(z.next();z.pos>W;){if(z.size<0)if(z.size==-3)B+=4;else break e;else z.id>=o&&(B+=4);z.next()}D=I,M+=k,H+=B}return(O<0||M==P)&&(R.size=M,R.start=D,R.skip=H),R.size>4?R:void 0}function _(P,O,z){let{id:M,start:D,end:H,size:Z}=a;if(a.next(),Z>=0&&M<o){let R=z;if(Z>4){let U=a.pos-(Z-4);for(;a.pos>U;)z=_(P,O,z)}O[--z]=R,O[--z]=H-P,O[--z]=D-P,O[--z]=M}else Z==-3?d=M:Z==-4&&(u=M);return z}let C=[],A=[];for(;a.pos>0;)f(r.start||0,r.bufferStart||0,C,A,-1,0);let T=(e=r.length)!==null&&e!==void 0?e:C.length?A[0]+C[0].length:0;return new Lr(l[r.topID],C.reverse(),A.reverse(),T)}const wN=new WeakMap;function mg(r,e){if(!r.isAnonymous||e instanceof Ia||e.type!=r)return 1;let t=wN.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof Lr)){t=1;break}t+=mg(r,n)}wN.set(e,t)}return t}function ak(r,e,t,n,s,i,o,a,l){let d=0;for(let v=n;v<s;v++)d+=mg(r,e[v]);let u=Math.ceil(d*1.5/8),f=[],p=[];function m(v,w,x,_,C){for(let A=x;A<_;){let T=A,P=w[A],O=mg(r,v[A]);for(A++;A<_;A++){let z=mg(r,v[A]);if(O+z>=u)break;O+=z}if(A==T+1){if(O>u){let z=v[T];m(z.children,z.positions,0,z.children.length,w[T]+C);continue}f.push(v[T])}else{let z=w[A-1]+v[A-1].length-P;f.push(ak(r,v,w,T,A,P,z,null,l))}p.push(P+C-i)}}return m(e,t,n,s,0),(a||l)(f,p,o)}class aae{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof Ei?this.setBuffer(e.context.buffer,e.index,t):e instanceof fn&&this.map.set(e.tree,t)}get(e){return e instanceof Ei?this.getBuffer(e.context.buffer,e.index):e instanceof fn?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class yo{constructor(e,t,n,s,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=s,this.open=(i?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let s=[new yo(0,e.length,e,0,!1,n)];for(let i of t)i.to>e.length&&s.push(i);return s}static applyChanges(e,t,n=128){if(!t.length)return e;let s=[],i=1,o=e.length?e[0]:null;for(let a=0,l=0,d=0;;a++){let u=a<t.length?t[a]:null,f=u?u.fromA:1e9;if(f-l>=n)for(;o&&o.from<f;){let p=o;if(l>=p.from||f<=p.to||d){let m=Math.max(p.from,l)-d,v=Math.min(p.to,f)-d;p=m>=v?null:new yo(m,v,p.tree,p.offset+d,a>0,!!u)}if(p&&s.push(p),o.to>f)break;o=i<e.length?e[i++]:null}if(!u)break;l=u.toA,d=u.toA-u.toB}return s}}class UJ{startParse(e,t,n){return typeof e=="string"&&(e=new VJ(e)),n=n?n.length?n.map(s=>new Cs(s.from,s.to)):[new Cs(0,0)]:[new Cs(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let s=this.startParse(e,t,n);for(;;){let i=s.advance();if(i)return i}}}class VJ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function lae(r){return(e,t,n,s)=>new HJ(e,r,t,n,s)}class xN{constructor(e,t,n,s,i){this.parser=e,this.parse=t,this.overlay=n,this.target=s,this.from=i}}function bN(r){if(!r.length||r.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(r))}class WJ{constructor(e,t,n,s,i,o,a){this.parser=e,this.predicate=t,this.mounts=n,this.index=s,this.start=i,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const r1=new Nt({perNode:!0});class HJ{constructor(e,t,n,s,i){this.nest=t,this.input=n,this.fragments=s,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new Lr(n.type,n.children,n.positions,n.length,n.propValues.concat([[r1,this.stoppedAt]]))),n}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[Nt.mounted.id]=new cf(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new GJ(this.fragments),t=null,n=null,s=new Xg(new fn(this.baseTree,this.ranges[0].from,0,null),gr.IncludeAnonymous|gr.IgnoreMounts);e:for(let i,o;;){let a=!0,l;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)a=!1;else if(e.hasNode(s)){if(t){let d=t.mounts.find(u=>u.frag.from<=s.from&&u.frag.to>=s.to&&u.mount.overlay);if(d)for(let u of d.mount.overlay){let f=u.from+d.pos,p=u.to+d.pos;f>=s.from&&p<=s.to&&!t.ranges.some(m=>m.from<p&&m.to>f)&&t.ranges.push({from:f,to:p})}}a=!1}else if(n&&(o=qJ(n.ranges,s.from,s.to)))a=o!=2;else if(!s.type.isAnonymous&&(i=this.nest(s,this.input))&&(s.from<s.to||!i.overlay)){s.tree||KJ(s);let d=e.findMounts(s.from,i.parser);if(typeof i.overlay=="function")t=new WJ(i.parser,i.overlay,d,this.inner.length,s.from,s.tree,t);else{let u=SN(this.ranges,i.overlay||(s.from<s.to?[new Cs(s.from,s.to)]:[]));u.length&&bN(u),(u.length||!i.overlay)&&this.inner.push(new xN(i.parser,u.length?i.parser.startParse(this.input,CN(d,u),u):i.parser.startParse(""),i.overlay?i.overlay.map(f=>new Cs(f.from-s.from,f.to-s.from)):null,s.tree,u.length?u[0].from:s.from)),i.overlay?u.length&&(n={ranges:u,depth:0,prev:n}):a=!1}}else if(t&&(l=t.predicate(s))&&(l===!0&&(l=new Cs(s.from,s.to)),l.from<l.to)){let d=t.ranges.length-1;d>=0&&t.ranges[d].to==l.from?t.ranges[d]={from:t.ranges[d].from,to:l.to}:t.ranges.push(l)}if(a&&s.firstChild())t&&t.depth++,n&&n.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(t&&!--t.depth){let d=SN(this.ranges,t.ranges);d.length&&(bN(d),this.inner.splice(t.index,0,new xN(t.parser,t.parser.startParse(this.input,CN(t.mounts,d),d),t.ranges.map(u=>new Cs(u.from-t.start,u.to-t.start)),t.target,d[0].from))),t=t.prev}n&&!--n.depth&&(n=n.prev)}}}}function qJ(r,e,t){for(let n of r){if(n.from>=t)break;if(n.to>e)return n.from<=e&&n.to>=t?2:1}return 0}function _N(r,e,t,n,s,i){if(e<t){let o=r.buffer[e+1];n.push(r.slice(e,t,o)),s.push(o-i)}}function KJ(r){let{node:e}=r,t=[],n=e.context.buffer;do t.push(r.index),r.parent();while(!r.tree);let s=r.tree,i=s.children.indexOf(n),o=s.children[i],a=o.buffer,l=[i];function d(u,f,p,m,v,w){let x=t[w],_=[],C=[];_N(o,u,x,_,C,m);let A=a[x+1],T=a[x+2];l.push(_.length);let P=w?d(x+4,a[x+3],o.set.types[a[x]],A,T-A,w-1):e.toTree();return _.push(P),C.push(A-m),_N(o,a[x+3],f,_,C,m),new Lr(p,_,C,v)}s.children[i]=d(0,a.length,Hn.none,0,o.length,t.length-1);for(let u of l){let f=r.tree.children[u],p=r.tree.positions[u];r.yield(new fn(f,p+r.from,u,r._tree))}}class kN{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(gr.IncludeAnonymous|gr.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;for(;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,gr.IgnoreOverlays|gr.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Lr)t=t.children[0];else break}return!1}}class GJ{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=(t=n.tree.prop(r1))!==null&&t!==void 0?t:n.to,this.inner=new kN(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(r1))!==null&&e!==void 0?e:t.to,this.inner=new kN(t.tree,-t.offset)}}findMounts(e,t){var n;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let i=this.inner.cursor.node;i;i=i.parent){let o=(n=i.tree)===null||n===void 0?void 0:n.prop(Nt.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=i.to)break;l.tree==this.curFrag.tree&&s.push({frag:l,pos:i.from-l.offset,mount:o})}}}return s}}function SN(r,e){let t=null,n=e;for(let s=1,i=0;s<r.length;s++){let o=r[s-1].to,a=r[s].from;for(;i<n.length;i++){let l=n[i];if(l.from>=a)break;l.to<=o||(t||(n=t=e.slice()),l.from<o?(t[i]=new Cs(l.from,o),l.to>a&&t.splice(i+1,0,new Cs(a,l.to))):l.to>a?t[i--]=new Cs(a,l.to):t.splice(i--,1))}}return n}function YJ(r,e,t,n){let s=0,i=0,o=!1,a=!1,l=-1e9,d=[];for(;;){let u=s==r.length?1e9:o?r[s].to:r[s].from,f=i==e.length?1e9:a?e[i].to:e[i].from;if(o!=a){let p=Math.max(l,t),m=Math.min(u,f,n);p<m&&d.push(new Cs(p,m))}if(l=Math.min(u,f),l==1e9)break;u==l&&(o?(o=!1,s++):o=!0),f==l&&(a?(a=!1,i++):a=!0)}return d}function CN(r,e){let t=[];for(let{pos:n,mount:s,frag:i}of r){let o=n+(s.overlay?s.overlay[0].from:0),a=o+s.tree.length,l=Math.max(i.from,o),d=Math.min(i.to,a);if(s.overlay){let u=s.overlay.map(p=>new Cs(p.from+n,p.to+n)),f=YJ(e,u,l,d);for(let p=0,m=l;;p++){let v=p==f.length,w=v?d:f[p].from;if(w>m&&t.push(new yo(m,w,s.tree,-o,i.from>=m||i.openStart,i.to<=w||i.openEnd)),v)break;m=f[p].to}}else t.push(new yo(l,d,s.tree,-o,i.from>=o||i.openStart,i.to<=a||i.openEnd))}return t}let JJ=0;class xs{constructor(e,t,n,s){this.name=e,this.set=t,this.base=n,this.modified=s,this.id=JJ++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof xs&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new xs(n,[],null,[]);if(s.set.push(s),t)for(let i of t.set)s.set.push(i);return s}static defineModifier(e){let t=new Qg(e);return n=>n.modified.indexOf(t)>-1?n:Qg.get(n.base||n,n.modified.concat(t).sort((s,i)=>s.id-i.id))}}let ZJ=0;class Qg{constructor(e){this.name=e,this.instances=[],this.id=ZJ++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(a=>a.base==e&&XJ(t,a.modified));if(n)return n;let s=[],i=new xs(e.name,s,e,t);for(let a of t)a.instances.push(i);let o=QJ(t);for(let a of e.set)if(!a.modified.length)for(let l of o)s.push(Qg.get(a,l));return i}}function XJ(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function QJ(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,s=e.length;n<s;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function eZ(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let s of t.split(" "))if(s){let i=[],o=2,a=s;for(let f=0;;){if(a=="..."&&f>0&&f+3==s.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!p)throw new RangeError("Invalid path: "+s);if(i.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),f+=p[0].length,f==s.length)break;let m=s[f++];if(f==s.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+s);a=s.slice(f)}let l=i.length-1,d=i[l];if(!d)throw new RangeError("Invalid path: "+s);let u=new e0(n,o,l>0?i.slice(0,l):null);e[d]=u.sort(e[d])}}return uI.add(e)}const uI=new Nt;class e0{constructor(e,t,n,s){this.tags=e,this.mode=t,this.context=n,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}e0.empty=new e0([],2,null);function dI(r,e){let t=Object.create(null);for(let i of r)if(!Array.isArray(i.tag))t[i.tag.id]=i.class;else for(let o of i.tag)t[o.id]=i.class;let{scope:n,all:s=null}=e||{};return{style:i=>{let o=s;for(let a of i)for(let l of a.set){let d=t[l.id];if(d){o=o?o+" "+d:d;break}}return o},scope:n}}function tZ(r,e){let t=null;for(let n of r){let s=n.style(e);s&&(t=t?t+" "+s:s)}return t}function rZ(r,e,t,n=0,s=r.length){let i=new nZ(n,Array.isArray(e)?e:[e],t);i.highlightRange(r.cursor(),n,s,"",i.highlighters),i.flush(s)}class nZ{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,s,i){let{type:o,from:a,to:l}=e;if(a>=n||l<=t)return;o.isTop&&(i=this.highlighters.filter(m=>!m.scope||m.scope(o)));let d=s,u=sZ(e)||e0.empty,f=tZ(i,u.tags);if(f&&(d&&(d+=" "),d+=f,u.mode==1&&(s+=(s?" ":"")+f)),this.startSpan(Math.max(t,a),d),u.opaque)return;let p=e.tree&&e.tree.prop(Nt.mounted);if(p&&p.overlay){let m=e.node.enter(p.overlay[0].from+a,1),v=this.highlighters.filter(x=>!x.scope||x.scope(p.tree.type)),w=e.firstChild();for(let x=0,_=a;;x++){let C=x<p.overlay.length?p.overlay[x]:null,A=C?C.from+a:l,T=Math.max(t,_),P=Math.min(n,A);if(T<P&&w)for(;e.from<P&&(this.highlightRange(e,T,P,s,i),this.startSpan(Math.min(P,e.to),d),!(e.to>=A||!e.nextSibling())););if(!C||A>n)break;_=C.to+a,_>t&&(this.highlightRange(m.cursor(),Math.max(t,C.from+a),Math.min(n,_),"",v),this.startSpan(Math.min(n,_),d))}w&&e.parent()}else if(e.firstChild()){p&&(s="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,s,i),this.startSpan(Math.min(n,e.to),d)}while(e.nextSibling());e.parent()}}}function sZ(r){let e=r.type.prop(uI);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const Be=xs.define,Hm=Be(),la=Be(),EN=Be(la),AN=Be(la),ca=Be(),qm=Be(ca),cx=Be(ca),vi=Be(),xl=Be(vi),pi=Be(),mi=Be(),n1=Be(),ah=Be(n1),Km=Be(),ze={comment:Hm,lineComment:Be(Hm),blockComment:Be(Hm),docComment:Be(Hm),name:la,variableName:Be(la),typeName:EN,tagName:Be(EN),propertyName:AN,attributeName:Be(AN),className:Be(la),labelName:Be(la),namespace:Be(la),macroName:Be(la),literal:ca,string:qm,docString:Be(qm),character:Be(qm),attributeValue:Be(qm),number:cx,integer:Be(cx),float:Be(cx),bool:Be(ca),regexp:Be(ca),escape:Be(ca),color:Be(ca),url:Be(ca),keyword:pi,self:Be(pi),null:Be(pi),atom:Be(pi),unit:Be(pi),modifier:Be(pi),operatorKeyword:Be(pi),controlKeyword:Be(pi),definitionKeyword:Be(pi),moduleKeyword:Be(pi),operator:mi,derefOperator:Be(mi),arithmeticOperator:Be(mi),logicOperator:Be(mi),bitwiseOperator:Be(mi),compareOperator:Be(mi),updateOperator:Be(mi),definitionOperator:Be(mi),typeOperator:Be(mi),controlOperator:Be(mi),punctuation:n1,separator:Be(n1),bracket:ah,angleBracket:Be(ah),squareBracket:Be(ah),paren:Be(ah),brace:Be(ah),content:vi,heading:xl,heading1:Be(xl),heading2:Be(xl),heading3:Be(xl),heading4:Be(xl),heading5:Be(xl),heading6:Be(xl),contentSeparator:Be(vi),list:Be(vi),quote:Be(vi),emphasis:Be(vi),strong:Be(vi),link:Be(vi),monospace:Be(vi),strikethrough:Be(vi),inserted:Be(),deleted:Be(),changed:Be(),invalid:Be(),meta:Km,documentMeta:Be(Km),annotation:Be(Km),processingInstruction:Be(Km),definition:xs.defineModifier("definition"),constant:xs.defineModifier("constant"),function:xs.defineModifier("function"),standard:xs.defineModifier("standard"),local:xs.defineModifier("local"),special:xs.defineModifier("special")};for(let r in ze){let e=ze[r];e instanceof xs&&(e.name=r)}dI([{tag:ze.link,class:"tok-link"},{tag:ze.heading,class:"tok-heading"},{tag:ze.emphasis,class:"tok-emphasis"},{tag:ze.strong,class:"tok-strong"},{tag:ze.keyword,class:"tok-keyword"},{tag:ze.atom,class:"tok-atom"},{tag:ze.bool,class:"tok-bool"},{tag:ze.url,class:"tok-url"},{tag:ze.labelName,class:"tok-labelName"},{tag:ze.inserted,class:"tok-inserted"},{tag:ze.deleted,class:"tok-deleted"},{tag:ze.literal,class:"tok-literal"},{tag:ze.string,class:"tok-string"},{tag:ze.number,class:"tok-number"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],class:"tok-string2"},{tag:ze.variableName,class:"tok-variableName"},{tag:ze.local(ze.variableName),class:"tok-variableName tok-local"},{tag:ze.definition(ze.variableName),class:"tok-variableName tok-definition"},{tag:ze.special(ze.variableName),class:"tok-variableName2"},{tag:ze.definition(ze.propertyName),class:"tok-propertyName tok-definition"},{tag:ze.typeName,class:"tok-typeName"},{tag:ze.namespace,class:"tok-namespace"},{tag:ze.className,class:"tok-className"},{tag:ze.macroName,class:"tok-macroName"},{tag:ze.propertyName,class:"tok-propertyName"},{tag:ze.operator,class:"tok-operator"},{tag:ze.comment,class:"tok-comment"},{tag:ze.meta,class:"tok-meta"},{tag:ze.invalid,class:"tok-invalid"},{tag:ze.punctuation,class:"tok-punctuation"}]);var ux;const tu=new Nt;function iZ(r){return Je.define({combine:r?e=>e.concat(r):void 0})}const oZ=new Nt;class Ks{constructor(e,t,n=[],s=""){this.data=e,this.name=s,Wt.prototype.hasOwnProperty("tree")||Object.defineProperty(Wt.prototype,"tree",{get(){return os(this)}}),this.parser=t,this.extension=[La.of(this),Wt.languageData.of((i,o,a)=>{let l=TN(i,o,a),d=l.type.prop(tu);if(!d)return[];let u=i.facet(d),f=l.type.prop(oZ);if(f){let p=l.resolve(o-l.from,a);for(let m of f)if(m.test(p,i)){let v=i.facet(m.facet);return m.type=="replace"?v:v.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return TN(e,t,n).type.prop(tu)==this.data}findRegions(e){let t=e.facet(La);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],s=(i,o)=>{if(i.prop(tu)==this.data){n.push({from:o,to:o+i.length});return}let a=i.prop(Nt.mounted);if(a){if(a.tree.prop(tu)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+i.length});return}else if(a.overlay){let l=n.length;if(s(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<i.children.length;l++){let d=i.children[l];d instanceof Lr&&s(d,i.positions[l]+o)}};return s(os(e),0),n}get allowsNesting(){return!0}}Ks.setState=Qt.define();function TN(r,e,t){let n=r.facet(La),s=os(r).topNode;if(!n||n.allowsNesting)for(let i=s;i;i=i.enter(e,t,gr.ExcludeBuffers))i.type.isTop&&(s=i);return s}class s1 extends Ks{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=iZ(e.languageData);return new s1(t,e.parser.configure({props:[tu.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new s1(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function os(r){let e=r.field(Ks.state,!1);return e?e.tree:Lr.empty}class aZ{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let lh=null;class t0{constructor(e,t,n=[],s,i,o,a,l){this.parser=e,this.state=t,this.fragments=n,this.tree=s,this.treeLen=i,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new t0(e,t,[],Lr.empty,0,n,[],null)}startParse(){return this.parser.startParse(new aZ(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Lr.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(yo.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(yo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=lh;lh=this;try{return e()}finally{lh=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=NN(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:s,treeLen:i,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((d,u,f,p)=>l.push({fromA:d,toA:u,fromB:f,toB:p})),n=yo.applyChanges(n,l),s=Lr.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let d of this.skipped){let u=e.mapPos(d.from,1),f=e.mapPos(d.to,-1);u<f&&a.push({from:u,to:f})}}}return new t0(this.parser,t,n,s,i,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:s,to:i}=this.skipped[n];s<e.to&&i>e.from&&(this.fragments=NN(this.fragments,s,i),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends UJ{createParse(t,n,s){let i=s[0].from,o=s[s.length-1].to;return{parsedPos:i,advance(){let l=lh;if(l){for(let d of s)l.tempSkipped.push(d);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Lr(Hn.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return lh}}function NN(r,e,t){return yo.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class $u{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new $u(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=t0.create(e.facet(La).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new $u(n)}}Ks.state=js.define({create:$u.init,update(r,e){for(let t of e.effects)if(t.is(Ks.setState))return t.value;return e.startState.facet(La)!=e.state.facet(La)?$u.init(e.state):r.apply(e)}});let hI=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(hI=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const dx=typeof navigator<"u"&&(!((ux=navigator.scheduling)===null||ux===void 0)&&ux.isInputPending)?()=>navigator.scheduling.isInputPending():null,lZ=Qr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ks.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ks.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=hI(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:s}}=this.view,i=n.field(Ks.state);if(i.tree==i.context.tree&&i.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!dx?Math.max(25,e.timeRemaining()-5):1e9),a=i.context.treeLen<s&&n.doc.length>s+1e3,l=i.context.work(()=>dx&&dx()||Date.now()>o,s+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Ks.setState.of(new $u(i.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>qs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),La=Je.define({combine(r){return r.length?r[0]:null},enables:r=>[Ks.state,lZ,ht.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class uae{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const cZ=Je.define(),lk=Je.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function r0(r){let e=r.facet(lk);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function df(r,e){let t="",n=r.tabSize,s=r.facet(lk)[0];if(s=="	"){for(;e>=n;)t+="	",e-=n;s=" "}for(let i=0;i<e;i++)t+=s;return t}function ck(r,e){r instanceof Wt&&(r=new gy(r));for(let n of r.state.facet(cZ)){let s=n(r,e);if(s!==void 0)return s}let t=os(r.state);return t.length>=e?dZ(r,t,e):null}class gy{constructor(e,t={}){this.state=e,this.options=t,this.unit=r0(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:i}=this.options;return s!=null&&s>=n.from&&s<=n.to?i&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:n.text.slice(s-n.from),from:s}:{text:n.text.slice(0,s-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:s}=this.lineAt(e,t);return n.slice(e-s,Math.min(n.length,e+100-s))}column(e,t=1){let{text:n,from:s}=this.lineAt(e,t),i=this.countColumn(n,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return cd(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:s}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let o=i(s);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const uZ=new Nt;function dZ(r,e,t){let n=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=n.node){let i=[];for(let o=s;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)i.push(o);for(let o=i.length-1;o>=0;o--)n={node:i[o],next:n}}return fI(n,r,t)}function fI(r,e,t){for(let n=r;n;n=n.next){let s=fZ(n.node);if(s)return s(uk.create(e,t,n))}return 0}function hZ(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function fZ(r){let e=r.type.prop(uZ);if(e)return e;let t=r.firstChild,n;if(t&&(n=t.type.prop(Nt.closedBy))){let s=r.lastChild,i=s&&n.indexOf(s.name)>-1;return o=>pI(o,!0,1,void 0,i&&!hZ(o)?s.from:void 0)}return r.parent==null?pZ:null}function pZ(){return 0}class uk extends gy{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new uk(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(mZ(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return fI(this.context.next,this.base,this.pos)}}function mZ(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function gZ(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let s=r.options.simulateBreak,i=r.state.doc.lineAt(t.from),o=s==null||s<=i.from?i.to:Math.min(i.to,s);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let d=/^ */.exec(i.text.slice(t.to-i.from))[0].length;return{from:t.from,to:t.to+d}}a=l.to}}function dae({closing:r,align:e=!0,units:t=1}){return n=>pI(n,e,t,r)}function pI(r,e,t,n,s){let i=r.textAfter,o=i.match(/^\s*/)[0].length,a=n&&i.slice(o,o+n.length)==n||s==r.pos+o,l=e?gZ(r):null;return l?a?r.column(l.from):r.column(l.to):r.baseIndent+(a?0:r.unit*t)}const hae=r=>r.baseIndent;function fae({except:r,units:e=1}={}){return t=>{let n=r&&r.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const yZ=200;function pae(){return Wt.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:n}=r.newSelection.main,s=t.lineAt(n);if(n>s.from+yZ)return r;let i=t.sliceString(s.from,n);if(!e.some(d=>d.test(i)))return r;let{state:o}=r,a=-1,l=[];for(let{head:d}of o.selection.ranges){let u=o.doc.lineAt(d);if(u.from==a)continue;a=u.from;let f=ck(o,u.from);if(f==null)continue;let p=/^\s*/.exec(u.text)[0],m=df(o,f);p!=m&&l.push({from:u.from,to:u.from+p.length,insert:m})}return l.length?[r,{changes:l,sequential:!0}]:r})}const vZ=Je.define(),wZ=new Nt;function mae(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}function xZ(r,e,t){let n=os(r);if(n.length<t)return null;let s=n.resolveStack(t,1),i=null;for(let o=s;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(i&&a.from<e)break;let l=a.type.prop(wZ);if(l&&(a.to<n.length-50||n.length==r.doc.length||!bZ(a))){let d=l(a,r);d&&d.from<=t&&d.from>=e&&d.to>t&&(i=d)}}return i}function bZ(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function n0(r,e,t){for(let n of r.facet(vZ)){let s=n(r,e,t);if(s)return s}return xZ(r,e,t)}function mI(r,e){let t=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return t>=n?void 0:{from:t,to:n}}const yy=Qt.define({map:mI}),Jf=Qt.define({map:mI});function gI(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(r.lineBlockAt(t));return e}const Kl=js.define({create(){return Ht.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(yy)&&!_Z(r,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(wI),s=n?Ht.replace({widget:new TZ(n(e.state,t.value))}):jN;r=r.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(Jf)&&(r=r.update({filter:(n,s)=>t.value.from!=n||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;r.between(n,n,(s,i)=>{s<n&&i>n&&(t=!0)}),t&&(r=r.update({filterFrom:n,filterTo:n,filter:(s,i)=>i<=n||s>=n}))}return r},provide:r=>ht.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(n,s)=>{t.push(n,s)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let n=r[t++],s=r[t++];if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(jN.range(n,s))}return Ht.set(e,!0)}});function s0(r,e,t){var n;let s=null;return(n=r.field(Kl,!1))===null||n===void 0||n.between(e,t,(i,o)=>{(!s||s.from>i)&&(s={from:i,to:o})}),s}function _Z(r,e,t){let n=!1;return r.between(e,e,(s,i)=>{s==e&&i==t&&(n=!0)}),n}function yI(r,e){return r.field(Kl,!1)?e:e.concat(Qt.appendConfig.of(xI()))}const kZ=r=>{for(let e of gI(r)){let t=n0(r.state,e.from,e.to);if(t)return r.dispatch({effects:yI(r.state,[yy.of(t),vI(r,t)])}),!0}return!1},SZ=r=>{if(!r.state.field(Kl,!1))return!1;let e=[];for(let t of gI(r)){let n=s0(r.state,t.from,t.to);n&&e.push(Jf.of(n),vI(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function vI(r,e,t=!0){let n=r.state.doc.lineAt(e.from).number,s=r.state.doc.lineAt(e.to).number;return ht.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${s}.`)}const CZ=r=>{let{state:e}=r,t=[];for(let n=0;n<e.doc.length;){let s=r.lineBlockAt(n),i=n0(e,s.from,s.to);i&&t.push(yy.of(i)),n=(i?r.lineBlockAt(i.to):s).to+1}return t.length&&r.dispatch({effects:yI(r.state,t)}),!!t.length},EZ=r=>{let e=r.state.field(Kl,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(n,s)=>{t.push(Jf.of({from:n,to:s}))}),r.dispatch({effects:t}),!0},gae=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:kZ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:SZ},{key:"Ctrl-Alt-[",run:CZ},{key:"Ctrl-Alt-]",run:EZ}],AZ={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},wI=Je.define({combine(r){return ld(r,AZ)}});function xI(r){return[Kl,jZ]}function bI(r,e){let{state:t}=r,n=t.facet(wI),s=o=>{let a=r.lineBlockAt(r.posAtDOM(o.target)),l=s0(r.state,a.from,a.to);l&&r.dispatch({effects:Jf.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,s,e);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=s,i}const jN=Ht.replace({widget:new class extends nc{toDOM(r){return bI(r,null)}}});class TZ extends nc{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return bI(e,this.value)}}const NZ={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class hx extends So{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function yae(r={}){let e={...NZ,...r},t=new hx(e,!0),n=new hx(e,!1),s=Qr.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(La)!=o.state.facet(La)||o.startState.field(Kl,!1)!=o.state.field(Kl,!1)||os(o.startState)!=os(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Vl;for(let l of o.viewportLineBlocks){let d=s0(o.state,l.from,l.to)?n:n0(o.state,l.from,l.to)?t:null;d&&a.add(l.from,l.from,d)}return a.finish()}}),{domEventHandlers:i}=e;return[s,EJ({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(s))===null||a===void 0?void 0:a.markers)||$t.empty},initialSpacer(){return new hx(e,!1)},domEventHandlers:{...i,click:(o,a,l)=>{if(i.click&&i.click(o,a,l))return!0;let d=s0(o.state,a.from,a.to);if(d)return o.dispatch({effects:Jf.of(d)}),!0;let u=n0(o.state,a.from,a.to);return u?(o.dispatch({effects:yy.of(u)}),!0):!1}}}),xI()]}const jZ=ht.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class vy{constructor(e,t){this.specs=e;let n;function s(a){let l=Oa.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const i=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,o=t.scope;this.scope=o instanceof Ks?a=>a.prop(tu)==o.data:o?a=>a==o:void 0,this.style=dI(e.map(a=>({tag:a.tag,class:a.class||s(Object.assign({},a,{tag:null}))})),{all:i}).style,this.module=n?new Oa(n):null,this.themeType=t.themeType}static define(e,t){return new vy(e,t||{})}}const i1=Je.define(),_I=Je.define({combine(r){return r.length?[r[0]]:null}});function fx(r){let e=r.facet(i1);return e.length?e:r.facet(_I)}function vae(r,e){let t=[RZ],n;return r instanceof vy&&(r.module&&t.push(ht.styleModule.of(r.module)),n=r.themeType),e!=null&&e.fallback?t.push(_I.of(r)):n?t.push(i1.computeN([ht.darkTheme],s=>s.facet(ht.darkTheme)==(n=="dark")?[r]:[])):t.push(i1.of(r)),t}class PZ{constructor(e){this.markCache=Object.create(null),this.tree=os(e.state),this.decorations=this.buildDeco(e,fx(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=os(e.state),n=fx(e.state),s=n!=fx(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!s&&t.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ht.none;let n=new Vl;for(let{from:s,to:i}of e.visibleRanges)rZ(this.tree,t,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=Ht.mark({class:l})))},s,i);return n.finish()}}const RZ=uy.high(Qr.fromClass(PZ,{decorations:r=>r.decorations})),wae=vy.define([{tag:ze.meta,color:"#404740"},{tag:ze.link,textDecoration:"underline"},{tag:ze.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ze.emphasis,fontStyle:"italic"},{tag:ze.strong,fontWeight:"bold"},{tag:ze.strikethrough,textDecoration:"line-through"},{tag:ze.keyword,color:"#708"},{tag:[ze.atom,ze.bool,ze.url,ze.contentSeparator,ze.labelName],color:"#219"},{tag:[ze.literal,ze.inserted],color:"#164"},{tag:[ze.string,ze.deleted],color:"#a11"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],color:"#e40"},{tag:ze.definition(ze.variableName),color:"#00f"},{tag:ze.local(ze.variableName),color:"#30a"},{tag:[ze.typeName,ze.namespace],color:"#085"},{tag:ze.className,color:"#167"},{tag:[ze.special(ze.variableName),ze.macroName],color:"#256"},{tag:ze.definition(ze.propertyName),color:"#00c"},{tag:ze.comment,color:"#940"},{tag:ze.invalid,color:"#f00"}]),OZ=ht.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),kI=1e4,SI="()[]{}",CI=Je.define({combine(r){return ld(r,{afterCursor:!0,brackets:SI,maxScanDistance:kI,renderMatch:IZ})}}),MZ=Ht.mark({class:"cm-matchingBracket"}),DZ=Ht.mark({class:"cm-nonmatchingBracket"});function IZ(r){let e=[],t=r.matched?MZ:DZ;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const LZ=js.define({create(){return Ht.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],n=e.state.facet(CI);for(let s of e.state.selection.ranges){if(!s.empty)continue;let i=Ai(e.state,s.head,-1,n)||s.head>0&&Ai(e.state,s.head-1,1,n)||n.afterCursor&&(Ai(e.state,s.head,1,n)||s.head<e.state.doc.length&&Ai(e.state,s.head+1,-1,n));i&&(t=t.concat(n.renderMatch(i,e.state)))}return Ht.set(t,!0)},provide:r=>ht.decorations.from(r)}),FZ=[LZ,OZ];function xae(r={}){return[CI.of(r),FZ]}const BZ=new Nt;function o1(r,e,t){let n=r.prop(e<0?Nt.openedBy:Nt.closedBy);if(n)return n;if(r.name.length==1){let s=t.indexOf(r.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function a1(r){let e=r.type.prop(BZ);return e?e(r.node):r}function Ai(r,e,t,n={}){let s=n.maxScanDistance||kI,i=n.brackets||SI,o=os(r),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let d=o1(l.type,t,i);if(d&&l.from<l.to){let u=a1(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return $Z(r,e,t,l,u,d,i)}}return zZ(r,e,t,o,a.type,s,i)}function $Z(r,e,t,n,s,i,o){let a=n.parent,l={from:s.from,to:s.to},d=0,u=a==null?void 0:a.cursor();if(u&&(t<0?u.childBefore(n.from):u.childAfter(n.to)))do if(t<0?u.to<=n.from:u.from>=n.to){if(d==0&&i.indexOf(u.type.name)>-1&&u.from<u.to){let f=a1(u);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(o1(u.type,t,o))d++;else if(o1(u.type,-t,o)){if(d==0){let f=a1(u);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}d--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function zZ(r,e,t,n,s,i,o){let a=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},u=r.doc.iterRange(e,t>0?r.doc.length:0),f=0;for(let p=0;!u.next().done&&p<=i;){let m=u.value;t<0&&(p+=m.length);let v=e+p*t;for(let w=t>0?0:m.length-1,x=t>0?m.length:-1;w!=x;w+=t){let _=o.indexOf(m[w]);if(!(_<0||n.resolveInner(v+w,1).type!=s))if(_%2==0==t>0)f++;else{if(f==1)return{start:d,end:{from:v+w,to:v+w+1},matched:_>>1==l>>1};f--}}t>0&&(p+=m.length)}return u.done?{start:d,matched:!1}:null}const UZ=Object.create(null),PN=[Hn.none],RN=[],ON=Object.create(null),VZ=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])VZ[r]=WZ(UZ,e);function px(r,e){RN.indexOf(r)>-1||(RN.push(r),console.warn(e))}function WZ(r,e){let t=[];for(let a of e.split(" ")){let l=[];for(let d of a.split(".")){let u=r[d]||ze[d];u?typeof u=="function"?l.length?l=l.map(u):px(d,`Modifier ${d} used at start of tag`):l.length?px(d,`Tag ${d} used as modifier`):l=Array.isArray(u)?u:[u]:px(d,`Unknown highlighting tag ${d}`)}for(let d of l)t.push(d)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),s=n+" "+t.map(a=>a.id),i=ON[s];if(i)return i.id;let o=ON[s]=Hn.define({id:PN.length,name:n,props:[eZ({[n]:t})]});return PN.push(o),o.id}cr.RTL,cr.LTR;const HZ=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),n=hk(r.state,t.from);return n.line?qZ(r):n.block?GZ(r):!1};function dk(r,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let s=r(e,t);return s?(n(t.update(s)),!0):!1}}const qZ=dk(ZZ,0),KZ=dk(EI,0),GZ=dk((r,e)=>EI(r,e,JZ(e)),0);function hk(r,e){let t=r.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const ch=50;function YZ(r,{open:e,close:t},n,s){let i=r.sliceDoc(n-ch,n),o=r.sliceDoc(s,s+ch),a=/\s*$/.exec(i)[0].length,l=/^\s*/.exec(o)[0].length,d=i.length-a;if(i.slice(d-e.length,d)==e&&o.slice(l,l+t.length)==t)return{open:{pos:n-a,margin:a&&1},close:{pos:s+l,margin:l&&1}};let u,f;s-n<=2*ch?u=f=r.sliceDoc(n,s):(u=r.sliceDoc(n,n+ch),f=r.sliceDoc(s-ch,s));let p=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(f)[0].length,v=f.length-m-t.length;return u.slice(p,p+e.length)==e&&f.slice(v,v+t.length)==t?{open:{pos:n+p+e.length,margin:/\s/.test(u.charAt(p+e.length))?1:0},close:{pos:s-m-t.length,margin:/\s/.test(f.charAt(v-1))?1:0}}:null}function JZ(r){let e=[];for(let t of r.selection.ranges){let n=r.doc.lineAt(t.from),s=t.to<=n.to?n:r.doc.lineAt(t.to);s.from>n.from&&s.from==t.to&&(s=t.to==n.to+1?n:r.doc.lineAt(t.to-1));let i=e.length-1;i>=0&&e[i].to>n.from?e[i].to=s.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:s.to})}return e}function EI(r,e,t=e.selection.ranges){let n=t.map(i=>hk(e,i.from).block);if(!n.every(i=>i))return null;let s=t.map((i,o)=>YZ(e,n[o],i.from,i.to));if(r!=2&&!s.every(i=>i))return{changes:e.changes(t.map((i,o)=>s[o]?[]:[{from:i.from,insert:n[o].open+" "},{from:i.to,insert:" "+n[o].close}]))};if(r!=1&&s.some(i=>i)){let i=[];for(let o=0,a;o<s.length;o++)if(a=s[o]){let l=n[o],{open:d,close:u}=a;i.push({from:d.pos-l.open.length,to:d.pos+d.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:i}}return null}function ZZ(r,e,t=e.selection.ranges){let n=[],s=-1;for(let{from:i,to:o}of t){let a=n.length,l=1e9,d=hk(e,i).line;if(d){for(let u=i;u<=o;){let f=e.doc.lineAt(u);if(f.from>s&&(i==o||o>f.from)){s=f.from;let p=/^\s*/.exec(f.text)[0].length,m=p==f.length,v=f.text.slice(p,p+d.length)==d?p:-1;p<f.text.length&&p<l&&(l=p),n.push({line:f,comment:v,token:d,indent:p,empty:m,single:!1})}u=f.to+1}if(l<1e9)for(let u=a;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=l);n.length==a+1&&(n[a].single=!0)}}if(r!=2&&n.some(i=>i.comment<0&&(!i.empty||i.single))){let i=[];for(let{line:a,token:l,indent:d,empty:u,single:f}of n)(f||!u)&&i.push({from:a.from+d,insert:l+" "});let o=e.changes(i);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&n.some(i=>i.comment>=0)){let i=[];for(let{line:o,comment:a,token:l}of n)if(a>=0){let d=o.from+a,u=d+l.length;o.text[u-o.from]==" "&&u++,i.push({from:d,to:u})}return{changes:i}}return null}const l1=Xa.define(),XZ=Xa.define(),QZ=Je.define(),AI=Je.define({combine(r){return ld(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,s)=>e(n,s)||t(n,s)})}}),fk=js.define({create(){return Ti.empty},update(r,e){let t=e.state.facet(AI),n=e.annotation(l1);if(n){let l=Un.fromTransaction(e,n.selection),d=n.side,u=d==0?r.undone:r.done;return l?u=o0(u,u.length,t.minDepth,l):u=jI(u,e.startState.selection),new Ti(d==0?n.rest:u,d==0?u:n.rest)}let s=e.annotation(XZ);if((s=="full"||s=="before")&&(r=r.isolate()),e.annotation(Vn.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let i=Un.fromTransaction(e),o=e.annotation(Vn.time),a=e.annotation(Vn.userEvent);return i?r=r.addChanges(i,o,a,t,e):e.selection&&(r=r.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(s=="full"||s=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Ti(r.done.map(Un.fromJSON),r.undone.map(Un.fromJSON))}});function eX(r={}){return[fk,AI.of(r),ht.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?pk:e.inputType=="historyRedo"?i0:null;return n?(e.preventDefault(),n(t)):!1}})]}function wy(r,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let s=t.field(fk,!1);if(!s)return!1;let i=s.pop(r,t,e);return i?(n(i),!0):!1}}const pk=wy(0,!1),i0=wy(1,!1),tX=wy(0,!0),rX=wy(1,!0);function TI(r){return function(e){let t=e.field(fk,!1);if(!t)return 0;let n=r==0?t.done:t.undone;return n.length-(n.length&&!n[0].changes?1:0)}}const nX=TI(0),sX=TI(1);class Un{constructor(e,t,n,s,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=s,this.selectionsAfter=i}setSelAfter(e){return new Un(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Un(e.changes&&Ir.fromJSON(e.changes),[],e.mapped&&ji.fromJSON(e.mapped),e.startSelection&&Oe.fromJSON(e.startSelection),e.selectionsAfter.map(Oe.fromJSON))}static fromTransaction(e,t){let n=Es;for(let s of e.startState.facet(QZ)){let i=s(e);i.length&&(n=n.concat(i))}return!n.length&&e.changes.empty?null:new Un(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Es)}static selection(e){return new Un(void 0,Es,void 0,void 0,e)}}function o0(r,e,t,n){let s=e+1>t+20?e-t-1:0,i=r.slice(s,e);return i.push(n),i}function iX(r,e){let t=[],n=!1;return r.iterChangedRanges((s,i)=>t.push(s,i)),e.iterChangedRanges((s,i,o,a)=>{for(let l=0;l<t.length;){let d=t[l++],u=t[l++];a>=d&&o<=u&&(n=!0)}}),n}function oX(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function NI(r,e){return r.length?e.length?r.concat(e):r:e}const Es=[],aX=200;function jI(r,e){if(r.length){let t=r[r.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-aX));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),o0(r,r.length-1,1e9,t.setSelAfter(n)))}else return[Un.selection([e])]}function lX(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function mx(r,e){if(!r.length)return r;let t=r.length,n=Es;for(;t;){let s=cX(r[t-1],e,n);if(s.changes&&!s.changes.empty||s.effects.length){let i=r.slice(0,t);return i[t-1]=s,i}else e=s.mapped,t--,n=s.selectionsAfter}return n.length?[Un.selection(n)]:Es}function cX(r,e,t){let n=NI(r.selectionsAfter.length?r.selectionsAfter.map(a=>a.map(e)):Es,t);if(!r.changes)return Un.selection(n);let s=r.changes.map(e),i=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(i):i;return new Un(s,Qt.mapEffects(r.effects,e),o,r.startSelection.map(i),n)}const uX=/^(input\.type|delete)($|\.)/;class Ti{constructor(e,t,n=0,s=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=s}isolate(){return this.prevTime?new Ti(this.done,this.undone):this}addChanges(e,t,n,s,i){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!n||uX.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(i,iX(a.changes,e.changes))||n=="input.type.compose")?o=o0(o,o.length-1,s.minDepth,new Un(e.changes.compose(a.changes),NI(Qt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Es)):o=o0(o,o.length,s.minDepth,e),new Ti(o,Es,t,n)}addSelection(e,t,n,s){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Es;return i.length>0&&t-this.prevTime<s&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&oX(i[i.length-1],e)?this:new Ti(jI(this.done,e),this.undone,t,n)}addMapping(e){return new Ti(mx(this.done,e),mx(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let s=e==0?this.done:this.undone;if(s.length==0)return null;let i=s[s.length-1],o=i.selectionsAfter[0]||t.selection;if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:l1.of({side:e,rest:lX(s),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let a=s.length==1?Es:s.slice(0,s.length-1);return i.mapped&&(a=mx(a,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:l1.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ti.empty=new Ti(Es,Es);const bae=[{key:"Mod-z",run:pk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:i0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:i0,preventDefault:!0},{key:"Mod-u",run:tX,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:rX,preventDefault:!0}];function ud(r,e){return Oe.create(r.ranges.map(e),r.mainIndex)}function Wi(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ai({state:r,dispatch:e},t){let n=ud(r.selection,t);return n.eq(r.selection,!0)?!1:(e(Wi(r,n)),!0)}function xy(r,e){return Oe.cursor(e?r.to:r.from)}function PI(r,e){return ai(r,t=>t.empty?r.moveByChar(t,e):xy(t,e))}function gn(r){return r.textDirectionAt(r.state.selection.main.head)==cr.LTR}const RI=r=>PI(r,!gn(r)),OI=r=>PI(r,gn(r));function MI(r,e){return ai(r,t=>t.empty?r.moveByGroup(t,e):xy(t,e))}const dX=r=>MI(r,!gn(r)),hX=r=>MI(r,gn(r));function fX(r,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function by(r,e,t){let n=os(r).resolveInner(e.head),s=t?Nt.closedBy:Nt.openedBy;for(let l=e.head;;){let d=t?n.childAfter(l):n.childBefore(l);if(!d)break;fX(r,d,s)?n=d:l=t?d.to:d.from}let i=n.type.prop(s),o,a;return i&&(o=t?Ai(r,n.from,1):Ai(r,n.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?n.to:n.from,Oe.cursor(a,t?-1:1)}const pX=r=>ai(r,e=>by(r.state,e,!gn(r))),mX=r=>ai(r,e=>by(r.state,e,gn(r)));function DI(r,e){return ai(r,t=>{if(!t.empty)return xy(t,e);let n=r.moveVertically(t,e);return n.head!=t.head?n:r.moveToLineBoundary(t,e)})}const II=r=>DI(r,!1),LI=r=>DI(r,!0);function FI(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,n=0,s;if(e){for(let i of r.state.facet(ht.scrollMargins)){let o=i(r);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}s=r.scrollDOM.clientHeight-t-n}else s=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,s-5)}}function BI(r,e){let t=FI(r),{state:n}=r,s=ud(n.selection,o=>o.empty?r.moveVertically(o,e,t.height):xy(o,e));if(s.eq(n.selection))return!1;let i;if(t.selfScroll){let o=r.coordsAtPos(n.selection.main.head),a=r.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,d=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<d&&(i=ht.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return r.dispatch(Wi(n,s),{effects:i}),!0}const MN=r=>BI(r,!1),c1=r=>BI(r,!0);function Qa(r,e,t){let n=r.lineBlockAt(e.head),s=r.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?n.to:n.from)&&(s=r.moveToLineBoundary(e,t,!1)),!t&&s.head==n.from&&n.length){let i=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;i&&e.head!=n.from+i&&(s=Oe.cursor(n.from+i))}return s}const gX=r=>ai(r,e=>Qa(r,e,!0)),yX=r=>ai(r,e=>Qa(r,e,!1)),vX=r=>ai(r,e=>Qa(r,e,!gn(r))),wX=r=>ai(r,e=>Qa(r,e,gn(r))),xX=r=>ai(r,e=>Oe.cursor(r.lineBlockAt(e.head).from,1)),bX=r=>ai(r,e=>Oe.cursor(r.lineBlockAt(e.head).to,-1));function _X(r,e,t){let n=!1,s=ud(r.selection,i=>{let o=Ai(r,i.head,-1)||Ai(r,i.head,1)||i.head>0&&Ai(r,i.head-1,1)||i.head<r.doc.length&&Ai(r,i.head+1,-1);if(!o||!o.end)return i;n=!0;let a=o.start.from==i.head?o.end.to:o.end.from;return Oe.cursor(a)});return n?(e(Wi(r,s)),!0):!1}const kX=({state:r,dispatch:e})=>_X(r,e);function Ps(r,e){let t=ud(r.state.selection,n=>{let s=e(n);return Oe.range(n.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(Wi(r.state,t)),!0)}function $I(r,e){return Ps(r,t=>r.moveByChar(t,e))}const zI=r=>$I(r,!gn(r)),UI=r=>$I(r,gn(r));function VI(r,e){return Ps(r,t=>r.moveByGroup(t,e))}const SX=r=>VI(r,!gn(r)),CX=r=>VI(r,gn(r)),EX=r=>Ps(r,e=>by(r.state,e,!gn(r))),AX=r=>Ps(r,e=>by(r.state,e,gn(r)));function WI(r,e){return Ps(r,t=>r.moveVertically(t,e))}const HI=r=>WI(r,!1),qI=r=>WI(r,!0);function KI(r,e){return Ps(r,t=>r.moveVertically(t,e,FI(r).height))}const DN=r=>KI(r,!1),IN=r=>KI(r,!0),TX=r=>Ps(r,e=>Qa(r,e,!0)),NX=r=>Ps(r,e=>Qa(r,e,!1)),jX=r=>Ps(r,e=>Qa(r,e,!gn(r))),PX=r=>Ps(r,e=>Qa(r,e,gn(r))),RX=r=>Ps(r,e=>Oe.cursor(r.lineBlockAt(e.head).from)),OX=r=>Ps(r,e=>Oe.cursor(r.lineBlockAt(e.head).to)),LN=({state:r,dispatch:e})=>(e(Wi(r,{anchor:0})),!0),FN=({state:r,dispatch:e})=>(e(Wi(r,{anchor:r.doc.length})),!0),BN=({state:r,dispatch:e})=>(e(Wi(r,{anchor:r.selection.main.anchor,head:0})),!0),$N=({state:r,dispatch:e})=>(e(Wi(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),MX=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),DX=({state:r,dispatch:e})=>{let t=_y(r).map(({from:n,to:s})=>Oe.range(n,Math.min(s+1,r.doc.length)));return e(r.update({selection:Oe.create(t),userEvent:"select"})),!0},IX=({state:r,dispatch:e})=>{let t=ud(r.selection,n=>{let s=os(r),i=s.resolveStack(n.from,1);if(n.empty){let o=s.resolveStack(n.from,-1);o.node.from>=i.node.from&&o.node.to<=i.node.to&&(i=o)}for(let o=i;o;o=o.next){let{node:a}=o;if((a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from)&&o.next)return Oe.range(a.to,a.from)}return n});return t.eq(r.selection)?!1:(e(Wi(r,t)),!0)},LX=({state:r,dispatch:e})=>{let t=r.selection,n=null;return t.ranges.length>1?n=Oe.create([t.main]):t.main.empty||(n=Oe.create([Oe.cursor(t.main.head)])),n?(e(Wi(r,n)),!0):!1};function Zf(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:n}=r,s=n.changeByRange(i=>{let{from:o,to:a}=i;if(o==a){let l=e(i);l<o?(t="delete.backward",l=Gm(r,l,!1)):l>o&&(t="delete.forward",l=Gm(r,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Gm(r,o,!1),a=Gm(r,a,!0);return o==a?{range:i}:{changes:{from:o,to:a},range:Oe.cursor(o,o<i.head?-1:1)}});return s.changes.empty?!1:(r.dispatch(n.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ht.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Gm(r,e,t){if(r instanceof ht)for(let n of r.state.facet(ht.atomicRanges).map(s=>s(r)))n.between(e,e,(s,i)=>{s<e&&i>e&&(e=t?i:s)});return e}const GI=(r,e,t)=>Zf(r,n=>{let s=n.from,{state:i}=r,o=i.doc.lineAt(s),a,l;if(t&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,s-o.from))){if(a[a.length-1]=="	")return s-1;let d=cd(a,i.tabSize),u=d%r0(i)||r0(i);for(let f=0;f<u&&a[a.length-1-f]==" ";f++)s--;l=s}else l=kn(o.text,s-o.from,e,e)+o.from,l==s&&o.number!=(e?i.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,s-o.from))&&(l=kn(o.text,l-o.from,!1,!1)+o.from);return l}),u1=r=>GI(r,!1,!0),YI=r=>GI(r,!0,!1),JI=(r,e)=>Zf(r,t=>{let n=t.head,{state:s}=r,i=s.doc.lineAt(n),o=s.charCategorizer(n);for(let a=null;;){if(n==(e?i.to:i.from)){n==t.head&&i.number!=(e?s.doc.lines:1)&&(n+=e?1:-1);break}let l=kn(i.text,n-i.from,e)+i.from,d=i.text.slice(Math.min(n,l)-i.from,Math.max(n,l)-i.from),u=o(d);if(a!=null&&u!=a)break;(d!=" "||n!=t.head)&&(a=u),n=l}return n}),ZI=r=>JI(r,!1),FX=r=>JI(r,!0),BX=r=>Zf(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),$X=r=>Zf(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),zX=r=>Zf(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),UX=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Lt.of(["",""])},range:Oe.cursor(n.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},VX=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let s=n.from,i=r.doc.lineAt(s),o=s==i.from?s-1:kn(i.text,s-i.from,!1)+i.from,a=s==i.to?s+1:kn(i.text,s-i.from,!0)+i.from;return{changes:{from:o,to:a,insert:r.doc.slice(s,a).append(r.doc.slice(o,s))},range:Oe.cursor(a)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _y(r){let e=[],t=-1;for(let n of r.selection.ranges){let s=r.doc.lineAt(n.from),i=r.doc.lineAt(n.to);if(!n.empty&&n.to==i.from&&(i=r.doc.lineAt(n.to-1)),t>=s.number){let o=e[e.length-1];o.to=i.to,o.ranges.push(n)}else e.push({from:s.from,to:i.to,ranges:[n]});t=i.number+1}return e}function XI(r,e,t){if(r.readOnly)return!1;let n=[],s=[];for(let i of _y(r)){if(t?i.to==r.doc.length:i.from==0)continue;let o=r.doc.lineAt(t?i.to+1:i.from-1),a=o.length+1;if(t){n.push({from:i.to,to:o.to},{from:i.from,insert:o.text+r.lineBreak});for(let l of i.ranges)s.push(Oe.range(Math.min(r.doc.length,l.anchor+a),Math.min(r.doc.length,l.head+a)))}else{n.push({from:o.from,to:i.from},{from:i.to,insert:r.lineBreak+o.text});for(let l of i.ranges)s.push(Oe.range(l.anchor-a,l.head-a))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:Oe.create(s,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const WX=({state:r,dispatch:e})=>XI(r,e,!1),HX=({state:r,dispatch:e})=>XI(r,e,!0);function QI(r,e,t){if(r.readOnly)return!1;let n=[];for(let s of _y(r))t?n.push({from:s.from,insert:r.doc.slice(s.from,s.to)+r.lineBreak}):n.push({from:s.to,insert:r.lineBreak+r.doc.slice(s.from,s.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const qX=({state:r,dispatch:e})=>QI(r,e,!1),KX=({state:r,dispatch:e})=>QI(r,e,!0),GX=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(_y(e).map(({from:s,to:i})=>(s>0?s--:i<e.doc.length&&i++,{from:s,to:i}))),n=ud(e.selection,s=>{let i;if(r.lineWrapping){let o=r.lineBlockAt(s.head),a=r.coordsAtPos(s.head,s.assoc||1);a&&(i=o.bottom+r.documentTop-a.bottom+r.defaultLineHeight/2)}return r.moveVertically(s,!0,i)}).map(t);return r.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function YX(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=os(r).resolveInner(e),n=t.childBefore(e),s=t.childAfter(e),i;return n&&s&&n.to<=e&&s.from>=e&&(i=n.type.prop(Nt.closedBy))&&i.indexOf(s.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(s.from).from&&!/\S/.test(r.sliceDoc(n.to,s.from))?{from:n.to,to:s.from}:null}const zN=e4(!1),JX=e4(!0);function e4(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(s=>{let{from:i,to:o}=s,a=e.doc.lineAt(i),l=!r&&i==o&&YX(e,i);r&&(i=o=(o<=a.to?a:e.doc.lineAt(o)).to);let d=new gy(e,{simulateBreak:i,simulateDoubleBreak:!!l}),u=ck(d,i);for(u==null&&(u=cd(/^\s*/.exec(e.doc.lineAt(i).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:i,to:o}=l:i>a.from&&i<a.from+100&&!/\S/.test(a.text.slice(0,i))&&(i=a.from);let f=["",df(e,u)];return l&&f.push(df(e,d.lineIndent(a.from,-1))),{changes:{from:i,to:o,insert:Lt.of(f)},range:Oe.cursor(i+1+f[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function mk(r,e){let t=-1;return r.changeByRange(n=>{let s=[];for(let o=n.from;o<=n.to;){let a=r.doc.lineAt(o);a.number>t&&(n.empty||n.to>a.from)&&(e(a,s,n),t=a.number),o=a.to+1}let i=r.changes(s);return{changes:s,range:Oe.range(i.mapPos(n.anchor,1),i.mapPos(n.head,1))}})}const ZX=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),n=new gy(r,{overrideIndentation:i=>{let o=t[i];return o??-1}}),s=mk(r,(i,o,a)=>{let l=ck(n,i.from);if(l==null)return;/\S/.test(i.text)||(l=0);let d=/^\s*/.exec(i.text)[0],u=df(r,l);(d!=u||a.from<i.from+d.length)&&(t[i.from]=l,o.push({from:i.from,to:i.from+d.length,insert:u}))});return s.changes.empty||e(r.update(s,{userEvent:"indent"})),!0},XX=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(mk(r,(t,n)=>{n.push({from:t.from,insert:r.facet(lk)})}),{userEvent:"input.indent"})),!0),QX=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(mk(r,(t,n)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let i=cd(s,r.tabSize),o=0,a=df(r,Math.max(0,i-r0(r)));for(;o<s.length&&o<a.length&&s.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+s.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),eQ=r=>(r.setTabFocusMode(),!0),tQ=[{key:"Ctrl-b",run:RI,shift:zI,preventDefault:!0},{key:"Ctrl-f",run:OI,shift:UI},{key:"Ctrl-p",run:II,shift:HI},{key:"Ctrl-n",run:LI,shift:qI},{key:"Ctrl-a",run:xX,shift:RX},{key:"Ctrl-e",run:bX,shift:OX},{key:"Ctrl-d",run:YI},{key:"Ctrl-h",run:u1},{key:"Ctrl-k",run:BX},{key:"Ctrl-Alt-h",run:ZI},{key:"Ctrl-o",run:UX},{key:"Ctrl-t",run:VX},{key:"Ctrl-v",run:c1}],rQ=[{key:"ArrowLeft",run:RI,shift:zI,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:dX,shift:SX,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:vX,shift:jX,preventDefault:!0},{key:"ArrowRight",run:OI,shift:UI,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:hX,shift:CX,preventDefault:!0},{mac:"Cmd-ArrowRight",run:wX,shift:PX,preventDefault:!0},{key:"ArrowUp",run:II,shift:HI,preventDefault:!0},{mac:"Cmd-ArrowUp",run:LN,shift:BN},{mac:"Ctrl-ArrowUp",run:MN,shift:DN},{key:"ArrowDown",run:LI,shift:qI,preventDefault:!0},{mac:"Cmd-ArrowDown",run:FN,shift:$N},{mac:"Ctrl-ArrowDown",run:c1,shift:IN},{key:"PageUp",run:MN,shift:DN},{key:"PageDown",run:c1,shift:IN},{key:"Home",run:yX,shift:NX,preventDefault:!0},{key:"Mod-Home",run:LN,shift:BN},{key:"End",run:gX,shift:TX,preventDefault:!0},{key:"Mod-End",run:FN,shift:$N},{key:"Enter",run:zN,shift:zN},{key:"Mod-a",run:MX},{key:"Backspace",run:u1,shift:u1},{key:"Delete",run:YI},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ZI},{key:"Mod-Delete",mac:"Alt-Delete",run:FX},{mac:"Mod-Backspace",run:$X},{mac:"Mod-Delete",run:zX}].concat(tQ.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),_ae=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:pX,shift:EX},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:mX,shift:AX},{key:"Alt-ArrowUp",run:WX},{key:"Shift-Alt-ArrowUp",run:qX},{key:"Alt-ArrowDown",run:HX},{key:"Shift-Alt-ArrowDown",run:KX},{key:"Escape",run:LX},{key:"Mod-Enter",run:JX},{key:"Alt-l",mac:"Ctrl-l",run:DX},{key:"Mod-i",run:IX,preventDefault:!0},{key:"Mod-[",run:QX},{key:"Mod-]",run:XX},{key:"Mod-Alt-\\",run:ZX},{key:"Shift-Mod-k",run:GX},{key:"Shift-Mod-\\",run:kX},{key:"Mod-/",run:HZ},{key:"Alt-A",run:KZ},{key:"Ctrl-m",mac:"Shift-Alt-m",run:eQ}].concat(rQ);function nQ({view:r,className:e=""}){const t=r?nX(r.state)>0:!1,n=r?sX(r.state)>0:!1,s=o=>{o.preventDefault(),r&&(pk({state:r.state,dispatch:r.dispatch}),r.focus())},i=o=>{o.preventDefault(),r&&(i0({state:r.state,dispatch:r.dispatch}),r.focus())};return g.jsxs("div",{className:`flex items-center gap-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-md shadow-md p-1 border border-gray-200 dark:border-gray-700 ${e}`,children:[g.jsx("button",{onClick:s,className:`p-1.5 rounded-md transition-colors ${t?"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700":"text-gray-400 dark:text-gray-600 cursor-not-allowed"}`,disabled:!t,title:"Undo (Ctrl+Z)",children:g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M9 14 4 9l5-5"}),g.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]})}),g.jsx("button",{onClick:i,className:`p-1.5 rounded-md transition-colors ${n?"text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-700":"text-gray-400 dark:text-gray-600 cursor-not-allowed"}`,disabled:!n,title:"Redo (Ctrl+Y)",children:g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"m15 14 5-5-5-5"}),g.jsx("path",{d:"M4 20v-7a4 4 0 0 1 4-4h12"})]})})]})}eX();let Ym=null;const sQ=({value:r,language:e,onChange:t,tabSize:n=4,autocomplete:s=!0,syntaxTheme:i="default",ytext:o,provider:a})=>{const l=S.useRef(null),d=S.useRef(null),u=S.useRef(0),f=S.useRef(t);return S.useEffect(()=>{f.current=t},[t]),S.useEffect(()=>{let p=!1;const m=++u.current;return l.current&&Ra(()=>import("./editor-B9qJo4OM.js"),[]).then(v=>{if(p||m!==u.current)return;const w=_=>{f.current(_)};d.current&&d.current.destroy(),console.log("CURSOR");const x=v.createEditorView({parent:l.current,doc:r,language:e,onChange:w,tabSize:n,autocomplete:s,syntaxTheme:i,ytext:o,provider:a});d.current=x,x.focus()}),()=>{p=!0,d.current&&(d.current.destroy(),d.current=null)}},[a]),S.useEffect(()=>{d.current&&d.current.state.doc.toString()!==r&&d.current.dispatch({changes:{from:0,to:d.current.state.doc.length,insert:r}})},[r]),S.useEffect(()=>{(async()=>{Ym||(Ym=(await Ra(()=>import("./editor-B9qJo4OM.js"),[])).updateEditorSettings),d.current&&Ym&&(d.current.state.tabSize,Ym(d.current,{tabSize:n,autocomplete:s??!0,syntaxTheme:i}))})()},[n,s,i]),g.jsxs("div",{className:"relative h-full w-full",children:[g.jsx("div",{ref:l,className:"h-full w-full"}),d.current&&g.jsx(nQ,{view:d.current,className:"absolute top-2 right-2 z-10"})]})};var gk="Popover",[t4,kae]=ni(gk,[qa]),Xf=qa(),[iQ,el]=t4(gk),r4=r=>{const{__scopePopover:e,children:t,open:n,defaultOpen:s,onOpenChange:i,modal:o=!1}=r,a=Xf(e),l=S.useRef(null),[d,u]=S.useState(!1),[f=!1,p]=wo({prop:n,defaultProp:s,onChange:i});return g.jsx(o_,{...a,children:g.jsx(iQ,{scope:e,contentId:Ys(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:S.useCallback(()=>u(!0),[]),onCustomAnchorRemove:S.useCallback(()=>u(!1),[]),modal:o,children:t})})};r4.displayName=gk;var n4="PopoverAnchor",oQ=S.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=el(n4,t),i=Xf(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return S.useEffect(()=>(o(),()=>a()),[o,a]),g.jsx($f,{...i,...n,ref:e})});oQ.displayName=n4;var s4="PopoverTrigger",i4=S.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=el(s4,t),i=Xf(t),o=Pt(e,s.triggerRef),a=g.jsx(at.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":u4(s.open),...n,ref:o,onClick:Le(r.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:g.jsx($f,{asChild:!0,...i,children:a})});i4.displayName=s4;var yk="PopoverPortal",[aQ,lQ]=t4(yk,{forceMount:void 0}),o4=r=>{const{__scopePopover:e,forceMount:t,children:n,container:s}=r,i=el(yk,e);return g.jsx(aQ,{scope:e,forceMount:t,children:g.jsx(as,{present:t||i.open,children:g.jsx(Xu,{asChild:!0,container:s,children:n})})})};o4.displayName=yk;var zu="PopoverContent",a4=S.forwardRef((r,e)=>{const t=lQ(zu,r.__scopePopover),{forceMount:n=t.forceMount,...s}=r,i=el(zu,r.__scopePopover);return g.jsx(as,{present:n||i.open,children:i.modal?g.jsx(cQ,{...s,ref:e}):g.jsx(uQ,{...s,ref:e})})});a4.displayName=zu;var cQ=S.forwardRef((r,e)=>{const t=el(zu,r.__scopePopover),n=S.useRef(null),s=Pt(e,n),i=S.useRef(!1);return S.useEffect(()=>{const o=n.current;if(o)return ey(o)},[]),g.jsx(Vf,{as:Mi,allowPinchZoom:!0,children:g.jsx(l4,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Le(r.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Le(r.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,d=a.button===2||l;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Le(r.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),uQ=S.forwardRef((r,e)=>{const t=el(zu,r.__scopePopover),n=S.useRef(!1),s=S.useRef(!1);return g.jsx(l4,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=r.onCloseAutoFocus)==null||o.call(r,i),i.defaultPrevented||(n.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var l,d;(l=r.onInteractOutside)==null||l.call(r,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),l4=S.forwardRef((r,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...f}=r,p=el(zu,t),m=Xf(t);return X0(),g.jsx(Uf,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:g.jsx(Ql,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:g.jsx(W0,{"data-state":u4(p.open),role:"dialog",id:p.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),c4="PopoverClose",dQ=S.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=el(c4,t);return g.jsx(at.button,{type:"button",...n,ref:e,onClick:Le(r.onClick,()=>s.onOpenChange(!1))})});dQ.displayName=c4;var hQ="PopoverArrow",fQ=S.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Xf(t);return g.jsx(H0,{...s,...n,ref:e})});fQ.displayName=hQ;function u4(r){return r?"open":"closed"}var pQ=r4,mQ=i4,gQ=o4,d4=a4;const yQ=pQ,vQ=mQ,h4=S.forwardRef(({className:r,align:e="center",sideOffset:t=4,...n},s)=>g.jsx(gQ,{children:g.jsx(d4,{ref:s,align:e,sideOffset:t,className:Ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})}));h4.displayName=d4.displayName;var vk="Switch",[wQ,Sae]=ni(vk),[xQ,bQ]=wQ(vk),f4=S.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:d,form:u,...f}=r,[p,m]=S.useState(null),v=Pt(e,A=>m(A)),w=S.useRef(!1),x=p?u||!!p.closest("form"):!0,[_=!1,C]=wo({prop:s,defaultProp:i,onChange:d});return g.jsxs(xQ,{scope:t,checked:_,disabled:a,children:[g.jsx(at.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":g4(_),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:v,onClick:Le(r.onClick,A=>{C(T=>!T),x&&(w.current=A.isPropagationStopped(),w.current||A.stopPropagation())})}),x&&g.jsx(_Q,{control:p,bubbles:!w.current,name:n,value:l,checked:_,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});f4.displayName=vk;var p4="SwitchThumb",m4=S.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,s=bQ(p4,t);return g.jsx(at.span,{"data-state":g4(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});m4.displayName=p4;var _Q=r=>{const{control:e,checked:t,bubbles:n=!0,...s}=r,i=S.useRef(null),o=IM(t),a=GP(e);return S.useEffect(()=>{const l=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==t&&f){const p=new Event("click",{bubbles:n});f.call(l,t),l.dispatchEvent(p)}},[o,t,n]),g.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:i,style:{...r.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function g4(r){return r?"checked":"unchecked"}var y4=f4,kQ=m4;const v4=S.forwardRef(({className:r,...e},t)=>g.jsx(y4,{className:Ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...e,ref:t,children:g.jsx(kQ,{className:Ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));v4.displayName=y4.displayName;var SQ="Label",w4=S.forwardRef((r,e)=>g.jsx(at.label,{...r,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=r.onMouseDown)==null||s.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));w4.displayName=SQ;var x4=w4;const CQ=Ff("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),bs=S.forwardRef(({className:r,...e},t)=>g.jsx(x4,{ref:t,className:Ye(CQ(),r),...e}));bs.displayName=x4.displayName;var wk="Tabs",[EQ,Cae]=ni(wk,[ny]),b4=ny(),[AQ,xk]=EQ(wk),_4=S.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...d}=r,u=ty(a),[f,p]=wo({prop:n,onChange:s,defaultProp:i});return g.jsx(AQ,{scope:t,baseId:Ys(),value:f,onValueChange:p,orientation:o,dir:u,activationMode:l,children:g.jsx(at.div,{dir:u,"data-orientation":o,...d,ref:e})})});_4.displayName=wk;var k4="TabsList",S4=S.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...s}=r,i=xk(k4,t),o=b4(t);return g.jsx(zO,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:g.jsx(at.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});S4.displayName=k4;var C4="TabsTrigger",E4=S.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:s=!1,...i}=r,o=xk(C4,t),a=b4(t),l=N4(o.baseId,n),d=j4(o.baseId,n),u=n===o.value;return g.jsx(UO,{asChild:!0,...a,focusable:!s,active:u,children:g.jsx(at.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:Le(r.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Le(r.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Le(r.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!s&&f&&o.onValueChange(n)})})})});E4.displayName=C4;var A4="TabsContent",T4=S.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:s,children:i,...o}=r,a=xk(A4,t),l=N4(a.baseId,n),d=j4(a.baseId,n),u=n===a.value,f=S.useRef(u);return S.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),g.jsx(as,{present:s||u,children:({present:p})=>g.jsx(at.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:d,tabIndex:0,...o,ref:e,style:{...r.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});T4.displayName=A4;function N4(r,e){return`${r}-trigger-${e}`}function j4(r,e){return`${r}-content-${e}`}var TQ=_4,P4=S4,R4=E4,O4=T4;const NQ=TQ,M4=S.forwardRef(({className:r,...e},t)=>g.jsx(P4,{ref:t,className:Ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));M4.displayName=P4.displayName;const gg=S.forwardRef(({className:r,...e},t)=>g.jsx(R4,{ref:t,className:Ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));gg.displayName=R4.displayName;const yg=S.forwardRef(({className:r,...e},t)=>g.jsx(O4,{ref:t,className:Ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));yg.displayName=O4.displayName;const hf=S.forwardRef(({className:r,...e},t)=>g.jsx("textarea",{className:Ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...e}));hf.displayName="Textarea";var Mt;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(const o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Mt||(Mt={}));var d1;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(d1||(d1={}));const He=Mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ha=r=>{switch(typeof r){case"undefined":return He.undefined;case"string":return He.string;case"number":return isNaN(r)?He.nan:He.number;case"boolean":return He.boolean;case"function":return He.function;case"bigint":return He.bigint;case"symbol":return He.symbol;case"object":return Array.isArray(r)?He.array:r===null?He.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?He.promise:typeof Map<"u"&&r instanceof Map?He.map:typeof Set<"u"&&r instanceof Set?He.set:typeof Date<"u"&&r instanceof Date?He.date:He.object;default:return He.unknown}},Pe=Mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jQ=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class ss extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let a=n,l=0;for(;l<o.path.length;){const d=o.path[l];l===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(t(o))):a[d]=a[d]||{_errors:[]},a=a[d],l++}}};return s(this),n}static assert(e){if(!(e instanceof ss))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ss.create=r=>new ss(r);const Uu=(r,e)=>{let t;switch(r.code){case Pe.invalid_type:r.received===He.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Pe.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Mt.jsonStringifyReplacer)}`;break;case Pe.unrecognized_keys:t=`Unrecognized key(s) in object: ${Mt.joinValues(r.keys,", ")}`;break;case Pe.invalid_union:t="Invalid input";break;case Pe.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Mt.joinValues(r.options)}`;break;case Pe.invalid_enum_value:t=`Invalid enum value. Expected ${Mt.joinValues(r.options)}, received '${r.received}'`;break;case Pe.invalid_arguments:t="Invalid function arguments";break;case Pe.invalid_return_type:t="Invalid function return type";break;case Pe.invalid_date:t="Invalid date";break;case Pe.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Mt.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Pe.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Pe.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Pe.custom:t="Invalid input";break;case Pe.invalid_intersection_types:t="Intersection results could not be merged";break;case Pe.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Pe.not_finite:t="Number must be finite";break;default:t=e.defaultError,Mt.assertNever(r)}return{message:t}};let D4=Uu;function PQ(r){D4=r}function a0(){return D4}const l0=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=n.filter(d=>!!d).slice().reverse();for(const d of l)a=d(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},RQ=[];function Ve(r,e){const t=a0(),n=l0({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===Uu?void 0:Uu].filter(s=>!!s)});r.common.issues.push(n)}class mn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return pt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const i=await s.key,o=await s.value;n.push({key:i,value:o})}return mn.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return pt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const pt=Object.freeze({status:"aborted"}),ru=r=>({status:"dirty",value:r}),En=r=>({status:"valid",value:r}),h1=r=>r.status==="aborted",f1=r=>r.status==="dirty",ff=r=>r.status==="valid",pf=r=>typeof Promise<"u"&&r instanceof Promise;function c0(r,e,t,n){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function I4(r,e,t,n,s){if(typeof e=="function"?r!==e||!0:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var rt;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(rt||(rt={}));var bh,_h;class Li{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const UN=(r,e)=>{if(ff(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ss(r.common.issues);return this._error=t,this._error}}};function xt(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,d;const{message:u}=r;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??n)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(d=u??t)!==null&&d!==void 0?d:a.defaultError}},description:s}}class Et{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ha(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ha(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new mn,ctx:{common:e.parent.common,data:e.data,parsedType:ha(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(pf(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const s={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ha(e)},i=this._parseSync({data:e,path:s.path,parent:s});return UN(s,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ha(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(pf(s)?s:Promise.resolve(s));return UN(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Pe.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new ti({schema:this,typeName:ft.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Pi.create(this,this._def)}nullable(){return za.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this,this._def)}promise(){return Wu.create(this,this._def)}or(e){return vf.create([this,e],this._def)}and(e){return wf.create(this,e,this._def)}transform(e){return new ti({...xt(this._def),schema:this,typeName:ft.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Sf({...xt(this._def),innerType:this,defaultValue:t,typeName:ft.ZodDefault})}brand(){return new bk({typeName:ft.ZodBranded,type:this,...xt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Cf({...xt(this._def),innerType:this,catchValue:t,typeName:ft.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Qf.create(this,e)}readonly(){return Ef.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OQ=/^c[^\s-]{8,}$/i,MQ=/^[0-9a-z]+$/,DQ=/^[0-9A-HJKMNP-TV-Z]{26}$/,IQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,LQ=/^[a-z0-9_-]{21}$/i,FQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,BQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$Q="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gx;const zQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UQ=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,VQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,L4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",WQ=new RegExp(`^${L4}$`);function F4(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function HQ(r){return new RegExp(`^${F4(r)}$`)}function B4(r){let e=`${L4}T${F4(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function qQ(r,e){return!!((e==="v4"||!e)&&zQ.test(r)||(e==="v6"||!e)&&UQ.test(r))}class Gs extends Et{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==He.string){const i=this._getOrReturnCtx(e);return Ve(i,{code:Pe.invalid_type,expected:He.string,received:i.parsedType}),pt}const n=new mn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ve(s,{code:Pe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ve(s,{code:Pe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")BQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"email",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")gx||(gx=new RegExp($Q,"u")),gx.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"emoji",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")IQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"uuid",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")LQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"nanoid",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")OQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"cuid",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")MQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"cuid2",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")DQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"ulid",code:Pe.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ve(s,{validation:"url",code:Pe.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"regex",code:Pe.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?B4(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?WQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?HQ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?FQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"duration",code:Pe.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?qQ(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"ip",code:Pe.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?VQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ve(s,{validation:"base64",code:Pe.invalid_string,message:i.message}),n.dirty()):Mt.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:Pe.invalid_string,...rt.errToObj(n)})}_addCheck(e){return new Gs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...rt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...rt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...rt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...rt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...rt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...rt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...rt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...rt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...rt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...rt.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...rt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...rt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...rt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...rt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...rt.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...rt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...rt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...rt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...rt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...rt.errToObj(t)})}nonempty(e){return this.min(1,rt.errToObj(e))}trim(){return new Gs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Gs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Gs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Gs.create=r=>{var e;return new Gs({checks:[],typeName:ft.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...xt(r)})};function KQ(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Fa extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==He.number){const i=this._getOrReturnCtx(e);return Ve(i,{code:Pe.invalid_type,expected:He.number,received:i.parsedType}),pt}let n;const s=new mn;for(const i of this._def.checks)i.kind==="int"?Mt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?KQ(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.not_finite,message:i.message}),s.dirty()):Mt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,rt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,rt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,rt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,rt.toString(t))}setLimit(e,t,n,s){return new Fa({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:rt.toString(s)}]})}_addCheck(e){return new Fa({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:rt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:rt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Mt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Fa.create=r=>new Fa({checks:[],typeName:ft.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...xt(r)});class Ba extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==He.bigint){const i=this._getOrReturnCtx(e);return Ve(i,{code:Pe.invalid_type,expected:He.bigint,received:i.parsedType}),pt}let n;const s=new mn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ve(n,{code:Pe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Mt.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,rt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,rt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,rt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,rt.toString(t))}setLimit(e,t,n,s){return new Ba({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:rt.toString(s)}]})}_addCheck(e){return new Ba({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:rt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ba.create=r=>{var e;return new Ba({checks:[],typeName:ft.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...xt(r)})};class mf extends Et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==He.boolean){const n=this._getOrReturnCtx(e);return Ve(n,{code:Pe.invalid_type,expected:He.boolean,received:n.parsedType}),pt}return En(e.data)}}mf.create=r=>new mf({typeName:ft.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...xt(r)});class Gl extends Et{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==He.date){const i=this._getOrReturnCtx(e);return Ve(i,{code:Pe.invalid_type,expected:He.date,received:i.parsedType}),pt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ve(i,{code:Pe.invalid_date}),pt}const n=new mn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ve(s,{code:Pe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Mt.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gl({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:rt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:rt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Gl.create=r=>new Gl({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:ft.ZodDate,...xt(r)});class u0 extends Et{_parse(e){if(this._getType(e)!==He.symbol){const n=this._getOrReturnCtx(e);return Ve(n,{code:Pe.invalid_type,expected:He.symbol,received:n.parsedType}),pt}return En(e.data)}}u0.create=r=>new u0({typeName:ft.ZodSymbol,...xt(r)});class gf extends Et{_parse(e){if(this._getType(e)!==He.undefined){const n=this._getOrReturnCtx(e);return Ve(n,{code:Pe.invalid_type,expected:He.undefined,received:n.parsedType}),pt}return En(e.data)}}gf.create=r=>new gf({typeName:ft.ZodUndefined,...xt(r)});class yf extends Et{_parse(e){if(this._getType(e)!==He.null){const n=this._getOrReturnCtx(e);return Ve(n,{code:Pe.invalid_type,expected:He.null,received:n.parsedType}),pt}return En(e.data)}}yf.create=r=>new yf({typeName:ft.ZodNull,...xt(r)});class Vu extends Et{constructor(){super(...arguments),this._any=!0}_parse(e){return En(e.data)}}Vu.create=r=>new Vu({typeName:ft.ZodAny,...xt(r)});class Il extends Et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return En(e.data)}}Il.create=r=>new Il({typeName:ft.ZodUnknown,...xt(r)});class Co extends Et{_parse(e){const t=this._getOrReturnCtx(e);return Ve(t,{code:Pe.invalid_type,expected:He.never,received:t.parsedType}),pt}}Co.create=r=>new Co({typeName:ft.ZodNever,...xt(r)});class d0 extends Et{_parse(e){if(this._getType(e)!==He.undefined){const n=this._getOrReturnCtx(e);return Ve(n,{code:Pe.invalid_type,expected:He.void,received:n.parsedType}),pt}return En(e.data)}}d0.create=r=>new d0({typeName:ft.ZodVoid,...xt(r)});class Js extends Et{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==He.array)return Ve(t,{code:Pe.invalid_type,expected:He.array,received:t.parsedType}),pt;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(Ve(t,{code:o?Pe.too_big:Pe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Ve(t,{code:Pe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Ve(t,{code:Pe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Li(t,o,t.path,a)))).then(o=>mn.mergeArray(n,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new Li(t,o,t.path,a)));return mn.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Js({...this._def,minLength:{value:e,message:rt.toString(t)}})}max(e,t){return new Js({...this._def,maxLength:{value:e,message:rt.toString(t)}})}length(e,t){return new Js({...this._def,exactLength:{value:e,message:rt.toString(t)}})}nonempty(e){return this.min(1,e)}}Js.create=(r,e)=>new Js({type:r,minLength:null,maxLength:null,exactLength:null,typeName:ft.ZodArray,...xt(e)});function Jc(r){if(r instanceof pr){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=Pi.create(Jc(n))}return new pr({...r._def,shape:()=>e})}else return r instanceof Js?new Js({...r._def,type:Jc(r.element)}):r instanceof Pi?Pi.create(Jc(r.unwrap())):r instanceof za?za.create(Jc(r.unwrap())):r instanceof Fi?Fi.create(r.items.map(e=>Jc(e))):r}class pr extends Et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Mt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==He.object){const d=this._getOrReturnCtx(e);return Ve(d,{code:Pe.invalid_type,expected:He.object,received:d.parsedType}),pt}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Co&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||a.push(d);const l=[];for(const d of o){const u=i[d],f=s.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Li(s,f,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Co){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(d==="strict")a.length>0&&(Ve(s,{code:Pe.unrecognized_keys,keys:a}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of a){const f=s.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Li(s,f,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of l){const f=await u.key,p=await u.value;d.push({key:f,value:p,alwaysSet:u.alwaysSet})}return d}).then(d=>mn.mergeObjectSync(n,d)):mn.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return rt.errToObj,new pr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(a=rt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new pr({...this._def,unknownKeys:"strip"})}passthrough(){return new pr({...this._def,unknownKeys:"passthrough"})}extend(e){return new pr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ft.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new pr({...this._def,catchall:e})}pick(e){const t={};return Mt.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new pr({...this._def,shape:()=>t})}omit(e){const t={};return Mt.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new pr({...this._def,shape:()=>t})}deepPartial(){return Jc(this)}partial(e){const t={};return Mt.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new pr({...this._def,shape:()=>t})}required(e){const t={};return Mt.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Pi;)i=i._def.innerType;t[n]=i}}),new pr({...this._def,shape:()=>t})}keyof(){return $4(Mt.objectKeys(this.shape))}}pr.create=(r,e)=>new pr({shape:()=>r,unknownKeys:"strip",catchall:Co.create(),typeName:ft.ZodObject,...xt(e)});pr.strictCreate=(r,e)=>new pr({shape:()=>r,unknownKeys:"strict",catchall:Co.create(),typeName:ft.ZodObject,...xt(e)});pr.lazycreate=(r,e)=>new pr({shape:r,unknownKeys:"strip",catchall:Co.create(),typeName:ft.ZodObject,...xt(e)});class vf extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ss(a.ctx.common.issues));return Ve(t,{code:Pe.invalid_union,unionErrors:o}),pt}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of n){const d={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new ss(l));return Ve(t,{code:Pe.invalid_union,unionErrors:a}),pt}}get options(){return this._def.options}}vf.create=(r,e)=>new vf({options:r,typeName:ft.ZodUnion,...xt(e)});const ao=r=>r instanceof bf?ao(r.schema):r instanceof ti?ao(r.innerType()):r instanceof _f?[r.value]:r instanceof $a?r.options:r instanceof kf?Mt.objectValues(r.enum):r instanceof Sf?ao(r._def.innerType):r instanceof gf?[void 0]:r instanceof yf?[null]:r instanceof Pi?[void 0,...ao(r.unwrap())]:r instanceof za?[null,...ao(r.unwrap())]:r instanceof bk||r instanceof Ef?ao(r.unwrap()):r instanceof Cf?ao(r._def.innerType):[];class ky extends Et{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==He.object)return Ve(t,{code:Pe.invalid_type,expected:He.object,received:t.parsedType}),pt;const n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Ve(t,{code:Pe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const s=new Map;for(const i of t){const o=ao(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new ky({typeName:ft.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...xt(n)})}}function p1(r,e){const t=ha(r),n=ha(e);if(r===e)return{valid:!0,data:r};if(t===He.object&&n===He.object){const s=Mt.objectKeys(e),i=Mt.objectKeys(r).filter(a=>s.indexOf(a)!==-1),o={...r,...e};for(const a of i){const l=p1(r[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===He.array&&n===He.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=e[i],l=p1(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===He.date&&n===He.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class wf extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(h1(i)||h1(o))return pt;const a=p1(i.value,o.value);return a.valid?((f1(i)||f1(o))&&t.dirty(),{status:t.value,value:a.data}):(Ve(n,{code:Pe.invalid_intersection_types}),pt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}wf.create=(r,e,t)=>new wf({left:r,right:e,typeName:ft.ZodIntersection,...xt(t)});class Fi extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==He.array)return Ve(n,{code:Pe.invalid_type,expected:He.array,received:n.parsedType}),pt;if(n.data.length<this._def.items.length)return Ve(n,{code:Pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pt;!this._def.rest&&n.data.length>this._def.items.length&&(Ve(n,{code:Pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Li(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>mn.mergeArray(t,o)):mn.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Fi({...this._def,rest:e})}}Fi.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fi({items:r,typeName:ft.ZodTuple,rest:null,...xt(e)})};class xf extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==He.object)return Ve(n,{code:Pe.invalid_type,expected:He.object,received:n.parsedType}),pt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Li(n,a,n.path,a)),value:o._parse(new Li(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?mn.mergeObjectAsync(t,s):mn.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Et?new xf({keyType:e,valueType:t,typeName:ft.ZodRecord,...xt(n)}):new xf({keyType:Gs.create(),valueType:e,typeName:ft.ZodRecord,...xt(t)})}}class h0 extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==He.map)return Ve(n,{code:Pe.invalid_type,expected:He.map,received:n.parsedType}),pt;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,l],d)=>({key:s._parse(new Li(n,a,n.path,[d,"key"])),value:i._parse(new Li(n,l,n.path,[d,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const d=await l.key,u=await l.value;if(d.status==="aborted"||u.status==="aborted")return pt;(d.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(d.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const d=l.key,u=l.value;if(d.status==="aborted"||u.status==="aborted")return pt;(d.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(d.value,u.value)}return{status:t.value,value:a}}}}h0.create=(r,e,t)=>new h0({valueType:e,keyType:r,typeName:ft.ZodMap,...xt(t)});class Yl extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==He.set)return Ve(n,{code:Pe.invalid_type,expected:He.set,received:n.parsedType}),pt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Ve(n,{code:Pe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Ve(n,{code:Pe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(l){const d=new Set;for(const u of l){if(u.status==="aborted")return pt;u.status==="dirty"&&t.dirty(),d.add(u.value)}return{status:t.value,value:d}}const a=[...n.data.values()].map((l,d)=>i._parse(new Li(n,l,n.path,d)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Yl({...this._def,minSize:{value:e,message:rt.toString(t)}})}max(e,t){return new Yl({...this._def,maxSize:{value:e,message:rt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Yl.create=(r,e)=>new Yl({valueType:r,minSize:null,maxSize:null,typeName:ft.ZodSet,...xt(e)});class pu extends Et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==He.function)return Ve(t,{code:Pe.invalid_type,expected:He.function,received:t.parsedType}),pt;function n(a,l){return l0({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a0(),Uu].filter(d=>!!d),issueData:{code:Pe.invalid_arguments,argumentsError:l}})}function s(a,l){return l0({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,a0(),Uu].filter(d=>!!d),issueData:{code:Pe.invalid_return_type,returnTypeError:l}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Wu){const a=this;return En(async function(...l){const d=new ss([]),u=await a._def.args.parseAsync(l,i).catch(m=>{throw d.addIssue(n(l,m)),d}),f=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(f,i).catch(m=>{throw d.addIssue(s(f,m)),d})})}else{const a=this;return En(function(...l){const d=a._def.args.safeParse(l,i);if(!d.success)throw new ss([n(l,d.error)]);const u=Reflect.apply(o,this,d.data),f=a._def.returns.safeParse(u,i);if(!f.success)throw new ss([s(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pu({...this._def,args:Fi.create(e).rest(Il.create())})}returns(e){return new pu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new pu({args:e||Fi.create([]).rest(Il.create()),returns:t||Il.create(),typeName:ft.ZodFunction,...xt(n)})}}class bf extends Et{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}bf.create=(r,e)=>new bf({getter:r,typeName:ft.ZodLazy,...xt(e)});class _f extends Et{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ve(t,{received:t.data,code:Pe.invalid_literal,expected:this._def.value}),pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}_f.create=(r,e)=>new _f({value:r,typeName:ft.ZodLiteral,...xt(e)});function $4(r,e){return new $a({values:r,typeName:ft.ZodEnum,...xt(e)})}class $a extends Et{constructor(){super(...arguments),bh.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Ve(t,{expected:Mt.joinValues(n),received:t.parsedType,code:Pe.invalid_type}),pt}if(c0(this,bh)||I4(this,bh,new Set(this._def.values)),!c0(this,bh).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Ve(t,{received:t.data,code:Pe.invalid_enum_value,options:n}),pt}return En(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return $a.create(e,{...this._def,...t})}exclude(e,t=this._def){return $a.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}bh=new WeakMap;$a.create=$4;class kf extends Et{constructor(){super(...arguments),_h.set(this,void 0)}_parse(e){const t=Mt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==He.string&&n.parsedType!==He.number){const s=Mt.objectValues(t);return Ve(n,{expected:Mt.joinValues(s),received:n.parsedType,code:Pe.invalid_type}),pt}if(c0(this,_h)||I4(this,_h,new Set(Mt.getValidEnumValues(this._def.values))),!c0(this,_h).has(e.data)){const s=Mt.objectValues(t);return Ve(n,{received:n.data,code:Pe.invalid_enum_value,options:s}),pt}return En(e.data)}get enum(){return this._def.values}}_h=new WeakMap;kf.create=(r,e)=>new kf({values:r,typeName:ft.ZodNativeEnum,...xt(e)});class Wu extends Et{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==He.promise&&t.common.async===!1)return Ve(t,{code:Pe.invalid_type,expected:He.promise,received:t.parsedType}),pt;const n=t.parsedType===He.promise?t.data:Promise.resolve(t.data);return En(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Wu.create=(r,e)=>new Wu({type:r,typeName:ft.ZodPromise,...xt(e)});class ti extends Et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ft.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ve(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return pt;const l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?pt:l.status==="dirty"||t.value==="dirty"?ru(l.value):l});{if(t.value==="aborted")return pt;const a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?pt:a.status==="dirty"||t.value==="dirty"?ru(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?pt:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?pt:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ff(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ff(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):o);Mt.assertNever(s)}}ti.create=(r,e,t)=>new ti({schema:r,typeName:ft.ZodEffects,effect:e,...xt(t)});ti.createWithPreprocess=(r,e,t)=>new ti({schema:e,effect:{type:"preprocess",transform:r},typeName:ft.ZodEffects,...xt(t)});class Pi extends Et{_parse(e){return this._getType(e)===He.undefined?En(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pi.create=(r,e)=>new Pi({innerType:r,typeName:ft.ZodOptional,...xt(e)});class za extends Et{_parse(e){return this._getType(e)===He.null?En(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}za.create=(r,e)=>new za({innerType:r,typeName:ft.ZodNullable,...xt(e)});class Sf extends Et{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===He.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Sf.create=(r,e)=>new Sf({innerType:r,typeName:ft.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xt(e)});class Cf extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return pf(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ss(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ss(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Cf.create=(r,e)=>new Cf({innerType:r,typeName:ft.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xt(e)});class f0 extends Et{_parse(e){if(this._getType(e)!==He.nan){const n=this._getOrReturnCtx(e);return Ve(n,{code:Pe.invalid_type,expected:He.nan,received:n.parsedType}),pt}return{status:"valid",value:e.data}}}f0.create=r=>new f0({typeName:ft.ZodNaN,...xt(r)});const GQ=Symbol("zod_brand");class bk extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Qf extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?pt:i.status==="dirty"?(t.dirty(),ru(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?pt:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new Qf({in:e,out:t,typeName:ft.ZodPipeline})}}class Ef extends Et{_parse(e){const t=this._def.innerType._parse(e),n=s=>(ff(s)&&(s.value=Object.freeze(s.value)),s);return pf(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}Ef.create=(r,e)=>new Ef({innerType:r,typeName:ft.ZodReadonly,...xt(e)});function z4(r,e={},t){return r?Vu.create().superRefine((n,s)=>{var i,o;if(!r(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(o=(i=a.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0,d=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...d,fatal:l})}}):Vu.create()}const YQ={object:pr.lazycreate};var ft;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(ft||(ft={}));const JQ=(r,e={message:`Input not instance of ${r.name}`})=>z4(t=>t instanceof r,e),U4=Gs.create,V4=Fa.create,ZQ=f0.create,XQ=Ba.create,W4=mf.create,QQ=Gl.create,eee=u0.create,tee=gf.create,ree=yf.create,nee=Vu.create,see=Il.create,iee=Co.create,oee=d0.create,aee=Js.create,lee=pr.create,cee=pr.strictCreate,uee=vf.create,dee=ky.create,hee=wf.create,fee=Fi.create,pee=xf.create,mee=h0.create,gee=Yl.create,yee=pu.create,vee=bf.create,wee=_f.create,xee=$a.create,bee=kf.create,_ee=Wu.create,VN=ti.create,kee=Pi.create,See=za.create,Cee=ti.createWithPreprocess,Eee=Qf.create,Aee=()=>U4().optional(),Tee=()=>V4().optional(),Nee=()=>W4().optional(),jee={string:r=>Gs.create({...r,coerce:!0}),number:r=>Fa.create({...r,coerce:!0}),boolean:r=>mf.create({...r,coerce:!0}),bigint:r=>Ba.create({...r,coerce:!0}),date:r=>Gl.create({...r,coerce:!0})},Pee=pt;var xr=Object.freeze({__proto__:null,defaultErrorMap:Uu,setErrorMap:PQ,getErrorMap:a0,makeIssue:l0,EMPTY_PATH:RQ,addIssueToContext:Ve,ParseStatus:mn,INVALID:pt,DIRTY:ru,OK:En,isAborted:h1,isDirty:f1,isValid:ff,isAsync:pf,get util(){return Mt},get objectUtil(){return d1},ZodParsedType:He,getParsedType:ha,ZodType:Et,datetimeRegex:B4,ZodString:Gs,ZodNumber:Fa,ZodBigInt:Ba,ZodBoolean:mf,ZodDate:Gl,ZodSymbol:u0,ZodUndefined:gf,ZodNull:yf,ZodAny:Vu,ZodUnknown:Il,ZodNever:Co,ZodVoid:d0,ZodArray:Js,ZodObject:pr,ZodUnion:vf,ZodDiscriminatedUnion:ky,ZodIntersection:wf,ZodTuple:Fi,ZodRecord:xf,ZodMap:h0,ZodSet:Yl,ZodFunction:pu,ZodLazy:bf,ZodLiteral:_f,ZodEnum:$a,ZodNativeEnum:kf,ZodPromise:Wu,ZodEffects:ti,ZodTransformer:ti,ZodOptional:Pi,ZodNullable:za,ZodDefault:Sf,ZodCatch:Cf,ZodNaN:f0,BRAND:GQ,ZodBranded:bk,ZodPipeline:Qf,ZodReadonly:Ef,custom:z4,Schema:Et,ZodSchema:Et,late:YQ,get ZodFirstPartyTypeKind(){return ft},coerce:jee,any:nee,array:aee,bigint:XQ,boolean:W4,date:QQ,discriminatedUnion:dee,effect:VN,enum:xee,function:yee,instanceof:JQ,intersection:hee,lazy:vee,literal:wee,map:mee,nan:ZQ,nativeEnum:bee,never:iee,null:ree,nullable:See,number:V4,object:lee,oboolean:Nee,onumber:Tee,optional:kee,ostring:Aee,pipeline:Eee,preprocess:Cee,promise:_ee,record:pee,set:gee,strictObject:cee,string:U4,symbol:eee,transformer:VN,tuple:fee,undefined:tee,union:uee,unknown:see,void:oee,NEVER:Pee,ZodIssueCode:Pe,quotelessJson:jQ,ZodError:ss});async function Ree({projectId:r,projectsApi:e,projectFilesApi:t,onProgress:n,includeMetadata:s=!0}){try{const{data:i,error:o}=await e.getProject(r);if(o||!i)return{zipBlob:null,error:o||new Error("Failed to fetch project details")};const{data:a,error:l}=await t.listProjectFiles(r);if(l||!a)return{zipBlob:null,error:l||new Error("Failed to fetch project files")};const d=new b_,u=a.items.length;let f=0;const p={};if(a.items.forEach(v=>{p[v.id]=v}),s){const v={name:i.name,description:i.description,language:i.language,created_at:i.created_at,updated_at:i.updated_at,is_public:i.is_public};d.file("project-metadata.json",JSON.stringify(v,null,2))}for(const v of a.items){if(v.file_type==="directory"){f++,n&&n(Math.round(f/u*100));continue}d.file(v.path,v.content||""),f++,n&&n(Math.round(f/u*100))}return{zipBlob:await d.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),error:null}}catch(i){return{zipBlob:null,error:i instanceof Error?i:new Error(String(i))}}}function Oee(r,e){const t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e.endsWith(".zip")?e:`${e}.zip`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}const Mee=xr.object({email:xr.string().email("Please enter a valid email address"),role:xr.enum(["viewer","editor"]),message:xr.string().optional()}),Dee=xr.object({permissions:xr.enum(["viewer","editor"]),expiresIn:xr.enum(["never","7d","30d","90d"])}),Iee=({isOpen:r,onClose:e,project:t,onMemberAdded:n})=>{const{toast:s}=qn(),{projectMembersApi:i,collaborationApi:o,projectsApi:a,projectFilesApi:l}=Vi(),{user:d}=An(),[u,f]=S.useState({email:"",role:"viewer",message:""}),[p,m]=S.useState({}),[v,w]=S.useState(!1),[x,_]=S.useState({permissions:"viewer",expiresIn:"never"}),[C,A]=S.useState({}),[T,P]=S.useState(!1),[O,z]=S.useState([]),[M,D]=S.useState(!1),[H,Z]=S.useState(null),[R,U]=S.useState(!1),[k,W]=S.useState(0),[B,I]=S.useState(!0);S.useEffect(()=>{r&&d&&G()},[r,d]);const G=async()=>{if(d){D(!0);try{const{data:ue,error:_e}=await o.listProjectShareLinks(t.id,d.id);if(_e){console.error("Error loading share links:",_e),s({title:"Error",description:"Failed to load existing share links",variant:"destructive"});return}z((ue==null?void 0:ue.items)||[])}catch(ue){console.error("Unexpected error loading share links:",ue)}finally{D(!1)}}},V=(ue,_e)=>{f(Ie=>({...Ie,[ue]:_e})),p[ue]&&m(Ie=>({...Ie,[ue]:""}))},X=async()=>{if(d){try{Mee.parse(u),m({})}catch(ue){if(ue instanceof xr.ZodError){const _e={};ue.errors.forEach(Ie=>{Ie.path[0]&&(_e[Ie.path[0]]=Ie.message)}),m(_e);return}}w(!0);try{const{data:_e,error:Ie}=await o.sendEmailInvitation(t.id,u.email,u.role,t.name,u.message||void 0,void 0);if(Ie){s({title:"Invitation Failed",description:Ie.message,variant:"destructive"});return}s({title:"Invitation Sent! ",description:`${u.email} has been sent an invitation email with ${u.role} access.`,duration:5e3}),f({email:"",role:"viewer",message:""}),await G()}catch(ue){console.error("Error sending invitation:",ue),s({title:"Error",description:"Failed to send invitation. Please try again.",variant:"destructive"})}finally{w(!1)}}},F=(ue,_e)=>{_(Ie=>({...Ie,[ue]:_e})),C[ue]&&A(Ie=>({...Ie,[ue]:""}))},q=ue=>{if(ue==="never")return;const _e=new Date;switch(ue){case"7d":return new Date(_e.getTime()+7*24*60*60*1e3);case"30d":return new Date(_e.getTime()+30*24*60*60*1e3);case"90d":return new Date(_e.getTime()+90*24*60*60*1e3);default:return}},oe=async()=>{if(d){try{Dee.parse(x),A({})}catch(ue){if(ue instanceof xr.ZodError){const _e={};ue.errors.forEach(Ie=>{Ie.path[0]&&(_e[Ie.path[0]]=Ie.message)}),A(_e);return}}P(!0);try{const ue=q(x.expiresIn),{data:_e,error:Ie}=await o.generateShareableLink(t.id,x.permissions,d.id,ue);if(Ie){s({title:"Link Generation Failed",description:Ie.message,variant:"destructive"});return}s({title:"Share Link Created",description:`A new ${x.permissions} link has been generated.`}),await G()}catch(ue){console.error("Error generating share link:",ue),s({title:"Error",description:"Failed to generate share link. Please try again.",variant:"destructive"})}finally{P(!1)}}},re=async ue=>{try{const _e=`${window.location.origin}/join/${ue}`;console.log(window.location.origin),await navigator.clipboard.writeText(_e),Z(ue),s({title:"Link Copied",description:"Share link has been copied to clipboard."}),setTimeout(()=>Z(null),2e3)}catch{s({title:"Copy Failed",description:"Failed to copy link to clipboard.",variant:"destructive"})}},ee=async ue=>{if(d)try{const{error:_e}=await o.revokeShareLink(ue,d.id);if(_e){s({title:"Revoke Failed",description:_e.message,variant:"destructive"});return}s({title:"Link Revoked",description:"Share link has been deactivated."}),await G()}catch(_e){console.error("Error revoking share link:",_e),s({title:"Error",description:"Failed to revoke share link.",variant:"destructive"})}},ye=ue=>ue?`Expires ${new Date(ue).toLocaleDateString()}`:"Never expires",ve=ue=>ue?new Date(ue)<new Date:!1,he=ue=>ue==="editor"?g.jsx(mo,{className:"h-3 w-3"}):g.jsx(Dl,{className:"h-3 w-3"}),xe=ue=>ue==="editor"?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-green-100 text-green-800 hover:bg-green-200",Ce=async()=>{if(d){U(!0),W(0);try{const{zipBlob:ue,error:_e}=await Ree({projectId:t.id,projectsApi:a,projectFilesApi:l,onProgress:Ie=>W(Ie),includeMetadata:B});if(_e||!ue)throw _e||new Error("Failed to generate ZIP file");Oee(ue,`${t.name}.zip`),s({title:"Export Successful",description:"Your project has been exported successfully",variant:"default"})}catch(ue){console.error("Error exporting project:",ue),s({title:"Export Failed",description:ue instanceof Error?ue.message:"Failed to export project",variant:"destructive"})}finally{U(!1),W(0)}}};return g.jsx(Zh,{open:r,onOpenChange:ue=>!ue&&e(),children:g.jsxs(Ru,{className:"max-w-3xl",children:[g.jsx(Ou,{children:g.jsxs(Mu,{className:"text-xl",children:["Share Project: ",t.name]})}),g.jsxs(NQ,{defaultValue:"email",children:[g.jsxs(M4,{className:"grid grid-cols-3 mb-4",children:[g.jsxs(gg,{value:"email",children:[g.jsx(Ux,{className:"h-4 w-4 mr-2"}),"Invite by Email"]}),g.jsxs(gg,{value:"link",children:[g.jsx(Tw,{className:"h-4 w-4 mr-2"}),"Shareable Link"]}),g.jsxs(gg,{value:"export",children:[g.jsx(HE,{className:"h-4 w-4 mr-2"}),"Export Project"]})]}),g.jsx(yg,{value:"email",className:"space-y-4",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx(bs,{htmlFor:"email",children:"Email Address"}),g.jsx(_n,{id:"email",type:"email",placeholder:"colleague@example.com",value:u.email,onChange:ue=>V("email",ue.target.value),className:p.email?"border-red-500":""}),p.email&&g.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.email})]}),g.jsxs("div",{children:[g.jsx(bs,{htmlFor:"role",children:"Permission Level"}),g.jsxs(Th,{value:u.role,onValueChange:ue=>V("role",ue),children:[g.jsx(cu,{children:g.jsx(Nh,{})}),g.jsxs(uu,{children:[g.jsx(vs,{value:"viewer",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(Dl,{className:"h-4 w-4"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:"Viewer"}),g.jsx("div",{className:"text-sm text-gray-500",children:"Can view and comment"})]})]})}),g.jsx(vs,{value:"editor",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(mo,{className:"h-4 w-4"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:"Editor"}),g.jsx("div",{className:"text-sm text-gray-500",children:"Can edit and share"})]})]})})]})]}),p.role&&g.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.role})]}),g.jsxs("div",{children:[g.jsx(bs,{htmlFor:"message",children:"Personal Message (Optional)"}),g.jsx(hf,{id:"message",placeholder:"Hey! I'd like to invite you to collaborate on this project...",value:u.message,onChange:ue=>V("message",ue.target.value),rows:3})]}),g.jsx(tt,{onClick:X,disabled:v||!u.email,className:"w-full",children:v?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending Invitation..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Ux,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})}),g.jsx(yg,{value:"link",className:"space-y-4",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs(It,{className:"p-4",children:[g.jsx("h4",{className:"font-medium mb-3",children:"Create New Share Link"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx(bs,{children:"Permission Level"}),g.jsxs(Th,{value:x.permissions,onValueChange:ue=>F("permissions",ue),children:[g.jsx(cu,{children:g.jsx(Nh,{})}),g.jsxs(uu,{children:[g.jsx(vs,{value:"viewer",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(Dl,{className:"h-4 w-4"}),g.jsx("span",{children:"Viewer Access"})]})}),g.jsx(vs,{value:"editor",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(mo,{className:"h-4 w-4"}),g.jsx("span",{children:"Editor Access"})]})})]})]})]}),g.jsxs("div",{children:[g.jsx(bs,{children:"Link Expiration"}),g.jsxs(Th,{value:x.expiresIn,onValueChange:ue=>F("expiresIn",ue),children:[g.jsx(cu,{children:g.jsx(Nh,{})}),g.jsxs(uu,{children:[g.jsx(vs,{value:"never",children:"Never expires"}),g.jsx(vs,{value:"7d",children:"7 days"}),g.jsx(vs,{value:"30d",children:"30 days"}),g.jsx(vs,{value:"90d",children:"90 days"})]})]})]}),g.jsx(tt,{onClick:oe,disabled:T,className:"w-full",children:T?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Link..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Tw,{className:"h-4 w-4 mr-2"}),"Generate Share Link"]})})]})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h4",{className:"font-medium",children:"Active Share Links"}),M&&g.jsx(Zt,{className:"h-4 w-4 animate-spin"})]}),O.length===0?g.jsxs(It,{className:"p-4 text-center text-gray-500",children:[g.jsx(Tw,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),g.jsx("p",{children:"No share links created yet"})]}):g.jsx("div",{className:"space-y-2",children:O.map(ue=>g.jsx(It,{className:"p-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[g.jsxs(_o,{className:xe(ue.role),children:[he(ue.role),g.jsx("span",{className:"ml-1 capitalize",children:ue.role})]}),ve(ue.expires_at)&&g.jsxs(_o,{variant:"destructive",children:[g.jsx(Tg,{className:"h-3 w-3 mr-1"}),"Expired"]})]}),g.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[g.jsx(_P,{className:"h-3 w-3"}),g.jsx("span",{children:ye(ue.expires_at)})]}),g.jsx("div",{className:"text-xs text-gray-400 mt-1 font-mono truncate max-w-[500px]",children:`${window.location.origin}/join/${ue.share_token}`})]}),g.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.jsx(tt,{size:"sm",variant:"outline",onClick:()=>re(ue.share_token),disabled:ve(ue.expires_at),children:H===ue.share_token?g.jsx($h,{className:"h-3 w-3"}):g.jsx(CB,{className:"h-3 w-3"})}),g.jsx(tt,{size:"sm",variant:"outline",onClick:()=>ee(ue.id),className:"text-red-600 hover:text-red-700",children:g.jsx(zh,{className:"h-3 w-3"})})]})]})},ue.id))})]})]})}),g.jsx(yg,{value:"export",children:g.jsx("div",{className:"space-y-6",children:g.jsxs(It,{className:"p-4",children:[g.jsx("h3",{className:"font-medium mb-4",children:"Export Project as ZIP"}),g.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Download your project as a ZIP file to back it up or share it offline."}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("input",{type:"checkbox",id:"include-metadata",checked:B,onChange:ue=>I(ue.target.checked),className:"rounded border-gray-300"}),g.jsx(bs,{htmlFor:"include-metadata",children:"Include project metadata"})]}),R&&g.jsxs("div",{className:"w-full mb-8",children:[g.jsx("div",{className:"bg-gray-200 rounded-full h-2.5",children:g.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${k}%`}})}),g.jsxs("p",{className:"text-sm text-gray-500 mt-1 text-right",children:[k,"% complete"]})]}),g.jsx(tt,{onClick:Ce,disabled:R,className:"w-full",children:R?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):g.jsxs(g.Fragment,{children:[g.jsx(HE,{className:"h-4 w-4 mr-2"}),"Export as ZIP"]})})]})]})})})]}),g.jsx("div",{className:"flex justify-end pt-4 border-t",children:g.jsx(tt,{variant:"outline",onClick:e,children:"Close"})})]})})};var H4="AlertDialog",[Lee,Eae]=ni(H4,[gO]),No=gO(),q4=r=>{const{__scopeAlertDialog:e,...t}=r,n=No(e);return g.jsx(RO,{...n,...t,modal:!0})};q4.displayName=H4;var Fee="AlertDialogTrigger",Bee=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=No(t);return g.jsx(AW,{...s,...n,ref:e})});Bee.displayName=Fee;var $ee="AlertDialogPortal",K4=r=>{const{__scopeAlertDialog:e,...t}=r,n=No(e);return g.jsx(OO,{...n,...t})};K4.displayName=$ee;var zee="AlertDialogOverlay",G4=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=No(t);return g.jsx(A_,{...s,...n,ref:e})});G4.displayName=zee;var mu="AlertDialogContent",[Uee,Vee]=Lee(mu),Y4=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:n,...s}=r,i=No(t),o=S.useRef(null),a=Pt(e,o),l=S.useRef(null);return g.jsx(kW,{contentName:mu,titleName:J4,docsSlug:"alert-dialog",children:g.jsx(Uee,{scope:t,cancelRef:l,children:g.jsxs(T_,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Le(s.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[g.jsx(U1,{children:n}),g.jsx(Hee,{contentRef:o})]})})})});Y4.displayName=mu;var J4="AlertDialogTitle",Z4=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=No(t);return g.jsx(N_,{...s,...n,ref:e})});Z4.displayName=J4;var X4="AlertDialogDescription",Q4=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=No(t);return g.jsx(j_,{...s,...n,ref:e})});Q4.displayName=X4;var Wee="AlertDialogAction",e5=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=No(t);return g.jsx(P_,{...s,...n,ref:e})});e5.displayName=Wee;var t5="AlertDialogCancel",r5=S.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,{cancelRef:s}=Vee(t5,t),i=No(t),o=Pt(e,s);return g.jsx(P_,{...i,...n,ref:o})});r5.displayName=t5;var Hee=({contentRef:r})=>{const e=`\`${mu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${mu}\` by passing a \`${X4}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${mu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return S.useEffect(()=>{var n;document.getElementById((n=r.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},qee=q4,Kee=K4,n5=G4,s5=Y4,i5=e5,o5=r5,a5=Z4,l5=Q4;const Gee=qee,Yee=Kee,c5=S.forwardRef(({className:r,...e},t)=>g.jsx(n5,{className:Ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e,ref:t}));c5.displayName=n5.displayName;const u5=S.forwardRef(({className:r,...e},t)=>g.jsxs(Yee,{children:[g.jsx(c5,{}),g.jsx(s5,{ref:t,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...e})]}));u5.displayName=s5.displayName;const d5=({className:r,...e})=>g.jsx("div",{className:Ye("flex flex-col space-y-2 text-center sm:text-left",r),...e});d5.displayName="AlertDialogHeader";const h5=({className:r,...e})=>g.jsx("div",{className:Ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});h5.displayName="AlertDialogFooter";const f5=S.forwardRef(({className:r,...e},t)=>g.jsx(a5,{ref:t,className:Ye("text-lg font-semibold",r),...e}));f5.displayName=a5.displayName;const p5=S.forwardRef(({className:r,...e},t)=>g.jsx(l5,{ref:t,className:Ye("text-sm text-muted-foreground",r),...e}));p5.displayName=l5.displayName;const m5=S.forwardRef(({className:r,...e},t)=>g.jsx(i5,{ref:t,className:Ye(m_(),r),...e}));m5.displayName=i5.displayName;const g5=S.forwardRef(({className:r,...e},t)=>g.jsx(o5,{ref:t,className:Ye(m_({variant:"outline"}),"mt-2 sm:mt-0",r),...e}));g5.displayName=o5.displayName;var Jee="Separator",WN="horizontal",Zee=["horizontal","vertical"],y5=S.forwardRef((r,e)=>{const{decorative:t,orientation:n=WN,...s}=r,i=Xee(n)?n:WN,a=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return g.jsx(at.div,{"data-orientation":i,...a,...s,ref:e})});y5.displayName=Jee;function Xee(r){return Zee.includes(r)}var v5=y5;const m1=S.forwardRef(({className:r,orientation:e="horizontal",decorative:t=!0,...n},s)=>g.jsx(v5,{ref:s,decorative:t,orientation:e,className:Ye("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...n}));m1.displayName=v5.displayName;const Qee=({isOpen:r,onClose:e,member:t,projectId:n,onMemberUpdated:s,onMemberRemoved:i,onMembersChanged:o})=>{var G,V;const{toast:a}=qn(),{projectMembersApi:l}=Vi(),{user:d}=An(),[u,f]=S.useState("viewer"),[p,m]=S.useState(!1),[v,w]=S.useState(!1),[x,_]=S.useState(!1),[C,A]=S.useState(!1),[T,P]=S.useState(!1);S.useEffect(()=>{t&&r&&(f(t.role),P(!1),O())},[t,r]);const O=async()=>{if(!(!d||!n||!t))try{const{data:X,error:F}=await l.canManageMembers(n,d.id);A(!F&&X?X&&t.role!=="owner":!1)}catch(X){console.error("Error checking management permissions:",X),A(!1)}},z=X=>{f(X),P(X!==(t==null?void 0:t.role))},M=async()=>{if(!(!t||!d||!T)){m(!0);try{const{data:X,error:F}=await l.updatePermissions(t.id,u,d.id);if(F){a({title:"Update Failed",description:F.message,variant:"destructive"});return}if(X){a({title:"Permissions Updated",description:`${H(t)} now has ${u} access.`});const q={...t,role:u};s&&s(q),o&&o(),P(!1)}}catch(X){console.error("Error updating member permissions:",X),a({title:"Error",description:"Failed to update member permissions. Please try again.",variant:"destructive"})}finally{m(!1)}}},D=async()=>{if(!(!t||!d)){w(!0);try{const{error:X}=await l.removeMemberFromProject(t.id,d.id);if(X){a({title:"Removal Failed",description:X.message,variant:"destructive"});return}a({title:"Member Removed",description:`${H(t)} has been removed from the project.`}),i&&i(t.id),o&&o(),_(!1),e()}catch(X){console.error("Error removing member:",X),a({title:"Error",description:"Failed to remove member. Please try again.",variant:"destructive"})}finally{w(!1)}}},H=X=>X.user?X.user.name||X.user.email.split("@")[0]:"Unknown User",Z=X=>H(X).split(" ").map(q=>q[0]).join("").toUpperCase().slice(0,2),R=X=>{const F=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"],q=X.user_id?X.user_id.split("").reduce((oe,re)=>oe+re.charCodeAt(0),0)%F.length:0;return F[q]},U=X=>{switch(X){case"owner":return g.jsx(zx,{className:"h-4 w-4 text-yellow-500"});case"editor":return g.jsx(mo,{className:"h-4 w-4 text-green-500"});case"viewer":return g.jsx(Dl,{className:"h-4 w-4 text-blue-500"});default:return g.jsx(Uh,{className:"h-4 w-4"})}},k=X=>{switch(X){case"editor":return"Can view, edit, and share the project";case"viewer":return"Can view and comment on the project";default:return""}},W=X=>new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),B=()=>{_(!1),P(!1),e()};if(!t)return null;const I=t.role==="owner";return g.jsxs(g.Fragment,{children:[g.jsx(Zh,{open:r,onOpenChange:B,children:g.jsxs(Ru,{className:"max-w-md",children:[g.jsx(Ou,{children:g.jsxs(Mu,{className:"flex items-center space-x-2",children:[g.jsx(Uh,{className:"h-5 w-5"}),g.jsx("span",{children:"Manage Member"})]})}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs(It,{className:"p-4",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[g.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-lg font-medium",style:{backgroundColor:R(t)},children:(G=t.user)!=null&&G.avatar_url?g.jsx("img",{src:t.user.avatar_url,alt:"Avatar",className:"w-12 h-12 rounded-full"}):Z(t)}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"font-medium text-lg",children:H(t)}),((V=t.user)==null?void 0:V.email)&&g.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[g.jsx(Ux,{className:"h-3 w-3"}),g.jsx("span",{children:t.user.email})]})]})]}),g.jsxs("div",{className:"space-y-2 text-sm",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_P,{className:"h-4 w-4 text-gray-400"}),g.jsxs("span",{className:"text-gray-600",children:["Joined ",W(t.joined_at)]})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs(_o,{variant:"outline",className:"flex items-center space-x-1",children:[U(t.role),g.jsx("span",{className:"capitalize",children:t.role})]}),I&&g.jsxs(_o,{variant:"secondary",className:"text-xs",children:[g.jsx(KE,{className:"h-3 w-3 mr-1"}),"Protected"]})]})]})]}),!I&&C?g.jsxs("div",{className:"space-y-4",children:[g.jsx(m1,{}),g.jsxs("div",{children:[g.jsx(bs,{htmlFor:"role-select",className:"text-base font-medium",children:"Permission Level"}),g.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Choose what this member can do in the project"}),g.jsxs(Th,{value:u,onValueChange:z,children:[g.jsx(cu,{id:"role-select",children:g.jsx(Nh,{})}),g.jsxs(uu,{children:[g.jsx(vs,{value:"viewer",children:g.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[g.jsx(Dl,{className:"h-4 w-4 text-blue-500"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:"Viewer"}),g.jsx("div",{className:"text-xs text-gray-500",children:k("viewer")})]})]})}),g.jsx(vs,{value:"editor",children:g.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[g.jsx(mo,{className:"h-4 w-4 text-green-500"}),g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:"Editor"}),g.jsx("div",{className:"text-xs text-gray-500",children:k("editor")})]})]})})]})]})]})]}):I?g.jsx(It,{className:"p-4 bg-yellow-50 border-yellow-200",children:g.jsxs("div",{className:"flex items-start space-x-2",children:[g.jsx(zx,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-yellow-800",children:"Project Owner"}),g.jsx("p",{className:"text-sm text-yellow-700",children:"This member is the project owner and their permissions cannot be modified."})]})]})}):g.jsx(It,{className:"p-4 bg-gray-50 border-gray-200",children:g.jsxs("div",{className:"flex items-start space-x-2",children:[g.jsx(KE,{className:"h-5 w-5 text-gray-600 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Limited Access"}),g.jsx("p",{className:"text-sm text-gray-600",children:"You don't have permission to modify this member's role."})]})]})}),!I&&C&&g.jsxs("div",{className:"space-y-4",children:[g.jsx(m1,{}),g.jsxs(It,{className:"p-4 border-red-200 bg-red-50",children:[g.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[g.jsx(Tg,{className:"h-5 w-5 text-red-600 mt-0.5"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-medium text-red-800",children:"Remove Member"}),g.jsxs("p",{className:"text-sm text-red-700",children:["This will remove ",H(t)," from the project permanently. They will lose access to all project files and data."]})]})]}),g.jsxs(tt,{variant:"destructive",size:"sm",onClick:()=>_(!0),className:"w-full",children:[g.jsx(zh,{className:"h-4 w-4 mr-2"}),"Remove from Project"]})]})]})]}),g.jsxs(DO,{className:"gap-2",children:[g.jsxs(tt,{variant:"outline",onClick:B,children:[g.jsx(Qu,{className:"h-4 w-4 mr-2"}),"Cancel"]}),!I&&C&&T&&g.jsx(tt,{onClick:M,disabled:p,children:p?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):g.jsxs(g.Fragment,{children:[g.jsx(EP,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})}),g.jsx(Gee,{open:x,onOpenChange:_,children:g.jsxs(u5,{children:[g.jsxs(d5,{children:[g.jsxs(f5,{className:"flex items-center space-x-2",children:[g.jsx(Tg,{className:"h-5 w-5 text-red-600"}),g.jsx("span",{children:"Remove Member?"})]}),g.jsxs(p5,{children:["Are you sure you want to remove"," ",g.jsx("span",{className:"font-medium",children:H(t)})," from this project?",g.jsx("br",{}),g.jsx("br",{}),"This action cannot be undone. They will:",g.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[g.jsx("li",{children:"Lose access to all project files"}),g.jsx("li",{children:"Be removed from all project discussions"}),g.jsx("li",{children:"Need to be re-invited to regain access"})]})]})]}),g.jsxs(h5,{children:[g.jsx(g5,{disabled:v,children:"Cancel"}),g.jsx(m5,{onClick:D,disabled:v,className:"bg-red-600 hover:bg-red-700",children:v?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"h-4 w-4 mr-2 animate-spin"}),"Removing..."]}):g.jsxs(g.Fragment,{children:[g.jsx(zh,{className:"h-4 w-4 mr-2"}),"Remove Member"]})})]})]})})]})},ete={java:[{filename:"Main.java",content:`public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`}],python:[{filename:"main.py",content:`def main():
    print("Hello, World!")

if __name__ == "__main__":
    main()`}],javascript:[{filename:"index.js",content:`// Welcome to your new JavaScript project!
console.log('Hello, World!');

// Start coding here...`}],c:[{filename:"main.c",content:`#include <stdio.h>

int main() {
    printf("Hello, World!
");
    return 0;
}`}],"c++":[{filename:"main.cpp",content:`#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}`}],markdown:[{filename:"README.md",content:`# README

Add your documentation here.`}],txt:[{filename:"README.txt",content:"Add your documentation here."}]},tte={java:"java",py:"python",js:"javascript",c:"c",cpp:"c++",cs:"c#",txt:"txt",md:"markdown"},yx=r=>{if(!r)return[];const e=r.toLowerCase(),t=tte[e]||e;return ete[t]||[]};function rte(r){const e=new Map,t=[];return r.forEach(n=>{e.set(n.id,{...n,type:n.file_type==="directory"?"folder":"file",children:n.file_type==="directory"?[]:void 0})}),r.forEach(n=>{const s=e.get(n.id);if(n.parent_id){const i=e.get(n.parent_id);i&&i.children&&i.children.push(s)}else t.push(s)}),t}function lo(r){let e=[];for(const t of r)e.push(t),t.children&&(e=e.concat(lo(t.children)));return e}function kl(r,e){for(const t of r){if(t.id===e)return t;if(t.children){const n=kl(t.children,e);if(n)return n}}return null}function vx(r,e){return!r||r==="/"?`/${e}`:`${r.endsWith("/")?r.slice(0,-1):r}/${e}`}const _k={foldersFirst:!0,caseSensitive:!1,direction:"asc"};function nte(r,e=_k){return r.sort((t,n)=>{if(e.foldersFirst&&t.type!==n.type)return t.type==="folder"?-1:1;const s=e.caseSensitive?t.name:t.name.toLowerCase(),i=e.caseSensitive?n.name:n.name.toLowerCase(),o=s.localeCompare(i);return e.direction==="asc"?o:-o})}function w5(r,e=_k){return nte([...r],e).map(n=>({...n,children:n.children?w5(n.children,e):void 0}))}const ste=({currentFile:r,onFileSelect:e,onFileDeleted:t,onFileRenamed:n,projectId:s})=>{const{user:i,dbUser:o}=An(),a=(i==null?void 0:i.id)||(o==null?void 0:o.id),l=(te,Y)=>{U(te),W(Y)},d=()=>{U(null),W("")},u=async(te,Y)=>{const N=lo(T).filter(L=>L.path.startsWith(te.path+"/"));for(const L of N){const J=L.path.substring(te.path.length),ne=Y+J;try{const{error:Q}=await C.updateFile(L.id,{path:ne,updated_at:new Date().toISOString()});Q&&console.error(`Failed to update child path for ${L.name}:`,Q)}catch(Q){console.error(`Error updating child path for ${L.name}:`,Q)}}},f=async()=>{if(!R||!k.trim()){d();return}try{const te=kl(T,R);if(!te)throw new Error("File not found");const Y=k.trim();let N;if(te.parent_id){const Q=kl(T,te.parent_id);if(!Q)throw new Error("Parent folder not found");N=vx(Q.path,Y)}else N=`/${Y}`;if(lo(T).find(Q=>Q.path===N&&Q.id!==R)){A({title:"Error",description:`A file or folder with the name "${Y}" already exists in this location`,variant:"destructive"});return}const{error:J}=await C.updateFile(R,{name:Y,path:N,updated_at:new Date().toISOString()});if(J)throw J;te.file_type==="directory"&&await u(te,N);const ne=lo(T).map(Q=>{if(Q.id===R)return{...Q,name:Y,path:N};if(te.file_type==="directory"&&Q.path.startsWith(te.path+"/")){const ie=Q.path.substring(te.path.length);return{...Q,path:N+ie}}return Q});x(ne),A({title:"Success",description:`${te.file_type==="directory"?"Folder":"File"} renamed successfully`}),n==null||n(R,te.name,Y)}catch(te){console.error("Rename error:",te),A({title:"Error",description:`Failed to rename: ${te.message}`,variant:"destructive"})}finally{d()}},p=te=>{var L;const Y=(L=te.split(".").pop())==null?void 0:L.toLowerCase(),N=yx(Y||"").find(J=>J.filename.endsWith(`.${Y}`));if(N)return N.content;switch(Y){case"java":return`public class ${te.replace(".java","")} {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`;case"py":return`# ${te}
# Python file

print("Hello, World!")`;case"js":return`// ${te}
// JavaScript file

console.log("Hello, World!");`;case"c":return`#include <stdio.h>

int main() {
    printf("Hello, World!\\n");
    return 0;
}`;case"cpp":return`#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}`;case"cs":return`using System;

class Program {
    static void Main() {
        Console.WriteLine("Hello, World!");
    }
}`;case"md":return`# ${te.replace(".md","")}

Add your documentation here.`;case"txt":return`This is a text file.
Add your content here.`;default:return`// ${te}
// Add your code here`}},m=(te,Y,N)=>{const J=lo(T).filter(de=>de.parent_id===(N||null));let ne=te,Q="";if(Y){const de=te.lastIndexOf(".");de>0&&(ne=te.substring(0,de),Q=te.substring(de))}let ie=te,le=1;for(;J.some(de=>de.name===ie);)ie=Y?`${ne} (${le})${Q}`:`${ne} (${le})`,le++;return ie},v=async(te,Y,N,L)=>{if(!a){A({title:"Authentication Required",description:"You must be logged in to create files",variant:"destructive"});return}if(te==="template"&&!N){console.error("Template is required when type is template");return}D(!0);try{let J,ne;if(te==="template"&&N){const ot=L||N.filename;J=m(ot,!0,Y),ne=N.content}else J=m(te==="file"?"new-file.txt":"new-folder",te==="file",Y),ne=te==="file"?p(J):void 0;const Q=Y?kl(T,Y):null,ie=(Q==null?void 0:Q.path)||"/",le=vx(ie,J),de=new Date().toISOString(),{data:ke,error:Te}=await C.createFile({project_id:s,name:J,path:le,file_type:te==="folder"?"directory":"file",mime_type:te==="folder"?void 0:"text/plain",size_bytes:ne?new TextEncoder().encode(ne).length:0,parent_id:Y||null,content:ne,created_at:de,updated_at:de,created_by:a});if(Te)throw console.error("File creation error:",{error:{message:Te.message,details:Te.details,hint:Te.hint,code:Te.code},fileData:{name:J,content:defaultContent}}),Te;const De=[...lo(T),ke];x(De),Y&&Z(ot=>new Set([...ot,Y])),A({title:"Success",description:`Created ${te}: ${J}`})}catch(J){console.error(`Failed to create ${te}:`,J),A({title:"Error",description:`Failed to create ${te}: ${J.message}`,variant:"destructive"})}finally{D(!1)}},w=async te=>{try{const{error:Y}=await C.deleteFile(te);if(t(te),Y)throw Y;const N=lo(T).filter(L=>L.id!==te);x(N),A({title:"Success",description:"Item deleted successfully"})}catch(Y){console.error("Failed to delete item:",Y),A({title:"Error",description:"Failed to delete item",variant:"destructive"})}},x=te=>{const Y=rte(te),N=w5(Y,_k);P(N)},_=te=>{Z(Y=>{const N=new Set(Y);return N.has(te)?N.delete(te):N.add(te),N})},{projectFilesApi:C}=Vi(),{toast:A}=qn(),[T,P]=S.useState([]),[O,z]=S.useState(!0),[M,D]=S.useState(!1),[H,Z]=S.useState(new Set),[R,U]=S.useState(null),[k,W]=S.useState(""),[B,I]=S.useState(null),[G,V]=S.useState(new Set),[X,F]=S.useState(!1),[q,oe]=S.useState(!1),[re,ee]=S.useState(void 0),[ye,ve]=S.useState(""),[he,xe]=S.useState(null);S.useEffect(()=>{(async()=>{if(s){z(!0);try{const{data:Y,error:N}=await C.listProjectFiles(s,void 0,{page:1,per_page:1e3});if(N)throw N;x((Y==null?void 0:Y.items)||[])}catch(Y){console.error("Failed to load project files:",Y),A({title:"Error",description:"Failed to load files",variant:"destructive"})}finally{z(!1)}}})()},[s,C,A]);const Ce=(te,Y)=>{I(Y),te.dataTransfer.effectAllowed="move"},ue=te=>{te.preventDefault(),te.dataTransfer.dropEffect="move"},_e=async(te,Y)=>{if(te.preventDefault(),te.stopPropagation(),!(!B||B===Y))try{const N=kl(T,B),L=kl(T,Y);if(!N||!L||L.type!=="folder")return;const J=vx(L.path,N.name),{data:ne,error:Q}=await C.moveFile(N.id,L.id,J);if(Q)throw Q;const ie=lo(T).map(le=>le.id===N.id?{...le,parent_id:L.id,path:J}:le);x(ie),Z(le=>new Set([...le,Y])),A({title:"Success",description:"Item moved successfully"})}catch(N){console.error("Failed to move item:",N),A({title:"Error",description:"Failed to move item",variant:"destructive"})}finally{I(null)}},Ie=async te=>{if(te.preventDefault(),!!B)try{const Y=kl(T,B);if(!Y||!Y.parent_id)return;const N=`/${Y.name}`,{data:L,error:J}=await C.moveFile(Y.id,null,N);if(J)throw J;const ne=lo(T).map(Q=>Q.id===B?{...Q,parent_id:null,path:N}:Q);x(ne),A({title:"Success",description:"File moved to root"})}catch(Y){console.error("Failed to move to root:",Y),A({title:"Error",description:"Failed to move file to root",variant:"destructive"})}finally{I(null)}},$=te=>g.jsx(gs,{className:"h-4 w-4 text-blue-400"}),me=(te,Y=0)=>te.map(N=>{const L=H.has(N.id),J=R===N.id,ne=N.type==="file"&&r===N.name,Q=G.has(N.id),ie=B===N.id;return g.jsxs("div",{children:[g.jsxs("div",{className:`flex items-center space-x-2 px-2 py-1 hover:bg-gray-700 cursor-pointer group ${ne?"bg-gray-700 text-blue-400":"text-gray-300"} ${ie?"opacity-50":""} ${Q&&N.type==="folder"?"bg-blue-600/20 border-blue-400 border-dashed border-2":""}`,style:{paddingLeft:`${8+Y*16}px`},draggable:!J,onDragEnter:()=>{N.type==="folder"&&B!==N.id&&V(le=>new Set([...le,N.id]))},onDragLeave:()=>{V(le=>{const de=new Set(le);return de.delete(N.id),de})},onDragStart:le=>Ce(le,N.id),onDragOver:N.type==="folder"?ue:void 0,onDrop:N.type==="folder"?le=>_e(le,N.id):void 0,onDoubleClick:()=>N.type==="file"&&l(N.id,N.name),onClick:()=>{N.type==="folder"?_(N.id):J||e(N.name,N.id)},children:[N.type==="folder"?L?g.jsx(SP,{className:"h-4 w-4 text-yellow-400"}):g.jsx(Aw,{className:"h-4 w-4 text-yellow-400"}):$(N.name),J?g.jsx("input",{type:"text",value:k,onChange:le=>W(le.target.value),onBlur:f,onKeyDown:le=>{le.key==="Enter"&&f(),le.key==="Escape"&&d()},className:"bg-gray-600 text-white text-sm px-1 py-0 border-none outline-none flex-1",autoFocus:!0}):g.jsx("span",{className:"text-sm flex-1",children:N.name}),!J&&g.jsxs(hb,{children:[g.jsx(fb,{asChild:!0,children:g.jsx(tt,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-white",onClick:le=>le.stopPropagation(),children:g.jsx(EB,{className:"h-3 w-3"})})}),g.jsxs(zg,{className:"bg-gray-700 border-gray-600",children:[g.jsxs(aa,{onClick:()=>l(N.id,N.name),className:"text-gray-200 hover:bg-gray-600",children:[g.jsx(mo,{className:"h-3 w-3 mr-2"}),"Rename"]}),N.type==="folder"&&g.jsxs(g.Fragment,{children:[g.jsxs(aa,{onClick:()=>{ee(N.id),xe(null),ve(""),F(!0)},className:"text-gray-200 hover:bg-gray-600",children:[g.jsx(gs,{className:"h-3 w-3 mr-2"}),"New File"]}),g.jsxs(aa,{onClick:()=>v("folder",N.id),className:"text-gray-200 hover:bg-gray-600",children:[g.jsx(Aw,{className:"h-3 w-3 mr-2"}),"New Folder"]})]}),g.jsxs(aa,{onClick:()=>w(N.id),className:"text-red-400 hover:bg-gray-600",children:[g.jsx(AP,{className:"h-3 w-3 mr-2"}),"Delete"]})]})]})]}),N.type==="folder"&&L&&N.children&&g.jsx("div",{children:me(N.children,Y+1)})]},N.id)});return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsx("div",{className:"p-3 border-b border-gray-700",children:g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Explorer"}),g.jsxs(hb,{children:[g.jsx(fb,{asChild:!0,children:g.jsx(tt,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-gray-400 hover:text-white",disabled:M,children:M?g.jsx(Zt,{className:"h-4 w-4 animate-spin"}):g.jsx(CP,{className:"h-4 w-4"})})}),g.jsxs(zg,{className:"bg-gray-700 border-gray-600",children:[g.jsxs(aa,{onClick:()=>{ee(void 0),xe(null),ve(""),F(!0)},className:"text-gray-200 hover:bg-gray-600",disabled:M,children:[g.jsx(gs,{className:"h-3 w-3 mr-2"}),"New File"]}),g.jsxs(aa,{onClick:()=>v("folder"),className:"text-gray-200 hover:bg-gray-600",disabled:M,children:[g.jsx(Aw,{className:"h-3 w-3 mr-2"}),"New Folder"]})]})]})]})}),g.jsx("div",{className:`flex-1 overflow-y-auto py-2 ${G.has("root")?"bg-blue-600/10 border-blue-400 border-dashed border-2":""}`,onDragOver:ue,onDrop:Ie,onDragEnter:()=>V(te=>new Set([...te,"root"])),onDragLeave:()=>V(te=>{const Y=new Set(te);return Y.delete("root"),Y}),children:O?g.jsxs("div",{className:"flex items-center justify-center h-full",children:[g.jsx(Zt,{className:"animate-spin mr-2"}),"Loading files..."]}):me(T)}),g.jsx(Zh,{open:X,onOpenChange:F,children:g.jsxs(Ru,{className:"sm:max-w-[425px] bg-gray-800 border-gray-700",children:[g.jsxs(Ou,{children:[g.jsx("div",{className:"flex justify-between items-center",children:g.jsx(Mu,{className:"text-white",children:"Create New File"})}),g.jsx(Fg,{className:"text-gray-400",children:"Select a file type to create"})]}),g.jsx("div",{className:"grid gap-2 py-4",children:Object.entries({"Text File":{ext:"txt",icon:g.jsx(gs,{className:"h-4 w-4 mr-2"})},JavaScript:{ext:"js",icon:g.jsx(gs,{className:"h-4 w-4 mr-2 text-yellow-400"})},Python:{ext:"py",icon:g.jsx(gs,{className:"h-4 w-4 mr-2 text-blue-400"})},Java:{ext:"java",icon:g.jsx(gs,{className:"h-4 w-4 mr-2 text-red-400"})},C:{ext:"c",icon:g.jsx(gs,{className:"h-4 w-4 mr-2 text-blue-500"})},"C++":{ext:"cpp",icon:g.jsx(gs,{className:"h-4 w-4 mr-2 text-blue-600"})},Markdown:{ext:"md",icon:g.jsx(gs,{className:"h-4 w-4 mr-2 text-blue-300"})}}).map(([te,Y])=>{const{ext:N,icon:L}=Y;return g.jsxs(tt,{variant:"ghost",className:"w-full justify-start text-gray-200 hover:bg-gray-700",onClick:()=>{xe({name:te,ext:N,icon:L}),ve(`new-file.${N}`),F(!1),oe(!0)},disabled:M,children:[L,te," (.",N,")"]},N)})})]})}),g.jsx(Zh,{open:q,onOpenChange:oe,children:g.jsxs(Ru,{className:"sm:max-w-[425px] bg-gray-800 border-gray-700",children:[g.jsxs(Ou,{children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx(Mu,{className:"text-white",children:"Name Your File"}),g.jsx(tt,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400",onClick:()=>{oe(!1),xe(null)},children:g.jsx(Qu,{className:"h-4 w-4"})})]}),g.jsxs(Fg,{className:"text-gray-400",children:["Enter a name for your ",(he==null?void 0:he.name.toLowerCase())||"file"]})]}),g.jsxs("div",{className:"py-4",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[he==null?void 0:he.icon,g.jsxs("span",{className:"text-sm text-gray-300",children:[he==null?void 0:he.name," (.",he==null?void 0:he.ext,")"]})]}),g.jsx("input",{type:"text",value:ye,onChange:te=>ve(te.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Enter ${(he==null?void 0:he.name.toLowerCase())||"file"} name`,autoFocus:!0,onKeyDown:te=>{if(te.key==="Enter"){te.preventDefault();let Y=ye.trim();const N=(he==null?void 0:he.ext)||"";N&&!Y.endsWith(`.${N}`)&&(Y=`${Y}.${N}`);const L=N?yx(N).find(J=>J.filename.endsWith(`.${N}`)):null;L?v("template",re,{...L,filename:Y},Y):v("file",re,void 0,Y),oe(!1),xe(null),ve("")}else te.key==="Escape"&&(te.preventDefault(),oe(!1),xe(null),ve(""))}}),g.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"Press Enter to create, Esc to cancel"})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx(tt,{variant:"outline",onClick:()=>{oe(!1),xe(null),ve("")},className:"text-gray-200 border-gray-600 hover:bg-gray-700",children:"Cancel"}),g.jsx(tt,{onClick:async()=>{let te=ye.trim();const Y=(he==null?void 0:he.ext)||"";Y&&!te.endsWith(`.${Y}`)&&(te=`${te}.${Y}`);const N=Y?yx(Y).find(L=>L.filename.endsWith(`.${Y}`)):null;N?await v("template",re,{...N,filename:te},te):await v("file",re,void 0,te),oe(!1),xe(null),ve("")},disabled:!ye.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:M?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create File"})]})]})})]})},ite=({output:r,setOutput:e,isRunning:t,compileScript:n,setCompileScript:s,runScript:i,setRunScript:o})=>{const[a,l]=be.useState("output");return g.jsxs("div",{className:"h-full flex flex-col bg-gray-800 overflow-hidden",children:[g.jsx("div",{className:"px-4 py-2 border-b border-gray-700 flex-shrink-0",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex space-x-4 pl-2",children:[g.jsx("button",{className:`text-sm font-medium px-2 py-1 rounded transition-colors ${a==="output"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>l("output"),children:"Output"}),g.jsx("button",{className:`text-sm font-medium px-2 py-1 rounded transition-colors ${a==="config"?"bg-gray-700 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>l("config"),children:"Config"})]}),g.jsx("div",{className:"flex space-x-2",children:g.jsx(tt,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-gray-400 hover:text-white",onClick:()=>e(""),children:g.jsx(zh,{className:"h-3 w-3"})})})]})}),g.jsx("div",{className:"flex-1 min-h-0 flex flex-col overflow-hidden",children:a==="output"?g.jsx("div",{className:"flex-1 overflow-auto p-4",children:g.jsx(It,{className:"bg-gray-900 border-gray-600 min-h-full ml-4 mr-0 my-2",children:g.jsx("div",{className:"p-4 pl-6 pr-4",children:t?g.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[g.jsx("div",{className:"animate-spin",children:g.jsx(Vx,{className:"h-4 w-4"})}),g.jsx("span",{className:"text-sm",children:"Running code..."})]}):r?g.jsx("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap font-mono break-words pl-2",children:r}):g.jsxs("div",{className:"text-center text-gray-500 py-8 pl-2",children:[g.jsx(Vx,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),g.jsx("p",{className:"text-sm",children:'Click "Run Code" to see output here'})]})})})}):g.jsx("div",{className:"flex-1 overflow-auto p-4",children:g.jsx(It,{className:"bg-gray-900 border-gray-600 min-h-full ml-4 mr-0 my-2",children:g.jsxs("div",{className:"p-4 pl-6 pr-4 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"compile-sh",className:"block text-xs font-semibold text-gray-400 mb-1",children:"compile.sh (Optional)"}),g.jsx("textarea",{id:"compile-sh",className:"w-full min-h-[48px] p-2 text-sm font-mono bg-gray-800 text-gray-200 border border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",value:n,onChange:d=>s(d.target.value),spellCheck:!1,rows:4})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"run-sh",className:"block text-xs font-semibold text-gray-400 mb-1",children:"run.sh"}),g.jsx("textarea",{id:"run-sh",className:"w-full min-h-[48px] p-2 text-sm font-mono bg-gray-800 text-gray-200 border border-gray-700 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",value:i,onChange:d=>o(d.target.value),spellCheck:!1,rows:4})]})]})})})}),g.jsx("div",{className:"p-3 border-t border-gray-700"})]})},Bi=Object.create(null);Bi.open="0";Bi.close="1";Bi.ping="2";Bi.pong="3";Bi.message="4";Bi.upgrade="5";Bi.noop="6";const vg=Object.create(null);Object.keys(Bi).forEach(r=>{vg[Bi[r]]=r});const g1={type:"error",data:"parser error"},x5=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",b5=typeof ArrayBuffer=="function",_5=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,kk=({type:r,data:e},t,n)=>x5&&e instanceof Blob?t?n(e):HN(e,n):b5&&(e instanceof ArrayBuffer||_5(e))?t?n(e):HN(new Blob([e]),n):n(Bi[r]+(e||"")),HN=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)};function qN(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let wx;function ote(r,e){if(x5&&r.data instanceof Blob)return r.data.arrayBuffer().then(qN).then(e);if(b5&&(r.data instanceof ArrayBuffer||_5(r.data)))return e(qN(r.data));kk(r,!1,t=>{wx||(wx=new TextEncoder),e(wx.encode(t))})}const KN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<KN.length;r++)kh[KN.charCodeAt(r)]=r;const ate=r=>{let e=r.length*.75,t=r.length,n,s=0,i,o,a,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const d=new ArrayBuffer(e),u=new Uint8Array(d);for(n=0;n<t;n+=4)i=kh[r.charCodeAt(n)],o=kh[r.charCodeAt(n+1)],a=kh[r.charCodeAt(n+2)],l=kh[r.charCodeAt(n+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return d},lte=typeof ArrayBuffer=="function",Sk=(r,e)=>{if(typeof r!="string")return{type:"message",data:k5(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:cte(r.substring(1),e)}:vg[t]?r.length>1?{type:vg[t],data:r.substring(1)}:{type:vg[t]}:g1},cte=(r,e)=>{if(lte){const t=ate(r);return k5(t,e)}else return{base64:!0,data:r}},k5=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},S5="",ute=(r,e)=>{const t=r.length,n=new Array(t);let s=0;r.forEach((i,o)=>{kk(i,!1,a=>{n[o]=a,++s===t&&e(n.join(S5))})})},dte=(r,e)=>{const t=r.split(S5),n=[];for(let s=0;s<t.length;s++){const i=Sk(t[s],e);if(n.push(i),i.type==="error")break}return n};function hte(){return new TransformStream({transform(r,e){ote(r,t=>{const n=t.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let xx;function Jm(r){return r.reduce((e,t)=>e+t.length,0)}function Zm(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let n=0;for(let s=0;s<e;s++)t[s]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),t}function fte(r,e){xx||(xx=new TextDecoder);const t=[];let n=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(n===0){if(Jm(t)<1)break;const l=Zm(t,1);i=(l[0]&128)===128,s=l[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Jm(t)<2)break;const l=Zm(t,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Jm(t)<8)break;const l=Zm(t,8),d=new DataView(l.buffer,l.byteOffset,l.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(g1);break}s=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Jm(t)<s)break;const l=Zm(t,s);a.enqueue(Sk(i?l:xx.decode(l),e)),n=0}if(s===0||s>r){a.enqueue(g1);break}}}})}const C5=4;function jr(r){if(r)return pte(r)}function pte(r){for(var e in jr.prototype)r[e]=jr.prototype[e];return r}jr.prototype.on=jr.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};jr.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};jr.prototype.off=jr.prototype.removeListener=jr.prototype.removeAllListeners=jr.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===e||n.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+r],this};jr.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,e)}return this};jr.prototype.emitReserved=jr.prototype.emit;jr.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};jr.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Sy=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),_s=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),mte="arraybuffer";function E5(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const gte=_s.setTimeout,yte=_s.clearTimeout;function Cy(r,e){e.useNativeTimers?(r.setTimeoutFn=gte.bind(_s),r.clearTimeoutFn=yte.bind(_s)):(r.setTimeoutFn=_s.setTimeout.bind(_s),r.clearTimeoutFn=_s.clearTimeout.bind(_s))}const vte=1.33;function wte(r){return typeof r=="string"?xte(r):Math.ceil((r.byteLength||r.size)*vte)}function xte(r){let e=0,t=0;for(let n=0,s=r.length;n<s;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function A5(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function bte(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function _te(r){let e={},t=r.split("&");for(let n=0,s=t.length;n<s;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class kte extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Ck extends jr{constructor(e){super(),this.writable=!1,Cy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new kte(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Sk(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=bte(e);return t.length?"?"+t:""}}class Ste extends Ck{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};dte(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ute(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=A5()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let T5=!1;try{T5=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Cte=T5;function Ete(){}class Ate extends Ste{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class Ri extends jr{constructor(e,t,n){super(),this.createRequest=e,Cy(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=E5(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ri.requestsCount++,Ri.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ete,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ri.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ri.requestsCount=0;Ri.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",GN);else if(typeof addEventListener=="function"){const r="onpagehide"in _s?"pagehide":"unload";addEventListener(r,GN,!1)}}function GN(){for(let r in Ri.requests)Ri.requests.hasOwnProperty(r)&&Ri.requests[r].abort()}const Tte=function(){const r=N5({xdomain:!1});return r&&r.responseType!==null}();class Nte extends Ate{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Tte&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Ri(N5,this.uri(),e)}}function N5(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Cte))return new XMLHttpRequest}catch{}if(!e)try{return new _s[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const j5=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class jte extends Ck{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=j5?{}:E5(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;kk(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&Sy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=A5()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const bx=_s.WebSocket||_s.MozWebSocket;class Pte extends jte{createSocket(e,t,n){return j5?new bx(e,t,n):t?new bx(e,t):new bx(e)}doWrite(e,t){this.ws.send(t)}}class Rte extends Ck{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=fte(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=hte();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then(()=>{s&&Sy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ote={websocket:Pte,webtransport:Rte,polling:Nte},Mte=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Dte=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function y1(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let s=Mte.exec(r||""),i={},o=14;for(;o--;)i[Dte[o]]=s[o]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ite(i,i.path),i.queryKey=Lte(i,i.query),i}function Ite(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Lte(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(t[s]=i)}),t}const v1=typeof addEventListener=="function"&&typeof removeEventListener=="function",wg=[];v1&&addEventListener("offline",()=>{wg.forEach(r=>r())},!1);class Ea extends jr{constructor(e,t){if(super(),this.binaryType=mte,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=y1(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=y1(t.host).host);Cy(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=_te(this.opts.query)),v1&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wg.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=C5,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ea.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Ea.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=wte(s)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Sy(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Ea.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),v1&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=wg.indexOf(this._offlineEventListener);n!==-1&&wg.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ea.protocol=C5;class Fte extends Ea{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Ea.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ea.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=t.name,this.emitReserved("upgradeError",p)}}))};function i(){n||(n=!0,u(),t.close(),t=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=t.name,i(),this.emitReserved("upgradeError",p)};function a(){o("transport closed")}function l(){o("socket closed")}function d(f){t&&f.name!==t.name&&i()}const u=()=>{t.removeListener("open",s),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",d)};t.once("open",s),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let Bte=class extends Fte{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>Ote[s]).filter(s=>!!s)),super(e,n)}};function $te(r,e="",t){let n=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),n=y1(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const zte=typeof ArrayBuffer=="function",Ute=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,P5=Object.prototype.toString,Vte=typeof Blob=="function"||typeof Blob<"u"&&P5.call(Blob)==="[object BlobConstructor]",Wte=typeof File=="function"||typeof File<"u"&&P5.call(File)==="[object FileConstructor]";function Ek(r){return zte&&(r instanceof ArrayBuffer||Ute(r))||Vte&&r instanceof Blob||Wte&&r instanceof File}function xg(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(xg(r[t]))return!0;return!1}if(Ek(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return xg(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&xg(r[t]))return!0;return!1}function Hte(r){const e=[],t=r.data,n=r;return n.data=w1(t,e),n.attachments=e.length,{packet:n,buffers:e}}function w1(r,e){if(!r)return r;if(Ek(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=w1(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=w1(r[n],e));return t}return r}function qte(r,e){return r.data=x1(r.data,e),delete r.attachments,r}function x1(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=x1(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=x1(r[t],e));return r}const Kte=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Gte=5;var Ot;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Ot||(Ot={}));let Yte=class{constructor(e){this.replacer=e}encode(e){return(e.type===Ot.EVENT||e.type===Ot.ACK)&&xg(e)?this.encodeAsBinary({type:e.type===Ot.EVENT?Ot.BINARY_EVENT:Ot.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Ot.BINARY_EVENT||e.type===Ot.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Hte(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}};function YN(r){return Object.prototype.toString.call(r)==="[object Object]"}let Jte=class R5 extends jr{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ot.BINARY_EVENT;n||t.type===Ot.BINARY_ACK?(t.type=n?Ot.EVENT:Ot.ACK,this.reconstructor=new Zte(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Ek(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Ot[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ot.BINARY_EVENT||n.type===Ot.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(i,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const i=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(R5.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ot.CONNECT:return YN(t);case Ot.DISCONNECT:return t===void 0;case Ot.CONNECT_ERROR:return typeof t=="string"||YN(t);case Ot.EVENT:case Ot.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Kte.indexOf(t[0])===-1);case Ot.ACK:case Ot.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class Zte{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=qte(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Xte=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Jte,Encoder:Yte,get PacketType(){return Ot},protocol:Gte},Symbol.toStringTag,{value:"Module"}));function Ws(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const Qte=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class O5 extends jr{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ws(e,"open",this.onopen.bind(this)),Ws(e,"packet",this.onpacket.bind(this)),Ws(e,"error",this.onerror.bind(this)),Ws(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,i;if(Qte.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:Ot.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,f=t.pop();this._registerAckCallback(u,f),o.id=u}const a=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,s)=>{const i=(o,a)=>o?s(o):n(a);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ot.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ot.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ot.EVENT:case Ot.BINARY_EVENT:this.onevent(e);break;case Ot.ACK:case Ot.BINARY_ACK:this.onack(e);break;case Ot.DISCONNECT:this.ondisconnect();break;case Ot.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:Ot.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ot.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function dd(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}dd.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};dd.prototype.reset=function(){this.attempts=0};dd.prototype.setMin=function(r){this.ms=r};dd.prototype.setMax=function(r){this.max=r};dd.prototype.setJitter=function(r){this.jitter=r};class b1 extends jr{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Cy(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new dd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||Xte;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Bte(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Ws(t,"open",function(){n.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Ws(t,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ws(e,"ping",this.onping.bind(this)),Ws(e,"data",this.ondata.bind(this)),Ws(e,"error",this.onerror.bind(this)),Ws(e,"close",this.onclose.bind(this)),Ws(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Sy(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new O5(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const uh={};function bg(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=$te(r,e.path||"/socket.io"),n=t.source,s=t.id,i=t.path,o=uh[s]&&i in uh[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new b1(n,e):(uh[s]||(uh[s]=new b1(n,e)),l=uh[s]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(bg,{Manager:b1,Socket:O5,io:bg,connect:bg});class ere extends Ya{constructor(e){super(e,"chat_rooms")}async getRoomIdByNameAndProject(e,t){const{data:n,error:s}=await this.client.from("chat_rooms").select("id").eq("name",e).eq("project_id",t).single();return{data:(n==null?void 0:n.id)??null,error:s}}}class tre extends Ya{constructor(e){super(e,"chat_messages")}async listByRoom(e,t,n){let s=this.client.from("chat_messages").select("*, user:user_id(id, email, name, avatar_url, created_at, updated_at, last_active_at)").eq("room_id",e).eq("is_deleted",!1);if(n?s=s.order(n.field,{ascending:n.direction==="asc"}):s=s.order("created_at",{ascending:!1}),t!=null&&t.cursor&&(s=s.lt("created_at",t.cursor)),t!=null&&t.per_page&&(s=s.limit(t.per_page)),!(t!=null&&t.cursor)&&(t!=null&&t.page)&&(t!=null&&t.per_page)){const d=(t.page-1)*t.per_page,u=d+t.per_page-1;s=s.range(d,u)}const{data:i,error:o,count:a}=await s;let l;return i&&i.length>0&&(l=i[i.length-1].created_at),{data:{items:i||[],total:a??(i==null?void 0:i.length)??0,page:(t==null?void 0:t.page)??1,per_page:(t==null?void 0:t.per_page)??(i==null?void 0:i.length)??0,nextCursor:l},error:o}}async softDelete(e){return this.update(e,{is_deleted:!0,updated_at:new Date().toISOString()})}}const rre=({collaborators:r,projectMembers:e,currentUser:t,isLoadingMembers:n,memberOperationStatus:s,onInviteClick:i,onMemberClick:o,onMemberRoleChange:a,onRemoveMember:l,canManageMembers:d=!1,projectId:u,onlineUsersUpdateCallback:f})=>{const[p,m]=S.useState([]),[v,w]=S.useState(""),[x,_]=S.useState(!1),[C,A]=S.useState(null),[T,P]=S.useState(""),[O,z]=S.useState(null),[M,D]=S.useState("General Discussion"),[H,Z]=S.useState(new Set),[R,U]=S.useState(!1),[k,W]=S.useState([]),[B,I]=S.useState({sending:!1,messageIds:{}}),[G,V]=S.useState([]),X=S.useRef(null),F=S.useRef(null),[q,oe]=S.useState(!0),[re,ee]=S.useState(!1),[ye,ve]=S.useState(null),he=be.useMemo(()=>new tre({client:Nr}),[]),xe=be.useMemo(()=>new ere({client:Nr}),[]);S.useEffect(()=>{let L=!0;async function J(){var ne;ee(!0);try{const{data:Q}=await xe.getRoomIdByNameAndProject(M,u);if(!u||!e||e.length===0){ee(!1);return}const ie=await he.listByRoom(Q,{page:1,per_page:256},{field:"created_at",direction:"desc"});if(L&&((ne=ie==null?void 0:ie.data)!=null&&ne.items)){const le=ie.data.items.map(de=>({id:de.id,user:de.user.name,content:de.content,timestamp:de.created_at,color:N({user_id:de.user_id}),isOwn:de.user_id===(t==null?void 0:t.id),room:M})).reverse();m(le)}}catch(Q){console.error("Error fetching messages:",Q)}finally{ee(!1)}}return M&&J(),()=>{L=!1}},[M,he,xe,e,u,t==null?void 0:t.id]);const Ce=async L=>{if(L&&L.preventDefault(),!(!v.trim()||!t)){I(J=>({...J,sending:!0}));try{if(!u){console.error("No project ID available"),I(Q=>({...Q,sending:!1}));return}const{data:J}=await xe.getRoomIdByNameAndProject(M,u);if(!J){console.error("Could not resolve room ID"),I(Q=>({...Q,sending:!1}));return}const ne=await he.create({room_id:J,user_id:t.id,content:v,message_type:"text",metadata:null,reply_to_id:null,is_deleted:!1});if(ne!=null&&ne.data){const Q={id:ne.data.id,user:t.name,content:v,timestamp:new Date().toISOString(),isOwn:!0,color:N({user_id:t.id}),room:M};m(ie=>[...ie,Q]),O&&R&&O.emit("send_message",{id:ne.data.id,user_id:t.id,username:t.name,content:v,timestamp:new Date().toISOString(),room:M})}w("")}catch(J){console.error("Error sending message:",J)}finally{I(J=>({...J,sending:!1}))}}};S.useEffect(()=>{if(!F.current)return;let L=null;const J=()=>{L&&clearTimeout(L),L=setTimeout(()=>{!F.current||re||!q||F.current.scrollTop<100&&ue()},100)},ne=F.current;return ne.addEventListener("scroll",J),()=>{ne.removeEventListener("scroll",J),L&&clearTimeout(L)}},[F.current,re,q]);const ue=async()=>{var L;if(!(re||!q)){ee(!0),F.current&&(F.current.scrollHeight,F.current.scrollTop);try{if(!u){ee(!1);return}const{data:J}=await xe.getRoomIdByNameAndProject(M,u);if(!J){ee(!1);return}const ne=p[0],Q=ne?ne.timestamp:null,ie=await he.listByRoom(J,{per_page:50,cursor:Q},{field:"created_at",direction:"desc"}),le=((L=ie==null?void 0:ie.data)==null?void 0:L.items)||[];if(le.length===0){oe(!1),ee(!1);return}const de=le.map(ke=>({id:ke.id,user:ke.user.name,content:ke.content,timestamp:ke.created_at,color:N({user_id:ke.user_id}),isOwn:ke.user_id===(t==null?void 0:t.id),room:M})).reverse();m(ke=>{const Te=new Set(ke.map(ot=>ot.id));return[...de.filter(ot=>!Te.has(ot.id)),...ke]})}finally{ee(!1)}}},_e=async L=>{if(T.trim()){I(J=>({...J,messageIds:{...J.messageIds,[L]:{...J.messageIds[L],editing:!0}}}));try{const J=await he.update(L,{content:T});J!=null&&J.data&&m(p.map(ne=>ne.id===L?{...ne,content:T}:ne)),A(null),P("")}catch(J){console.error("Error updating message:",J)}finally{I(J=>({...J,messageIds:{...J.messageIds,[L]:{...J.messageIds[L],editing:!1}}}))}}},Ie=async L=>{I(J=>({...J,messageIds:{...J.messageIds,[L]:{...J.messageIds[L],deleting:!0}}}));try{await he.update(L,{is_deleted:!0}),m(p.filter(J=>J.id!==L))}catch(J){console.error("Error deleting message:",J)}finally{I(J=>({...J,messageIds:{...J.messageIds,[L]:{...J.messageIds[L],deleting:!1}}}))}},$=(L,J)=>{A(L),P(J)},me=()=>{A(null),P("")};S.useEffect(()=>{if(!t||!u)return;const L=bg("https://socketio.mocscode.com",{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,autoConnect:!0,forceNew:!0,rememberUpgrade:!0,upgrade:!0,query:{user:t.id,username:t.name||"Anonymous",clientType:"web",projectId:u}}),J=()=>{if(!t||!u)return;const Te={userId:t.id,userName:t.name||"Anonymous",projectId:u,room:M};L.emit("join_room",Te),V(De=>De.includes(M)?De:[...De,M])},ne=()=>{U(!0),J()},Q=Te=>{U(!1),(Te==="io server disconnect"||Te==="io client disconnect")&&L.connect()};L.connected&&J();const ie=Te=>{m(De=>{if(De.some(yt=>yt.id===Te.id))return De;const ot={id:Te.id,user:Te.username,content:Te.content,timestamp:Te.timestamp,color:N({user_id:Te.user_id}),isOwn:Te.user_id===(t==null?void 0:t.id),room:Te.room};return[...De,ot]})},le=Te=>{Z(De=>{if(Te.isTyping)return new Set([...De,Te.userId]);{const ot=new Set(De);return ot.delete(Te.userId),ot}})},de=Te=>{W(Te.users||[]),f&&f(Te)},ke=Te=>{};return L.on("connect",ne),L.on("disconnect",Q),L.on("room_update",de),L.on("new_message",ie),L.on("user_list",ke),L.on("user_typing",le),z(L),()=>{L.off("connect",ne),L.off("disconnect",Q),L.off("new_message",ie),L.off("user_typing",le),L.off("user_list",ke),L.off("room_update",de),L.connected&&L.disconnect()}},[t,u,M]),S.useEffect(()=>{s.type==="adding"&&s.memberId&&O&&(O.connected?O.emit("join_room",{userId:t==null?void 0:t.id,userName:(t==null?void 0:t.name)||"Anonymous",projectId:u,room:M}):O.connect())},[s,O,t,u,M]),S.useEffect(()=>{if(!O)return;const L=J=>{J!==((t==null?void 0:t.username)||(t==null?void 0:t.email))&&Z(ne=>{const Q=new Set(ne);return Q.add(J),setTimeout(()=>{Z(ie=>{const le=new Set(ie);return le.delete(J),le})},2e3),Q})};return O.on("activity",L),()=>{O.off("activity",L)}},[O,t]),S.useEffect(()=>{var L;(L=X.current)==null||L.scrollIntoView({behavior:"smooth"})},[p]);const te=L=>{w(L.target.value),O&&t&&R&&(x||(_(!0),O.emit("typing",t.username||t.email||"Anonymous"),setTimeout(()=>{_(!1)},1500)))},Y=L=>{var J;return((J=L.user)==null?void 0:J.name)||`User ${L.user_id.substring(0,6)}`},N=L=>{const J=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEEAD","#D4A5A5","#9B97B2","#E8F7EE","#B8F3FF","#D5A6BD"];if(!L)return J[0];const ne=L.user_id||L.id||"default";if(typeof ne!="string")return J[0];const Q=ne.split("").reduce((ie,le)=>ie+le.charCodeAt(0),0)%J.length;return J[Math.abs(Q)]};return e.length,e.filter(L=>L.role==="owner").length,e.filter(L=>L.role==="editor").length,e.filter(L=>L.role==="viewer").length,g.jsxs("div",{className:"flex flex-col h-full bg-gray-800 text-gray-200",children:[g.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[g.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[g.jsx(Vh,{className:"h-6 w-6 mr-3"}),"Chat Room"]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${R?"bg-green-500":"bg-red-500"}`}),g.jsx("span",{className:"text-xs text-gray-400",children:R?"Connected":"Disconnected"})]})]}),g.jsxs("div",{ref:F,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[re&&p.length===0&&g.jsxs("div",{className:"flex items-center justify-center py-8",children:[g.jsx(Zt,{className:"h-6 w-6 animate-spin text-gray-400"}),g.jsx("span",{className:"ml-2 text-gray-400",children:"Loading messages..."})]}),p.map(L=>{var J,ne,Q,ie,le,de,ke;return g.jsx("div",{className:`flex ${L.isOwn?"justify-end":"justify-start"}`,children:g.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${L.isOwn?"bg-blue-600":"bg-gray-700"}`,children:[!L.isOwn&&g.jsx("div",{className:"font-semibold text-sm",style:{color:L.color},children:(()=>{const Te=e.find(De=>De.user_id===L.user);return Te?Y(Te):L.user||"Unknown"})()}),g.jsx("div",{className:"text-sm",children:C===L.id?g.jsxs("div",{className:"flex flex-col space-y-2",children:[g.jsx(hf,{value:T,onChange:Te=>P(Te.target.value),className:"bg-gray-800 text-white border-gray-600",autoFocus:!0}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>_e(L.id),className:"px-3 py-1 text-sm rounded-md bg-blue-600 hover:bg-blue-700 text-white transition-colors",disabled:(J=B.messageIds[L.id])==null?void 0:J.editing,children:(ne=B.messageIds[L.id])!=null&&ne.editing?g.jsx(Zt,{className:"h-3 w-3 animate-spin"}):"Save"}),g.jsx("button",{onClick:me,className:"px-3 py-1 text-sm rounded-md border border-gray-600 hover:bg-gray-700 text-gray-200 transition-colors",children:"Cancel"})]})]}):g.jsxs("div",{children:[g.jsx("p",{children:L.content}),g.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex justify-between items-center",children:[g.jsx("span",{children:new Date(L.timestamp).toLocaleTimeString()}),L.isOwn&&g.jsxs("div",{className:"flex space-x-1",children:[g.jsx("button",{onClick:()=>$(L.id,L.content||""),className:"text-gray-300 hover:text-white p-1 rounded",disabled:((Q=B.messageIds[L.id])==null?void 0:Q.editing)||((ie=B.messageIds[L.id])==null?void 0:ie.deleting),children:g.jsx(mo,{className:"h-3 w-3"})}),g.jsx("button",{onClick:()=>Ie(L.id),className:"text-red-400 hover:bg-red-900/50 hover:text-red-300 h-6 w-6 p-1 flex items-center justify-center rounded",disabled:((le=B.messageIds[L.id])==null?void 0:le.editing)||((de=B.messageIds[L.id])==null?void 0:de.deleting),children:(ke=B.messageIds[L.id])!=null&&ke.deleting?g.jsx(Zt,{className:"h-3 w-3 animate-spin"}):g.jsx(AP,{className:"h-3 w-3"})})]})]})]})})]})},L.id)}),H.size>0&&g.jsxs("div",{className:"text-xs text-gray-400 italic",children:[Array.from(H).join(", ")," ",H.size===1?"is":"are"," typing..."]}),g.jsx("div",{ref:X})]}),g.jsx("div",{className:"p-4 border-t border-gray-700",children:g.jsxs("form",{onSubmit:Ce,className:"flex space-x-2",children:[g.jsx(hf,{value:v,onChange:te,placeholder:"Type a message...",className:"flex-1 bg-gray-700 border-gray-600 text-white placeholder-gray-400 resize-none",rows:1,onKeyDown:L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),Ce(L))},disabled:B.sending||!R}),g.jsx(tt,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:!v.trim()||B.sending||!R,children:B.sending?g.jsx(Zt,{className:"h-4 w-4 animate-spin"}):g.jsx(MB,{className:"h-4 w-4"})})]})})]})},El=class El{constructor(){Mr(this,"socket",null);Mr(this,"callbacks",new Set);Mr(this,"userId",null);Mr(this,"projectId",null);Mr(this,"isConnected",!1);Mr(this,"reconnectAttempts",0);Mr(this,"maxReconnectAttempts",5);Mr(this,"reconnectTimeout",null);Mr(this,"presenceMap",new Map);Mr(this,"lastHeartbeat",0);Mr(this,"heartbeatInterval",null);Mr(this,"HEARTBEAT_INTERVAL",3e4);Mr(this,"RECONNECT_DELAY",1e3)}static getInstance(){return El.instance||(El.instance=new El),El.instance}initialize(e,t){this.userId&&this.userId!==e&&this.cleanup(),this.userId=e,this.projectId=t,this.connect(),this.updatePresence(e,!0)}connect(){this.socket&&this.socket.close(),console.log(`[Presence] Connecting to presence service for project ${this.projectId}`),setTimeout(()=>{this.handleConnect()},300)}handleConnect(){this.isConnected=!0,this.reconnectAttempts=0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),console.log("[Presence] Connected to presence service"),this.startHeartbeat(),this.notifyPresence(!0)}startHeartbeat(){this.lastHeartbeat=Date.now(),this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=setInterval(()=>{this.isConnected&&this.notifyPresence(!0)},this.HEARTBEAT_INTERVAL)}notifyPresence(e){if(!this.userId||!this.projectId)return;const t={type:"presence",userId:this.userId,projectId:this.projectId,isOnline:e,timestamp:Date.now()};this.updatePresence(this.userId,e),console.log("[Presence] Sending presence:",t)}subscribe(e){return this.callbacks.add(e),()=>{this.callbacks.delete(e)}}updatePresence(e,t){this.presenceMap.set(e,t),this.callbacks.forEach(n=>{try{n(e,t)}catch(s){console.error("Error in presence callback:",s)}})}getOnlineUsers(){return Array.from(this.presenceMap.entries()).filter(([e,t])=>t).map(([e])=>e)}isUserOnline(e){return this.presenceMap.get(e)||!1}cleanup(){this.userId&&this.updatePresence(this.userId,!1),this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.socket&&(this.socket.close(),this.socket=null),this.isConnected=!1,this.userId&&this.presenceMap.delete(this.userId)}};Mr(El,"instance");let _1=El;const nre=_1.getInstance(),sre=({projectId:r,onMemberClick:e,onInviteClick:t,refreshTrigger:n,onlineUsers:s})=>{const{projectMembersApi:i}=Vi(),{user:o,dbUser:a}=An(),{toast:l}=qn(),[d,u]=be.useState([]),[f,p]=be.useState(!0),[m,v]=be.useState(null),[w,x]=be.useState(!1);be.useEffect(()=>{if(!(s!=null&&s.length))return;const k=new Set(s.map(W=>W.userId));u(W=>W.map(B=>({...B,isOnline:B.user_id?k.has(B.user_id):!1})))},[s]),S.useEffect(()=>((async()=>{!r||!o||(await _(),await C())})(),()=>{}),[r,o]),S.useEffect(()=>{n&&r&&o&&_()},[n,r,o]);const _=async()=>{if(!(!o||!r)){p(!0),v(null);try{const{data:k,error:W}=await i.listProjectMembers(r,{page:1,per_page:50},{field:"role",direction:"desc"});if(W){console.error("Error loading collaborators:",W),v("Failed to load collaborators"),l({title:"Error",description:"Failed to load project collaborators",variant:"destructive"});return}const I=((k==null?void 0:k.items)||[]).map(G=>{const V=nre.isUserOnline(G.user_id);return{...G,isOnline:V,cursor:null,isTyping:!1}});u(I)}catch(k){console.error("Unexpected error loading collaborators:",k),v("An unexpected error occurred"),l({title:"Error",description:"An unexpected error occurred while loading collaborators",variant:"destructive"})}finally{p(!1)}}},C=async()=>{if(!(!o||!r))try{const{data:k,error:W}=await i.canManageMembers(r,o.id);!W&&k&&x(k)}catch(k){console.error("Error checking management permissions:",k),x(!1)}},A=()=>d.find(k=>k.user_id===(o==null?void 0:o.id))||null,T=()=>d.filter(k=>k.user_id!==(o==null?void 0:o.id)),P=k=>k.user?k.user.name||k.user.email.split("@")[0]:"Unknown User",O=k=>P(k).split(" ").map(B=>B[0]).join("").toUpperCase().slice(0,2),z=k=>{const W=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"],B=k.user_id?k.user_id.split("").reduce((I,G)=>I+G.charCodeAt(0),0)%W.length:0;return W[B]},M=k=>{switch(k){case"owner":return g.jsx(zx,{className:"h-3 w-3 text-yellow-400"});case"editor":return g.jsx(mo,{className:"h-3 w-3"});case"viewer":return g.jsx(Dl,{className:"h-3 w-3"});default:return g.jsx(Uh,{className:"h-3 w-3"})}},D=k=>{switch(k){case"owner":return"Project Owner";case"editor":return"Edit Access";case"viewer":return"View Access";default:return"Unknown Role"}},H=k=>{switch(k){case"owner":return"bg-yellow-100 text-yellow-800";case"editor":return"bg-green-100 text-green-800";case"viewer":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},Z=k=>{w&&k.user_id!==(o==null?void 0:o.id)&&e&&e(k)},R=()=>{_()},U=be.useMemo(()=>{const k=A(),W=T();return k?[k,...W]:W},[d]);return g.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[g.jsx("div",{className:"p-3 border-b border-gray-700",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("h3",{className:"text-sm font-medium text-gray-300",children:"Collaborators"}),!f&&g.jsxs("div",{className:"flex items-center ml-2",title:`${s==null?void 0:s.length} online`,children:[g.jsx(FB,{className:"h-3 w-3 text-green-400 mr-1"}),g.jsx("span",{className:"text-xs text-green-400",children:s==null?void 0:s.length})]})]}),t&&w&&g.jsxs(tt,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-blue-400 hover:text-blue-300 hover:bg-gray-700",onClick:t,children:[g.jsx(LB,{className:"h-3 w-3 mr-1"}),"Invite"]}),f&&g.jsx(Zt,{className:"h-4 w-4 animate-spin text-gray-400 ml-2"})]})}),g.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 min-w-0",children:f?g.jsx(g.Fragment,{children:[...Array(3)].map((k,W)=>g.jsxs(It,{className:"p-3 bg-gray-700 border-gray-600 animate-pulse",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"h-4 bg-gray-600 rounded w-24 mb-1"}),g.jsx("div",{className:"h-3 bg-gray-600 rounded w-16"})]})]}),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsx("div",{className:"h-6 bg-gray-600 rounded w-20"}),g.jsx("div",{className:"h-6 bg-gray-600 rounded w-16"})]})]},W))}):m?g.jsxs(It,{className:"p-4 bg-red-900/20 border-red-700 text-center",children:[g.jsx(G1,{className:"h-8 w-8 text-red-400 mx-auto mb-2"}),g.jsx("p",{className:"text-sm text-red-400 mb-3",children:m}),g.jsx(tt,{size:"sm",variant:"outline",onClick:R,className:"border-red-700 text-red-400 hover:bg-red-900/30",children:"Try Again"})]}):U.map(k=>{var W,B;return g.jsxs(It,{className:`p-3 bg-gray-700 border-gray-600 transition-colors group ${w?"cursor-pointer hover:bg-gray-600":""}`,onClick:()=>Z(k),role:w?"button":void 0,tabIndex:w?0:void 0,onKeyDown:I=>{w&&(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),Z(k))},children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:z(k)},children:(W=k.user)!=null&&W.avatar_url?g.jsx(OD,{avatar_url:k.user.avatar_url,size:"sm"}):O(k)}),(s==null?void 0:s.some(I=>I.id===k.user_id))&&g.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-gray-800 rounded-full"})]}),g.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("span",{className:`text-sm font-medium ${k.user_id===(o==null?void 0:o.id)?"text-blue-400":"text-white"} truncate`,children:k.user_id===(o==null?void 0:o.id)?"You":P(k)}),k.isTyping&&g.jsx(_o,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:g.jsxs("div",{className:"flex space-x-1 items-center",children:[g.jsx("span",{children:"Typing"}),g.jsxs("div",{className:"flex space-x-1",children:[g.jsx("div",{className:"w-1 h-1 bg-green-600 rounded-full animate-pulse"}),g.jsx("div",{className:"w-1 h-1 bg-green-600 rounded-full animate-pulse delay-100"}),g.jsx("div",{className:"w-1 h-1 bg-green-600 rounded-full animate-pulse delay-200"})]})]})})]}),k.cursor&&g.jsxs("span",{className:"text-xs text-gray-400",children:["Line ",k.cursor.line,", Col ",k.cursor.column]}),((B=k.user)==null?void 0:B.email)&&g.jsx("div",{className:"text-xs text-gray-500 truncate w-full",children:k.user.email})]})]}),g.jsxs("div",{className:"flex items-center justify-between mt-2 overflow-hidden",children:[g.jsx("div",{className:"overflow-hidden",children:g.jsxs(_o,{variant:"outline",className:`text-xs border-gray-500 ${H(k.role)} max-w-full truncate`,children:[M(k.role),g.jsx("span",{className:"ml-1 truncate",children:D(k.role)})]})}),w&&k.role!=="owner"&&g.jsx(tt,{size:"sm",variant:"ghost",className:"h-6 text-xs text-gray-400 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:I=>{I.stopPropagation(),Z(k)},children:"Manage"})]})]},k.id)})})]})},Wn=()=>new Map,k1=r=>{const e=Wn();return r.forEach((t,n)=>{e.set(n,t)}),e},Hi=(r,e,t)=>{let n=r.get(e);return n===void 0&&r.set(e,n=t()),n},ire=(r,e)=>{const t=[];for(const[n,s]of r)t.push(e(s,n));return t},ore=(r,e)=>{for(const[t,n]of r)if(e(n,t))return!0;return!1},Ua=()=>new Set,_x=r=>r[r.length-1],are=(r,e)=>{for(let t=0;t<e.length;t++)r.push(e[t])},Eo=Array.from,lre=(r,e)=>{for(let t=0;t<r.length;t++)if(e(r[t],t,r))return!0;return!1},S1=Array.isArray;class Ak{constructor(){this._observers=Wn()}on(e,t){return Hi(this._observers,e,Ua).add(t),t}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return Eo((this._observers.get(e)||Wn()).values()).forEach(n=>n(...t))}destroy(){this._observers=Wn()}}class cre{constructor(){this._observers=Wn()}on(e,t){Hi(this._observers,e,Ua).add(t)}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return Eo((this._observers.get(e)||Wn()).values()).forEach(n=>n(...t))}destroy(){this._observers=Wn()}}const Ao=Math.floor,_g=Math.abs,Tk=(r,e)=>r<e?r:e,sc=(r,e)=>r>e?r:e,ure=Math.pow,M5=r=>r!==0?r<0:1/r<0,JN=1,ZN=2,kx=4,Sx=8,Af=32,vo=64,is=128,Ey=31,C1=63,Ll=127,dre=2147483647,D5=Number.MAX_SAFE_INTEGER,hre=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&Ao(r)===r),fre=String.fromCharCode,pre=r=>r.toLowerCase(),mre=/^\s*/g,gre=r=>r.replace(mre,""),yre=/([A-Z])/g,XN=(r,e)=>gre(r.replace(yre,t=>`${e}${pre(t)}`)),vre=r=>{const e=unescape(encodeURIComponent(r)),t=e.length,n=new Uint8Array(t);for(let s=0;s<t;s++)n[s]=e.codePointAt(s);return n},Tf=typeof TextEncoder<"u"?new TextEncoder:null,wre=r=>Tf.encode(r),xre=Tf?wre:vre;let Dh=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Dh&&Dh.decode(new Uint8Array).length===1&&(Dh=null);class ep{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const un=()=>new ep,Nk=r=>{let e=r.cpos;for(let t=0;t<r.bufs.length;t++)e+=r.bufs[t].length;return e},mr=r=>{const e=new Uint8Array(Nk(r));let t=0;for(let n=0;n<r.bufs.length;n++){const s=r.bufs[n];e.set(s,t),t+=s.length}return e.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),t),e},bre=(r,e)=>{const t=r.cbuf.length;t-r.cpos<e&&(r.bufs.push(new Uint8Array(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(sc(t,e)*2),r.cpos=0)},Hr=(r,e)=>{const t=r.cbuf.length;r.cpos===t&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(t*2),r.cpos=0),r.cbuf[r.cpos++]=e},E1=Hr,it=(r,e)=>{for(;e>Ll;)Hr(r,is|Ll&e),e=Ao(e/128);Hr(r,Ll&e)},jk=(r,e)=>{const t=M5(e);for(t&&(e=-e),Hr(r,(e>C1?is:0)|(t?vo:0)|C1&e),e=Ao(e/64);e>0;)Hr(r,(e>Ll?is:0)|Ll&e),e=Ao(e/128)},A1=new Uint8Array(3e4),_re=A1.length/3,kre=(r,e)=>{if(e.length<_re){const t=Tf.encodeInto(e,A1).written||0;it(r,t);for(let n=0;n<t;n++)Hr(r,A1[n])}else _r(r,xre(e))},Sre=(r,e)=>{const t=unescape(encodeURIComponent(e)),n=t.length;it(r,n);for(let s=0;s<n;s++)Hr(r,t.codePointAt(s))},Fl=Tf&&Tf.encodeInto?kre:Sre,Ay=(r,e)=>{const t=r.cbuf.length,n=r.cpos,s=Tk(t-n,e.length),i=e.length-s;r.cbuf.set(e.subarray(0,s),n),r.cpos+=s,i>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(sc(t*2,i)),r.cbuf.set(e.subarray(s)),r.cpos=i)},_r=(r,e)=>{it(r,e.byteLength),Ay(r,e)},Pk=(r,e)=>{bre(r,e);const t=new DataView(r.cbuf.buffer,r.cpos,e);return r.cpos+=e,t},Cre=(r,e)=>Pk(r,4).setFloat32(0,e,!1),Ere=(r,e)=>Pk(r,8).setFloat64(0,e,!1),Are=(r,e)=>Pk(r,8).setBigInt64(0,e,!1),QN=new DataView(new ArrayBuffer(4)),Tre=r=>(QN.setFloat32(0,r),QN.getFloat32(0)===r),Nf=(r,e)=>{switch(typeof e){case"string":Hr(r,119),Fl(r,e);break;case"number":hre(e)&&_g(e)<=dre?(Hr(r,125),jk(r,e)):Tre(e)?(Hr(r,124),Cre(r,e)):(Hr(r,123),Ere(r,e));break;case"bigint":Hr(r,122),Are(r,e);break;case"object":if(e===null)Hr(r,126);else if(S1(e)){Hr(r,117),it(r,e.length);for(let t=0;t<e.length;t++)Nf(r,e[t])}else if(e instanceof Uint8Array)Hr(r,116),_r(r,e);else{Hr(r,118);const t=Object.keys(e);it(r,t.length);for(let n=0;n<t.length;n++){const s=t[n];Fl(r,s),Nf(r,e[s])}}break;case"boolean":Hr(r,e?120:121);break;default:Hr(r,127)}};class ej extends ep{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&it(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const tj=r=>{r.count>0&&(jk(r.encoder,r.count===1?r.s:-r.s),r.count>1&&it(r.encoder,r.count-2))};class kg{constructor(){this.encoder=new ep,this.s=0,this.count=0}write(e){this.s===e?this.count++:(tj(this),this.count=1,this.s=e)}toUint8Array(){return tj(this),mr(this.encoder)}}const rj=r=>{if(r.count>0){const e=r.diff*2+(r.count===1?0:1);jk(r.encoder,e),r.count>1&&it(r.encoder,r.count-2)}};class Cx{constructor(){this.encoder=new ep,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(rj(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return rj(this),mr(this.encoder)}}class Nre{constructor(){this.sarr=[],this.s="",this.lensE=new kg}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new ep;return this.sarr.push(this.s),this.s="",Fl(e,this.sarr.join("")),Ay(e,this.lensE.toUint8Array()),mr(e)}}const Va=r=>new Error(r),Oi=()=>{throw Va("Method unimplemented")},ri=()=>{throw Va("Unexpected case")},I5=Va("Unexpected end of array"),L5=Va("Integer out of Range");class Ty{constructor(e){this.arr=e,this.pos=0}}const tl=r=>new Ty(r),jre=r=>r.pos!==r.arr.length,Pre=(r,e)=>{const t=new Uint8Array(r.arr.buffer,r.pos+r.arr.byteOffset,e);return r.pos+=e,t},cn=r=>Pre(r,vt(r)),Hu=r=>r.arr[r.pos++],vt=r=>{let e=0,t=1;const n=r.arr.length;for(;r.pos<n;){const s=r.arr[r.pos++];if(e=e+(s&Ll)*t,t*=128,s<is)return e;if(e>D5)throw L5}throw I5},Rk=r=>{let e=r.arr[r.pos++],t=e&C1,n=64;const s=(e&vo)>0?-1:1;if((e&is)===0)return s*t;const i=r.arr.length;for(;r.pos<i;){if(e=r.arr[r.pos++],t=t+(e&Ll)*n,n*=128,e<is)return s*t;if(t>D5)throw L5}throw I5},Rre=r=>{let e=vt(r);if(e===0)return"";{let t=String.fromCodePoint(Hu(r));if(--e<100)for(;e--;)t+=String.fromCodePoint(Hu(r));else for(;e>0;){const n=e<1e4?e:1e4,s=r.arr.subarray(r.pos,r.pos+n);r.pos+=n,t+=String.fromCodePoint.apply(null,s),e-=n}return decodeURIComponent(escape(t))}},Ore=r=>Dh.decode(cn(r)),Aa=Dh?Ore:Rre,Ok=(r,e)=>{const t=new DataView(r.arr.buffer,r.arr.byteOffset+r.pos,e);return r.pos+=e,t},Mre=r=>Ok(r,4).getFloat32(0,!1),Dre=r=>Ok(r,8).getFloat64(0,!1),Ire=r=>Ok(r,8).getBigInt64(0,!1),Lre=[r=>{},r=>null,Rk,Mre,Dre,Ire,r=>!1,r=>!0,Aa,r=>{const e=vt(r),t={};for(let n=0;n<e;n++){const s=Aa(r);t[s]=jf(r)}return t},r=>{const e=vt(r),t=[];for(let n=0;n<e;n++)t.push(jf(r));return t},cn],jf=r=>Lre[127-Hu(r)](r);class nj extends Ty{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),jre(this)?this.count=vt(this)+1:this.count=-1),this.count--,this.s}}class Sg extends Ty{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Rk(this);const e=M5(this.s);this.count=1,e&&(this.s=-this.s,this.count=vt(this)+2)}return this.count--,this.s}}class Ex extends Ty{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=Rk(this),t=e&1;this.diff=Ao(e/2),this.count=1,t&&(this.count=vt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Fre{constructor(e){this.decoder=new Sg(e),this.str=Aa(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const Bre=crypto.getRandomValues.bind(crypto),F5=()=>Bre(new Uint32Array(1))[0],$re="10000000-1000-4000-8000"+-1e11,zre=()=>$re.replace(/[018]/g,r=>(r^F5()&15>>r/4).toString(16)),Wa=Date.now,sj=r=>new Promise(r);Promise.all.bind(Promise);const ij=r=>r===void 0?null:r;class Ure{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let B5=new Ure,Mk=!0;try{typeof localStorage<"u"&&localStorage&&(B5=localStorage,Mk=!1)}catch{}const $5=B5,Vre=r=>Mk||addEventListener("storage",r),Wre=r=>Mk||removeEventListener("storage",r),Hre=Object.assign,z5=Object.keys,qre=(r,e)=>{for(const t in r)e(r[t],t)},Kre=(r,e)=>{const t=[];for(const n in r)t.push(e(r[n],n));return t},oj=r=>z5(r).length,aj=r=>z5(r).length,Gre=r=>{for(const e in r)return!1;return!0},Yre=(r,e)=>{for(const t in r)if(!e(r[t],t))return!1;return!0},U5=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),Jre=(r,e)=>r===e||aj(r)===aj(e)&&Yre(r,(t,n)=>(t!==void 0||U5(e,n))&&e[n]===t),Zre=Object.freeze,V5=r=>{for(const e in r){const t=r[e];(typeof t=="object"||typeof t=="function")&&V5(r[e])}return Zre(r)},lj=Symbol("Equality"),Dk=(r,e,t=0)=>{try{for(;t<r.length;t++)r[t](...e)}finally{t<r.length&&Dk(r,e,t+1)}},Xre=r=>r,Ih=(r,e)=>{if(r===e)return!0;if(r==null||e==null||r.constructor!==e.constructor)return!1;if(r[lj]!=null)return r[lj](e);switch(r.constructor){case ArrayBuffer:r=new Uint8Array(r),e=new Uint8Array(e);case Uint8Array:{if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;break}case Set:{if(r.size!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;break}case Map:{if(r.size!==e.size)return!1;for(const t of r.keys())if(!e.has(t)||!Ih(r.get(t),e.get(t)))return!1;break}case Object:if(oj(r)!==oj(e))return!1;for(const t in r)if(!U5(r,t)||!Ih(r[t],e[t]))return!1;break;case Array:if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Ih(r[t],e[t]))return!1;break;default:return!1}return!0},Qre=(r,e)=>e.includes(r);var W5={};const Ha=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",H5=typeof window<"u"&&typeof document<"u"&&!Ha;let gi;const ene=()=>{if(gi===void 0)if(Ha){gi=Wn();const r=process.argv;let e=null;for(let t=0;t<r.length;t++){const n=r[t];n[0]==="-"?(e!==null&&gi.set(e,""),e=n):e!==null&&(gi.set(e,n),e=null)}e!==null&&gi.set(e,"")}else typeof location=="object"?(gi=Wn(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[e,t]=r.split("=");gi.set(`--${XN(e,"-")}`,t),gi.set(`-${XN(e,"-")}`,t)}})):gi=Wn();return gi},T1=r=>ene().has(r),p0=r=>ij(Ha?W5[r.toUpperCase().replaceAll("-","_")]:$5.getItem(r)),q5=r=>T1("--"+r)||p0(r)!==null;q5("production");const tne=Ha&&Qre(W5.FORCE_COLOR,["true","1","2"]),rne=tne||!T1("--no-colors")&&!q5("no-color")&&(!Ha||process.stdout.isTTY)&&(!Ha||T1("--color")||p0("COLORTERM")!==null||(p0("TERM")||"").includes("color")),K5=r=>new Uint8Array(r),nne=(r,e,t)=>new Uint8Array(r,e,t),sne=r=>new Uint8Array(r),ine=r=>{let e="";for(let t=0;t<r.byteLength;t++)e+=fre(r[t]);return btoa(e)},one=r=>Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("base64"),ane=r=>{const e=atob(r),t=K5(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},lne=r=>{const e=Buffer.from(r,"base64");return nne(e.buffer,e.byteOffset,e.byteLength)},cne=H5?ine:one,une=H5?ane:lne,dne=r=>{const e=K5(r.byteLength);return e.set(r),e};class hne{constructor(e,t){this.left=e,this.right=t}}const so=(r,e)=>new hne(r,e),fne=(r,e)=>r.forEach(t=>e(t.left,t.right)),qi=typeof document<"u"?document:{},pne=r=>qi.createElement(r),mne=()=>qi.createDocumentFragment(),gne=r=>qi.createTextNode(r);typeof DOMParser<"u"&&new DOMParser;const yne=(r,e)=>(fne(e,(t,n)=>{n===!1?r.removeAttribute(t):n===!0?r.setAttribute(t,""):r.setAttribute(t,n)}),r),vne=r=>{const e=mne();for(let t=0;t<r.length;t++)G5(e,r[t]);return e},wne=(r,e)=>(G5(r,vne(e)),r),Nae=(r,e=[],t=[])=>wne(yne(pne(r),e),t),jae=gne,xne=r=>ire(r,(e,t)=>`${t}:${e};`).join(""),G5=(r,e)=>r.appendChild(e);qi.ELEMENT_NODE;qi.TEXT_NODE;qi.CDATA_SECTION_NODE;qi.COMMENT_NODE;qi.DOCUMENT_NODE;qi.DOCUMENT_TYPE_NODE;qi.DOCUMENT_FRAGMENT_NODE;const jo=Symbol,Y5=jo(),J5=jo(),bne=jo(),_ne=jo(),kne=jo(),Z5=jo(),Sne=jo(),Ik=jo(),Cne=jo(),Ene=r=>{var s;r.length===1&&((s=r[0])==null?void 0:s.constructor)===Function&&(r=r[0]());const e=[],t=[];let n=0;for(;n<r.length;n++){const i=r[n];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(n>0&&t.push(e.join(""));n<r.length;n++){const i=r[n];i instanceof Symbol||t.push(i)}return t},Ane={[Y5]:so("font-weight","bold"),[J5]:so("font-weight","normal"),[bne]:so("color","blue"),[kne]:so("color","green"),[_ne]:so("color","grey"),[Z5]:so("color","red"),[Sne]:so("color","purple"),[Ik]:so("color","orange"),[Cne]:so("color","black")},Tne=r=>{var o;r.length===1&&((o=r[0])==null?void 0:o.constructor)===Function&&(r=r[0]());const e=[],t=[],n=Wn();let s=[],i=0;for(;i<r.length;i++){const a=r[i],l=Ane[a];if(l!==void 0)n.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const d=xne(n);i>0||d.length>0?(e.push("%c"+a),t.push(d)):e.push(a)}else break}}for(i>0&&(s=t,s.unshift(e.join("")));i<r.length;i++){const a=r[i];a instanceof Symbol||s.push(a)}return s},X5=rne?Tne:Ene,Nne=(...r)=>{console.log(...X5(r)),eL.forEach(e=>e.print(r))},Q5=(...r)=>{console.warn(...X5(r)),r.unshift(Ik),eL.forEach(e=>e.print(r))},eL=Ua(),tL=r=>({[Symbol.iterator](){return this},next:r}),jne=(r,e)=>tL(()=>{let t;do t=r.next();while(!t.done&&!e(t.value));return t}),Ax=(r,e)=>tL(()=>{const{done:t,value:n}=r.next();return{done:t,value:t?void 0:e(n)}});class Lk{constructor(e,t){this.clock=e,this.len=t}}class hd{constructor(){this.clients=new Map}}const qu=(r,e,t)=>e.clients.forEach((n,s)=>{const i=r.doc.store.clients.get(s);if(i!=null){const o=i[i.length-1],a=o.id.clock+o.length;for(let l=0,d=n[l];l<n.length&&d.clock<a;d=n[++l])mL(r,i,d.clock,d.len,t)}}),Pne=(r,e)=>{let t=0,n=r.length-1;for(;t<=n;){const s=Ao((t+n)/2),i=r[s],o=i.clock;if(o<=e){if(e<o+i.len)return s;t=s+1}else n=s-1}return null},tp=(r,e)=>{const t=r.clients.get(e.client);return t!==void 0&&Pne(t,e.clock)!==null},Fk=r=>{r.clients.forEach(e=>{e.sort((s,i)=>s.clock-i.clock);let t,n;for(t=1,n=1;t<e.length;t++){const s=e[n-1],i=e[t];s.clock+s.len>=i.clock?s.len=sc(s.len,i.clock+i.len-s.clock):(n<t&&(e[n]=i),n++)}e.length=n})},N1=r=>{const e=new hd;for(let t=0;t<r.length;t++)r[t].clients.forEach((n,s)=>{if(!e.clients.has(s)){const i=n.slice();for(let o=t+1;o<r.length;o++)are(i,r[o].clients.get(s)||[]);e.clients.set(s,i)}});return Fk(e),e},Pf=(r,e,t,n)=>{Hi(r.clients,e,()=>[]).push(new Lk(t,n))},Rne=()=>new hd,One=r=>{const e=Rne();return r.clients.forEach((t,n)=>{const s=[];for(let i=0;i<t.length;i++){const o=t[i];if(o.deleted){const a=o.id.clock;let l=o.length;if(i+1<t.length)for(let d=t[i+1];i+1<t.length&&d.deleted;d=t[++i+1])l+=d.length;s.push(new Lk(a,l))}}s.length>0&&e.clients.set(n,s)}),e},fd=(r,e)=>{it(r.restEncoder,e.clients.size),Eo(e.clients.entries()).sort((t,n)=>n[0]-t[0]).forEach(([t,n])=>{r.resetDsCurVal(),it(r.restEncoder,t);const s=n.length;it(r.restEncoder,s);for(let i=0;i<s;i++){const o=n[i];r.writeDsClock(o.clock),r.writeDsLen(o.len)}})},Bk=r=>{const e=new hd,t=vt(r.restDecoder);for(let n=0;n<t;n++){r.resetDsCurVal();const s=vt(r.restDecoder),i=vt(r.restDecoder);if(i>0){const o=Hi(e.clients,s,()=>[]);for(let a=0;a<i;a++)o.push(new Lk(r.readDsClock(),r.readDsLen()))}}return e},cj=(r,e,t)=>{const n=new hd,s=vt(r.restDecoder);for(let i=0;i<s;i++){r.resetDsCurVal();const o=vt(r.restDecoder),a=vt(r.restDecoder),l=t.clients.get(o)||[],d=Sr(t,o);for(let u=0;u<a;u++){const f=r.readDsClock(),p=f+r.readDsLen();if(f<d){d<p&&Pf(n,o,d,p-d);let m=$i(l,f),v=l[m];for(!v.deleted&&v.id.clock<f&&(l.splice(m+1,0,_0(e,v,f-v.id.clock)),m++);m<l.length&&(v=l[m++],v.id.clock<p);)v.deleted||(p<v.id.clock+v.length&&l.splice(m,0,_0(e,v,p-v.id.clock)),v.delete(e))}else Pf(n,o,f,p-f)}}if(n.clients.size>0){const i=new Jl;return it(i.restEncoder,0),fd(i,n),i.toUint8Array()}return null},rL=F5;class ic extends Ak{constructor({guid:e=zre(),collectionid:t=null,gc:n=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=s,this.clientID=rL(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new fL,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=sj(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const l=()=>sj(d=>{const u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),d())};this.on("sync",u)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Jt(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Eo(this.subdocs).map(e=>e.guid))}transact(e,t=null){return Jt(this,e,t)}get(e,t=qr){const n=Hi(this.share,e,()=>{const i=new t;return i._integrate(this,null),i}),s=n.constructor;if(t!==qr&&s!==t)if(s===qr){const i=new t;i._map=n._map,n._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=n._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=n._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,vu)}getText(e=""){return this.get(e,Yu)}getMap(e=""){return this.get(e,Gu)}getXmlElement(e=""){return this.get(e,Ju)}getXmlFragment(e=""){return this.get(e,Zl)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,Eo(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new ic({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Jt(e.parent.doc,n=>{const s=t.doc;e.deleted||n.subdocsAdded.add(s),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class nL{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return vt(this.restDecoder)}readDsLen(){return vt(this.restDecoder)}}class sL extends nL{readLeftID(){return bt(vt(this.restDecoder),vt(this.restDecoder))}readRightID(){return bt(vt(this.restDecoder),vt(this.restDecoder))}readClient(){return vt(this.restDecoder)}readInfo(){return Hu(this.restDecoder)}readString(){return Aa(this.restDecoder)}readParentInfo(){return vt(this.restDecoder)===1}readTypeRef(){return vt(this.restDecoder)}readLen(){return vt(this.restDecoder)}readAny(){return jf(this.restDecoder)}readBuf(){return dne(cn(this.restDecoder))}readJSON(){return JSON.parse(Aa(this.restDecoder))}readKey(){return Aa(this.restDecoder)}}class Mne{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=vt(this.restDecoder),this.dsCurrVal}readDsLen(){const e=vt(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Ku extends Mne{constructor(e){super(e),this.keys=[],vt(e),this.keyClockDecoder=new Ex(cn(e)),this.clientDecoder=new Sg(cn(e)),this.leftClockDecoder=new Ex(cn(e)),this.rightClockDecoder=new Ex(cn(e)),this.infoDecoder=new nj(cn(e),Hu),this.stringDecoder=new Fre(cn(e)),this.parentInfoDecoder=new nj(cn(e),Hu),this.typeRefDecoder=new Sg(cn(e)),this.lenDecoder=new Sg(cn(e))}readLeftID(){return new gu(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new gu(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return jf(this.restDecoder)}readBuf(){return cn(this.restDecoder)}readJSON(){return jf(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class iL{constructor(){this.restEncoder=un()}toUint8Array(){return mr(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){it(this.restEncoder,e)}writeDsLen(e){it(this.restEncoder,e)}}class rp extends iL{writeLeftID(e){it(this.restEncoder,e.client),it(this.restEncoder,e.clock)}writeRightID(e){it(this.restEncoder,e.client),it(this.restEncoder,e.clock)}writeClient(e){it(this.restEncoder,e)}writeInfo(e){E1(this.restEncoder,e)}writeString(e){Fl(this.restEncoder,e)}writeParentInfo(e){it(this.restEncoder,e?1:0)}writeTypeRef(e){it(this.restEncoder,e)}writeLen(e){it(this.restEncoder,e)}writeAny(e){Nf(this.restEncoder,e)}writeBuf(e){_r(this.restEncoder,e)}writeJSON(e){Fl(this.restEncoder,JSON.stringify(e))}writeKey(e){Fl(this.restEncoder,e)}}class oL{constructor(){this.restEncoder=un(),this.dsCurrVal=0}toUint8Array(){return mr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,it(this.restEncoder,t)}writeDsLen(e){e===0&&ri(),it(this.restEncoder,e-1),this.dsCurrVal+=e}}class Jl extends oL{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Cx,this.clientEncoder=new kg,this.leftClockEncoder=new Cx,this.rightClockEncoder=new Cx,this.infoEncoder=new ej(E1),this.stringEncoder=new Nre,this.parentInfoEncoder=new ej(E1),this.typeRefEncoder=new kg,this.lenEncoder=new kg}toUint8Array(){const e=un();return it(e,0),_r(e,this.keyClockEncoder.toUint8Array()),_r(e,this.clientEncoder.toUint8Array()),_r(e,this.leftClockEncoder.toUint8Array()),_r(e,this.rightClockEncoder.toUint8Array()),_r(e,mr(this.infoEncoder)),_r(e,this.stringEncoder.toUint8Array()),_r(e,mr(this.parentInfoEncoder)),_r(e,this.typeRefEncoder.toUint8Array()),_r(e,this.lenEncoder.toUint8Array()),Ay(e,mr(this.restEncoder)),mr(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Nf(this.restEncoder,e)}writeBuf(e){_r(this.restEncoder,e)}writeJSON(e){Nf(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const Dne=(r,e,t,n)=>{n=sc(n,e[0].id.clock);const s=$i(e,n);it(r.restEncoder,e.length-s),r.writeClient(t),it(r.restEncoder,n);const i=e[s];i.write(r,n-i.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(r,0)},$k=(r,e,t)=>{const n=new Map;t.forEach((s,i)=>{Sr(e,i)>s&&n.set(i,s)}),Ny(e).forEach((s,i)=>{t.has(i)||n.set(i,0)}),it(r.restEncoder,n.size),Eo(n.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{Dne(r,e.clients.get(s),s,i)})},Ine=(r,e)=>{const t=Wn(),n=vt(r.restDecoder);for(let s=0;s<n;s++){const i=vt(r.restDecoder),o=new Array(i),a=r.readClient();let l=vt(r.restDecoder);t.set(a,{i:0,refs:o});for(let d=0;d<i;d++){const u=r.readInfo();switch(Ey&u){case 0:{const f=r.readLen();o[d]=new ks(bt(a,l),f),l+=f;break}case 10:{const f=vt(r.restDecoder);o[d]=new Ss(bt(a,l),f),l+=f;break}default:{const f=(u&(vo|is))===0,p=new er(bt(a,l),null,(u&is)===is?r.readLeftID():null,null,(u&vo)===vo?r.readRightID():null,f?r.readParentInfo()?e.get(r.readString()):r.readLeftID():null,f&&(u&Af)===Af?r.readString():null,DL(r,u));o[d]=p,l+=p.length}}}}return t},Lne=(r,e,t)=>{const n=[];let s=Eo(t.keys()).sort((m,v)=>m-v);if(s.length===0)return null;const i=()=>{if(s.length===0)return null;let m=t.get(s[s.length-1]);for(;m.refs.length===m.i;)if(s.pop(),s.length>0)m=t.get(s[s.length-1]);else return null;return m};let o=i();if(o===null)return null;const a=new fL,l=new Map,d=(m,v)=>{const w=l.get(m);(w==null||w>v)&&l.set(m,v)};let u=o.refs[o.i++];const f=new Map,p=()=>{for(const m of n){const v=m.id.client,w=t.get(v);w?(w.i--,a.clients.set(v,w.refs.slice(w.i)),t.delete(v),w.i=0,w.refs=[]):a.clients.set(v,[m]),s=s.filter(x=>x!==v)}n.length=0};for(;;){if(u.constructor!==Ss){const v=Hi(f,u.id.client,()=>Sr(e,u.id.client))-u.id.clock;if(v<0)n.push(u),d(u.id.client,u.id.clock-1),p();else{const w=u.getMissing(r,e);if(w!==null){n.push(u);const x=t.get(w)||{refs:[],i:0};if(x.refs.length===x.i)d(w,Sr(e,w)),p();else{u=x.refs[x.i++];continue}}else(v===0||v<u.length)&&(u.integrate(r,v),f.set(u.id.client,u.id.clock+u.length))}}if(n.length>0)u=n.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=i(),o===null)break;u=o.refs[o.i++]}}if(a.clients.size>0){const m=new Jl;return $k(m,a,new Map),it(m.restEncoder,0),{missing:l,update:m.toUint8Array()}}return null},Fne=(r,e)=>$k(r,e.doc.store,e.beforeState),Bne=(r,e,t,n=new Ku(r))=>Jt(e,s=>{s.local=!1;let i=!1;const o=s.doc,a=o.store,l=Ine(n,o),d=Lne(s,a,l),u=a.pendingStructs;if(u){for(const[p,m]of u.missing)if(m<Sr(a,p)){i=!0;break}if(d){for(const[p,m]of d.missing){const v=u.missing.get(p);(v==null||v>m)&&u.missing.set(p,m)}u.update=g0([u.update,d.update])}}else a.pendingStructs=d;const f=cj(n,s,a);if(a.pendingDs){const p=new Ku(tl(a.pendingDs));vt(p.restDecoder);const m=cj(p,s,a);f&&m?a.pendingDs=g0([f,m]):a.pendingDs=f||m}else a.pendingDs=f;if(i){const p=a.pendingStructs.update;a.pendingStructs=null,aL(s.doc,p)}},t,!1),aL=(r,e,t,n=Ku)=>{const s=tl(e);Bne(s,r,t,new n(s))},$ne=(r,e,t)=>aL(r,e,t,sL),zne=(r,e,t=new Map)=>{$k(r,e.store,t),fd(r,One(e.store))},Une=(r,e=new Uint8Array([0]),t=new Jl)=>{const n=lL(e);zne(t,r,n);const s=[t.toUint8Array()];if(r.store.pendingDs&&s.push(r.store.pendingDs),r.store.pendingStructs&&s.push(ase(r.store.pendingStructs.update,e)),s.length>1){if(t.constructor===rp)return ise(s.map((i,o)=>o===0?i:cse(i)));if(t.constructor===Jl)return g0(s)}return s[0]},Vne=(r,e)=>Une(r,e,new rp),Wne=r=>{const e=new Map,t=vt(r.restDecoder);for(let n=0;n<t;n++){const s=vt(r.restDecoder),i=vt(r.restDecoder);e.set(s,i)}return e},lL=r=>Wne(new nL(tl(r))),cL=(r,e)=>(it(r.restEncoder,e.size),Eo(e.entries()).sort((t,n)=>n[0]-t[0]).forEach(([t,n])=>{it(r.restEncoder,t),it(r.restEncoder,n)}),r),Hne=(r,e)=>cL(r,Ny(e.store)),qne=(r,e=new oL)=>(r instanceof Map?cL(e,r):Hne(e,r),e.toUint8Array()),Kne=r=>qne(r,new iL);class Gne{constructor(){this.l=[]}}const uj=()=>new Gne,dj=(r,e)=>r.l.push(e),hj=(r,e)=>{const t=r.l,n=t.length;r.l=t.filter(s=>e!==s),n===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},uL=(r,e,t)=>Dk(r.l,[e,t]);class gu{constructor(e,t){this.client=e,this.clock=t}}const nu=(r,e)=>r===e||r!==null&&e!==null&&r.client===e.client&&r.clock===e.clock,bt=(r,e)=>new gu(r,e),dL=r=>{for(const[e,t]of r.doc.share.entries())if(t===r)return e;throw ri()},m0=(r,e)=>{for(;e!==null;){if(e.parent===r)return!0;e=e.parent._item}return!1};class hL{constructor(e,t,n,s=0){this.type=e,this.tname=t,this.item=n,this.assoc=s}}const Pae=r=>{const e={};return r.type&&(e.type=r.type),r.tname&&(e.tname=r.tname),r.item&&(e.item=r.item),r.assoc!=null&&(e.assoc=r.assoc),e},Rae=r=>new hL(r.type==null?null:bt(r.type.client,r.type.clock),r.tname??null,r.item==null?null:bt(r.item.client,r.item.clock),r.assoc==null?0:r.assoc);class Yne{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const Jne=(r,e,t=0)=>new Yne(r,e,t),Xm=(r,e,t)=>{let n=null,s=null;return r._item===null?s=dL(r):n=bt(r._item.id.client,r._item.id.clock),new hL(n,s,e,t)},Oae=(r,e,t=0)=>{let n=r._start;if(t<0){if(e===0)return Xm(r,null,t);e--}for(;n!==null;){if(!n.deleted&&n.countable){if(n.length>e)return Xm(r,bt(n.id.client,n.id.clock+e),t);e-=n.length}if(n.right===null&&t<0)return Xm(r,n.lastId,t);n=n.right}return Xm(r,null,t)},Zne=(r,e)=>{const t=yu(r,e),n=e.clock-t.id.clock;return{item:t,diff:n}},Mae=(r,e,t=!0)=>{const n=e.store,s=r.item,i=r.type,o=r.tname,a=r.assoc;let l=null,d=0;if(s!==null){if(Sr(n,s.client)<=s.clock)return null;const u=t?O1(n,s):Zne(n,s),f=u.item;if(!(f instanceof er))return null;if(l=f.parent,l._item===null||!l._item.deleted){d=f.deleted||!f.countable?0:u.diff+(a>=0?0:1);let p=f.left;for(;p!==null;)!p.deleted&&p.countable&&(d+=p.length),p=p.left}}else{if(o!==null)l=e.get(o);else if(i!==null){if(Sr(n,i.client)<=i.clock)return null;const{item:u}=t?O1(n,i):{item:yu(n,i)};if(u instanceof er&&u.content instanceof Ki)l=u.content.type;else return null}else throw ri();a>=0?d=l._length:d=0}return Jne(l,d,r.assoc)},Dae=(r,e)=>r===e||r!==null&&e!==null&&r.tname===e.tname&&nu(r.item,e.item)&&nu(r.type,e.type)&&r.assoc===e.assoc,Zc=(r,e)=>e===void 0?!r.deleted:e.sv.has(r.id.client)&&(e.sv.get(r.id.client)||0)>r.id.clock&&!tp(e.ds,r.id),j1=(r,e)=>{const t=Hi(r.meta,j1,Ua),n=r.doc.store;t.has(e)||(e.sv.forEach((s,i)=>{s<Sr(n,i)&&zn(r,bt(i,s))}),qu(r,e.ds,s=>{}),t.add(e))};class fL{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Ny=r=>{const e=new Map;return r.clients.forEach((t,n)=>{const s=t[t.length-1];e.set(n,s.id.clock+s.length)}),e},Sr=(r,e)=>{const t=r.clients.get(e);if(t===void 0)return 0;const n=t[t.length-1];return n.id.clock+n.length},pL=(r,e)=>{let t=r.clients.get(e.id.client);if(t===void 0)t=[],r.clients.set(e.id.client,t);else{const n=t[t.length-1];if(n.id.clock+n.length!==e.id.clock)throw ri()}t.push(e)},$i=(r,e)=>{let t=0,n=r.length-1,s=r[n],i=s.id.clock;if(i===e)return n;let o=Ao(e/(i+s.length-1)*n);for(;t<=n;){if(s=r[o],i=s.id.clock,i<=e){if(e<i+s.length)return o;t=o+1}else n=o-1;o=Ao((t+n)/2)}throw ri()},Xne=(r,e)=>{const t=r.clients.get(e.client);return t[$i(t,e.clock)]},yu=Xne,P1=(r,e,t)=>{const n=$i(e,t),s=e[n];return s.id.clock<t&&s instanceof er?(e.splice(n+1,0,_0(r,s,t-s.id.clock)),n+1):n},zn=(r,e)=>{const t=r.doc.store.clients.get(e.client);return t[P1(r,t,e.clock)]},fj=(r,e,t)=>{const n=e.clients.get(t.client),s=$i(n,t.clock),i=n[s];return t.clock!==i.id.clock+i.length-1&&i.constructor!==ks&&n.splice(s+1,0,_0(r,i,t.clock-i.id.clock+1)),i},Qne=(r,e,t)=>{const n=r.clients.get(e.id.client);n[$i(n,e.id.clock)]=t},mL=(r,e,t,n,s)=>{if(n===0)return;const i=t+n;let o=P1(r,e,t),a;do a=e[o++],i<a.id.clock+a.length&&P1(r,e,i),s(a);while(o<e.length&&e[o].id.clock<i)};class ese{constructor(e,t,n){this.doc=e,this.deleteSet=new hd,this.beforeState=Ny(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const pj=(r,e)=>e.deleteSet.clients.size===0&&!ore(e.afterState,(t,n)=>e.beforeState.get(n)!==t)?!1:(Fk(e.deleteSet),Fne(r,e),fd(r,e.deleteSet),!0),mj=(r,e,t)=>{const n=e._item;(n===null||n.id.clock<(r.beforeState.get(n.id.client)||0)&&!n.deleted)&&Hi(r.changed,e,Ua).add(t)},Cg=(r,e)=>{let t=r[e],n=r[e-1],s=e;for(;s>0;t=n,n=r[--s-1]){if(n.deleted===t.deleted&&n.constructor===t.constructor&&n.mergeWith(t)){t instanceof er&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,n);continue}break}const i=e-s;return i&&r.splice(e+1-i,i),i},tse=(r,e,t)=>{for(const[n,s]of r.clients.entries()){const i=e.clients.get(n);for(let o=s.length-1;o>=0;o--){const a=s[o],l=a.clock+a.len;for(let d=$i(i,a.clock),u=i[d];d<i.length&&u.id.clock<l;u=i[++d]){const f=i[d];if(a.clock+a.len<=f.id.clock)break;f instanceof er&&f.deleted&&!f.keep&&t(f)&&f.gc(e,!1)}}}},rse=(r,e)=>{r.clients.forEach((t,n)=>{const s=e.clients.get(n);for(let i=t.length-1;i>=0;i--){const o=t[i],a=Tk(s.length-1,1+$i(s,o.clock+o.len-1));for(let l=a,d=s[l];l>0&&d.id.clock>=o.clock;d=s[l])l-=1+Cg(s,l)}})},gL=(r,e)=>{if(e<r.length){const t=r[e],n=t.doc,s=n.store,i=t.deleteSet,o=t._mergeStructs;try{Fk(i),t.afterState=Ny(t.doc.store),n.emit("beforeObserverCalls",[t,n]);const a=[];t.changed.forEach((l,d)=>a.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=d,u._path=null}),l.sort((u,f)=>u.path.length-f.path.length),uL(d._dEH,l,t))})}),a.push(()=>n.emit("afterTransaction",[t,n])),Dk(a,[]),t._needFormattingCleanup&&kse(t)}finally{n.gc&&tse(i,s,n.gcFilter),rse(i,s),t.afterState.forEach((u,f)=>{const p=t.beforeState.get(f)||0;if(p!==u){const m=s.clients.get(f),v=sc($i(m,p),1);for(let w=m.length-1;w>=v;)w-=1+Cg(m,w)}});for(let u=o.length-1;u>=0;u--){const{client:f,clock:p}=o[u].id,m=s.clients.get(f),v=$i(m,p);v+1<m.length&&Cg(m,v+1)>1||v>0&&Cg(m,v)}if(!t.local&&t.afterState.get(n.clientID)!==t.beforeState.get(n.clientID)&&(Nne(Ik,Y5,"[yjs] ",J5,Z5,"Changed the client-id because another client seems to be using it."),n.clientID=rL()),n.emit("afterTransactionCleanup",[t,n]),n._observers.has("update")){const u=new rp;pj(u,t)&&n.emit("update",[u.toUint8Array(),t.origin,n,t])}if(n._observers.has("updateV2")){const u=new Jl;pj(u,t)&&n.emit("updateV2",[u.toUint8Array(),t.origin,n,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:d}=t;(a.size>0||d.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=n.clientID,u.collectionid==null&&(u.collectionid=n.collectionid),n.subdocs.add(u)}),d.forEach(u=>n.subdocs.delete(u)),n.emit("subdocs",[{loaded:l,added:a,removed:d},n,t]),d.forEach(u=>u.destroy())),r.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,r])):gL(r,e+1)}}},Jt=(r,e,t=null,n=!0)=>{const s=r._transactionCleanups;let i=!1,o=null;r._transaction===null&&(i=!0,r._transaction=new ese(r,t,n),s.push(r._transaction),s.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{o=e(r._transaction)}finally{if(i){const a=r._transaction===s[0];r._transaction=null,a&&gL(s,0)}}return o};class nse{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const gj=(r,e,t)=>{qu(r,t.deletions,n=>{n instanceof er&&e.scope.some(s=>s===r.doc||m0(s,n))&&Gk(n,!1)})},yj=(r,e,t)=>{let n=null;const s=r.doc,i=r.scope;Jt(s,a=>{for(;e.length>0&&r.currStackItem===null;){const l=s.store,d=e.pop(),u=new Set,f=[];let p=!1;qu(a,d.insertions,m=>{if(m instanceof er){if(m.redone!==null){let{item:v,diff:w}=O1(l,m.id);w>0&&(v=zn(a,bt(v.id.client,v.id.clock+w))),m=v}!m.deleted&&i.some(v=>v===a.doc||m0(v,m))&&f.push(m)}}),qu(a,d.deletions,m=>{m instanceof er&&i.some(v=>v===a.doc||m0(v,m))&&!tp(d.insertions,m.id)&&u.add(m)}),u.forEach(m=>{p=ML(a,m,u,d.insertions,r.ignoreRemoteMapChanges,r)!==null||p});for(let m=f.length-1;m>=0;m--){const v=f[m];r.deleteFilter(v)&&(v.delete(a),p=!0)}r.currStackItem=p?d:null}a.changed.forEach((l,d)=>{l.has(null)&&d._searchMarker&&(d._searchMarker.length=0)}),n=a},r);const o=r.currStackItem;if(o!=null){const a=n.changedParentTypes;r.emit("stack-item-popped",[{stackItem:o,type:t,changedParentTypes:a,origin:r},r]),r.currStackItem=null}return o};class Iae extends Ak{constructor(e,{captureTimeout:t=500,captureTransaction:n=l=>!0,deleteFilter:s=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:a=S1(e)?e[0].doc:e instanceof ic?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=s,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(x=>l.changedParentTypes.has(x)||x===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const d=this.undoing,u=this.redoing,f=d?this.redoStack:this.undoStack;d?this.stopCapturing():u||this.clear(!1,!0);const p=new hd;l.afterState.forEach((x,_)=>{const C=l.beforeState.get(_)||0,A=x-C;A>0&&Pf(p,_,C,A)});const m=Wa();let v=!1;if(this.lastChange>0&&m-this.lastChange<this.captureTimeout&&f.length>0&&!d&&!u){const x=f[f.length-1];x.deletions=N1([x.deletions,l.deleteSet]),x.insertions=N1([x.insertions,p])}else f.push(new nse(l.deleteSet,p)),v=!0;!d&&!u&&(this.lastChange=m),qu(l,l.deleteSet,x=>{x instanceof er&&this.scope.some(_=>_===l.doc||m0(_,x))&&Gk(x,!0)});const w=[{stackItem:f[f.length-1],origin:l.origin,type:d?"redo":"undo",changedParentTypes:l.changedParentTypes},this];v?this.emit("stack-item-added",w):this.emit("stack-item-updated",w)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const t=new Set(this.scope);e=S1(e)?e:[e],e.forEach(n=>{t.has(n)||(t.add(n),(n instanceof qr?n.doc!==this.doc:n!==this.doc)&&Q5("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(s=>gj(n,this,s)),this.undoStack=[]),t&&(this.redoStack.forEach(s=>gj(n,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=yj(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=yj(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*sse(r){const e=vt(r.restDecoder);for(let t=0;t<e;t++){const n=vt(r.restDecoder),s=r.readClient();let i=vt(r.restDecoder);for(let o=0;o<n;o++){const a=r.readInfo();if(a===10){const l=vt(r.restDecoder);yield new Ss(bt(s,i),l),i+=l}else if((Ey&a)!==0){const l=(a&(vo|is))===0,d=new er(bt(s,i),null,(a&is)===is?r.readLeftID():null,null,(a&vo)===vo?r.readRightID():null,l?r.readParentInfo()?r.readString():r.readLeftID():null,l&&(a&Af)===Af?r.readString():null,DL(r,a));yield d,i+=d.length}else{const l=r.readLen();yield new ks(bt(s,i),l),i+=l}}}}class zk{constructor(e,t){this.gen=sse(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ss);return this.curr}}class Uk{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const ise=r=>g0(r,sL,rp),ose=(r,e)=>{if(r.constructor===ks){const{client:t,clock:n}=r.id;return new ks(bt(t,n+e),r.length-e)}else if(r.constructor===Ss){const{client:t,clock:n}=r.id;return new Ss(bt(t,n+e),r.length-e)}else{const t=r,{client:n,clock:s}=t.id;return new er(bt(n,s+e),null,bt(n,s+e-1),null,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e))}},g0=(r,e=Ku,t=Jl)=>{if(r.length===1)return r[0];const n=r.map(u=>new e(tl(u)));let s=n.map(u=>new zk(u,!0)),i=null;const o=new t,a=new Uk(o);for(;s=s.filter(p=>p.curr!==null),s.sort((p,m)=>{if(p.curr.id.client===m.curr.id.client){const v=p.curr.id.clock-m.curr.id.clock;return v===0?p.curr.constructor===m.curr.constructor?0:p.curr.constructor===Ss?1:-1:v}else return m.curr.id.client-p.curr.id.client}),s.length!==0;){const u=s[0],f=u.curr.id.client;if(i!==null){let p=u.curr,m=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=u.next(),m=!0;if(p===null||p.id.client!==f||m&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)fa(a,i.struct,i.offset),i={struct:p,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===Ss)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{fa(a,i.struct,i.offset);const v=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Ss(bt(f,i.struct.id.clock+i.struct.length),v),offset:0}}else{const v=i.struct.id.clock+i.struct.length-p.id.clock;v>0&&(i.struct.constructor===Ss?i.struct.length-=v:p=ose(p,v)),i.struct.mergeWith(p)||(fa(a,i.struct,i.offset),i={struct:p,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let p=u.curr;p!==null&&p.id.client===f&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==Ss;p=u.next())fa(a,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(fa(a,i.struct,i.offset),i=null),Vk(a);const l=n.map(u=>Bk(u)),d=N1(l);return fd(o,d),o.toUint8Array()},ase=(r,e,t=Ku,n=Jl)=>{const s=lL(e),i=new n,o=new Uk(i),a=new t(tl(r)),l=new zk(a,!1);for(;l.curr;){const u=l.curr,f=u.id.client,p=s.get(f)||0;if(l.curr.constructor===Ss){l.next();continue}if(u.id.clock+u.length>p)for(fa(o,u,sc(p-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===f;)fa(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===f&&l.curr.id.clock+l.curr.length<=p;)l.next()}Vk(o);const d=Bk(a);return fd(i,d),i.toUint8Array()},yL=r=>{r.written>0&&(r.clientStructs.push({written:r.written,restEncoder:mr(r.encoder.restEncoder)}),r.encoder.restEncoder=un(),r.written=0)},fa=(r,e,t)=>{r.written>0&&r.currClient!==e.id.client&&yL(r),r.written===0&&(r.currClient=e.id.client,r.encoder.writeClient(e.id.client),it(r.encoder.restEncoder,e.id.clock+t)),e.write(r.encoder,t),r.written++},Vk=r=>{yL(r);const e=r.encoder.restEncoder;it(e,r.clientStructs.length);for(let t=0;t<r.clientStructs.length;t++){const n=r.clientStructs[t];it(e,n.written),Ay(e,n.restEncoder)}},lse=(r,e,t,n)=>{const s=new t(tl(r)),i=new zk(s,!1),o=new n,a=new Uk(o);for(let d=i.curr;d!==null;d=i.next())fa(a,e(d),0);Vk(a);const l=Bk(s);return fd(o,l),o.toUint8Array()},cse=r=>lse(r,Xre,Ku,rp),vj="You must not compute changes after the event-handler fired.";class jy{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=use(this.currentTarget,this.target))}deletes(e){return tp(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Va(vj);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(s=>{if(s!==null){const i=t._map.get(s);let o,a;if(this.adds(i)){let l=i.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(i))if(l!==null&&this.deletes(l))o="delete",a=_x(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=_x(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(i))o="delete",a=_x(i.content.getContent());else return;e.set(s,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Va(vj);const t=this.target,n=Ua(),s=Ua(),i=[];if(e={added:n,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&i.push(a)};for(let d=t._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=d.length,s.add(d)):this.adds(d)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(d.content.getContent()),n.add(d)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=d.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const use=(r,e)=>{const t=[];for(;e._item!==null&&e!==r;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let n=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(n+=s.length),s=s.right;t.unshift(n)}e=e._item.parent}return t},pn=()=>{Q5("Invalid access: Add Yjs type to a document before reading data.")},vL=80;let Wk=0;class dse{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=Wk++}}const hse=r=>{r.timestamp=Wk++},wL=(r,e,t)=>{r.p.marker=!1,r.p=e,e.marker=!0,r.index=t,r.timestamp=Wk++},fse=(r,e,t)=>{if(r.length>=vL){const n=r.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return wL(n,e,t),n}else{const n=new dse(e,t);return r.push(n),n}},Py=(r,e)=>{if(r._start===null||e===0||r._searchMarker===null)return null;const t=r._searchMarker.length===0?null:r._searchMarker.reduce((i,o)=>_g(e-i.index)<_g(e-o.index)?i:o);let n=r._start,s=0;for(t!==null&&(n=t.p,s=t.index,hse(t));n.right!==null&&s<e;){if(!n.deleted&&n.countable){if(e<s+n.length)break;s+=n.length}n=n.right}for(;n.left!==null&&s>e;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);return t!==null&&_g(t.index-s)<n.parent.length/vL?(wL(t,n,s),t):fse(r._searchMarker,n,s)},Rf=(r,e,t)=>{for(let n=r.length-1;n>=0;n--){const s=r[n];if(t>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){r.splice(n,1);continue}s.p=i,i.marker=!0}(e<s.index||t>0&&e===s.index)&&(s.index=sc(e,s.index+t))}},Ry=(r,e,t)=>{const n=r,s=e.changedParentTypes;for(;Hi(s,r,()=>[]).push(t),r._item!==null;)r=r._item.parent;uL(n._eH,t,e)};class qr{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=uj(),this._dEH=uj(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Oi()}clone(){throw Oi()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){dj(this._eH,e)}observeDeep(e){dj(this._dEH,e)}unobserve(e){hj(this._eH,e)}unobserveDeep(e){hj(this._dEH,e)}toJSON(){}}const xL=(r,e,t)=>{r.doc??pn(),e<0&&(e=r._length+e),t<0&&(t=r._length+t);let n=t-e;const s=[];let i=r._start;for(;i!==null&&n>0;){if(i.countable&&!i.deleted){const o=i.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&n>0;a++)s.push(o[a]),n--;e=0}}i=i.right}return s},bL=r=>{r.doc??pn();const e=[];let t=r._start;for(;t!==null;){if(t.countable&&!t.deleted){const n=t.content.getContent();for(let s=0;s<n.length;s++)e.push(n[s])}t=t.right}return e},Of=(r,e)=>{let t=0,n=r._start;for(r.doc??pn();n!==null;){if(n.countable&&!n.deleted){const s=n.content.getContent();for(let i=0;i<s.length;i++)e(s[i],t++,r)}n=n.right}},_L=(r,e)=>{const t=[];return Of(r,(n,s)=>{t.push(e(n,s,r))}),t},pse=r=>{let e=r._start,t=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),n=0,e=e.right}const s=t[n++];return t.length<=n&&(t=null),{done:!1,value:s}}}},kL=(r,e)=>{r.doc??pn();const t=Py(r,e);let n=r._start;for(t!==null&&(n=t.p,e-=t.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},y0=(r,e,t,n)=>{let s=t;const i=r.doc,o=i.clientID,a=i.store,l=t===null?e._start:t.right;let d=[];const u=()=>{d.length>0&&(s=new er(bt(o,Sr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Xl(d)),s.integrate(r,0),d=[])};n.forEach(f=>{if(f===null)d.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:s=new er(bt(o,Sr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new np(new Uint8Array(f))),s.integrate(r,0);break;case ic:s=new er(bt(o,Sr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new sp(f)),s.integrate(r,0);break;default:if(f instanceof qr)s=new er(bt(o,Sr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Ki(f)),s.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},SL=()=>Va("Length exceeded!"),CL=(r,e,t,n)=>{if(t>e._length)throw SL();if(t===0)return e._searchMarker&&Rf(e._searchMarker,t,n.length),y0(r,e,null,n);const s=t,i=Py(e,t);let o=e._start;for(i!==null&&(o=i.p,t-=i.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&zn(r,bt(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&Rf(e._searchMarker,s,n.length),y0(r,e,o,n)},mse=(r,e,t)=>{let s=(e._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return y0(r,e,s,t)},EL=(r,e,t,n)=>{if(n===0)return;const s=t,i=n,o=Py(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&zn(r,bt(a.id.client,a.id.clock+t)),t-=a.length);for(;n>0&&a!==null;)a.deleted||(n<a.length&&zn(r,bt(a.id.client,a.id.clock+n)),a.delete(r),n-=a.length),a=a.right;if(n>0)throw SL();e._searchMarker&&Rf(e._searchMarker,s,-i+n)},v0=(r,e,t)=>{const n=e._map.get(t);n!==void 0&&n.delete(r)},Hk=(r,e,t,n)=>{const s=e._map.get(t)||null,i=r.doc,o=i.clientID;let a;if(n==null)a=new Xl([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Xl([n]);break;case Uint8Array:a=new np(n);break;case ic:a=new sp(n);break;default:if(n instanceof qr)a=new Ki(n);else throw new Error("Unexpected content type")}new er(bt(o,Sr(i.store,o)),s,s&&s.lastId,null,null,e,t,a).integrate(r,0)},qk=(r,e)=>{r.doc??pn();const t=r._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},AL=r=>{const e={};return r.doc??pn(),r._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},TL=(r,e)=>{r.doc??pn();const t=r._map.get(e);return t!==void 0&&!t.deleted},gse=(r,e)=>{const t={};return r._map.forEach((n,s)=>{let i=n;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&Zc(i,e)&&(t[s]=i.content.getContent()[i.length-1])}),t},Qm=r=>(r.doc??pn(),jne(r._map.entries(),e=>!e[1].deleted));class yse extends jy{}class vu extends qr{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new vu;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new vu}clone(){const e=new vu;return e.insert(0,this.toArray().map(t=>t instanceof qr?t.clone():t)),e}get length(){return this.doc??pn(),this._length}_callObserver(e,t){super._callObserver(e,t),Ry(this,e,new yse(this,e))}insert(e,t){this.doc!==null?Jt(this.doc,n=>{CL(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?Jt(this.doc,t=>{mse(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?Jt(this.doc,n=>{EL(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return kL(this,e)}toArray(){return bL(this)}slice(e=0,t=this.length){return xL(this,e,t)}toJSON(){return this.map(e=>e instanceof qr?e.toJSON():e)}map(e){return _L(this,e)}forEach(e){Of(this,e)}[Symbol.iterator](){return pse(this)}_write(e){e.writeTypeRef(Use)}}const vse=r=>new vu;class wse extends jy{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Gu extends qr{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((n,s)=>{this.set(s,n)}),this._prelimContent=null}_copy(){return new Gu}clone(){const e=new Gu;return this.forEach((t,n)=>{e.set(n,t instanceof qr?t.clone():t)}),e}_callObserver(e,t){Ry(this,e,new wse(this,e,t))}toJSON(){this.doc??pn();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const s=t.content.getContent()[t.length-1];e[n]=s instanceof qr?s.toJSON():s}}),e}get size(){return[...Qm(this)].length}keys(){return Ax(Qm(this),e=>e[0])}values(){return Ax(Qm(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Ax(Qm(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??pn(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Jt(this.doc,t=>{v0(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?Jt(this.doc,n=>{Hk(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return qk(this,e)}has(e){return TL(this,e)}clear(){this.doc!==null?Jt(this.doc,e=>{this.forEach(function(t,n,s){v0(e,s,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Vse)}}const xse=r=>new Gu,Sa=(r,e)=>r===e||typeof r=="object"&&typeof e=="object"&&r&&e&&Jre(r,e);class R1{constructor(e,t,n,s){this.left=e,this.right=t,this.index=n,this.currentAttributes=s}forward(){switch(this.right===null&&ri(),this.right.content.constructor){case Fr:this.right.deleted||pd(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const wj=(r,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case Fr:e.right.deleted||pd(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&zn(r,bt(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},eg=(r,e,t,n)=>{const s=new Map,i=n?Py(e,t):null;if(i){const o=new R1(i.p.left,i.p,i.index,s);return wj(r,o,t-i.index)}else{const o=new R1(null,e._start,0,s);return wj(r,o,t)}},NL=(r,e,t,n)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===Fr&&Sa(n.get(t.right.content.key),t.right.content.value));)t.right.deleted||n.delete(t.right.content.key),t.forward();const s=r.doc,i=s.clientID;n.forEach((o,a)=>{const l=t.left,d=t.right,u=new er(bt(i,Sr(s.store,i)),l,l&&l.lastId,d,d&&d.id,e,null,new Fr(a,o));u.integrate(r,0),t.right=u,t.forward()})},pd=(r,e)=>{const{key:t,value:n}=e;n===null?r.delete(t):r.set(t,n)},jL=(r,e)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===Fr&&Sa(e[r.right.content.key]??null,r.right.content.value)))break;r.forward()}},PL=(r,e,t,n)=>{const s=r.doc,i=s.clientID,o=new Map;for(const a in n){const l=n[a],d=t.currentAttributes.get(a)??null;if(!Sa(d,l)){o.set(a,d);const{left:u,right:f}=t;t.right=new er(bt(i,Sr(s.store,i)),u,u&&u.lastId,f,f&&f.id,e,null,new Fr(a,l)),t.right.integrate(r,0),t.forward()}}return o},Tx=(r,e,t,n,s)=>{t.currentAttributes.forEach((p,m)=>{s[m]===void 0&&(s[m]=null)});const i=r.doc,o=i.clientID;jL(t,s);const a=PL(r,e,t,s),l=n.constructor===String?new zi(n):n instanceof qr?new Ki(n):new oc(n);let{left:d,right:u,index:f}=t;e._searchMarker&&Rf(e._searchMarker,t.index,l.getLength()),u=new er(bt(o,Sr(i.store,o)),d,d&&d.lastId,u,u&&u.id,e,null,l),u.integrate(r,0),t.right=u,t.index=f,t.forward(),NL(r,e,t,a)},xj=(r,e,t,n,s)=>{const i=r.doc,o=i.clientID;jL(t,s);const a=PL(r,e,t,s);e:for(;t.right!==null&&(n>0||a.size>0&&(t.right.deleted||t.right.content.constructor===Fr));){if(!t.right.deleted)switch(t.right.content.constructor){case Fr:{const{key:l,value:d}=t.right.content,u=s[l];if(u!==void 0){if(Sa(u,d))a.delete(l);else{if(n===0)break e;a.set(l,d)}t.right.delete(r)}else t.currentAttributes.set(l,d);break}default:n<t.right.length&&zn(r,bt(t.right.id.client,t.right.id.clock+n)),n-=t.right.length;break}t.forward()}if(n>0){let l="";for(;n>0;n--)l+=`
`;t.right=new er(bt(o,Sr(i.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new zi(l)),t.right.integrate(r,0),t.forward()}NL(r,e,t,a)},RL=(r,e,t,n,s)=>{let i=e;const o=Wn();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Fr){const d=i.content;o.set(d.key,d)}i=i.right}let a=0,l=!1;for(;e!==i;){if(t===e&&(l=!0),!e.deleted){const d=e.content;switch(d.constructor){case Fr:{const{key:u,value:f}=d,p=n.get(u)??null;(o.get(u)!==d||p===f)&&(e.delete(r),a++,!l&&(s.get(u)??null)===f&&p!==f&&(p===null?s.delete(u):s.set(u,p))),!l&&!e.deleted&&pd(s,d);break}}}e=e.right}return a},bse=(r,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Fr){const n=e.content.key;t.has(n)?e.delete(r):t.add(n)}e=e.left}},_se=r=>{let e=0;return Jt(r.doc,t=>{let n=r._start,s=r._start,i=Wn();const o=k1(i);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case Fr:pd(o,s.content);break;default:e+=RL(t,n,s,i,o),i=k1(o),n=s;break}s=s.right}}),e},kse=r=>{const e=new Set,t=r.doc;for(const[n,s]of r.afterState.entries()){const i=r.beforeState.get(n)||0;s!==i&&mL(r,t.store.clients.get(n),i,s,o=>{!o.deleted&&o.content.constructor===Fr&&o.constructor!==ks&&e.add(o.parent)})}Jt(t,n=>{qu(r,r.deleteSet,s=>{if(s instanceof ks||!s.parent._hasFormatting||e.has(s.parent))return;const i=s.parent;s.content.constructor===Fr?e.add(i):bse(n,s)});for(const s of e)_se(s)})},bj=(r,e,t)=>{const n=t,s=k1(e.currentAttributes),i=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Ki:case oc:case zi:t<e.right.length&&zn(r,bt(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(r);break}e.forward()}i&&RL(r,i,e.right,s,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Rf(o._searchMarker,e.index,-n+t),e};class Sse extends jy{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];Jt(e,n=>{const s=new Map,i=new Map;let o=this.target._start,a=null;const l={};let d="",u=0,f=0;const p=()=>{if(a!==null){let m=null;switch(a){case"delete":f>0&&(m={delete:f}),f=0;break;case"insert":(typeof d=="object"||d.length>0)&&(m={insert:d},s.size>0&&(m.attributes={},s.forEach((v,w)=>{v!==null&&(m.attributes[w]=v)}))),d="";break;case"retain":u>0&&(m={retain:u},Gre(l)||(m.attributes=Hre({},l))),u=0;break}m&&t.push(m),a=null}};for(;o!==null;){switch(o.content.constructor){case Ki:case oc:this.adds(o)?this.deletes(o)||(p(),a="insert",d=o.content.getContent()[0],p()):this.deletes(o)?(a!=="delete"&&(p(),a="delete"),f+=1):o.deleted||(a!=="retain"&&(p(),a="retain"),u+=1);break;case zi:this.adds(o)?this.deletes(o)||(a!=="insert"&&(p(),a="insert"),d+=o.content.str):this.deletes(o)?(a!=="delete"&&(p(),a="delete"),f+=o.length):o.deleted||(a!=="retain"&&(p(),a="retain"),u+=o.length);break;case Fr:{const{key:m,value:v}=o.content;if(this.adds(o)){if(!this.deletes(o)){const w=s.get(m)??null;Sa(w,v)?v!==null&&o.delete(n):(a==="retain"&&p(),Sa(v,i.get(m)??null)?delete l[m]:l[m]=v)}}else if(this.deletes(o)){i.set(m,v);const w=s.get(m)??null;Sa(w,v)||(a==="retain"&&p(),l[m]=w)}else if(!o.deleted){i.set(m,v);const w=l[m];w!==void 0&&(Sa(w,v)?w!==null&&o.delete(n):(a==="retain"&&p(),v===null?delete l[m]:l[m]=v))}o.deleted||(a==="insert"&&p(),pd(s,o.content));break}}o=o.right}for(p();t.length>0;){const m=t[t.length-1];if(m.retain!==void 0&&m.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class Yu extends qr{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??pn(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Yu}clone(){const e=new Yu;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Sse(this,e,t);Ry(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??pn();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===zi&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?Jt(this.doc,n=>{const s=new R1(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const o=e[i];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&i===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&Tx(n,this,s,a,o.attributes||{})}else o.retain!==void 0?xj(n,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&bj(n,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??pn();const s=[],i=new Map,o=this.doc;let a="",l=this._start;function d(){if(a.length>0){const f={};let p=!1;i.forEach((v,w)=>{p=!0,f[w]=v});const m={insert:a};p&&(m.attributes=f),s.push(m),a=""}}const u=()=>{for(;l!==null;){if(Zc(l,e)||t!==void 0&&Zc(l,t))switch(l.content.constructor){case zi:{const f=i.get("ychange");e!==void 0&&!Zc(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(d(),i.set("ychange",n?n("removed",l.id):{type:"removed"})):t!==void 0&&!Zc(l,t)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(d(),i.set("ychange",n?n("added",l.id):{type:"added"})):f!==void 0&&(d(),i.delete("ychange")),a+=l.content.str;break}case Ki:case oc:{d();const f={insert:l.content.getContent()[0]};if(i.size>0){const p={};f.attributes=p,i.forEach((m,v)=>{p[v]=m})}s.push(f);break}case Fr:Zc(l,e)&&(d(),pd(i,l.content));break}l=l.right}d()};return e||t?Jt(o,f=>{e&&j1(f,e),t&&j1(f,t),u()},"cleanup"):u(),s}insert(e,t,n){if(t.length<=0)return;const s=this.doc;s!==null?Jt(s,i=>{const o=eg(i,this,e,!n);n||(n={},o.currentAttributes.forEach((a,l)=>{n[l]=a})),Tx(i,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const s=this.doc;s!==null?Jt(s,i=>{const o=eg(i,this,e,!n);Tx(i,this,o,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(t===0)return;const n=this.doc;n!==null?Jt(n,s=>{bj(s,eg(s,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(t===0)return;const s=this.doc;s!==null?Jt(s,i=>{const o=eg(i,this,e,!1);o.right!==null&&xj(i,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){this.doc!==null?Jt(this.doc,t=>{v0(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?Jt(this.doc,n=>{Hk(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return qk(this,e)}getAttributes(){return AL(this)}_write(e){e.writeTypeRef(Wse)}}const Cse=r=>new Yu;class Nx{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??pn()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===Ju||t.constructor===Zl)&&t._start!==null)e=t._start;else for(;e!==null;){const n=e.next;if(n!==null){e=n;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Zl extends qr{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Zl}clone(){const e=new Zl;return e.insert(0,this.toArray().map(t=>t instanceof qr?t.clone():t)),e}get length(){return this.doc??pn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Nx(this,e)}querySelector(e){e=e.toUpperCase();const n=new Nx(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),Eo(new Nx(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){Ry(this,e,new Tse(this,t,e))}toString(){return _L(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const s=e.createDocumentFragment();return n!==void 0&&n._createAssociation(s,this),Of(this,i=>{s.insertBefore(i.toDOM(e,t,n),null)}),s}insert(e,t){this.doc!==null?Jt(this.doc,n=>{CL(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)Jt(this.doc,n=>{const s=e&&e instanceof qr?e._item:e;y0(n,this,s,t)});else{const n=this._prelimContent,s=e===null?0:n.findIndex(i=>i===e)+1;if(s===0&&e!==null)throw Va("Reference item not found");n.splice(s,0,...t)}}delete(e,t=1){this.doc!==null?Jt(this.doc,n=>{EL(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return bL(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return kL(this,e)}slice(e=0,t=this.length){return xL(this,e,t)}forEach(e){Of(this,e)}_write(e){e.writeTypeRef(qse)}}const Ese=r=>new Zl;class Ju extends Zl{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((n,s)=>{this.setAttribute(s,n)}),this._prelimAttrs=null}_copy(){return new Ju(this.nodeName)}clone(){const e=new Ju(this.nodeName),t=this.getAttributes();return qre(t,(n,s)=>{typeof n=="string"&&e.setAttribute(s,n)}),e.insert(0,this.toArray().map(n=>n instanceof qr?n.clone():n)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const a in e)n.push(a);n.sort();const s=n.length;for(let a=0;a<s;a++){const l=n[a];t.push(l+'="'+e[l]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?Jt(this.doc,t=>{v0(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?Jt(this.doc,n=>{Hk(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return qk(this,e)}hasAttribute(e){return TL(this,e)}getAttributes(e){return e?gse(this,e):AL(this)}toDOM(e=document,t={},n){const s=e.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const a=i[o];typeof a=="string"&&s.setAttribute(o,a)}return Of(this,o=>{s.appendChild(o.toDOM(e,t,n))}),n!==void 0&&n._createAssociation(s,this),s}_write(e){e.writeTypeRef(Hse),e.writeKey(this.nodeName)}}const Ase=r=>new Ju(r.readKey());class Tse extends jy{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class w0 extends Gu{constructor(e){super(),this.hookName=e}_copy(){return new w0(this.hookName)}clone(){const e=new w0(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(e=document,t={},n){const s=t[this.hookName];let i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(i,this),i}_write(e){e.writeTypeRef(Kse),e.writeKey(this.hookName)}}const Nse=r=>new w0(r.readKey());class x0 extends Yu{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new x0}clone(){const e=new x0;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const s=e.createTextNode(this.toString());return n!==void 0&&n._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const t=[];for(const s in e.attributes){const i=[];for(const o in e.attributes[s])i.push({key:o,value:e.attributes[s][o]});i.sort((o,a)=>o.key<a.key?-1:1),t.push({nodeName:s,attrs:i})}t.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let n="";for(let s=0;s<t.length;s++){const i=t[s];n+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){const a=i.attrs[o];n+=` ${a.key}="${a.value}"`}n+=">"}n+=e.insert;for(let s=t.length-1;s>=0;s--)n+=`</${t[s].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Gse)}}const jse=r=>new x0;class Kk{constructor(e,t){this.id=e,this.length=t}get deleted(){throw Oi()}mergeWith(e){return!1}write(e,t,n){throw Oi()}integrate(e,t){throw Oi()}}const Pse=0;class ks extends Kk{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),pL(e.doc.store,this)}write(e,t){e.writeInfo(Pse),e.writeLen(this.length-t)}getMissing(e,t){return null}}class np{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new np(this.content)}splice(e){throw Oi()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}const Rse=r=>new np(r.readBuf());class Mf{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Mf(this.len)}splice(e){const t=new Mf(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Pf(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const Ose=r=>new Mf(r.readLen()),OL=(r,e)=>new ic({guid:r,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class sp{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new sp(OL(this.doc.guid,this.opts))}splice(e){throw Oi()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Mse=r=>new sp(OL(r.readString(),r.readAny()));class oc{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new oc(this.embed)}splice(e){throw Oi()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}const Dse=r=>new oc(r.readJSON());class Fr{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Fr(this.key,this.value)}splice(e){throw Oi()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Ise=r=>new Fr(r.readKey(),r.readJSON());class b0{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new b0(this.arr)}splice(e){const t=new b0(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let s=t;s<n;s++){const i=this.arr[s];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const Lse=r=>{const e=r.readLen(),t=[];for(let n=0;n<e;n++){const s=r.readString();s==="undefined"?t.push(void 0):t.push(JSON.parse(s))}return new b0(t)},Fse=p0("node_env")==="development";class Xl{constructor(e){this.arr=e,Fse&&V5(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Xl(this.arr)}splice(e){const t=new Xl(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let s=t;s<n;s++){const i=this.arr[s];e.writeAny(i)}}getRef(){return 8}}const Bse=r=>{const e=r.readLen(),t=[];for(let n=0;n<e;n++)t.push(r.readAny());return new Xl(t)};class zi{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new zi(this.str)}splice(e){const t=new zi(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const $se=r=>new zi(r.readString()),zse=[vse,xse,Cse,Ase,Ese,Nse,jse],Use=0,Vse=1,Wse=2,Hse=3,qse=4,Kse=5,Gse=6;class Ki{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ki(this.type._copy())}splice(e){throw Oi()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Yse=r=>new Ki(zse[r.readTypeRef()](r)),O1=(r,e)=>{let t=e,n=0,s;do n>0&&(t=bt(t.client,t.clock+n)),s=yu(r,t),n=t.clock-s.id.clock,t=s.redone;while(t!==null&&s instanceof er);return{item:s,diff:n}},Gk=(r,e)=>{for(;r!==null&&r.keep!==e;)r.keep=e,r=r.parent._item},_0=(r,e,t)=>{const{client:n,clock:s}=e.id,i=new er(bt(n,s+t),e,bt(n,s+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=bt(e.redone.client,e.redone.clock+t)),e.right=i,i.right!==null&&(i.right.left=i),r._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=t,i},_j=(r,e)=>lre(r,t=>tp(t.deletions,e)),ML=(r,e,t,n,s,i)=>{const o=r.doc,a=o.store,l=o.clientID,d=e.redone;if(d!==null)return zn(r,d);let u=e.parent._item,f=null,p;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!t.has(u)||ML(r,u,t,n,s,i)===null))return null;for(;u.redone!==null;)u=zn(r,u.redone)}const m=u===null?e.parent:u.content.type;if(e.parentSub===null){for(f=e.left,p=e;f!==null;){let _=f;for(;_!==null&&_.parent._item!==u;)_=_.redone===null?null:zn(r,_.redone);if(_!==null&&_.parent._item===u){f=_;break}f=f.left}for(;p!==null;){let _=p;for(;_!==null&&_.parent._item!==u;)_=_.redone===null?null:zn(r,_.redone);if(_!==null&&_.parent._item===u){p=_;break}p=p.right}}else if(p=null,e.right&&!s){for(f=e;f!==null&&f.right!==null&&(f.right.redone||tp(n,f.right.id)||_j(i.undoStack,f.right.id)||_j(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=zn(r,f.redone);if(f&&f.right!==null)return null}else f=m._map.get(e.parentSub)||null;const v=Sr(a,l),w=bt(l,v),x=new er(w,f,f&&f.lastId,p,p&&p.id,m,e.parentSub,e.content.copy());return e.redone=w,Gk(x,!0),x.integrate(r,0),x};class er extends Kk{constructor(e,t,n,s,i,o,a,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?ZN:0}set marker(e){(this.info&Sx)>0!==e&&(this.info^=Sx)}get marker(){return(this.info&Sx)>0}get keep(){return(this.info&JN)>0}set keep(e){this.keep!==e&&(this.info^=JN)}get countable(){return(this.info&ZN)>0}get deleted(){return(this.info&kx)>0}set deleted(e){this.deleted!==e&&(this.info^=kx)}markDeleted(){this.info|=kx}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Sr(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Sr(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===gu&&this.id.client!==this.parent.client&&this.parent.clock>=Sr(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=fj(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=zn(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ks||this.right&&this.right.constructor===ks)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===er?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===er&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===gu){const n=yu(t,this.parent);n.constructor===ks?this.parent=null:this.parent=n.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=fj(e,e.doc.store,bt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,s;if(n!==null)s=n.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),nu(this.origin,s.origin)){if(s.id.client<this.id.client)n=s,i.clear();else if(nu(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(yu(e.doc.store,s.origin)))i.has(yu(e.doc.store,s.origin))||(n=s,i.clear());else break;s=s.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),pL(e.doc.store,this),this.content.integrate(e,this),mj(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new ks(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:bt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&nu(e.origin,this.lastId)&&this.right===e&&nu(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),Pf(e.deleteSet,this.id.client,this.id.clock,this.length),mj(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw ri();this.content.gc(e),t?Qne(e,this,new ks(this.id,this.length)):this.content=new Mf(this.length)}write(e,t){const n=t>0?bt(this.id.client,this.id.clock+t-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&Ey|(n===null?0:is)|(s===null?0:vo)|(i===null?0:Af);if(e.writeInfo(o),n!==null&&e.writeLeftID(n),s!==null&&e.writeRightID(s),n===null&&s===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const d=dL(a);e.writeParentInfo(!0),e.writeString(d)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===gu?(e.writeParentInfo(!1),e.writeLeftID(a)):ri();i!==null&&e.writeString(i)}this.content.write(e,t)}}const DL=(r,e)=>Jse[e&Ey](r),Jse=[()=>{ri()},Ose,Lse,Rse,$se,Dse,Ise,Yse,Bse,Mse,()=>{ri()}],Zse=10;class Ss extends Kk{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){ri()}write(e,t){e.writeInfo(Zse),it(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const IL=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:{},LL="__ $YJS$ __";IL[LL]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");IL[LL]=!0;const FL=new Map;class Xse{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&this.onmessage!==null&&this.onmessage({data:une(t.newValue||"")}),Vre(this._onChange)}postMessage(e){$5.setItem(this.room,cne(sne(e)))}close(){Wre(this._onChange)}}const Qse=typeof BroadcastChannel>"u"?Xse:BroadcastChannel,Yk=r=>Hi(FL,r,()=>{const e=Ua(),t=new Qse(r);return t.onmessage=n=>e.forEach(s=>s(n.data,"broadcastchannel")),{bc:t,subs:e}}),eie=(r,e)=>(Yk(r).subs.add(e),e),tie=(r,e)=>{const t=Yk(r),n=t.subs.delete(e);return n&&t.subs.size===0&&(t.bc.close(),FL.delete(r)),n},Xc=(r,e,t=null)=>{const n=Yk(r);n.bc.postMessage(e),n.subs.forEach(s=>s(e,t))},BL=0,Jk=1,$L=2,M1=(r,e)=>{it(r,BL);const t=Kne(e);_r(r,t)},zL=(r,e,t)=>{it(r,Jk),_r(r,Vne(e,t))},rie=(r,e,t)=>zL(e,t,cn(r)),UL=(r,e,t)=>{try{$ne(e,cn(r),t)}catch(n){console.error("Caught error while handling a Yjs update",n)}},nie=(r,e)=>{it(r,$L),_r(r,e)},sie=UL,iie=(r,e,t,n)=>{const s=vt(r);switch(s){case BL:rie(r,e,t);break;case Jk:UL(r,t,n);break;case $L:sie(r,t,n);break;default:throw new Error("Unknown message type")}return s},oie=0,aie=(r,e,t)=>{switch(vt(r)){case oie:t(e,Aa(r))}},jx=3e4;class lie extends cre{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const t=Wa();this.getLocalState()!==null&&jx/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const n=[];this.meta.forEach((s,i)=>{i!==this.clientID&&jx<=t-s.lastUpdated&&this.states.has(i)&&n.push(i)}),n.length>0&&Zk(this,n,"timeout")},Ao(jx/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),s=n===void 0?0:n.clock+1,i=this.states.get(t);e===null?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:s,lastUpdated:Wa()});const o=[],a=[],l=[],d=[];e===null?d.push(t):i==null?e!=null&&o.push(t):(a.push(t),Ih(i,e)||l.push(t)),(o.length>0||l.length>0||d.length>0)&&this.emit("change",[{added:o,updated:l,removed:d},"local"]),this.emit("update",[{added:o,updated:a,removed:d},"local"])}setLocalStateField(e,t){const n=this.getLocalState();n!==null&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const Zk=(r,e,t)=>{const n=[];for(let s=0;s<e.length;s++){const i=e[s];if(r.states.has(i)){if(r.states.delete(i),i===r.clientID){const o=r.meta.get(i);r.meta.set(i,{clock:o.clock+1,lastUpdated:Wa()})}n.push(i)}}n.length>0&&(r.emit("change",[{added:[],updated:[],removed:n},t]),r.emit("update",[{added:[],updated:[],removed:n},t]))},Lh=(r,e,t=r.states)=>{const n=e.length,s=un();it(s,n);for(let i=0;i<n;i++){const o=e[i],a=t.get(o)||null,l=r.meta.get(o).clock;it(s,o),it(s,l),Fl(s,JSON.stringify(a))}return mr(s)},cie=(r,e,t)=>{const n=tl(e),s=Wa(),i=[],o=[],a=[],l=[],d=vt(n);for(let u=0;u<d;u++){const f=vt(n);let p=vt(n);const m=JSON.parse(Aa(n)),v=r.meta.get(f),w=r.states.get(f),x=v===void 0?0:v.clock;(x<p||x===p&&m===null&&r.states.has(f))&&(m===null?f===r.clientID&&r.getLocalState()!=null?p++:r.states.delete(f):r.states.set(f,m),r.meta.set(f,{clock:p,lastUpdated:s}),v===void 0&&m!==null?i.push(f):v!==void 0&&m===null?l.push(f):m!==null&&(Ih(m,w)||a.push(f),o.push(f)))}(i.length>0||a.length>0||l.length>0)&&r.emit("change",[{added:i,updated:a,removed:l},t]),(i.length>0||o.length>0||l.length>0)&&r.emit("update",[{added:i,updated:o,removed:l},t])},uie=r=>Kre(r,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&"),Tl=0,VL=3,wu=1,die=2,ip=[];ip[Tl]=(r,e,t,n,s)=>{it(r,Tl);const i=iie(e,r,t.doc,t);n&&i===Jk&&!t.synced&&(t.synced=!0)};ip[VL]=(r,e,t,n,s)=>{it(r,wu),_r(r,Lh(t.awareness,Array.from(t.awareness.getStates().keys())))};ip[wu]=(r,e,t,n,s)=>{cie(t.awareness,cn(e),t)};ip[die]=(r,e,t,n,s)=>{aie(e,t.doc,(i,o)=>hie(t,o))};const kj=3e4,hie=(r,e)=>console.warn(`Permission denied to access ${r.url}.
${e}`),WL=(r,e,t)=>{const n=tl(e),s=un(),i=vt(n),o=r.messageHandlers[i];return o?o(s,n,r,t,i):console.error("Unable to compute message"),s},D1=(r,e,t)=>{e===r.ws&&(r.emit("connection-close",[t,r]),r.ws=null,e.close(),r.wsconnecting=!1,r.wsconnected?(r.wsconnected=!1,r.synced=!1,Zk(r.awareness,Array.from(r.awareness.getStates().keys()).filter(n=>n!==r.doc.clientID),r),r.emit("status",[{status:"disconnected"}])):r.wsUnsuccessfulReconnects++,setTimeout(HL,Tk(ure(2,r.wsUnsuccessfulReconnects)*100,r.maxBackoffTime),r))},HL=r=>{if(r.shouldConnect&&r.ws===null){const e=new r._WS(r.url,r.protocols);e.binaryType="arraybuffer",r.ws=e,r.wsconnecting=!0,r.wsconnected=!1,r.synced=!1,e.onmessage=t=>{r.wsLastMessageReceived=Wa();const n=WL(r,new Uint8Array(t.data),!0);Nk(n)>1&&e.send(mr(n))},e.onerror=t=>{r.emit("connection-error",[t,r])},e.onclose=t=>{D1(r,e,t)},e.onopen=()=>{r.wsLastMessageReceived=Wa(),r.wsconnecting=!1,r.wsconnected=!0,r.wsUnsuccessfulReconnects=0,r.emit("status",[{status:"connected"}]);const t=un();if(it(t,Tl),M1(t,r.doc),e.send(mr(t)),r.awareness.getLocalState()!==null){const n=un();it(n,wu),_r(n,Lh(r.awareness,[r.doc.clientID])),e.send(mr(n))}},r.emit("status",[{status:"connecting"}])}},Px=(r,e)=>{const t=r.ws;r.wsconnected&&t&&t.readyState===t.OPEN&&t.send(e),r.bcconnected&&Xc(r.bcChannel,e,r)};class fie extends Ak{constructor(e,t,n,{connect:s=!0,awareness:i=new lie(n),params:o={},protocols:a=[],WebSocketPolyfill:l=WebSocket,resyncInterval:d=-1,maxBackoffTime:u=2500,disableBc:f=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+t,this.maxBackoffTime=u,this.params=o,this.protocols=a,this.roomname=t,this.doc=n,this._WS=l,this.awareness=i,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=f,this.wsUnsuccessfulReconnects=0,this.messageHandlers=ip.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,d>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const p=un();it(p,Tl),M1(p,n),this.ws.send(mr(p))}},d)),this._bcSubscriber=(p,m)=>{if(m!==this){const v=WL(this,new Uint8Array(p),!1);Nk(v)>1&&Xc(this.bcChannel,mr(v),this)}},this._updateHandler=(p,m)=>{if(m!==this){const v=un();it(v,Tl),nie(v,p),Px(this,mr(v))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:p,updated:m,removed:v},w)=>{const x=p.concat(m).concat(v),_=un();it(_,wu),_r(_,Lh(i,x)),Px(this,mr(_))},this._exitHandler=()=>{Zk(this.awareness,[n.clientID],"app closed")},Ha&&typeof process<"u"&&process.on("exit",this._exitHandler),i.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&kj<Wa()-this.wsLastMessageReceived&&D1(this,this.ws,null)},kj/10),s&&this.connect()}get url(){const e=uie(this.params);return this.serverUrl+"/"+this.roomname+(e.length===0?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),Ha&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(eie(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=un();it(e,Tl),M1(e,this.doc),Xc(this.bcChannel,mr(e),this);const t=un();it(t,Tl),zL(t,this.doc),Xc(this.bcChannel,mr(t),this);const n=un();it(n,VL),Xc(this.bcChannel,mr(n),this);const s=un();it(s,wu),_r(s,Lh(this.awareness,[this.doc.clientID])),Xc(this.bcChannel,mr(s),this)}disconnectBc(){const e=un();it(e,wu),_r(e,Lh(this.awareness,[this.doc.clientID],new Map)),Px(this,mr(e)),this.bcconnected&&(tie(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&D1(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(HL(this),this.connectBc())}}function pie(){const[r,e]=S.useState({}),t=S.useCallback(async(s,i,o)=>r[s]?r[s]:(console.log("TEST"),new Promise(a=>{const l=new ic,d=new fie("wss://yjs.mocscode.com",s,l),u=l.getText("content");d.on("sync",f=>{f&&(u.length===0&&u.insert(0,i),setTimeout(()=>{const p={ydoc:l,provider:d,ytext:u};e(m=>({...m,[s]:p})),a(p)},0))}),d.awareness.setLocalStateField("user",{name:o.name,color:"#ff0000"})})),[r]),n=S.useCallback(s=>{const i=r[s];i&&(i.provider.awareness.setLocalState(null),setTimeout(()=>{i.provider.destroy(),i.ydoc.destroy(),e(o=>{const a={...o};return delete a[s],a})},50))},[r]);return{getOrCreateDoc:t,destroyDoc:n,docs:r}}const mie="https://imlkffbgjdtcujamsfji.supabase.co/",gie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbGtmZmJnamR0Y3VqYW1zZmppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNzAwMDQsImV4cCI6MjA2Mzk0NjAwNH0.mzN7BemWi527jsu4rXR94bfm-Ddyff7DZNNhDv3P1zg",yie=tO(mie,gie),vie={client:yie},wie=new __(vie),xie="https://judge.mocscode.com";async function bie({projectId:r,compileScript:e,runScript:t,stdin:n,expected_output:s,cpu_time_limit:i,memory_limit:o}){const a=await wie.exportProjectAsBase64Zip(r,e,t),l=await fetch(xie,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({additional_files:a,language_id:89,stdin:n,expected_output:s,cpu_time_limit:i,memory_limit:o})});if(!l.ok)throw new Error(`Judge0 API error: ${l.status} ${l.statusText}`);const d=await l.json();return d.stdout=d.stdout!==null?atob(d.stdout):d.stdout,d.stderr=d.stderr!==null?atob(d.stderr):d.stderr,d.compile_output=d.compile_output!==null?atob(d.compile_output):d.compile_output,d.message=d.message!==null?atob(d.message):d.message,d}function _ie(r){const e={compile:"",run:'echo "Please add a custom run and/or compile script"'};if(!r)return e;switch(r.toLowerCase().trim()){case"java":return{compile:"javac src/Main.java",run:"java src/Main.java"};case"python":case"py":return{compile:"",run:"python main.py"};case"javascript":case"js":return{compile:"",run:"node index.js"};case"typescript":case"ts":return{compile:"tsc index.ts",run:"node index.js"};case"c++":case"cpp":return{compile:"g++ -std=c++17 src/main.cpp -o program",run:"./program"};case"c":return{compile:"gcc main.c -o program",run:"./program"};case"go":return{compile:"go build -o program",run:"./program"};case"rust":return{compile:"rustc main.rs -o program",run:"./program"};case"php":return{compile:"",run:"php index.php"};case"ruby":case"rb":return{compile:"",run:"ruby main.rb"};case"csharp":case"c#":case"cs":return{compile:"dotnet build",run:"dotnet run"};default:return e}}const kie=({openFiles:r,activeFileIndex:e,setActiveFileIndex:t,closeFile:n})=>g.jsx("div",{className:"bg-gray-800 border-b border-gray-700 px-4 py-2",children:g.jsx("div",{className:"flex items-center space-x-1 overflow-x-auto",children:r.map((s,i)=>g.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-t-lg text-sm cursor-pointer group min-w-0 ${i===e?"bg-gray-700 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,onClick:()=>t(i),children:[g.jsx(gs,{className:"h-3 w-3 flex-shrink-0"}),g.jsx("span",{className:"truncate",children:s.name}),r.length>0&&g.jsx(tt,{size:"sm",variant:"ghost",onClick:o=>{o.stopPropagation(),n(i)},className:"h-4 w-4 p-0 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-white",children:g.jsx(Qu,{className:"h-3 w-3"})})]},`${s.name}-${i}`))})}),Sie=({project:r,onBack:e,collaborators:t=[]})=>{var yd;const[n,s]=S.useState(4),[i,o]=S.useState(!0),[a,l]=S.useState("default"),[d,u]=S.useState(!1),[f,p]=S.useState("chat"),{toast:m}=qn(),{projectFilesApi:v,projectMembersApi:w,projectsApi:x}=Vi(),{user:_,dbUser:C}=An(),[A,T]=S.useState(!1),[P,O]=S.useState((r==null?void 0:r.name)||""),[z,M]=S.useState([]),[D,H]=S.useState(0),[Z,R]=S.useState(""),[U,k]=S.useState(!1),[W,B]=S.useState(!1),[I,G]=S.useState(250),[V,X]=S.useState(!1),[F,q]=S.useState(!1),[oe,re]=S.useState(300),[ee,ye]=S.useState(70),[ve,he]=S.useState(30),{getOrCreateDoc:xe,destroyDoc:Ce}=pie(),[ue,_e]=S.useState([]),[Ie,$]=S.useState(null),[me,te]=S.useState(!1),[Y,N]=S.useState(null),[L,J]=S.useState(0),[ne,Q]=S.useState(!0),[ie,le]=S.useState(!1),[de,ke]=S.useState(!1),[Te,De]=S.useState(null),[ot,yt]=S.useState({type:"idle"}),St=S.useRef(null),zt=S.useRef(null),[gt,Gt]=S.useState(""),[nr,Ft]=S.useState("");S.useRef(null);const[Re,Ee]=S.useState([]),Xe=S.useRef([]),$e=S.useRef("");S.useEffect(()=>{const pe=JSON.stringify(t);if($e.current!==pe){const Ue=new Set;Array.isArray(t)&&t.forEach(dt=>{dt!=null&&dt.id&&Ue.add(String(dt.id))}),Xe.current=[...t],$e.current=pe}},[t]);const nt=S.useCallback(async(pe=!1)=>{if(!(!(r!=null&&r.id)||!(_!=null&&_.id))){pe||te(!0);try{const{data:Ue,error:dt}=await w.listProjectMembers(r.id,{page:1,per_page:50},{field:"role",direction:"desc"});if(dt){console.error("Error loading project members:",dt),pe||m({title:"Error",description:"Failed to load project collaborators",variant:"destructive"});return}const Ke=((Ue==null?void 0:Ue.items)||[]).map(Rt=>({...Rt,user:Rt.user||{id:Rt.user_id,name:Rt.name||"Unknown User",email:Rt.email||"",username:Rt.username||""},isOnline:!1,lastSeen:new Date().toISOString()}));_e(Rt=>{const Br=JSON.stringify(Rt),dr=JSON.stringify(Ke);return Br===dr?Rt:Ke});const At=Ke.find(Rt=>Rt.user_id===_.id);At&&$(At.role)}catch(Ue){console.error("Unexpected error loading members:",Ue),pe||m({title:"Error",description:"An unexpected error occurred while loading members",variant:"destructive"})}finally{pe||te(!1)}}},[r==null?void 0:r.id,_==null?void 0:_.id,w,m]);S.useEffect(()=>{r!=null&&r.id&&(_!=null&&_.id)&&nt()},[r==null?void 0:r.id,_==null?void 0:_.id,nt]),S.useEffect(()=>{if(!ne||!(r!=null&&r.id)||!(_!=null&&_.id))return;const pe=setInterval(()=>{ot.type==="idle"&&nt(!0)},3e4);return St.current=pe,()=>{pe&&clearInterval(pe)}},[ne,r==null?void 0:r.id,_==null?void 0:_.id,ot.type,nt]);const st=S.useMemo(()=>t&&t.length>0?t:(ue||[]).filter(pe=>(pe==null?void 0:pe.user_id)&&pe.user_id!==(_==null?void 0:_.id)).map(pe=>{var Ke;if(!pe)return null;const Ue=At=>{let Rt=0;for(let dr=0;dr<At.length;dr++)Rt=At.charCodeAt(dr)+((Rt<<5)-Rt);return`hsl(${Math.abs(Rt%360)}, 70%, 60%)`},dt=pe.user_id||pe.id;return dt?{id:Number(dt),name:((Ke=pe.user)==null?void 0:Ke.username)||"Unknown",color:Ue(dt),cursor:null,isTyping:!1,accessLevel:pe.role==="owner"?"owner":pe.role==="editor"?"edit":"view"}:null}).filter(Boolean),[t,ue,_==null?void 0:_.id]);S.useMemo(()=>t&&t.length>0?t:st,[t,st]),S.useEffect(()=>{if(console.log("LANGUAGE: ",r==null?void 0:r.language),r!=null&&r.language){const pe=_ie(r.language);Gt(pe.compile),Ft(pe.run)}},[r==null?void 0:r.language]),S.useEffect(()=>()=>{St.current&&clearInterval(St.current)},[]);const wt=async()=>{J(pe=>pe+1),m({title:"Refreshing",description:"Updating collaborator list..."})},ur=()=>Ie==="owner"||Ie==="editor"&&(r==null?void 0:r.owner_id)===(_==null?void 0:_.id),en=ur,Po=async()=>{if(!(!(r!=null&&r.id)||!P.trim()))try{const{error:pe}=await x.updateProject(r.id,{name:P.trim()});if(pe)throw pe;r.name=P.trim(),T(!1),m({title:"Success",description:"Project name updated successfully"})}catch(pe){console.error("Failed to rename project:",pe),m({title:"Error",description:"Failed to update project name",variant:"destructive"}),O(r.name)}},ls=pe=>{pe.key==="Enter"?Po():pe.key==="Escape"&&(T(!1),O(r.name))},Kn=async pe=>{var dt;if(!(r!=null&&r.id)||!(pe!=null&&pe.id))return;yt({type:"updating",memberId:pe.id});const Ue=[...ue];_e(Ke=>Ke.map(At=>At.id===pe.id?pe:At));try{await new Promise(Ke=>setTimeout(Ke,500)),await nt(!0),m({title:"Success",description:`${((dt=pe.user)==null?void 0:dt.name)||"Member"} permissions updated successfully`,duration:3e3})}catch{_e(Ue),m({title:"Update Failed",description:"Failed to update member permissions. Please try again.",variant:"destructive"})}finally{yt({type:"idle"})}},ap=async pe=>{var Ke;if(!(r!=null&&r.id)||!pe)return;yt({type:"removing",memberId:pe});const Ue=ue.find(At=>At.id===pe),dt=[...ue];_e(At=>At.filter(Rt=>Rt.id!==pe));try{await new Promise(At=>setTimeout(At,500)),await nt(!0),m({title:"Success",description:`${((Ke=Ue==null?void 0:Ue.user)==null?void 0:Ke.name)||"Member"} removed from project`,duration:3e3})}catch{_e(dt),m({title:"Removal Failed",description:"Failed to remove member. Please try again.",variant:"destructive"})}finally{yt({type:"idle"})}},rl=async pe=>{var Ue;yt({type:"adding",memberId:pe==null?void 0:pe.user_id});try{await nt(),m({title:"Collaborator Added",description:`${((Ue=pe==null?void 0:pe.user)==null?void 0:Ue.email)||"New member"} has been added to the project`,duration:4e3}),Q(!0),setTimeout(()=>{ot.type==="idle"&&Q(!0)},1e4)}catch{m({title:"Error",description:"Failed to refresh member list after addition",variant:"destructive"})}finally{yt({type:"idle"})}},ac=pe=>{if(!en()){m({title:"Permission Denied",description:"You do not have permission to manage project members",variant:"destructive"});return}if(pe.user_id===(_==null?void 0:_.id)){m({title:"Cannot Modify Self",description:"You cannot modify your own permissions",variant:"destructive"});return}if(pe.role==="owner"&&Ie!=="owner"){m({title:"Cannot Modify Owner",description:"Only the project owner can modify owner permissions",variant:"destructive"});return}De(pe),ke(!0)},nl=S.useCallback(pe=>{console.log("Online users updated:",pe.users),Ee(pe.users||[])},[]),lc=()=>{navigator.onLine?(m({title:"Connection Restored",description:"Refreshing collaborator data..."}),wt()):(Q(!1),m({title:"Connection Lost",description:"Collaborator updates paused until connection is restored",variant:"destructive"}))};S.useEffect(()=>(window.addEventListener("online",lc),window.addEventListener("offline",lc),()=>{window.removeEventListener("online",lc),window.removeEventListener("offline",lc)}),[]);const sl=async()=>{k(!0),R("");try{const pe=await bie({projectId:r==null?void 0:r.id,compileScript:gt,runScript:nr});let Ue="";pe.stdout&&(Ue+=pe.stdout),pe.stderr&&(Ue+=`
[stderr]
`+pe.stderr),pe.compile_output&&(Ue+=`
[compiler]
`+pe.compile_output),pe.message&&(Ue+=`
[message]
`+pe.message),R(Ue||"[No output]")}catch(pe){R("Error running code: "+((pe==null?void 0:pe.message)||pe))}k(!1)},il=pe=>{const Ue=pe.split(".").pop();return{java:"java",py:"python",js:"javascript",ts:"typescript",c:"c",cpp:"cpp",cs:"csharp",md:"markdown",txt:"plaintext",html:"html",css:"css",json:"json",yaml:"yaml",yml:"yaml",graphql:"graphql",gql:"graphql"}[Ue||""]||"plaintext"},cc=async(pe,Ue)=>{const dt=Ue?z.findIndex(Pr=>Pr.id===Ue):z.findIndex(Pr=>Pr.name===pe);if(dt!==-1){H(dt);return}let Ke="";if(Ue)try{const{data:Pr,error:Oo}=await v.getFile(Ue);if(Oo)throw console.error("File load error:",Oo),Oo;Ke=(Pr==null?void 0:Pr.content)||ol(pe)}catch(Pr){console.error("Failed to load file content:",Pr),Ke=ol(pe),m({title:"Warning",description:`Failed to load file content: ${(Pr==null?void 0:Pr.message)||"Unknown error"}. Using default template.`,variant:"destructive"})}else Ke=ol(pe);const{ydoc:At,provider:Rt,ytext:Br}=await xe(Ue,Ke,C),dr={name:pe,content:Br.toString(),language:il(pe),id:Ue,ytext:Br,provider:Rt};M([...z,dr]),H(z.length)},ol=pe=>{var dt;switch((dt=pe.split(".").pop())==null?void 0:dt.toLowerCase()){case"java":return`public class ${pe.replace(".java","")} {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`;case"py":return`# ${pe}
# Python file

print("Hello, World!")`;case"js":return`// ${pe}
// JavaScript file

console.log("Hello, World!");`;case"c":return`#include <stdio.h>

int main() {
    printf("Hello, World!\\n");
    return 0;
}`;case"cpp":return`#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}`;case"cs":return`using System;

class Program {
    static void Main() {
        Console.WriteLine("Hello, World!");
    }
}`;case"md":return`# ${pe.replace(".md","")}

Add your documentation here.`;case"txt":return`This is a text file.
Add your content here.`;default:return`// ${pe}
// Add your code here`}},lp=pe=>{const Ue=z.filter((dt,Ke)=>Ke!==pe);M(Ue),pe===D?H(Math.max(0,pe-1)):pe<D&&H(D-1),Ce(z[pe].id)},Ly=pe=>{const Ue=z.findIndex(dt=>dt.id===pe);Ue!==-1&&lp(Ue)},md=S.useRef(null),[Gi,gd]=S.useState(!1),uc=async(pe=!1)=>{const Ue=z[D];if(!(Ue!=null&&Ue.id)){m({title:"Cannot Save",description:"File must be created before it can be saved",variant:"destructive"});return}if(!Gi){gd(!0);try{const{ydoc:dt,provider:Ke,ytext:At}=await xe(Ue.id,"",C),Rt=At.toString(),Br=new Date().toISOString(),{error:dr}=await v.updateFile(Ue.id,{content:Rt,updated_at:Br,size_bytes:Rt.length});if(dr)throw console.error("Manual save error:",dr),dr;const Pr=[...z];Pr[D]={...Ue,content:Rt,lastSaved:Br},M(Pr),m({title:"File Saved",description:`${Ue.name} saved successfully`})}catch(dt){console.error("Save failed:",dt),m({title:"Save Failed",description:`Failed to save ${Ue.name}: ${dt.message||"Unknown error"}`,variant:"destructive"})}finally{gd(!1)}}};S.useEffect(()=>{const pe=Ue=>{(Ue.metaKey||Ue.ctrlKey)&&Ue.key==="s"&&(Ue.preventDefault(),uc(!1))};return window.addEventListener("keydown",pe),()=>window.removeEventListener("keydown",pe)},[uc]);const Fy=pe=>{const Ue=[...z];Ue[D]={...Ue[D],content:pe},M(Ue);const dt=Ue[D];dt!=null&&dt.id&&(md.current&&clearTimeout(md.current),md.current=setTimeout(async()=>{try{const Ke=new Date().toISOString(),{error:At}=await v.updateFile(dt.id,{content:pe,updated_at:Ke,size_bytes:pe.length});if(At)throw console.error("Auto-save error:",At),At}catch(Ke){console.error("Auto-save failed:",Ke),m({title:"Auto-save Failed",description:`Failed to save ${dt.name}: ${(Ke==null?void 0:Ke.message)||"Unknown error"}`,variant:"destructive"})}},1e3))};S.useCallback(pe=>{},[]),ue.filter(pe=>pe.user_id!==(_==null?void 0:_.id)).map(pe=>{var Ue,dt,Ke;return{id:parseInt(pe.id.slice(-8),16),name:((Ue=pe.user)==null?void 0:Ue.name)||((Ke=(dt=pe.user)==null?void 0:dt.email)==null?void 0:Ke.split("@")[0])||"Unknown",color:"#3B82F6",cursor:null,isTyping:!1,accessLevel:pe.role}});const Ro=z[D],cp=S.useCallback((pe,Ue,dt)=>{M(Ke=>Ke.map(At=>At.id===pe||At.id===void 0&&At.name===Ue?{...At,name:dt,language:il(dt)}:At))},[]);return S.useEffect(()=>{zt.current&&zt.current.updateSettings({tabSize:n,autocomplete:i,syntaxTheme:a})},[n,i,a]),g.jsxs("div",{className:"h-screen flex flex-col bg-gray-900 text-white",children:[g.jsx("header",{className:"bg-gray-800 border-b border-gray-700 px-2 sm:px-4 py-2",children:g.jsxs("div",{className:"flex items-center justify-between w-full",children:[g.jsxs("div",{className:"flex-1 flex items-center space-x-2 sm:space-x-4 min-w-0",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsxs(tt,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-300 hover:text-white hover:bg-gray-700 px-2 sm:px-3",children:[g.jsx(bP,{className:"h-4 w-4 sm:mr-2"}),g.jsx("span",{className:"hidden sm:inline",children:"Back to Dashboard"})]})}),g.jsx("div",{className:"hidden md:flex items-center space-x-3 min-w-0",children:A?g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_n,{autoFocus:!0,value:P,onChange:pe=>O(pe.target.value),onKeyDown:ls,className:"h-8 w-64 bg-gray-700 text-white border-gray-600 focus-visible:ring-1 focus-visible:ring-blue-500"}),g.jsx(tt,{variant:"ghost",size:"icon",className:"h-8 w-8 text-green-500 hover:bg-green-900/20 hover:text-green-400",onClick:Po,children:g.jsx($h,{className:"h-4 w-4"})}),g.jsx(tt,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:bg-gray-700 hover:text-gray-300",onClick:()=>{T(!1),O(r.name)},children:g.jsx(Qu,{className:"h-4 w-4"})})]}):g.jsxs("div",{className:"flex items-center group min-w-0",children:[g.jsx("h1",{className:"text-lg font-semibold text-white truncate max-w-[200px] md:max-w-none",title:r==null?void 0:r.name,children:(r==null?void 0:r.name.length)>10?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"hidden lg:inline",children:r==null?void 0:r.name}),g.jsx("span",{className:"lg:hidden",children:(r==null?void 0:r.name.length)>10?`${r==null?void 0:r.name.substring(0,10)}...`:r==null?void 0:r.name})]}):r==null?void 0:r.name}),ur()&&g.jsx(tt,{variant:"ghost",size:"icon",className:"h-6 w-6 ml-2 opacity-0 group-hover:opacity-100 text-gray-400 hover:text-white hover:bg-gray-700",onClick:()=>{O(r.name),T(!0)},children:g.jsx(PB,{className:"h-3.5 w-3.5"})})]})})]}),g.jsx("div",{className:"flex-1 flex items-center justify-center px-2",children:g.jsxs("div",{className:"flex items-center",children:[g.jsx(po,{className:"h-8 w-8 text-blue-500 mr-2 mt-1"}),g.jsx("span",{className:"text-xl sm:text-2xl font-extrabold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent whitespace-nowrap",children:"MocsCode"})]})}),g.jsxs("div",{className:"flex-1 flex items-center justify-end space-x-1 sm:space-x-2 md:space-x-3 overflow-x-auto py-1",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsxs(yQ,{onOpenChange:u,open:d,children:[g.jsx(vQ,{asChild:!0,children:g.jsx(tt,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white hover:bg-gray-700","aria-label":"Editor Settings",onClick:pe=>{pe.preventDefault(),u(!d)},children:g.jsx(DB,{className:"h-4 w-4"})})}),g.jsx(h4,{align:"end",className:"w-56 p-4",onInteractOutside:pe=>{pe.target.closest('[aria-label="Editor Settings"]')&&pe.preventDefault()},children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("h4",{className:"font-medium leading-none",children:"Editor Settings"}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(bs,{htmlFor:"tab-size",children:"Tab Size"}),g.jsxs("select",{id:"tab-size",value:n,onChange:pe=>s(Number(pe.target.value)),className:"bg-gray-700 text-white text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:pe=>pe.stopPropagation(),children:[g.jsx("option",{value:2,children:"2 spaces"}),g.jsx("option",{value:4,children:"4 spaces"}),g.jsx("option",{value:8,children:"8 spaces"})]})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(bs,{htmlFor:"autocomplete",children:"Autocomplete"}),g.jsx(v4,{id:"autocomplete",checked:i,onCheckedChange:pe=>{o(pe)},className:"data-[state=checked]:bg-blue-600",onClick:pe=>pe.stopPropagation()})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx(bs,{htmlFor:"syntax-theme",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(NB,{className:"h-4 w-4"}),g.jsx("span",{children:"Syntax Theme"})]})}),g.jsxs("select",{id:"syntax-theme",value:a,onChange:pe=>l(pe.target.value),className:"bg-gray-700 text-white text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:pe=>pe.stopPropagation(),children:[g.jsx("option",{value:"default",children:"Default"}),g.jsx("option",{value:"dracula",children:"Dracula"}),g.jsx("option",{value:"solarized-light",children:"Solarized Light"}),g.jsx("option",{value:"monokai",children:"Monokai"})]})]})]})})]})}),(Ie==="owner"||Ie==="editor")&&g.jsxs(tt,{onClick:sl,disabled:U,className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-2 whitespace-nowrap overflow-hidden text-ellipsis",children:[g.jsx(Vx,{className:"h-4 w-4 sm:mr-2 flex-shrink-0"}),g.jsx("span",{className:"hidden sm:inline",children:U?"Running...":"Run Code"})]}),en()&&g.jsxs(tt,{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 sm:px-4 py-2 whitespace-nowrap overflow-hidden text-ellipsis",onClick:()=>le(!0),children:[g.jsx(IB,{className:"h-4 w-4 sm:mr-2 flex-shrink-0"}),g.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),(Ie==="owner"||Ie==="editor")&&g.jsxs(tt,{onClick:pe=>{pe.preventDefault(),uc(!1)},variant:"outline",className:"border-gray-600 text-gray-600 hover:bg-gray-700 hover:text-white px-3 sm:px-4 py-2 whitespace-nowrap overflow-hidden text-ellipsis",children:[g.jsx($h,{className:"h-4 w-4 sm:mr-2 flex-shrink-0"}),g.jsx("span",{className:"hidden sm:inline",children:"Save"})]})]})]})}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsxs("div",{className:"flex flex-row h-full bg-gray-800",style:{width:V?"16px":`${I}px`},children:[g.jsx("div",{className:"bg-gray-800 border-r border-gray-700 flex flex-col h-full flex-shrink-0 overflow-hidden",style:{width:V?0:"100%",minWidth:V?0:172,maxWidth:V?0:"100%"},children:!V&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"flex-1 overflow-y-auto",style:{height:"calc(100% - 16rem)"},children:g.jsx(ste,{currentFile:((yd=z[D])==null?void 0:yd.name)||"",onFileSelect:cc,onFileRenamed:cp,onFileDeleted:Ly,projectId:r.id})}),g.jsx("div",{className:"border-t border-gray-700 h-64 overflow-y-auto",style:{height:"16rem"},children:g.jsx(sre,{projectId:r.id,onMemberClick:ac,onInviteClick:()=>le(!0),refreshTrigger:L,onlineUsers:Re})})]})}),g.jsxs("div",{className:"relative h-full flex-shrink-0",children:[g.jsx("button",{onClick:pe=>{pe.stopPropagation(),X(!V)},className:`absolute left-0 top-0 bottom-0 w-4 flex items-center justify-center ${V?"bg-gray-800":"bg-gray-700"} hover:bg-blue-600 text-white transition-all duration-200 z-10`,"aria-label":V?"Expand sidebar":"Collapse sidebar",children:g.jsx("div",{className:`transform transition-transform duration-200 ${V?"rotate-180":"rotate-0"}`,children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 hover:text-white",children:g.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),g.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-gray-600 hover:bg-blue-500 cursor-col-resize active:bg-blue-600 z-20",onMouseDown:pe=>{pe.preventDefault(),pe.stopPropagation();const Ue=pe.clientX,dt=I,Ke=Rt=>{const Br=Rt.clientX-Ue,dr=dt+Br;G(Math.max(172,Math.min(600,dr)))},At=()=>{document.removeEventListener("mousemove",Ke),document.removeEventListener("mouseup",At)};document.addEventListener("mousemove",Ke),document.addEventListener("mouseup",At,{once:!0})}}),V&&g.jsx("div",{className:"absolute left-0 right-0 bottom-4 flex items-center justify-center",children:g.jsx("span",{className:"transform -rotate-90 whitespace-nowrap text-[10px] font-medium text-gray-500 tracking-wider",children:r.name})})]})]}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative bg-gray-900",style:{minWidth:0,width:`calc(100% - ${V?"32px":`${I}px`} - ${F?"32px":`${oe}px`})`,transition:"width 0.2s ease-out, margin 0.2s ease-out",marginLeft:V?"16px":"0",marginRight:F?"16px":"0",position:"relative",overflow:"hidden"},children:[g.jsx(kie,{openFiles:z,activeFileIndex:D,setActiveFileIndex:H,closeFile:lp}),g.jsxs("div",{className:"flex-1 flex flex-col",style:{minHeight:0},children:[g.jsx("div",{className:"overflow-hidden",style:{height:`${ee}%`,minHeight:100},children:z.length===0?g.jsx("div",{className:"flex flex-col items-center justify-center h-full w-full text-center select-none",children:g.jsxs("div",{className:"mx-auto max-w-md p-8 rounded-lg bg-gray-900/80 border border-gray-700 shadow-lg",children:[g.jsx("h2",{className:"text-2xl font-bold mb-2 text-blue-400",children:"Welcome to the Code Editor"}),g.jsx("p",{className:"text-gray-300 mb-4",children:"To get started, open or create a file from the file explorer panel on the left."}),g.jsx("div",{className:"flex justify-center",children:g.jsx(gs,{className:"h-10 w-10 text-blue-400"})})]})}):Ro&&g.jsx(sQ,{value:Ro.content.toString(),language:Ro.language,tabSize:n,autocomplete:i,syntaxTheme:a,ytext:Ro.ytext,provider:Ro.provider,onChange:Fy})}),g.jsxs("div",{className:"relative flex flex-col bg-gray-800 border-t border-gray-700",style:{height:`${100-ee}%`,position:"relative",left:V?"16px":"0",right:F?"16px":"0",width:"auto",marginRight:0,boxSizing:"border-box"},children:[g.jsx("div",{className:"h-2 w-full bg-gray-700 hover:bg-blue-500 cursor-row-resize active:bg-blue-600 relative z-10",onMouseDown:pe=>{var Br,dr;pe.preventDefault(),pe.stopPropagation();const Ue=pe.clientY,dt=ee,Ke=(dr=(Br=pe.currentTarget.parentElement)==null?void 0:Br.parentElement)==null?void 0:dr.getBoundingClientRect();if(!Ke)return;const At=Pr=>{const Oo=Pr.clientY-Ue,dc=dt+Oo/Ke.height*100;ye(Math.max(10,Math.min(90,dc)))},Rt=()=>{document.removeEventListener("mousemove",At),document.removeEventListener("mouseup",Rt)};document.addEventListener("mousemove",At),document.addEventListener("mouseup",Rt,{once:!0})}}),g.jsx("div",{className:"flex-1 overflow-auto",children:g.jsx(ite,{output:Z,setOutput:R,isRunning:U,compileScript:gt,setCompileScript:Gt,runScript:nr,setRunScript:Ft})})]})]})]}),g.jsxs("div",{className:"flex flex-row h-full bg-gray-800",style:{width:F?"16px":`${oe}px`},children:[g.jsxs("div",{className:"relative h-full flex-shrink-0",children:[g.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gray-600 hover:bg-blue-500 cursor-col-resize active:bg-blue-600 z-20",onMouseDown:pe=>{pe.preventDefault(),pe.stopPropagation();const Ue=pe.clientX,dt=oe,Ke=Rt=>{const Br=Ue-Rt.clientX,dr=dt+Br;re(Math.max(200,Math.min(600,dr)))},At=()=>{document.removeEventListener("mousemove",Ke),document.removeEventListener("mouseup",At)};document.addEventListener("mousemove",Ke),document.addEventListener("mouseup",At,{once:!0})}}),g.jsx("button",{onClick:pe=>{pe.stopPropagation(),q(!F)},className:`absolute right-0 top-0 bottom-0 w-4 flex items-center justify-center ${F?"bg-gray-800":"bg-gray-700"} hover:bg-blue-600 text-white transition-all duration-200 z-10`,"aria-label":F?"Expand chat":"Collapse chat",children:g.jsx("div",{className:`transform transition-transform duration-200 ${F?"rotate-0":"rotate-180"}`,children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 hover:text-white",children:g.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),F&&g.jsx("div",{className:"absolute left-0 right-0 bottom-4 flex items-center justify-center",children:g.jsx("span",{className:"transform -rotate-90 whitespace-nowrap text-[10px] font-medium text-gray-500 tracking-wider",children:"Chat"})})]}),g.jsx("div",{className:"bg-gray-800 border-l border-gray-700 flex flex-col h-full flex-shrink-0 overflow-hidden",style:{width:F?0:"100%",minWidth:F?0:200,maxWidth:F?0:"100%"},children:!F&&g.jsx(g.Fragment,{children:g.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:g.jsx(rre,{collaborators:t,projectMembers:ue,currentUser:C,isLoadingMembers:me,memberOperationStatus:ot,onMemberClick:ac,onInviteClick:()=>le(!0),canManageMembers:ur(),projectId:r.id,onlineUsersUpdateCallback:nl})})})})]})]}),ie&&g.jsx(Iee,{isOpen:ie,onClose:()=>le(!1),project:{id:r.id,name:r.name,owner_id:r.owner_id||(_==null?void 0:_.id)||""},onMemberAdded:rl}),de&&Te&&g.jsx(Qee,{isOpen:de,onClose:()=>{ke(!1),De(null)},member:Te,projectId:r.id,onMemberUpdated:Kn,onMemberRemoved:ap,onMembersChanged:()=>J(pe=>pe+1)})]})},Cie=()=>{const{projectId:r}=CR(),e=si(),{projectsApi:t}=Vi(),{toast:n}=qn(),{user:s,isLoading:i}=An(),[o,a]=S.useState({id:r||"",name:"Loading...",language:"javascript"}),[l,d]=S.useState(!0),[u,f]=S.useState(!1);S.useEffect(()=>{s&&(async()=>{if(!r){e("/dashboard");return}if(!u)try{d(!0);const{data:v,error:w}=await t.getProject(r);if(w||!v)throw new Error((w==null?void 0:w.message)||"Failed to load project");a(v),f(!0)}catch(v){console.error("Error loading project:",v),n({title:"Error",description:"Failed to load project. Redirecting to dashboard.",variant:"destructive"}),setTimeout(()=>e("/dashboard"),2e3)}finally{d(!1)}})()},[r,t,e,n,s,u]),S.useEffect(()=>{const m=()=>{};return document.addEventListener("visibilitychange",m),()=>{document.removeEventListener("visibilitychange",m)}},[]);const p=()=>{e("/dashboard")};return i?g.jsx("div",{className:"h-screen flex items-center justify-center",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?l&&!u?g.jsx("div",{className:"h-screen flex items-center justify-center",children:"Loading project..."}):g.jsx("div",{className:"h-screen",children:g.jsx(Sie,{project:o,onBack:p})}):g.jsx(p_,{to:"/landing",replace:!0})},Eie=()=>{const r=id();return S.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),g.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),g.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function Aie(r,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(r)}function qL(r,e){return new Promise(function(t,n){let s;return Tie(r).then(function(i){try{return s=i,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(o){return n(o)}},n)})}const Tie=r=>new Promise((e,t)=>{const n=new FileReader;n.addEventListener("load",({target:{result:s}})=>{const i=new DataView(s);let o=0;if(i.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const a=i.getUint16(o);if(a===65498)break;const l=i.getUint16(o+2);if(a===65505&&i.getUint32(o+4)===1165519206){const d=o+10;let u;switch(i.getUint16(d)){case 18761:u=!0;break;case 19789:u=!1;break;default:return t("TIFF header contains invalid endian")}if(i.getUint16(d+2,u)!==42)return t("TIFF header contains invalid version");const f=i.getUint32(d+4,u),p=d+f+2+12*i.getUint16(d+f,u);for(let m=d+f+2;m<p;m+=12)if(i.getUint16(m,u)==274){if(i.getUint16(m+2,u)!==3)return t("Orientation data type is invalid");if(i.getUint32(m+4,u)!==1)return t("Orientation data count is invalid");i.setUint16(m+8,1,u);break}return e(s.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),n.readAsArrayBuffer(r)});var k0={},Nie={get exports(){return k0},set exports(r){k0=r}};(function(r){var e,t,n={};Nie.exports=n,n.parse=function(s,i){for(var o=n.bin.readUshort,a=n.bin.readUint,l=0,d={},u=new Uint8Array(s),f=u.length-4;a(u,f)!=101010256;)f--;l=f,l+=4;var p=o(u,l+=4);o(u,l+=2);var m=a(u,l+=2),v=a(u,l+=4);l+=4,l=v;for(var w=0;w<p;w++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),m=a(u,l+=4);var x=a(u,l+=4),_=o(u,l+=4),C=o(u,l+2),A=o(u,l+4);l+=6;var T=a(u,l+=8);l+=4,l+=_+C+A,n._readLocal(u,T,d,m,x,i)}return d},n._readLocal=function(s,i,o,a,l,d){var u=n.bin.readUshort,f=n.bin.readUint;f(s,i),u(s,i+=4),u(s,i+=2);var p=u(s,i+=2);f(s,i+=2),f(s,i+=4),i+=4;var m=u(s,i+=8),v=u(s,i+=2);i+=2;var w=n.bin.readUTF8(s,i,m);if(i+=m,i+=v,d)o[w]={size:l,csize:a};else{var x=new Uint8Array(s.buffer,i);if(p==0)o[w]=new Uint8Array(x.buffer.slice(i,i+a));else{if(p!=8)throw"unknown compression method: "+p;var _=new Uint8Array(l);n.inflateRaw(x,_),o[w]=_}}},n.inflateRaw=function(s,i){return n.F.inflate(s,i)},n.inflate=function(s,i){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),i)},n.deflate=function(s,i){i==null&&(i={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*s.length));a[o]=120,a[o+1]=156,o+=2,o=n.F.deflateRaw(s,a,o,i.level);var l=n.adler(s,0,s.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},n.deflateRaw=function(s,i){i==null&&(i={level:6});var o=new Uint8Array(50+Math.floor(1.1*s.length)),a=n.F.deflateRaw(s,o,a,i.level);return new Uint8Array(o.buffer,0,a)},n.encode=function(s,i){i==null&&(i=!1);var o=0,a=n.bin.writeUint,l=n.bin.writeUshort,d={};for(var u in s){var f=!n._noNeed(u)&&!i,p=s[u],m=n.crc.crc(p,0,p.length);d[u]={cpr:f,usize:p.length,crc:m,file:f?n.deflateRaw(p):p}}for(var u in d)o+=d[u].file.length+30+46+2*n.bin.sizeUTF8(u);o+=22;var v=new Uint8Array(o),w=0,x=[];for(var u in d){var _=d[u];x.push(w),w=n._writeHeader(v,w,u,_,0)}var C=0,A=w;for(var u in d)_=d[u],x.push(w),w=n._writeHeader(v,w,u,_,1,x[C++]);var T=w-A;return a(v,w,101010256),w+=4,l(v,w+=4,C),l(v,w+=2,C),a(v,w+=2,T),a(v,w+=4,A),w+=4,w+=2,v.buffer},n._noNeed=function(s){var i=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},n._writeHeader=function(s,i,o,a,l,d){var u=n.bin.writeUint,f=n.bin.writeUshort,p=a.file;return u(s,i,l==0?67324752:33639248),i+=4,l==1&&(i+=2),f(s,i,20),f(s,i+=2,0),f(s,i+=2,a.cpr?8:0),u(s,i+=2,0),u(s,i+=4,a.crc),u(s,i+=4,p.length),u(s,i+=4,a.usize),f(s,i+=4,n.bin.sizeUTF8(o)),f(s,i+=2,0),i+=2,l==1&&(i+=2,i+=2,u(s,i+=6,d),i+=4),i+=n.bin.writeUTF8(s,i,o),l==0&&(s.set(p,i),i+=p.length),i},n.crc={table:function(){for(var s=new Uint32Array(256),i=0;i<256;i++){for(var o=i,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;s[i]=o}return s}(),update:function(s,i,o,a){for(var l=0;l<a;l++)s=n.crc.table[255&(s^i[o+l])]^s>>>8;return s},crc:function(s,i,o){return 4294967295^n.crc.update(4294967295,s,i,o)}},n.adler=function(s,i,o){for(var a=1,l=0,d=i,u=i+o;d<u;){for(var f=Math.min(d+5552,u);d<f;)l+=a+=s[d++];a%=65521,l%=65521}return l<<16|a},n.bin={readUshort:function(s,i){return s[i]|s[i+1]<<8},writeUshort:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255},readUint:function(s,i){return 16777216*s[i+3]+(s[i+2]<<16|s[i+1]<<8|s[i])},writeUint:function(s,i,o){s[i]=255&o,s[i+1]=o>>8&255,s[i+2]=o>>16&255,s[i+3]=o>>24&255},readASCII:function(s,i,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(s[i+l]);return a},writeASCII:function(s,i,o){for(var a=0;a<o.length;a++)s[i+a]=o.charCodeAt(a)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,i,o){for(var a,l="",d=0;d<o;d++)l+="%"+n.bin.pad(s[i+d].toString(16));try{a=decodeURIComponent(l)}catch{return n.bin.readASCII(s,i,o)}return a},writeUTF8:function(s,i,o){for(var a=o.length,l=0,d=0;d<a;d++){var u=o.charCodeAt(d);if((4294967168&u)==0)s[i+l]=u,l++;else if((4294965248&u)==0)s[i+l]=192|u>>6,s[i+l+1]=128|u>>0&63,l+=2;else if((4294901760&u)==0)s[i+l]=224|u>>12,s[i+l+1]=128|u>>6&63,s[i+l+2]=128|u>>0&63,l+=3;else{if((4292870144&u)!=0)throw"e";s[i+l]=240|u>>18,s[i+l+1]=128|u>>12&63,s[i+l+2]=128|u>>6&63,s[i+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(s){for(var i=s.length,o=0,a=0;a<i;a++){var l=s.charCodeAt(a);if((4294967168&l)==0)o++;else if((4294965248&l)==0)o+=2;else if((4294901760&l)==0)o+=3;else{if((4292870144&l)!=0)throw"e";o+=4}}return o}},n.F={},n.F.deflateRaw=function(s,i,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],d=n.F.U,u=n.F._goodIndex;n.F._hash;var f=n.F._putsE,p=0,m=o<<3,v=0,w=s.length;if(a==0){for(;p<w;)f(i,m,p+(Z=Math.min(65535,w-p))==w?1:0),m=n.F._copyExact(s,p,Z,i,m+8),p+=Z;return m>>>3}var x=d.lits,_=d.strt,C=d.prev,A=0,T=0,P=0,O=0,z=0,M=0;for(w>2&&(_[M=n.F._hash(s,0)]=0),p=0;p<w;p++){if(z=M,p+1<w-2){M=n.F._hash(s,p+1);var D=p+1&32767;C[D]=_[M],_[M]=D}if(v<=p){(A>14e3||T>26697)&&w-p>100&&(v<p&&(x[A]=p-v,A+=2,v=p),m=n.F._writeBlock(p==w-1||v==w?1:0,x,A,O,s,P,p-P,i,m),A=T=O=0,P=p);var H=0;p<w-2&&(H=n.F._bestMatch(s,p,C,z,Math.min(l[2],w-p),l[3]));var Z=H>>>16,R=65535&H;if(H!=0){R=65535&H;var U=u(Z=H>>>16,d.of0);d.lhst[257+U]++;var k=u(R,d.df0);d.dhst[k]++,O+=d.exb[U]+d.dxb[k],x[A]=Z<<23|p-v,x[A+1]=R<<16|U<<8|k,A+=2,v=p+Z}else d.lhst[s[p]]++;T++}}for(P==p&&s.length!=0||(v<p&&(x[A]=p-v,A+=2,v=p),m=n.F._writeBlock(1,x,A,O,s,P,p-P,i,m),A=0,T=0,A=T=O=0,P=p);(7&m)!=0;)m++;return m>>>3},n.F._bestMatch=function(s,i,o,a,l,d){var u=32767&i,f=o[u],p=u-f+32768&32767;if(f==u||a!=n.F._hash(s,i-p))return 0;for(var m=0,v=0,w=Math.min(32767,i);p<=w&&--d!=0&&f!=u;){if(m==0||s[i+m]==s[i+m-p]){var x=n.F._howLong(s,i,p);if(x>m){if(v=p,(m=x)>=l)break;p+2<x&&(x=p+2);for(var _=0,C=0;C<x-2;C++){var A=i-p+C+32768&32767,T=A-o[A]+32768&32767;T>_&&(_=T,f=A)}}}p+=(u=f)-(f=o[u])+32768&32767}return m<<16|v},n.F._howLong=function(s,i,o){if(s[i]!=s[i-o]||s[i+1]!=s[i+1-o]||s[i+2]!=s[i+2-o])return 0;var a=i,l=Math.min(s.length,i+258);for(i+=3;i<l&&s[i]==s[i-o];)i++;return i-a},n.F._hash=function(s,i){return(s[i]<<8|s[i+1])+(s[i+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,i,o,a,l,d,u,f,p){var m,v,w,x,_,C,A,T,P,O=n.F.U,z=n.F._putsF,M=n.F._putsE;O.lhst[256]++,v=(m=n.F.getTrees())[0],w=m[1],x=m[2],_=m[3],C=m[4],A=m[5],T=m[6],P=m[7];var D=32+((p+3&7)==0?0:8-(p+3&7))+(u<<3),H=a+n.F.contSize(O.fltree,O.lhst)+n.F.contSize(O.fdtree,O.dhst),Z=a+n.F.contSize(O.ltree,O.lhst)+n.F.contSize(O.dtree,O.dhst);Z+=14+3*A+n.F.contSize(O.itree,O.ihst)+(2*O.ihst[16]+3*O.ihst[17]+7*O.ihst[18]);for(var R=0;R<286;R++)O.lhst[R]=0;for(R=0;R<30;R++)O.dhst[R]=0;for(R=0;R<19;R++)O.ihst[R]=0;var U=D<H&&D<Z?0:H<Z?1:2;if(z(f,p,s),z(f,p+1,U),p+=3,U==0){for(;(7&p)!=0;)p++;p=n.F._copyExact(l,d,u,f,p)}else{var k,W;if(U==1&&(k=O.fltree,W=O.fdtree),U==2){n.F.makeCodes(O.ltree,v),n.F.revCodes(O.ltree,v),n.F.makeCodes(O.dtree,w),n.F.revCodes(O.dtree,w),n.F.makeCodes(O.itree,x),n.F.revCodes(O.itree,x),k=O.ltree,W=O.dtree,M(f,p,_-257),M(f,p+=5,C-1),M(f,p+=5,A-4),p+=4;for(var B=0;B<A;B++)M(f,p+3*B,O.itree[1+(O.ordr[B]<<1)]);p+=3*A,p=n.F._codeTiny(T,O.itree,f,p),p=n.F._codeTiny(P,O.itree,f,p)}for(var I=d,G=0;G<o;G+=2){for(var V=i[G],X=V>>>23,F=I+(8388607&V);I<F;)p=n.F._writeLit(l[I++],k,f,p);if(X!=0){var q=i[G+1],oe=q>>16,re=q>>8&255,ee=255&q;M(f,p=n.F._writeLit(257+re,k,f,p),X-O.of0[re]),p+=O.exb[re],z(f,p=n.F._writeLit(ee,W,f,p),oe-O.df0[ee]),p+=O.dxb[ee],I+=X}}p=n.F._writeLit(256,k,f,p)}return p},n.F._copyExact=function(s,i,o,a,l){var d=l>>>3;return a[d]=o,a[d+1]=o>>>8,a[d+2]=255-a[d],a[d+3]=255-a[d+1],d+=4,a.set(new Uint8Array(s.buffer,i,o),d),l+(o+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,i=n.F._hufTree(s.lhst,s.ltree,15),o=n.F._hufTree(s.dhst,s.dtree,15),a=[],l=n.F._lenCodes(s.ltree,a),d=[],u=n.F._lenCodes(s.dtree,d),f=0;f<a.length;f+=2)s.ihst[a[f]]++;for(f=0;f<d.length;f+=2)s.ihst[d[f]]++;for(var p=n.F._hufTree(s.ihst,s.itree,7),m=19;m>4&&s.itree[1+(s.ordr[m-1]<<1)]==0;)m--;return[i,o,p,l,u,m,a,d]},n.F.getSecond=function(s){for(var i=[],o=0;o<s.length;o+=2)i.push(s[o+1]);return i},n.F.nonZero=function(s){for(var i="",o=0;o<s.length;o+=2)s[o+1]!=0&&(i+=(o>>1)+",");return i},n.F.contSize=function(s,i){for(var o=0,a=0;a<i.length;a++)o+=i[a]*s[1+(a<<1)];return o},n.F._codeTiny=function(s,i,o,a){for(var l=0;l<s.length;l+=2){var d=s[l],u=s[l+1];a=n.F._writeLit(d,i,o,a);var f=d==16?2:d==17?3:7;d>15&&(n.F._putsE(o,a,u,f),a+=f)}return a},n.F._lenCodes=function(s,i){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=s[a+1],d=a+3<o?s[a+3]:-1,u=a+5<o?s[a+5]:-1,f=a==0?-1:s[a-1];if(l==0&&d==l&&u==l){for(var p=a+5;p+2<o&&s[p+2]==l;)p+=2;(m=Math.min(p+1-a>>>1,138))<11?i.push(17,m-3):i.push(18,m-11),a+=2*m-2}else if(l==f&&d==l&&u==l){for(p=a+5;p+2<o&&s[p+2]==l;)p+=2;var m=Math.min(p+1-a>>>1,6);i.push(16,m-3),a+=2*m-2}else i.push(l,0)}return o>>>1},n.F._hufTree=function(s,i,o){var a=[],l=s.length,d=i.length,u=0;for(u=0;u<d;u+=2)i[u]=0,i[u+1]=0;for(u=0;u<l;u++)s[u]!=0&&a.push({lit:u,f:s[u]});var f=a.length,p=a.slice(0);if(f==0)return 0;if(f==1){var m=a[0].lit;return p=m==0?1:0,i[1+(m<<1)]=1,i[1+(p<<1)]=1,1}a.sort(function(T,P){return T.f-P.f});var v=a[0],w=a[1],x=0,_=1,C=2;for(a[0]={lit:-1,f:v.f+w.f,l:v,r:w,d:0};_!=f-1;)v=x!=_&&(C==f||a[x].f<a[C].f)?a[x++]:a[C++],w=x!=_&&(C==f||a[x].f<a[C].f)?a[x++]:a[C++],a[_++]={lit:-1,f:v.f+w.f,l:v,r:w};var A=n.F.setDepth(a[_-1],0);for(A>o&&(n.F.restrictDepth(p,o,A),A=o),u=0;u<f;u++)i[1+(p[u].lit<<1)]=p[u].d;return A},n.F.setDepth=function(s,i){return s.lit!=-1?(s.d=i,i):Math.max(n.F.setDepth(s.l,i+1),n.F.setDepth(s.r,i+1))},n.F.restrictDepth=function(s,i,o){var a=0,l=1<<o-i,d=0;for(s.sort(function(f,p){return p.d==f.d?f.f-p.f:p.d-f.d}),a=0;a<s.length&&s[a].d>i;a++){var u=s[a].d;s[a].d=i,d+=l-(1<<o-u)}for(d>>>=o-i;d>0;)(u=s[a].d)<i?(s[a].d++,d-=1<<i-u-1):a++;for(;a>=0;a--)s[a].d==i&&d<0&&(s[a].d--,d++);d!=0&&console.log("debt left")},n.F._goodIndex=function(s,i){var o=0;return i[16|o]<=s&&(o|=16),i[8|o]<=s&&(o|=8),i[4|o]<=s&&(o|=4),i[2|o]<=s&&(o|=2),i[1|o]<=s&&(o|=1),o},n.F._writeLit=function(s,i,o,a){return n.F._putsF(o,a,i[s<<1]),a+i[1+(s<<1)]},n.F.inflate=function(s,i){var o=Uint8Array;if(s[0]==3&&s[1]==0)return i||new o(0);var a=n.F,l=a._bitsF,d=a._bitsE,u=a._decodeTiny,f=a.makeCodes,p=a.codes2map,m=a._get17,v=a.U,w=i==null;w&&(i=new o(s.length>>>2<<3));for(var x,_,C=0,A=0,T=0,P=0,O=0,z=0,M=0,D=0,H=0;C==0;)if(C=l(s,H,1),A=l(s,H+1,2),H+=3,A!=0){if(w&&(i=n.F._check(i,D+(1<<17))),A==1&&(x=v.flmap,_=v.fdmap,z=511,M=31),A==2){T=d(s,H,5)+257,P=d(s,H+5,5)+1,O=d(s,H+10,4)+4,H+=14;for(var Z=0;Z<38;Z+=2)v.itree[Z]=0,v.itree[Z+1]=0;var R=1;for(Z=0;Z<O;Z++){var U=d(s,H+3*Z,3);v.itree[1+(v.ordr[Z]<<1)]=U,U>R&&(R=U)}H+=3*O,f(v.itree,R),p(v.itree,R,v.imap),x=v.lmap,_=v.dmap,H=u(v.imap,(1<<R)-1,T+P,s,H,v.ttree);var k=a._copyOut(v.ttree,0,T,v.ltree);z=(1<<k)-1;var W=a._copyOut(v.ttree,T,P,v.dtree);M=(1<<W)-1,f(v.ltree,k),p(v.ltree,k,x),f(v.dtree,W),p(v.dtree,W,_)}for(;;){var B=x[m(s,H)&z];H+=15&B;var I=B>>>4;if(!(I>>>8))i[D++]=I;else{if(I==256)break;var G=D+I-254;if(I>264){var V=v.ldef[I-257];G=D+(V>>>3)+d(s,H,7&V),H+=7&V}var X=_[m(s,H)&M];H+=15&X;var F=X>>>4,q=v.ddef[F],oe=(q>>>4)+l(s,H,15&q);for(H+=15&q,w&&(i=n.F._check(i,D+(1<<17)));D<G;)i[D]=i[D++-oe],i[D]=i[D++-oe],i[D]=i[D++-oe],i[D]=i[D++-oe];D=G}}}else{(7&H)!=0&&(H+=8-(7&H));var re=4+(H>>>3),ee=s[re-4]|s[re-3]<<8;w&&(i=n.F._check(i,D+ee)),i.set(new o(s.buffer,s.byteOffset+re,ee),D),H=re+ee<<3,D+=ee}return i.length==D?i:i.slice(0,D)},n.F._check=function(s,i){var o=s.length;if(i<=o)return s;var a=new Uint8Array(Math.max(o<<1,i));return a.set(s,0),a},n.F._decodeTiny=function(s,i,o,a,l,d){for(var u=n.F._bitsE,f=n.F._get17,p=0;p<o;){var m=s[f(a,l)&i];l+=15&m;var v=m>>>4;if(v<=15)d[p]=v,p++;else{var w=0,x=0;v==16?(x=3+u(a,l,2),l+=2,w=d[p-1]):v==17?(x=3+u(a,l,3),l+=3):v==18&&(x=11+u(a,l,7),l+=7);for(var _=p+x;p<_;)d[p]=w,p++}}return l},n.F._copyOut=function(s,i,o,a){for(var l=0,d=0,u=a.length>>>1;d<o;){var f=s[d+i];a[d<<1]=0,a[1+(d<<1)]=f,f>l&&(l=f),d++}for(;d<u;)a[d<<1]=0,a[1+(d<<1)]=0,d++;return l},n.F.makeCodes=function(s,i){for(var o,a,l,d,u=n.F.U,f=s.length,p=u.bl_count,m=0;m<=i;m++)p[m]=0;for(m=1;m<f;m+=2)p[s[m]]++;var v=u.next_code;for(o=0,p[0]=0,a=1;a<=i;a++)o=o+p[a-1]<<1,v[a]=o;for(l=0;l<f;l+=2)(d=s[l+1])!=0&&(s[l]=v[d],v[d]++)},n.F.codes2map=function(s,i,o){for(var a=s.length,l=n.F.U.rev15,d=0;d<a;d+=2)if(s[d+1]!=0)for(var u=d>>1,f=s[d+1],p=u<<4|f,m=i-f,v=s[d]<<m,w=v+(1<<m);v!=w;)o[l[v]>>>15-i]=p,v++},n.F.revCodes=function(s,i){for(var o=n.F.U.rev15,a=15-i,l=0;l<s.length;l+=2){var d=s[l]<<i-s[l+1];s[l]=o[d]>>>a}},n.F._putsE=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8},n.F._putsF=function(s,i,o){o<<=7&i;var a=i>>>3;s[a]|=o,s[a+1]|=o>>>8,s[a+2]|=o>>>16},n.F._bitsE=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8)>>>(7&i)&(1<<o)-1},n.F._bitsF=function(s,i,o){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)&(1<<o)-1},n.F._get17=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16)>>>(7&i)},n.F._get25=function(s,i){return(s[i>>>3]|s[1+(i>>>3)]<<8|s[2+(i>>>3)]<<16|s[3+(i>>>3)]<<24)>>>(7&i)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=n.F.U,i=0;i<32768;i++){var o=i;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[i]=(o>>>16|o<<16)>>>17}function a(l,d,u){for(;d--!=0;)l.push(0,u)}for(i=0;i<32;i++)s.ldef[i]=s.of0[i]<<3|s.exb[i],s.ddef[i]=s.df0[i]<<4|s.dxb[i];a(s.fltree,144,8),a(s.fltree,112,9),a(s.fltree,24,7),a(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),a(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),a(s.itree,19,0),a(s.ltree,286,0),a(s.dtree,30,0),a(s.ttree,320,0)}()})();var jie=Aie({__proto__:null,default:k0},[k0]);const Bs=function(){var r={nextZero(u,f){for(;u[f]!=0;)f++;return f},readUshort:(u,f)=>u[f]<<8|u[f+1],writeUshort(u,f,p){u[f]=p>>8&255,u[f+1]=255&p},readUint:(u,f)=>16777216*u[f]+(u[f+1]<<16|u[f+2]<<8|u[f+3]),writeUint(u,f,p){u[f]=p>>24&255,u[f+1]=p>>16&255,u[f+2]=p>>8&255,u[f+3]=255&p},readASCII(u,f,p){let m="";for(let v=0;v<p;v++)m+=String.fromCharCode(u[f+v]);return m},writeASCII(u,f,p){for(let m=0;m<p.length;m++)u[f+m]=p.charCodeAt(m)},readBytes(u,f,p){const m=[];for(let v=0;v<p;v++)m.push(u[f+v]);return m},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,f,p){let m,v="";for(let w=0;w<p;w++)v+=`%${r.pad(u[f+w].toString(16))}`;try{m=decodeURIComponent(v)}catch{return r.readASCII(u,f,p)}return m}};function e(u,f,p,m){const v=f*p,w=i(m),x=Math.ceil(f*w/8),_=new Uint8Array(4*v),C=new Uint32Array(_.buffer),{ctype:A}=m,{depth:T}=m,P=r.readUshort;if(A==6){const V=v<<2;if(T==8)for(var O=0;O<V;O+=4)_[O]=u[O],_[O+1]=u[O+1],_[O+2]=u[O+2],_[O+3]=u[O+3];if(T==16)for(O=0;O<V;O++)_[O]=u[O<<1]}else if(A==2){const V=m.tabs.tRNS;if(V==null){if(T==8)for(O=0;O<v;O++){var z=3*O;C[O]=255<<24|u[z+2]<<16|u[z+1]<<8|u[z]}if(T==16)for(O=0;O<v;O++)z=6*O,C[O]=255<<24|u[z+4]<<16|u[z+2]<<8|u[z]}else{var M=V[0];const X=V[1],F=V[2];if(T==8)for(O=0;O<v;O++){var D=O<<2;z=3*O,C[O]=255<<24|u[z+2]<<16|u[z+1]<<8|u[z],u[z]==M&&u[z+1]==X&&u[z+2]==F&&(_[D+3]=0)}if(T==16)for(O=0;O<v;O++)D=O<<2,z=6*O,C[O]=255<<24|u[z+4]<<16|u[z+2]<<8|u[z],P(u,z)==M&&P(u,z+2)==X&&P(u,z+4)==F&&(_[D+3]=0)}}else if(A==3){const V=m.tabs.PLTE,X=m.tabs.tRNS,F=X?X.length:0;if(T==1)for(var H=0;H<p;H++){var Z=H*x,R=H*f;for(O=0;O<f;O++){D=R+O<<2;var U=3*(k=u[Z+(O>>3)]>>7-((7&O)<<0)&1);_[D]=V[U],_[D+1]=V[U+1],_[D+2]=V[U+2],_[D+3]=k<F?X[k]:255}}if(T==2)for(H=0;H<p;H++)for(Z=H*x,R=H*f,O=0;O<f;O++)D=R+O<<2,U=3*(k=u[Z+(O>>2)]>>6-((3&O)<<1)&3),_[D]=V[U],_[D+1]=V[U+1],_[D+2]=V[U+2],_[D+3]=k<F?X[k]:255;if(T==4)for(H=0;H<p;H++)for(Z=H*x,R=H*f,O=0;O<f;O++)D=R+O<<2,U=3*(k=u[Z+(O>>1)]>>4-((1&O)<<2)&15),_[D]=V[U],_[D+1]=V[U+1],_[D+2]=V[U+2],_[D+3]=k<F?X[k]:255;if(T==8)for(O=0;O<v;O++){var k;D=O<<2,U=3*(k=u[O]),_[D]=V[U],_[D+1]=V[U+1],_[D+2]=V[U+2],_[D+3]=k<F?X[k]:255}}else if(A==4){if(T==8)for(O=0;O<v;O++){D=O<<2;var W=u[B=O<<1];_[D]=W,_[D+1]=W,_[D+2]=W,_[D+3]=u[B+1]}if(T==16)for(O=0;O<v;O++){var B;D=O<<2,W=u[B=O<<2],_[D]=W,_[D+1]=W,_[D+2]=W,_[D+3]=u[B+2]}}else if(A==0)for(M=m.tabs.tRNS?m.tabs.tRNS:-1,H=0;H<p;H++){const V=H*x,X=H*f;if(T==1)for(var I=0;I<f;I++){var G=(W=255*(u[V+(I>>>3)]>>>7-(7&I)&1))==255*M?0:255;C[X+I]=G<<24|W<<16|W<<8|W}else if(T==2)for(I=0;I<f;I++)G=(W=85*(u[V+(I>>>2)]>>>6-((3&I)<<1)&3))==85*M?0:255,C[X+I]=G<<24|W<<16|W<<8|W;else if(T==4)for(I=0;I<f;I++)G=(W=17*(u[V+(I>>>1)]>>>4-((1&I)<<2)&15))==17*M?0:255,C[X+I]=G<<24|W<<16|W<<8|W;else if(T==8)for(I=0;I<f;I++)G=(W=u[V+I])==M?0:255,C[X+I]=G<<24|W<<16|W<<8|W;else if(T==16)for(I=0;I<f;I++)W=u[V+(I<<1)],G=P(u,V+(I<<1))==M?0:255,C[X+I]=G<<24|W<<16|W<<8|W}return _}function t(u,f,p,m){const v=i(u),w=Math.ceil(p*v/8),x=new Uint8Array((w+1+u.interlace)*m);return f=u.tabs.CgBI?s(f,x):n(f,x),u.interlace==0?f=o(f,u,0,p,m):u.interlace==1&&(f=function(C,A){const T=A.width,P=A.height,O=i(A),z=O>>3,M=Math.ceil(T*O/8),D=new Uint8Array(P*M);let H=0;const Z=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],k=[8,8,4,4,2,2,1];let W=0;for(;W<7;){const I=U[W],G=k[W];let V=0,X=0,F=Z[W];for(;F<P;)F+=I,X++;let q=R[W];for(;q<T;)q+=G,V++;const oe=Math.ceil(V*O/8);o(C,A,H,V,X);let re=0,ee=Z[W];for(;ee<P;){let ye=R[W],ve=H+re*oe<<3;for(;ye<T;){var B;if(O==1&&(B=(B=C[ve>>3])>>7-(7&ve)&1,D[ee*M+(ye>>3)]|=B<<7-((7&ye)<<0)),O==2&&(B=(B=C[ve>>3])>>6-(7&ve)&3,D[ee*M+(ye>>2)]|=B<<6-((3&ye)<<1)),O==4&&(B=(B=C[ve>>3])>>4-(7&ve)&15,D[ee*M+(ye>>1)]|=B<<4-((1&ye)<<2)),O>=8){const he=ee*M+ye*z;for(let xe=0;xe<z;xe++)D[he+xe]=C[(ve>>3)+xe]}ve+=O,ye+=G}re++,ee+=I}V*X!=0&&(H+=X*(1+oe)),W+=1}return D}(f,u)),f}function n(u,f){return s(new Uint8Array(u.buffer,2,u.length-6),f)}var s=function(){const u={H:{}};return u.H.N=function(f,p){const m=Uint8Array;let v,w,x=0,_=0,C=0,A=0,T=0,P=0,O=0,z=0,M=0;if(f[0]==3&&f[1]==0)return p||new m(0);const D=u.H,H=D.b,Z=D.e,R=D.R,U=D.n,k=D.A,W=D.Z,B=D.m,I=p==null;for(I&&(p=new m(f.length>>>2<<5));x==0;)if(x=H(f,M,1),_=H(f,M+1,2),M+=3,_!=0){if(I&&(p=u.H.W(p,z+(1<<17))),_==1&&(v=B.J,w=B.h,P=511,O=31),_==2){C=Z(f,M,5)+257,A=Z(f,M+5,5)+1,T=Z(f,M+10,4)+4,M+=14;let V=1;for(var G=0;G<38;G+=2)B.Q[G]=0,B.Q[G+1]=0;for(G=0;G<T;G++){const q=Z(f,M+3*G,3);B.Q[1+(B.X[G]<<1)]=q,q>V&&(V=q)}M+=3*T,U(B.Q,V),k(B.Q,V,B.u),v=B.w,w=B.d,M=R(B.u,(1<<V)-1,C+A,f,M,B.v);const X=D.V(B.v,0,C,B.C);P=(1<<X)-1;const F=D.V(B.v,C,A,B.D);O=(1<<F)-1,U(B.C,X),k(B.C,X,v),U(B.D,F),k(B.D,F,w)}for(;;){const V=v[W(f,M)&P];M+=15&V;const X=V>>>4;if(!(X>>>8))p[z++]=X;else{if(X==256)break;{let F=z+X-254;if(X>264){const ye=B.q[X-257];F=z+(ye>>>3)+Z(f,M,7&ye),M+=7&ye}const q=w[W(f,M)&O];M+=15&q;const oe=q>>>4,re=B.c[oe],ee=(re>>>4)+H(f,M,15&re);for(M+=15&re;z<F;)p[z]=p[z++-ee],p[z]=p[z++-ee],p[z]=p[z++-ee],p[z]=p[z++-ee];z=F}}}}else{(7&M)!=0&&(M+=8-(7&M));const V=4+(M>>>3),X=f[V-4]|f[V-3]<<8;I&&(p=u.H.W(p,z+X)),p.set(new m(f.buffer,f.byteOffset+V,X),z),M=V+X<<3,z+=X}return p.length==z?p:p.slice(0,z)},u.H.W=function(f,p){const m=f.length;if(p<=m)return f;const v=new Uint8Array(m<<1);return v.set(f,0),v},u.H.R=function(f,p,m,v,w,x){const _=u.H.e,C=u.H.Z;let A=0;for(;A<m;){const T=f[C(v,w)&p];w+=15&T;const P=T>>>4;if(P<=15)x[A]=P,A++;else{let O=0,z=0;P==16?(z=3+_(v,w,2),w+=2,O=x[A-1]):P==17?(z=3+_(v,w,3),w+=3):P==18&&(z=11+_(v,w,7),w+=7);const M=A+z;for(;A<M;)x[A]=O,A++}}return w},u.H.V=function(f,p,m,v){let w=0,x=0;const _=v.length>>>1;for(;x<m;){const C=f[x+p];v[x<<1]=0,v[1+(x<<1)]=C,C>w&&(w=C),x++}for(;x<_;)v[x<<1]=0,v[1+(x<<1)]=0,x++;return w},u.H.n=function(f,p){const m=u.H.m,v=f.length;let w,x,_,C;const A=m.j;for(var T=0;T<=p;T++)A[T]=0;for(T=1;T<v;T+=2)A[f[T]]++;const P=m.K;for(w=0,A[0]=0,x=1;x<=p;x++)w=w+A[x-1]<<1,P[x]=w;for(_=0;_<v;_+=2)C=f[_+1],C!=0&&(f[_]=P[C],P[C]++)},u.H.A=function(f,p,m){const v=f.length,w=u.H.m.r;for(let x=0;x<v;x+=2)if(f[x+1]!=0){const _=x>>1,C=f[x+1],A=_<<4|C,T=p-C;let P=f[x]<<T;const O=P+(1<<T);for(;P!=O;)m[w[P]>>>15-p]=A,P++}},u.H.l=function(f,p){const m=u.H.m.r,v=15-p;for(let w=0;w<f.length;w+=2){const x=f[w]<<p-f[w+1];f[w]=m[x]>>>v}},u.H.M=function(f,p,m){m<<=7&p;const v=p>>>3;f[v]|=m,f[v+1]|=m>>>8},u.H.I=function(f,p,m){m<<=7&p;const v=p>>>3;f[v]|=m,f[v+1]|=m>>>8,f[v+2]|=m>>>16},u.H.e=function(f,p,m){return(f[p>>>3]|f[1+(p>>>3)]<<8)>>>(7&p)&(1<<m)-1},u.H.b=function(f,p,m){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16)>>>(7&p)&(1<<m)-1},u.H.Z=function(f,p){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16)>>>(7&p)},u.H.i=function(f,p){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16|f[3+(p>>>3)]<<24)>>>(7&p)},u.H.m=function(){const f=Uint16Array,p=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=u.H.m;for(var p=0;p<32768;p++){let v=p;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,f.r[p]=(v>>>16|v<<16)>>>17}function m(v,w,x){for(;w--!=0;)v.push(0,x)}for(p=0;p<32;p++)f.q[p]=f.S[p]<<3|f.T[p],f.c[p]=f.p[p]<<4|f.z[p];m(f._,144,8),m(f._,112,9),m(f._,24,7),m(f._,8,8),u.H.n(f._,9),u.H.A(f._,9,f.J),u.H.l(f._,9),m(f.$,32,5),u.H.n(f.$,5),u.H.A(f.$,5,f.h),u.H.l(f.$,5),m(f.Q,19,0),m(f.C,286,0),m(f.D,30,0),m(f.v,320,0)}(),u.H.N}();function i(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,f,p,m,v){let w=i(f);const x=Math.ceil(m*w/8);let _,C;w=Math.ceil(w/8);let A=u[p],T=0;if(A>1&&(u[p]=[0,0,1][A-2]),A==3)for(T=w;T<x;T++)u[T+1]=u[T+1]+(u[T+1-w]>>>1)&255;for(let P=0;P<v;P++)if(_=p+P*x,C=_+P+1,A=u[C-1],T=0,A==0)for(;T<x;T++)u[_+T]=u[C+T];else if(A==1){for(;T<w;T++)u[_+T]=u[C+T];for(;T<x;T++)u[_+T]=u[C+T]+u[_+T-w]}else if(A==2)for(;T<x;T++)u[_+T]=u[C+T]+u[_+T-x];else if(A==3){for(;T<w;T++)u[_+T]=u[C+T]+(u[_+T-x]>>>1);for(;T<x;T++)u[_+T]=u[C+T]+(u[_+T-x]+u[_+T-w]>>>1)}else{for(;T<w;T++)u[_+T]=u[C+T]+a(0,u[_+T-x],0);for(;T<x;T++)u[_+T]=u[C+T]+a(u[_+T-w],u[_+T-x],u[_+T-w-x])}return u}function a(u,f,p){const m=u+f-p,v=m-u,w=m-f,x=m-p;return v*v<=w*w&&v*v<=x*x?u:w*w<=x*x?f:p}function l(u,f,p){p.width=r.readUint(u,f),f+=4,p.height=r.readUint(u,f),f+=4,p.depth=u[f],f++,p.ctype=u[f],f++,p.compress=u[f],f++,p.filter=u[f],f++,p.interlace=u[f],f++}function d(u,f,p,m,v,w,x,_,C){const A=Math.min(f,v),T=Math.min(p,w);let P=0,O=0;for(let W=0;W<T;W++)for(let B=0;B<A;B++)if(x>=0&&_>=0?(P=W*f+B<<2,O=(_+W)*v+x+B<<2):(P=(-_+W)*f-x+B<<2,O=W*v+B<<2),C==0)m[O]=u[P],m[O+1]=u[P+1],m[O+2]=u[P+2],m[O+3]=u[P+3];else if(C==1){var z=u[P+3]*.00392156862745098,M=u[P]*z,D=u[P+1]*z,H=u[P+2]*z,Z=m[O+3]*(1/255),R=m[O]*Z,U=m[O+1]*Z,k=m[O+2]*Z;const I=1-z,G=z+Z*I,V=G==0?0:1/G;m[O+3]=255*G,m[O+0]=(M+R*I)*V,m[O+1]=(D+U*I)*V,m[O+2]=(H+k*I)*V}else if(C==2)z=u[P+3],M=u[P],D=u[P+1],H=u[P+2],Z=m[O+3],R=m[O],U=m[O+1],k=m[O+2],z==Z&&M==R&&D==U&&H==k?(m[O]=0,m[O+1]=0,m[O+2]=0,m[O+3]=0):(m[O]=M,m[O+1]=D,m[O+2]=H,m[O+3]=z);else if(C==3){if(z=u[P+3],M=u[P],D=u[P+1],H=u[P+2],Z=m[O+3],R=m[O],U=m[O+1],k=m[O+2],z==Z&&M==R&&D==U&&H==k)continue;if(z<220&&Z>20)return!1}return!0}return{decode:function(f){const p=new Uint8Array(f);let m=8;const v=r,w=v.readUshort,x=v.readUint,_={tabs:{},frames:[]},C=new Uint8Array(p.length);let A,T=0,P=0;const O=[137,80,78,71,13,10,26,10];for(var z=0;z<8;z++)if(p[z]!=O[z])throw"The input is not a PNG file!";for(;m<p.length;){const W=v.readUint(p,m);m+=4;const B=v.readASCII(p,m,4);if(m+=4,B=="IHDR")l(p,m,_);else if(B=="iCCP"){for(var M=m;p[M]!=0;)M++;v.readASCII(p,m,M-m),p[M+1];const I=p.slice(M+2,m+W);let G=null;try{G=n(I)}catch{G=s(I)}_.tabs[B]=G}else if(B=="CgBI")_.tabs[B]=p.slice(m,m+4);else if(B=="IDAT"){for(z=0;z<W;z++)C[T+z]=p[m+z];T+=W}else if(B=="acTL")_.tabs[B]={num_frames:x(p,m),num_plays:x(p,m+4)},A=new Uint8Array(p.length);else if(B=="fcTL"){P!=0&&((k=_.frames[_.frames.length-1]).data=t(_,A.slice(0,P),k.rect.width,k.rect.height),P=0);const I={x:x(p,m+12),y:x(p,m+16),width:x(p,m+4),height:x(p,m+8)};let G=w(p,m+22);G=w(p,m+20)/(G==0?100:G);const V={rect:I,delay:Math.round(1e3*G),dispose:p[m+24],blend:p[m+25]};_.frames.push(V)}else if(B=="fdAT"){for(z=0;z<W-4;z++)A[P+z]=p[m+z+4];P+=W-4}else if(B=="pHYs")_.tabs[B]=[v.readUint(p,m),v.readUint(p,m+4),p[m+8]];else if(B=="cHRM")for(_.tabs[B]=[],z=0;z<8;z++)_.tabs[B].push(v.readUint(p,m+4*z));else if(B=="tEXt"||B=="zTXt"){_.tabs[B]==null&&(_.tabs[B]={});var D=v.nextZero(p,m),H=v.readASCII(p,m,D-m),Z=m+W-D-1;if(B=="tEXt")U=v.readASCII(p,D+1,Z);else{var R=n(p.slice(D+2,D+2+Z));U=v.readUTF8(R,0,R.length)}_.tabs[B][H]=U}else if(B=="iTXt"){_.tabs[B]==null&&(_.tabs[B]={}),D=0,M=m,D=v.nextZero(p,M),H=v.readASCII(p,M,D-M);const I=p[M=D+1];var U;p[M+1],M+=2,D=v.nextZero(p,M),v.readASCII(p,M,D-M),M=D+1,D=v.nextZero(p,M),v.readUTF8(p,M,D-M),Z=W-((M=D+1)-m),I==0?U=v.readUTF8(p,M,Z):(R=n(p.slice(M,M+Z)),U=v.readUTF8(R,0,R.length)),_.tabs[B][H]=U}else if(B=="PLTE")_.tabs[B]=v.readBytes(p,m,W);else if(B=="hIST"){const I=_.tabs.PLTE.length/3;for(_.tabs[B]=[],z=0;z<I;z++)_.tabs[B].push(w(p,m+2*z))}else if(B=="tRNS")_.ctype==3?_.tabs[B]=v.readBytes(p,m,W):_.ctype==0?_.tabs[B]=w(p,m):_.ctype==2&&(_.tabs[B]=[w(p,m),w(p,m+2),w(p,m+4)]);else if(B=="gAMA")_.tabs[B]=v.readUint(p,m)/1e5;else if(B=="sRGB")_.tabs[B]=p[m];else if(B=="bKGD")_.ctype==0||_.ctype==4?_.tabs[B]=[w(p,m)]:_.ctype==2||_.ctype==6?_.tabs[B]=[w(p,m),w(p,m+2),w(p,m+4)]:_.ctype==3&&(_.tabs[B]=p[m]);else if(B=="IEND")break;m+=W,v.readUint(p,m),m+=4}var k;return P!=0&&((k=_.frames[_.frames.length-1]).data=t(_,A.slice(0,P),k.rect.width,k.rect.height)),_.data=t(_,C,_.width,_.height),delete _.compress,delete _.interlace,delete _.filter,_},toRGBA8:function(f){const p=f.width,m=f.height;if(f.tabs.acTL==null)return[e(f.data,p,m,f).buffer];const v=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const w=p*m*4,x=new Uint8Array(w),_=new Uint8Array(w),C=new Uint8Array(w);for(let T=0;T<f.frames.length;T++){const P=f.frames[T],O=P.rect.x,z=P.rect.y,M=P.rect.width,D=P.rect.height,H=e(P.data,M,D,f);if(T!=0)for(var A=0;A<w;A++)C[A]=x[A];if(P.blend==0?d(H,M,D,x,p,m,O,z,0):P.blend==1&&d(H,M,D,x,p,m,O,z,1),v.push(x.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)d(_,M,D,x,p,m,O,z,0);else if(P.dispose==2)for(A=0;A<w;A++)x[A]=C[A]}}return v},_paeth:a,_copyTile:d,_bin:r}}();(function(){const{_copyTile:r}=Bs,{_bin:e}=Bs,t=Bs._paeth;var n={table:function(){const M=new Uint32Array(256);for(let D=0;D<256;D++){let H=D;for(let Z=0;Z<8;Z++)1&H?H=3988292384^H>>>1:H>>>=1;M[D]=H}return M}(),update(M,D,H,Z){for(let R=0;R<Z;R++)M=n.table[255&(M^D[H+R])]^M>>>8;return M},crc:(M,D,H)=>4294967295^n.update(4294967295,M,D,H)};function s(M,D,H,Z){D[H]+=M[0]*Z>>4,D[H+1]+=M[1]*Z>>4,D[H+2]+=M[2]*Z>>4,D[H+3]+=M[3]*Z>>4}function i(M){return Math.max(0,Math.min(255,M))}function o(M,D){const H=M[0]-D[0],Z=M[1]-D[1],R=M[2]-D[2],U=M[3]-D[3];return H*H+Z*Z+R*R+U*U}function a(M,D,H,Z,R,U,k){k==null&&(k=1);const W=Z.length,B=[];for(var I=0;I<W;I++){const ee=Z[I];B.push([ee>>>0&255,ee>>>8&255,ee>>>16&255,ee>>>24&255])}for(I=0;I<W;I++){let ee=4294967295;for(var G=0,V=0;V<W;V++){var X=o(B[I],B[V]);V!=I&&X<ee&&(ee=X,G=V)}}const F=new Uint32Array(R.buffer),q=new Int16Array(D*H*4),oe=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(I=0;I<oe.length;I++)oe[I]=255*((oe[I]+.5)/16-.5);for(let ee=0;ee<H;ee++)for(let ye=0;ye<D;ye++){var re;I=4*(ee*D+ye),k!=2?re=[i(M[I]+q[I]),i(M[I+1]+q[I+1]),i(M[I+2]+q[I+2]),i(M[I+3]+q[I+3])]:(X=oe[4*(3&ee)+(3&ye)],re=[i(M[I]+X),i(M[I+1]+X),i(M[I+2]+X),i(M[I+3]+X)]),G=0;let ve=16777215;for(V=0;V<W;V++){const Ce=o(re,B[V]);Ce<ve&&(ve=Ce,G=V)}const he=B[G],xe=[re[0]-he[0],re[1]-he[1],re[2]-he[2],re[3]-he[3]];k==1&&(ye!=D-1&&s(xe,q,I+4,7),ee!=H-1&&(ye!=0&&s(xe,q,I+4*D-4,3),s(xe,q,I+4*D,5),ye!=D-1&&s(xe,q,I+4*D+4,1))),U[I>>2]=G,F[I>>2]=Z[G]}}function l(M,D,H,Z,R){R==null&&(R={});const{crc:U}=n,k=e.writeUint,W=e.writeUshort,B=e.writeASCII;let I=8;const G=M.frames.length>1;let V,X=!1,F=33+(G?20:0);if(R.sRGB!=null&&(F+=13),R.pHYs!=null&&(F+=21),R.iCCP!=null&&(V=pako.deflate(R.iCCP),F+=21+V.length+4),M.ctype==3){for(var q=M.plte.length,oe=0;oe<q;oe++)M.plte[oe]>>>24!=255&&(X=!0);F+=8+3*q+4+(X?8+1*q+4:0)}for(var re=0;re<M.frames.length;re++)G&&(F+=38),F+=(he=M.frames[re]).cimg.length+12,re!=0&&(F+=4);F+=12;const ee=new Uint8Array(F),ye=[137,80,78,71,13,10,26,10];for(oe=0;oe<8;oe++)ee[oe]=ye[oe];if(k(ee,I,13),I+=4,B(ee,I,"IHDR"),I+=4,k(ee,I,D),I+=4,k(ee,I,H),I+=4,ee[I]=M.depth,I++,ee[I]=M.ctype,I++,ee[I]=0,I++,ee[I]=0,I++,ee[I]=0,I++,k(ee,I,U(ee,I-17,17)),I+=4,R.sRGB!=null&&(k(ee,I,1),I+=4,B(ee,I,"sRGB"),I+=4,ee[I]=R.sRGB,I++,k(ee,I,U(ee,I-5,5)),I+=4),R.iCCP!=null){const xe=13+V.length;k(ee,I,xe),I+=4,B(ee,I,"iCCP"),I+=4,B(ee,I,"ICC profile"),I+=11,I+=2,ee.set(V,I),I+=V.length,k(ee,I,U(ee,I-(xe+4),xe+4)),I+=4}if(R.pHYs!=null&&(k(ee,I,9),I+=4,B(ee,I,"pHYs"),I+=4,k(ee,I,R.pHYs[0]),I+=4,k(ee,I,R.pHYs[1]),I+=4,ee[I]=R.pHYs[2],I++,k(ee,I,U(ee,I-13,13)),I+=4),G&&(k(ee,I,8),I+=4,B(ee,I,"acTL"),I+=4,k(ee,I,M.frames.length),I+=4,k(ee,I,R.loop!=null?R.loop:0),I+=4,k(ee,I,U(ee,I-12,12)),I+=4),M.ctype==3){for(k(ee,I,3*(q=M.plte.length)),I+=4,B(ee,I,"PLTE"),I+=4,oe=0;oe<q;oe++){const xe=3*oe,Ce=M.plte[oe],ue=255&Ce,_e=Ce>>>8&255,Ie=Ce>>>16&255;ee[I+xe+0]=ue,ee[I+xe+1]=_e,ee[I+xe+2]=Ie}if(I+=3*q,k(ee,I,U(ee,I-3*q-4,3*q+4)),I+=4,X){for(k(ee,I,q),I+=4,B(ee,I,"tRNS"),I+=4,oe=0;oe<q;oe++)ee[I+oe]=M.plte[oe]>>>24&255;I+=q,k(ee,I,U(ee,I-q-4,q+4)),I+=4}}let ve=0;for(re=0;re<M.frames.length;re++){var he=M.frames[re];G&&(k(ee,I,26),I+=4,B(ee,I,"fcTL"),I+=4,k(ee,I,ve++),I+=4,k(ee,I,he.rect.width),I+=4,k(ee,I,he.rect.height),I+=4,k(ee,I,he.rect.x),I+=4,k(ee,I,he.rect.y),I+=4,W(ee,I,Z[re]),I+=2,W(ee,I,1e3),I+=2,ee[I]=he.dispose,I++,ee[I]=he.blend,I++,k(ee,I,U(ee,I-30,30)),I+=4);const xe=he.cimg;k(ee,I,(q=xe.length)+(re==0?0:4)),I+=4;const Ce=I;B(ee,I,re==0?"IDAT":"fdAT"),I+=4,re!=0&&(k(ee,I,ve++),I+=4),ee.set(xe,I),I+=q,k(ee,I,U(ee,Ce,I-Ce)),I+=4}return k(ee,I,0),I+=4,B(ee,I,"IEND"),I+=4,k(ee,I,U(ee,I-4,4)),I+=4,ee.buffer}function d(M,D,H){for(let Z=0;Z<M.frames.length;Z++){const R=M.frames[Z];R.rect.width;const U=R.rect.height,k=new Uint8Array(U*R.bpl+U);R.cimg=m(R.img,U,R.bpp,R.bpl,k,D,H)}}function u(M,D,H,Z,R){const U=R[0],k=R[1],W=R[2],B=R[3],I=R[4],G=R[5];let V=6,X=8,F=255;for(var q=0;q<M.length;q++){const te=new Uint8Array(M[q]);for(var oe=te.length,re=0;re<oe;re+=4)F&=te[re+3]}const ee=F!=255,ye=function(Y,N,L,J,ne,Q){const ie=[];for(var le=0;le<Y.length;le++){const yt=new Uint8Array(Y[le]),St=new Uint32Array(yt.buffer);var de;let zt=0,gt=0,Gt=N,nr=L,Ft=J?1:0;if(le!=0){const Re=Q||J||le==1||ie[le-2].dispose!=0?1:2;let Ee=0,Xe=1e9;for(let $e=0;$e<Re;$e++){var ke=new Uint8Array(Y[le-1-$e]);const nt=new Uint32Array(Y[le-1-$e]);let st=N,wt=L,ur=-1,en=-1;for(let ls=0;ls<L;ls++)for(let Kn=0;Kn<N;Kn++)St[De=ls*N+Kn]!=nt[De]&&(Kn<st&&(st=Kn),Kn>ur&&(ur=Kn),ls<wt&&(wt=ls),ls>en&&(en=ls));ur==-1&&(st=wt=ur=en=0),ne&&((1&st)==1&&st--,(1&wt)==1&&wt--);const Po=(ur-st+1)*(en-wt+1);Po<Xe&&(Xe=Po,Ee=$e,zt=st,gt=wt,Gt=ur-st+1,nr=en-wt+1)}ke=new Uint8Array(Y[le-1-Ee]),Ee==1&&(ie[le-1].dispose=2),de=new Uint8Array(Gt*nr*4),r(ke,N,L,de,Gt,nr,-zt,-gt,0),Ft=r(yt,N,L,de,Gt,nr,-zt,-gt,3)?1:0,Ft==1?p(yt,N,L,de,{x:zt,y:gt,width:Gt,height:nr}):r(yt,N,L,de,Gt,nr,-zt,-gt,0)}else de=yt.slice(0);ie.push({rect:{x:zt,y:gt,width:Gt,height:nr},img:de,blend:Ft,dispose:0})}if(J)for(le=0;le<ie.length;le++){if((ot=ie[le]).blend==1)continue;const yt=ot.rect,St=ie[le-1].rect,zt=Math.min(yt.x,St.x),gt=Math.min(yt.y,St.y),Gt={x:zt,y:gt,width:Math.max(yt.x+yt.width,St.x+St.width)-zt,height:Math.max(yt.y+yt.height,St.y+St.height)-gt};ie[le-1].dispose=1,le-1!=0&&f(Y,N,L,ie,le-1,Gt,ne),f(Y,N,L,ie,le,Gt,ne)}let Te=0;if(Y.length!=1)for(var De=0;De<ie.length;De++){var ot;Te+=(ot=ie[De]).rect.width*ot.rect.height}return ie}(M,D,H,U,k,W),ve={},he=[],xe=[];if(Z!=0){const te=[];for(re=0;re<ye.length;re++)te.push(ye[re].img.buffer);const Y=function(ne){let Q=0;for(var ie=0;ie<ne.length;ie++)Q+=ne[ie].byteLength;const le=new Uint8Array(Q);let de=0;for(ie=0;ie<ne.length;ie++){const ke=new Uint8Array(ne[ie]),Te=ke.length;for(let De=0;De<Te;De+=4){let ot=ke[De],yt=ke[De+1],St=ke[De+2];const zt=ke[De+3];zt==0&&(ot=yt=St=0),le[de+De]=ot,le[de+De+1]=yt,le[de+De+2]=St,le[de+De+3]=zt}de+=Te}return le.buffer}(te),N=w(Y,Z);for(re=0;re<N.plte.length;re++)he.push(N.plte[re].est.rgba);let L=0;for(re=0;re<ye.length;re++){const J=(ue=ye[re]).img.length;var Ce=new Uint8Array(N.inds.buffer,L>>2,J>>2);xe.push(Ce);const ne=new Uint8Array(N.abuf,L,J);G&&a(ue.img,ue.rect.width,ue.rect.height,he,ne,Ce),ue.img.set(ne),L+=J}}else for(q=0;q<ye.length;q++){var ue=ye[q];const te=new Uint32Array(ue.img.buffer);var _e=ue.rect.width;for(oe=te.length,Ce=new Uint8Array(oe),xe.push(Ce),re=0;re<oe;re++){const Y=te[re];if(re!=0&&Y==te[re-1])Ce[re]=Ce[re-1];else if(re>_e&&Y==te[re-_e])Ce[re]=Ce[re-_e];else{let N=ve[Y];if(N==null&&(ve[Y]=N=he.length,he.push(Y),he.length>=300))break;Ce[re]=N}}}const Ie=he.length;for(Ie<=256&&I==0&&(X=Ie<=2?1:Ie<=4?2:Ie<=16?4:8,X=Math.max(X,B)),q=0;q<ye.length;q++){(ue=ye[q]).rect.x,ue.rect.y,_e=ue.rect.width;const te=ue.rect.height;let Y=ue.img;new Uint32Array(Y.buffer);let N=4*_e,L=4;if(Ie<=256&&I==0){N=Math.ceil(X*_e/8);var $=new Uint8Array(N*te);const J=xe[q];for(let ne=0;ne<te;ne++){re=ne*N;const Q=ne*_e;if(X==8)for(var me=0;me<_e;me++)$[re+me]=J[Q+me];else if(X==4)for(me=0;me<_e;me++)$[re+(me>>1)]|=J[Q+me]<<4-4*(1&me);else if(X==2)for(me=0;me<_e;me++)$[re+(me>>2)]|=J[Q+me]<<6-2*(3&me);else if(X==1)for(me=0;me<_e;me++)$[re+(me>>3)]|=J[Q+me]<<7-1*(7&me)}Y=$,V=3,L=1}else if(ee==0&&ye.length==1){$=new Uint8Array(_e*te*3);const J=_e*te;for(re=0;re<J;re++){const ne=3*re,Q=4*re;$[ne]=Y[Q],$[ne+1]=Y[Q+1],$[ne+2]=Y[Q+2]}Y=$,V=2,L=3,N=3*_e}ue.img=Y,ue.bpl=N,ue.bpp=L}return{ctype:V,depth:X,plte:he,frames:ye}}function f(M,D,H,Z,R,U,k){const W=Uint8Array,B=Uint32Array,I=new W(M[R-1]),G=new B(M[R-1]),V=R+1<M.length?new W(M[R+1]):null,X=new W(M[R]),F=new B(X.buffer);let q=D,oe=H,re=-1,ee=-1;for(let ve=0;ve<U.height;ve++)for(let he=0;he<U.width;he++){const xe=U.x+he,Ce=U.y+ve,ue=Ce*D+xe,_e=F[ue];_e==0||Z[R-1].dispose==0&&G[ue]==_e&&(V==null||V[4*ue+3]!=0)||(xe<q&&(q=xe),xe>re&&(re=xe),Ce<oe&&(oe=Ce),Ce>ee&&(ee=Ce))}re==-1&&(q=oe=re=ee=0),k&&((1&q)==1&&q--,(1&oe)==1&&oe--),U={x:q,y:oe,width:re-q+1,height:ee-oe+1};const ye=Z[R];ye.rect=U,ye.blend=1,ye.img=new Uint8Array(U.width*U.height*4),Z[R-1].dispose==0?(r(I,D,H,ye.img,U.width,U.height,-U.x,-U.y,0),p(X,D,H,ye.img,U)):r(X,D,H,ye.img,U.width,U.height,-U.x,-U.y,0)}function p(M,D,H,Z,R){r(M,D,H,Z,R.width,R.height,-R.x,-R.y,2)}function m(M,D,H,Z,R,U,k){const W=[];let B,I=[0,1,2,3,4];U!=-1?I=[U]:(D*Z>5e5||H==1)&&(I=[0]),k&&(B={level:0});const G=jie;for(var V=0;V<I.length;V++){for(let q=0;q<D;q++)v(R,M,q,Z,H,I[V]);W.push(G.deflate(R,B))}let X,F=1e9;for(V=0;V<W.length;V++)W[V].length<F&&(X=V,F=W[V].length);return W[X]}function v(M,D,H,Z,R,U){const k=H*Z;let W=k+H;if(M[W]=U,W++,U==0)if(Z<500)for(var B=0;B<Z;B++)M[W+B]=D[k+B];else M.set(new Uint8Array(D.buffer,k,Z),W);else if(U==1){for(B=0;B<R;B++)M[W+B]=D[k+B];for(B=R;B<Z;B++)M[W+B]=D[k+B]-D[k+B-R]+256&255}else if(H==0){for(B=0;B<R;B++)M[W+B]=D[k+B];if(U==2)for(B=R;B<Z;B++)M[W+B]=D[k+B];if(U==3)for(B=R;B<Z;B++)M[W+B]=D[k+B]-(D[k+B-R]>>1)+256&255;if(U==4)for(B=R;B<Z;B++)M[W+B]=D[k+B]-t(D[k+B-R],0,0)+256&255}else{if(U==2)for(B=0;B<Z;B++)M[W+B]=D[k+B]+256-D[k+B-Z]&255;if(U==3){for(B=0;B<R;B++)M[W+B]=D[k+B]+256-(D[k+B-Z]>>1)&255;for(B=R;B<Z;B++)M[W+B]=D[k+B]+256-(D[k+B-Z]+D[k+B-R]>>1)&255}if(U==4){for(B=0;B<R;B++)M[W+B]=D[k+B]+256-t(0,D[k+B-Z],0)&255;for(B=R;B<Z;B++)M[W+B]=D[k+B]+256-t(D[k+B-R],D[k+B-Z],D[k+B-R-Z])&255}}}function w(M,D){const H=new Uint8Array(M),Z=H.slice(0),R=new Uint32Array(Z.buffer),U=x(Z,D),k=U[0],W=U[1],B=H.length,I=new Uint8Array(B>>2);let G;if(H.length<2e7)for(var V=0;V<B;V+=4)G=_(k,X=H[V]*(1/255),F=H[V+1]*(1/255),q=H[V+2]*(1/255),oe=H[V+3]*(1/255)),I[V>>2]=G.ind,R[V>>2]=G.est.rgba;else for(V=0;V<B;V+=4){var X=H[V]*.00392156862745098,F=H[V+1]*(1/255),q=H[V+2]*(1/255),oe=H[V+3]*(1/255);for(G=k;G.left;)G=C(G.est,X,F,q,oe)<=0?G.left:G.right;I[V>>2]=G.ind,R[V>>2]=G.est.rgba}return{abuf:Z.buffer,inds:I,plte:W}}function x(M,D,H){H==null&&(H=1e-4);const Z=new Uint32Array(M.buffer),R={i0:0,i1:M.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=P(M,R.i0,R.i1),R.est=O(R.bst);const U=[R];for(;U.length<D;){let W=0,B=0;for(var k=0;k<U.length;k++)U[k].est.L>W&&(W=U[k].est.L,B=k);if(W<H)break;const I=U[B],G=A(M,Z,I.i0,I.i1,I.est.e,I.est.eMq255);if(I.i0>=G||I.i1<=G){I.est.L=0;continue}const V={i0:I.i0,i1:G,bst:null,est:null,tdst:0,left:null,right:null};V.bst=P(M,V.i0,V.i1),V.est=O(V.bst);const X={i0:G,i1:I.i1,bst:null,est:null,tdst:0,left:null,right:null};for(X.bst={R:[],m:[],N:I.bst.N-V.bst.N},k=0;k<16;k++)X.bst.R[k]=I.bst.R[k]-V.bst.R[k];for(k=0;k<4;k++)X.bst.m[k]=I.bst.m[k]-V.bst.m[k];X.est=O(X.bst),I.left=V,I.right=X,U[B]=V,U.push(X)}for(U.sort((W,B)=>B.bst.N-W.bst.N),k=0;k<U.length;k++)U[k].ind=k;return[R,U]}function _(M,D,H,Z,R){if(M.left==null)return M.tdst=function(V,X,F,q,oe){const re=X-V[0],ee=F-V[1],ye=q-V[2],ve=oe-V[3];return re*re+ee*ee+ye*ye+ve*ve}(M.est.q,D,H,Z,R),M;const U=C(M.est,D,H,Z,R);let k=M.left,W=M.right;U>0&&(k=M.right,W=M.left);const B=_(k,D,H,Z,R);if(B.tdst<=U*U)return B;const I=_(W,D,H,Z,R);return I.tdst<B.tdst?I:B}function C(M,D,H,Z,R){const{e:U}=M;return U[0]*D+U[1]*H+U[2]*Z+U[3]*R-M.eMq}function A(M,D,H,Z,R,U){for(Z-=4;H<Z;){for(;T(M,H,R)<=U;)H+=4;for(;T(M,Z,R)>U;)Z-=4;if(H>=Z)break;const k=D[H>>2];D[H>>2]=D[Z>>2],D[Z>>2]=k,H+=4,Z-=4}for(;T(M,H,R)>U;)H-=4;return H+4}function T(M,D,H){return M[D]*H[0]+M[D+1]*H[1]+M[D+2]*H[2]+M[D+3]*H[3]}function P(M,D,H){const Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],U=H-D>>2;for(let k=D;k<H;k+=4){const W=M[k]*.00392156862745098,B=M[k+1]*(1/255),I=M[k+2]*(1/255),G=M[k+3]*(1/255);R[0]+=W,R[1]+=B,R[2]+=I,R[3]+=G,Z[0]+=W*W,Z[1]+=W*B,Z[2]+=W*I,Z[3]+=W*G,Z[5]+=B*B,Z[6]+=B*I,Z[7]+=B*G,Z[10]+=I*I,Z[11]+=I*G,Z[15]+=G*G}return Z[4]=Z[1],Z[8]=Z[2],Z[9]=Z[6],Z[12]=Z[3],Z[13]=Z[7],Z[14]=Z[11],{R:Z,m:R,N:U}}function O(M){const{R:D}=M,{m:H}=M,{N:Z}=M,R=H[0],U=H[1],k=H[2],W=H[3],B=Z==0?0:1/Z,I=[D[0]-R*R*B,D[1]-R*U*B,D[2]-R*k*B,D[3]-R*W*B,D[4]-U*R*B,D[5]-U*U*B,D[6]-U*k*B,D[7]-U*W*B,D[8]-k*R*B,D[9]-k*U*B,D[10]-k*k*B,D[11]-k*W*B,D[12]-W*R*B,D[13]-W*U*B,D[14]-W*k*B,D[15]-W*W*B],G=I,V=z;let X=[Math.random(),Math.random(),Math.random(),Math.random()],F=0,q=0;if(Z!=0)for(let re=0;re<16&&(X=V.multVec(G,X),q=Math.sqrt(V.dot(X,X)),X=V.sml(1/q,X),!(re!=0&&Math.abs(q-F)<1e-9));re++)F=q;const oe=[R*B,U*B,k*B,W*B];return{Cov:I,q:oe,e:X,L:F,eMq255:V.dot(V.sml(255,oe),X),eMq:V.dot(X,oe),rgba:(Math.round(255*oe[3])<<24|Math.round(255*oe[2])<<16|Math.round(255*oe[1])<<8|Math.round(255*oe[0])<<0)>>>0}}var z={multVec:(M,D)=>[M[0]*D[0]+M[1]*D[1]+M[2]*D[2]+M[3]*D[3],M[4]*D[0]+M[5]*D[1]+M[6]*D[2]+M[7]*D[3],M[8]*D[0]+M[9]*D[1]+M[10]*D[2]+M[11]*D[3],M[12]*D[0]+M[13]*D[1]+M[14]*D[2]+M[15]*D[3]],dot:(M,D)=>M[0]*D[0]+M[1]*D[1]+M[2]*D[2]+M[3]*D[3],sml:(M,D)=>[M*D[0],M*D[1],M*D[2],M*D[3]]};Bs.encode=function(D,H,Z,R,U,k,W){R==null&&(R=0),W==null&&(W=!1);const B=u(D,H,Z,R,[!1,!1,!1,0,W,!1]);return d(B,-1),l(B,H,Z,U,k)},Bs.encodeLL=function(D,H,Z,R,U,k,W,B){const I={ctype:0+(R==1?0:2)+(U==0?0:4),depth:k,frames:[]},G=(R+U)*k,V=G*H;for(let X=0;X<D.length;X++)I.frames.push({rect:{x:0,y:0,width:H,height:Z},img:new Uint8Array(D[X]),blend:0,dispose:1,bpp:Math.ceil(G/8),bpl:Math.ceil(V/8)});return d(I,0,!0),l(I,H,Z,W,B)},Bs.encode.compress=u,Bs.encode.dither=a,Bs.quantize=w,Bs.quantize.getKDtree=x,Bs.quantize.getNearest=_})();const KL={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,i=r.getContext("2d").getImageData(0,0,t,n),o=new Uint32Array(i.data.buffer),a=(32*t+31)/32<<2,l=a*n,d=122+l,u=new ArrayBuffer(d),f=new DataView(u),p=1<<20;let m,v,w,x,_=p,C=0,A=0,T=0;function P(M){f.setUint16(A,M,!0),A+=2}function O(M){f.setUint32(A,M,!0),A+=4}function z(M){A+=M}P(19778),O(d),z(4),O(122),O(108),O(t),O(-n>>>0),P(1),P(32),O(3),O(l),O(2835),O(2835),z(8),O(16711680),O(65280),O(255),O(4278190080),O(1466527264),function M(){for(;C<n&&_>0;){for(x=122+C*a,m=0;m<s;)_--,v=o[T++],w=v>>>24,f.setUint32(x+m,v<<8|w),m+=4;C++}T<o.length?(_=p,setTimeout(M,KL._dly)):e(u)}()},toBlob(r,e){this.toArrayBuffer(r,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var Bn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Pie={[Bn.CHROME]:16384,[Bn.FIREFOX]:11180,[Bn.DESKTOP_SAFARI]:16384,[Bn.IE]:8192,[Bn.IOS]:4096,[Bn.ETC]:8192};const Xk=typeof window<"u",GL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,S0=Xk&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Rie=(Xk||GL)&&(S0&&S0.getOriginalSymbol(window,"File")||typeof File<"u"&&File),YL=(Xk||GL)&&(S0&&S0.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Qk(r,e,t=Date.now()){return new Promise(n=>{const s=r.split(","),i=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const d=new Blob([l],{type:i});d.name=e,d.lastModified=t,n(d)})}function JL(r){return new Promise((e,t)=>{const n=new YL;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)})}function ZL(r){return new Promise((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r})}function Nl(){if(Nl.cachedResult!==void 0)return Nl.cachedResult;let r=Bn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=Bn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=Bn.IOS:/Safari/i.test(e)?r=Bn.DESKTOP_SAFARI:/Firefox/i.test(e)?r=Bn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=Bn.IE),Nl.cachedResult=r,Nl.cachedResult}function XL(r,e){const t=Nl(),n=Pie[t];let s=r,i=e,o=s*i;const a=s>i?i/s:s/i;for(;o>n*n;){const l=(n+s)/2,d=(n+i)/2;l<d?(i=d,s=d*a):(i=l*a,s=l),o=s*i}return{width:s,height:i}}function Oy(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function QL(r,e){const{width:t,height:n}=XL(r.width,r.height),[s,i]=Oy(t,n);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,s.width,s.height)),i.drawImage(r,0,0,s.width,s.height),s}function Eg(){return Eg.cachedResult!==void 0||(Eg.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Eg.cachedResult}function C0(r,e={}){return new Promise(function(t,n){let s,i;var o=function(){try{return i=QL(s,e.fileType||r.type),t([s,i])}catch(l){return n(l)}},a=function(l){try{var d=function(u){try{throw u}catch(f){return n(f)}};try{let u;return JL(r).then(function(f){try{return u=f,ZL(u).then(function(p){try{return s=p,function(){try{return o()}catch(m){return n(m)}}()}catch(m){return d(m)}},d)}catch(p){return d(p)}},d)}catch(u){d(u)}}catch(u){return n(u)}};try{if(Eg()||[Bn.DESKTOP_SAFARI,Bn.MOBILE_SAFARI].includes(Nl()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then(function(l){try{return s=l,o()}catch{return a()}},a)}catch{a()}})}function E0(r,e,t,n,s=1){return new Promise(function(i,o){let a;if(e==="image/png"){let d,u,f;return d=r.getContext("2d"),{data:u}=d.getImageData(0,0,r.width,r.height),f=Bs.encode([u.buffer],r.width,r.height,4096*s),a=new Blob([f],{type:e}),a.name=t,a.lastModified=n,l.call(this)}{let d=function(){return l.call(this)};if(e==="image/bmp")return new Promise(u=>KL.toBlob(r,u)).then((function(u){try{return a=u,a.name=t,a.lastModified=n,d.call(this)}catch(f){return o(f)}}).bind(this),o);{let u=function(){return d.call(this)};if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then((function(f){try{return a=f,a.name=t,a.lastModified=n,u.call(this)}catch(p){return o(p)}}).bind(this),o);{let f;return f=r.toDataURL(e,s),Qk(f,t,n).then((function(p){try{return a=p,u.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function l(){return i(a)}})}function _i(r){r.width=0,r.height=0}function su(){return new Promise(function(r,e){let t,n,s,i;return su.cachedResult!==void 0?r(su.cachedResult):Qk("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return t=o,C0(t).then(function(a){try{return n=a[1],E0(n,t.type,t.name,t.lastModified).then(function(l){try{return s=l,_i(n),C0(s).then(function(d){try{return i=d[0],su.cachedResult=i.width===1&&i.height===2,r(su.cachedResult)}catch(u){return e(u)}},e)}catch(d){return e(d)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function eF(r){return new Promise((e,t)=>{const n=new YL;n.onload=s=>{const i=new DataView(s.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const o=i.byteLength;let a=2;for(;a<o;){if(i.getUint16(a+2,!1)<=8)return e(-1);const l=i.getUint16(a,!1);if(a+=2,l==65505){if(i.getUint32(a+=2,!1)!=1165519206)return e(-1);const d=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,d);const u=i.getUint16(a,d);a+=2;for(let f=0;f<u;f++)if(i.getUint16(a+12*f,d)==274)return e(i.getUint16(a+12*f+8,d))}else{if((65280&l)!=65280)break;a+=i.getUint16(a,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)})}function tF(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let i,o=r;return isFinite(s)&&(t>s||n>s)&&([o,i]=Oy(t,n),t>n?(o.width=s,o.height=n/t*s):(o.width=t/n*s,o.height=s),i.drawImage(r,0,0,o.width,o.height),_i(r)),o}function rF(r,e){const{width:t}=r,{height:n}=r,[s,i]=Oy(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:i.transform(-1,0,0,1,t,0);break;case 3:i.transform(-1,0,0,-1,t,n);break;case 4:i.transform(1,0,0,-1,0,n);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,n,0);break;case 7:i.transform(0,-1,-1,0,n,t);break;case 8:i.transform(0,-1,1,0,0,t)}return i.drawImage(r,0,0,t,n),_i(r),s}function Sj(r,e,t=0){return new Promise(function(n,s){let i,o,a,l,d,u,f,p,m,v,w,x,_,C,A,T,P,O,z,M;function D(Z=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=Z,e.onProgress(Math.min(i,100))}function H(Z){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(Z,i),100),e.onProgress(i)}return i=t,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,D(),C0(r,e).then((function(Z){try{return[,l]=Z,D(),d=tF(l,e),D(),new Promise(function(R,U){var k;if(!(k=e.exifOrientation))return eF(r).then((function(B){try{return k=B,W.call(this)}catch(I){return U(I)}}).bind(this),U);function W(){return R(k)}return W.call(this)}).then((function(R){try{return u=R,D(),su().then((function(U){try{return f=U?d:rF(d,u),D(),p=e.initialQuality||1,m=e.fileType||r.type,E0(f,m,r.name,r.lastModified,p).then((function(k){try{{let B=function(){if(o--&&(A>a||A>_)){let G,V;return G=M?.95*z.width:z.width,V=M?.95*z.height:z.height,[P,O]=Oy(G,V),O.drawImage(z,0,0,G,V),p*=m==="image/png"?.85:.95,E0(P,m,r.name,r.lastModified,p).then(function(X){try{return T=X,_i(z),z=P,A=T.size,H(Math.min(99,Math.floor((C-A)/(C-a)*100))),B}catch(F){return s(F)}},s)}return[1]},I=function(){return _i(z),_i(P),_i(d),_i(f),_i(l),H(100),n(T)};if(v=k,D(),w=v.size>a,x=v.size>r.size,!w&&!x)return H(100),n(v);var W;return _=r.size,C=v.size,A=C,z=f,M=!e.alwaysKeepResolution&&w,(W=(function(G){for(;G;){if(G.then)return void G.then(W,s);try{if(G.pop){if(G.length)return G.pop()?I.call(this):G;G=B}else G=G.call(this)}catch(V){return s(V)}}}).bind(this))(B)}}catch(B){return s(B)}}).bind(this),s)}catch(k){return s(k)}}).bind(this),s)}catch(U){return s(U)}}).bind(this),s)}catch(R){return s(R)}}).bind(this),s)})}const Oie=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Rx;function Mie(r,e){return new Promise((t,n)=>{Rx||(Rx=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(Oie));const s=new Worker(Rx);s.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)s.terminate();else if(o.data.progress===void 0){if(o.data.error)return n(new Error(o.data.error)),void s.terminate();t(o.data.file),s.terminate()}else e.onProgress(o.data.progress)}),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",()=>{n(e.signal.reason),s.terminate()}),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function an(r,e){return new Promise(function(t,n){let s,i,o,a,l,d;if(s={...e},o=0,{onProgress:a}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=m=>{o=m,typeof a=="function"&&a(o)},!(r instanceof Blob||r instanceof Rie))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||d)return Sj(r,s).then((function(m){try{return i=m,p.call(this)}catch(v){return n(v)}}).bind(this),n);var u=(function(){try{return p.call(this)}catch(m){return n(m)}}).bind(this),f=function(m){try{return Sj(r,s).then(function(v){try{return i=v,u()}catch(w){return n(w)}},n)}catch(v){return n(v)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Mie(r,s).then(function(m){try{return i=m,u()}catch{return f()}},f)}catch{f()}function p(){try{i.name=r.name,i.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(i=qL(r,i))}catch{}return t(i)}})}an.getDataUrlFromFile=JL,an.getFilefromDataUrl=Qk,an.loadImage=ZL,an.drawImageInCanvas=QL,an.drawFileInCanvas=C0,an.canvasToFile=E0,an.getExifOrientation=eF,an.handleMaxWidthOrHeight=tF,an.followExifOrientation=rF,an.cleanupCanvasMemory=_i,an.isAutoOrientationInBrowser=su,an.approximateBelowMaximumCanvasSizeOfBrowser=XL,an.copyExifWithoutOrientation=qL,an.getBrowserName=Nl,an.version="2.0.2";const Die=()=>{const[r,e]=S.useState(!0),[t,n]=S.useState(!1),{usersApi:s}=Vi(),i=si(),{user:o,dbUser:a,isLoading:l}=An(),[d,u]=S.useState(!1),{theme:f,setTheme:p}=FP(),[m,v]=S.useState({username:"student123",email:"",bio:"Computer Science student passionate about algorithms and web development. Currently working on data structures and machine learning projects.",profilePicture:null}),[w,x]=S.useState(null),[_,C]=S.useState(!0),A=async()=>{if(u(!1),!(!w||m.username===w.name))try{const{error:U,data:k}=await s.updateUser(a.id,{name:m.username});if(U){alert("Failed to update username: "+U.message);return}x(W=>({...W,name:m.username})),window&&window.toast&&window.toast({title:"Profile Updated",description:"Your username was updated!",variant:"success"})}catch(U){alert("An unexpected error occurred while updating username: "+U.message)}},[T,P]=S.useState(!1),O=async U=>{var W;const k=(W=U.target.files)==null?void 0:W[0];if(!(!k||!a)){P(!0);try{const I=await an(k,{maxSizeMB:.15,maxWidthOrHeight:256,useWebWorker:!0}),G=I.name.split(".").pop()||k.name.split(".").pop(),V=`${a.id}/avatar.${G}`,{data:X,error:F}=await Nr.storage.from("avatar-images").upload(V,I,{cacheControl:"3600",upsert:!0,contentType:I.type});if(console.log("File uploaded successfully:",X,F),F)throw F;const{data:q,error:oe}=await Nr.storage.from("avatar-images").createSignedUrl(V,60*60*24*365);if(oe)throw oe;if(!(q!=null&&q.signedUrl))throw new Error("Could not get signed URL");v(re=>({...re,profilePicture:q.signedUrl}));try{const{error:re}=await s.updateUser(a.id,{avatar_url:V});if(re)throw re}catch(re){console.error("Failed to update avatar_url in users table:",re),alert("Avatar upload succeeded, but failed to update user profile.")}}catch(B){console.error("Upload error:",B),alert("Failed to upload avatar: "+B.message)}finally{P(!1)}}},z=async()=>{if(!w){e(!1);return}try{const U=w.avatar_url;if(!U){e(!1);return}if(U.startsWith("https://lh3.googleusercontent.com/")){v(B=>({...B,profilePicture:U}));return}const{data:k,error:W}=await Nr.storage.from("avatar-images").createSignedUrl(U,60*60*24*365);!W&&(k!=null&&k.signedUrl)?v(B=>({...B,profilePicture:k.signedUrl})):W?console.error("Supabase signed URL error:",W):console.warn("No signed URL returned from Supabase:",k)}catch(U){console.error("Error loading existing avatar:",U)}};S.useEffect(()=>{a&&(C(!0),s.getUser(a.id).then(U=>{x(U.data),C(!1)}))},[a]),S.useEffect(()=>{a&&w&&(v(U=>({...U,email:a.email||"",username:w.name||""})),z(),n(!1))},[a,w]);const M=U=>U.split(" ").map(k=>k[0]).join("").toUpperCase(),[D,H]=S.useState("light"),Z=U=>{H(U),localStorage.setItem("theme",U),document.documentElement.classList.toggle("dark",U==="dark")},R=localStorage.getItem("theme")||"light";return R!==D&&Z(R),g.jsxs("div",{className:"min-h-screen dark:bg-gradient-to-br dark:from-slate-900 dark:via-slate-800 dark:to-indigo-900",children:[g.jsx("header",{className:"bg-white dark:bg-slate-900/95 dark:backdrop-blur-sm shadow-lg dark:shadow-indigo-900/20 border-b dark:border-slate-700",children:g.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between items-center h-16",children:[g.jsxs(tt,{variant:"ghost",onClick:()=>i("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 dark:text-slate-300 dark:hover:text-white",children:[g.jsx(bP,{className:"h-5 w-5"}),g.jsx("span",{children:"Back"})]}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Profile"}),g.jsx("div",{className:"flex items-center space-x-4",children:g.jsxs("div",{onClick:()=>Z(D==="dark"?"light":"dark"),className:"relative w-16 h-8 bg-gray-200 dark:bg-slate-700 rounded-full cursor-pointer transition-colors duration-300 ease-in-out shadow-inner hover:bg-gray-300 dark:hover:bg-slate-600",children:[g.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white dark:bg-slate-100 rounded-full shadow-lg transition-transform duration-300 ease-in-out flex items-center justify-center ${D==="dark"?"translate-x-9":"translate-x-1"}`,children:g.jsx("div",{className:"transition-opacity duration-200",children:D==="dark"?g.jsx(qE,{className:"h-3 w-3 text-slate-700"}):g.jsx(GE,{className:"h-3 w-3 text-yellow-500"})})}),g.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2 pointer-events-none",children:[g.jsx(GE,{className:`h-4 w-4 transition-opacity duration-300 ${D==="light"?"text-yellow-400 opacity-70":"text-gray-400 dark:text-slate-500 opacity-40"}`}),g.jsx(qE,{className:`h-4 w-4 transition-opacity duration-300 ${D==="dark"?"text-slate-400 opacity-70":"text-gray-400 dark:text-slate-500 opacity-40"}`})]})]})})]})})}),g.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.jsx(It,{className:"p-8 mb-8 bg-white dark:bg-slate-800/50 dark:backdrop-blur-sm shadow-lg dark:shadow-indigo-900/20 dark:border-slate-700",children:g.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-6 md:space-y-0 md:space-x-8",children:[g.jsxs("div",{className:"relative",children:[g.jsxs(U_,{className:"w-32 h-32 border-4 border-blue-100 dark:border-indigo-500/30 relative",children:[r&&!t&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-slate-700 animate-pulse rounded-full z-10",children:g.jsx("span",{className:"w-10 h-10 border-4 border-blue-300 border-t-transparent rounded-full animate-spin"})}),g.jsx(V_,{src:m.profilePicture||void 0,style:{display:r||t?"none":"block"},onLoad:()=>{e(!1),n(!1)},onError:()=>{e(!1),n(!0)},alt:"Profile picture"}),(t||!m.profilePicture&&!r)&&g.jsx(W_,{className:"text-2xl font-bold bg-gradient-to-br from-blue-500 to-purple-600 dark:from-indigo-500 dark:to-purple-500 text-white",children:M(m.email)})]}),d&&g.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 dark:bg-indigo-600 dark:hover:bg-indigo-500 text-white p-2 rounded-full cursor-pointer shadow-lg transition-colors",children:[g.jsx(vB,{className:"h-4 w-4"}),g.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",disabled:T}),T&&g.jsx("span",{className:"absolute bottom-0 left-0 text-xs text-blue-600 bg-white bg-opacity-80 px-2 py-1 rounded shadow",children:"Uploading..."})]})]}),g.jsx("div",{className:"flex-1 space-y-4",children:d?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Username"}),g.jsx(_n,{value:m.username,onChange:U=>v(k=>({...k,username:U.target.value})),className:"max-w-md dark:bg-slate-700/50 dark:border-slate-600 dark:text-white",placeholder:"Enter your username"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1",children:"Bio"}),g.jsx(hf,{value:m.bio,onChange:U=>v(k=>({...k,bio:U.target.value})),className:"max-w-md dark:bg-slate-700/50 dark:border-slate-600 dark:text-white",placeholder:"Tell us about yourself",rows:3})]})]}):g.jsxs("div",{className:"space-y-2",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:_?g.jsx("span",{className:"animate-pulse text-gray-400 dark:text-slate-500",children:"Loading..."}):`@${(w==null?void 0:w.name)||m.username||""}`}),g.jsx("p",{className:"text-lg text-gray-600 dark:text-slate-400",children:m.email}),g.jsx("p",{className:"text-gray-700 dark:text-slate-300 leading-relaxed max-w-2xl",children:m.bio})]})}),g.jsx("div",{className:"flex flex-col space-y-2",children:d?g.jsxs(tt,{onClick:A,className:"bg-blue-600 hover:bg-blue-700 dark:bg-indigo-600 dark:hover:bg-indigo-500 text-white",children:[g.jsx(EP,{className:"h-4 w-4 mr-2"}),"Save Changes"]}):g.jsxs(g.Fragment,{children:[g.jsxs(tt,{onClick:()=>u(!0),variant:"outline",className:"border-blue-300 text-blue-600 hover:bg-blue-50 dark:border-indigo-400 dark:text-indigo-400 dark:hover:bg-indigo-950/50",children:[g.jsx(jB,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),g.jsxs(tt,{onClick:()=>i("/reset-password"),variant:"outline",className:"border-blue-300 text-blue-600 hover:bg-blue-50 dark:border-indigo-400 dark:text-indigo-400 dark:hover:bg-indigo-950/50",children:[g.jsx("span",{className:"mr-2",children:""}),"Change Password"]})]})})]})})})]})};var nF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Cj=be.createContext&&be.createContext(nF),Iie=["attr","size","title"];function Lie(r,e){if(r==null)return{};var t=Fie(r,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Fie(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function A0(){return A0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},A0.apply(this,arguments)}function Ej(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function T0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ej(Object(t),!0).forEach(function(n){Bie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ej(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Bie(r,e,t){return e=$ie(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $ie(r){var e=zie(r,"string");return typeof e=="symbol"?e:e+""}function zie(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function sF(r){return r&&r.map((e,t)=>be.createElement(e.tag,T0({key:t},e.attr),sF(e.child)))}function Uie(r){return e=>be.createElement(Vie,A0({attr:T0({},r.attr)},e),sF(r.child))}function Vie(r){var e=t=>{var{attr:n,size:s,title:i}=r,o=Lie(r,Iie),a=s||t.size||"1em",l;return t.className&&(l=t.className),r.className&&(l=(l?l+" ":"")+r.className),be.createElement("svg",A0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:l,style:T0(T0({color:r.color||t.color},t.style),r.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&be.createElement("title",null,i),r.children)};return Cj!==void 0?be.createElement(Cj.Consumer,null,t=>e(t)):e(nF)}function Wie(r){return Uie({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(r)}function iF(){const{signInWithGoogle:r,user:e,error:t,clearError:n}=An(),[s,i]=S.useState(!1);if(qn(),e)return null;const o=async()=>{try{i(!0),n(),await r()}catch(a){console.error("Google sign in error:",a)}finally{i(!1)}};return g.jsxs("div",{className:"w-full",children:[g.jsx(tt,{onClick:o,disabled:s,className:"flex items-center justify-center gap-2 w-full",variant:"outline",children:s?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"w-4 h-4 animate-spin"}),"Signing in..."]}):g.jsxs(g.Fragment,{children:[g.jsx(Wie,{className:"w-4 h-4"}),"Sign in with Google"]})}),t&&g.jsx("p",{className:"mt-2 text-sm text-red-600 text-center",children:t})]})}const Hie=xr.object({email:xr.string().email("Please enter a valid email address"),password:xr.string().min(6,"Password must be at least 6 characters")}),qie=()=>{const r=si(),{user:e,signInWithEmail:t,isSigningIn:n,resetPassword:s}=An(),{toast:i}=qn(),[o,a]=S.useState({email:"",password:""}),[l,d]=S.useState({}),[u,f]=S.useState(!1),[p,m]=S.useState(!1);S.useEffect(()=>{e&&r("/dashboard")},[e,r]);const v=_=>{const{name:C,value:A}=_.target;a(T=>({...T,[C]:A})),l[C]&&d(T=>({...T,[C]:""}))},w=async _=>{_.preventDefault();try{Hie.parse(o),d({})}catch(C){if(C instanceof xr.ZodError){const A={};C.errors.forEach(T=>{T.path&&(A[T.path[0]]=T.message)}),d(A);return}}try{f(!0),await t(o.email,o.password),i({title:"Signed in successfully",description:"Welcome back!"}),r("/dashboard")}catch(C){console.error("Sign in error:",C)}finally{f(!1)}},x=async()=>{if(!o.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){i({title:"Error",description:"Please enter a valid email address to reset your password.",variant:"destructive"});return}try{m(!0),await s(o.email),i({title:"Password reset email sent",description:"Check your email for instructions to reset your password."})}catch(_){console.error("Error sending password reset email:",_)}finally{m(!1)}};return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:g.jsxs(It,{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[g.jsx(po,{className:"h-8 w-8 text-blue-600"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MocsCode"})]}),g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Welcome Back"}),g.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to continue collaborating"})]}),g.jsxs("form",{onSubmit:w,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),g.jsx(_n,{id:"email",name:"email",type:"email",value:o.email,onChange:v,placeholder:"Enter your email",className:l.email?"border-red-500":"",disabled:u,required:!0}),l.email&&g.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),g.jsx("button",{type:"button",onClick:x,className:"text-sm font-medium text-blue-600 hover:text-blue-500 focus:outline-none",disabled:p,children:p?"Sending...":"Forgot password?"})]}),g.jsx(_n,{id:"password",name:"password",type:"password",value:o.password,onChange:v,placeholder:"Enter your password",className:l.password?"border-red-500":"",disabled:u,required:!0}),l.password&&g.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.password})]}),g.jsxs("div",{className:"flex flex-col space-y-4 mt-6",children:[g.jsx(iF,{}),g.jsx(tt,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:u||n,children:u||n?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing in..."]}):"Sign in with Email"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",g.jsx(jR,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Register"})]})})]})]})})},Kie=xr.object({name:xr.string().min(2,"Name must be at least 2 characters"),email:xr.string().email("Please enter a valid email address"),password:xr.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:xr.string()}).refine(r=>r.password===r.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Gie=()=>{const r=si(),{user:e,signUpWithEmail:t,isSigningUp:n}=An(),{toast:s}=qn(),[i,o]=S.useState({name:"",email:"",password:"",confirmPassword:""}),[a,l]=S.useState({}),[d,u]=S.useState(!1);S.useEffect(()=>{e&&r("/dashboard")},[e,r]);const f=m=>{const{name:v,value:w}=m.target;o(x=>({...x,[v]:w})),a[v]&&l(x=>({...x,[v]:""}))},p=async m=>{m.preventDefault();try{Kie.parse(i),l({})}catch(v){if(v instanceof xr.ZodError){const w={};v.errors.forEach(x=>{x.path&&(w[x.path[0]]=x.message)}),l(w);return}}try{u(!0),await t(i.email,i.password,i.name),s({title:"Account created!",description:"Please check your email to verify your account."}),r("/dashboard")}catch(v){console.error("Registration error:",v)}finally{u(!1)}};return g.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:g.jsxs(It,{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[g.jsx(po,{className:"h-8 w-8 text-blue-600"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"MocsCode"})]}),g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create Account"}),g.jsx("p",{className:"text-gray-600 mt-2",children:"Join the collaborative coding community"})]}),g.jsxs("form",{onSubmit:p,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),g.jsx(_n,{id:"name",name:"name",type:"text",value:i.name,onChange:f,placeholder:"Enter your full name",className:a.name?"border-red-500":"",disabled:d,required:!0}),a.name&&g.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),g.jsx(_n,{id:"email",name:"email",type:"email",value:i.email,onChange:f,placeholder:"Enter your email",className:a.email?"border-red-500":"",disabled:d,required:!0}),a.email&&g.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),g.jsx(_n,{id:"password",name:"password",type:"password",value:i.password,onChange:f,placeholder:"Create a strong password",className:a.password?"border-red-500":"",disabled:d,required:!0}),a.password?g.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password}):g.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 8 characters with uppercase, lowercase, number, and special character"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),g.jsx(_n,{id:"confirmPassword",type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:f,placeholder:"Confirm your password",className:a.confirmPassword?"border-red-500":"",disabled:d,required:!0}),a.confirmPassword&&g.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword})]}),g.jsxs("div",{className:"flex flex-col space-y-4 mt-6",children:[g.jsx(iF,{}),g.jsx(tt,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:d||n,children:d||n?g.jsxs(g.Fragment,{children:[g.jsx(Zt,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):"Create Account"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",g.jsx(jR,{to:"/signin",className:"font-medium text-blue-600 hover:text-blue-500 hover:underline",children:"Sign in"})]})})]})]})})},Yie=Ff("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),N0=S.forwardRef(({className:r,variant:e,...t},n)=>g.jsx("div",{ref:n,role:"alert",className:Ye(Yie({variant:e}),r),...t}));N0.displayName="Alert";const j0=S.forwardRef(({className:r,...e},t)=>g.jsx("h5",{ref:t,className:Ye("mb-1 font-medium leading-none tracking-tight",r),...e}));j0.displayName="AlertTitle";const P0=S.forwardRef(({className:r,...e},t)=>g.jsx("div",{ref:t,className:Ye("text-sm [&_p]:leading-relaxed",r),...e}));P0.displayName="AlertDescription";function Jie(){const r=si(),[e,t]=S.useState(null);return S.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(window.location.search),i=s.get("error"),o=s.get("error_description");if(i)throw new Error(o||i);if(window.location.hash&&window.location.hash.includes("access_token")){const{data:d,error:u}=await Nr.auth.getSession();if(u)throw u;if(d!=null&&d.session){r("/dashboard",{replace:!0});return}}const{data:{user:a},error:l}=await Nr.auth.getUser();if(l)throw l;if(a)r("/dashboard",{replace:!0});else throw new Error("No user found after OAuth callback")}catch(s){console.error("Error in auth callback:",s),t(s instanceof Error?s.message:"An unknown error occurred")}})()},[r]),e?g.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:g.jsxs("div",{className:"max-w-md w-full",children:[g.jsxs(N0,{variant:"destructive",children:[g.jsx(G1,{className:"h-4 w-4"}),g.jsx(j0,{children:"Authentication Error"}),g.jsx(P0,{children:e})]}),g.jsx("button",{onClick:()=>r("/",{replace:!0}),className:"mt-4 w-full px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700 transition-colors",children:"Return to Home"})]})}):g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-600",children:"Completing sign in..."})]})})}const Zie=()=>{var z,M;const{token:r}=CR(),e=si(),{collaborationApi:t}=Vi(),{user:n,isReady:s}=An(),{toast:i}=qn(),[o,a]=S.useState(!1),[l,d]=S.useState(!0),[u,f]=S.useState(null),[p,m]=S.useState(null),[v,w]=S.useState("validating");S.useEffect(()=>{r&&s&&(w("validating"),x())},[r,s]);const x=async()=>{if(!r){m("Invalid share link - no token provided"),w("error");return}try{const{data:D,error:H}=await t.validateShareToken(r);H||!D?(console.error("Token validation failed:",H),m((H==null?void 0:H.message)||"Invalid or expired share link"),w("error")):(f(D),w("ready"))}catch(D){console.error("Error validating share token:",D),m("Failed to validate share link. Please try again."),w("error")}},_=async()=>{if(!n||!r){m("User not authenticated or invalid token");return}try{w("joining"),a(!0);const{data:D,error:H}=await t.joinProjectByToken(r,n.id);if(H){console.error("Failed to join project:",H),i({title:"Failed to Join Project",description:H.message,variant:"destructive"}),m(H.message),w("error");return}w("success"),i({title:"Successfully Joined Project!",description:`You now have ${u.role} access to "${u.project.name}"`,duration:5e3}),setTimeout(()=>{e(`/editor/${u.project_id}`)},2e3)}catch(D){console.error("Error joining project:",D),i({title:"Error",description:"An unexpected error occurred while joining the project",variant:"destructive"}),m("An unexpected error occurred while joining the project"),w("error")}finally{a(!1)}},C=()=>{m(null),w("validating"),d(!0),x()},A=D=>D&&D.toString().trim().toLowerCase()==="editor"?"editor":"viewer",T=D=>A(D)==="editor"?g.jsx(mo,{className:"h-5 w-5"}):g.jsx(Dl,{className:"h-5 w-5"}),P=D=>A(D)==="editor"?"Edit Access":"View Access",O=D=>A(D)==="editor"?"You can view, edit, and collaborate on this project":"You can view and comment on this project";return n?v==="validating"?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs(It,{className:"w-full max-w-md p-8 text-center",children:[g.jsx(Zt,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Validating Invitation"}),g.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your invitation..."})]})}):v==="error"||p?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs(It,{className:"w-full max-w-md p-8 text-center",children:[g.jsx(_B,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-800",children:"Unable to Join Project"}),g.jsx("p",{className:"text-gray-600 mb-6",children:p}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs(tt,{onClick:C,variant:"outline",className:"w-full",children:[g.jsx(RB,{className:"h-4 w-4 mr-2"}),"Try Again"]}),g.jsx(tt,{onClick:()=>e("/dashboard"),variant:"outline",children:"Go to Dashboard"})]})]})}):v==="success"?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs(It,{className:"w-full max-w-md p-8 text-center",children:[g.jsx(WE,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2 text-green-800",children:"Successfully Joined!"}),g.jsxs("p",{className:"text-gray-600 mb-4",children:['You are now a collaborator on "',(z=u.project)==null?void 0:z.name,'"']}),g.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[g.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-800",children:[T(u.role),g.jsx("span",{className:"font-medium",children:P(u.role)})]}),g.jsx("p",{className:"text-sm text-green-700 mt-1",children:O(u.role)})]}),g.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to project..."})]})}):v==="ready"&&u?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs(It,{className:"w-full max-w-md p-8",children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx(WE,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Project Invitation"}),g.jsx("p",{className:"text-gray-600",children:"You've been invited to collaborate on this project"})]}),g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:u.project.name}),((M=u.project)==null?void 0:M.description)&&g.jsx("p",{className:"text-sm text-gray-600 mb-3",children:u.project.description}),g.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[T(u.role),g.jsx("span",{className:"font-medium",children:P(u.role)})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:O(u.role)}),u.expires_at&&g.jsxs("div",{className:"mt-3 flex items-center space-x-1 text-xs text-amber-600",children:[g.jsx(Tg,{className:"h-3 w-3"}),g.jsxs("span",{children:["Expires: ",new Date(u.expires_at).toLocaleDateString()]})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs(tt,{onClick:_,className:"w-full",children:[g.jsx(Vh,{className:"h-4 w-4 mr-2"}),"Join Project"]}),g.jsx(tt,{onClick:()=>e("/dashboard"),variant:"outline",className:"w-full",children:"Go to Dashboard"})]}),g.jsx("div",{className:"mt-6 pt-4 border-t text-center",children:g.jsx("p",{className:"text-xs text-gray-500",children:"By joining this project, you agree to collaborate respectfully and follow the project guidelines."})})]})}):g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs(It,{className:"w-full max-w-md p-8 text-center",children:[g.jsx(Zt,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading..."}),g.jsx("p",{className:"text-gray-600",children:"Please wait..."})]})}):g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs(It,{className:"w-full max-w-md p-8 text-center",children:[g.jsx(Vh,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Join Project"}),g.jsx("p",{className:"text-gray-600 mb-6",children:"You've been invited to collaborate on a project. Please sign in and try again."}),g.jsxs("div",{className:"space-y-3",children:[g.jsx(tt,{onClick:()=>e("/signin"),className:"w-full",children:"Sign In"}),g.jsx(tt,{onClick:()=>e("/register"),variant:"outline",className:"w-full",children:"Create Account"})]})]})})};var op=r=>r.type==="checkbox",jl=r=>r instanceof Date,xn=r=>r==null;const oF=r=>typeof r=="object";var Er=r=>!xn(r)&&!Array.isArray(r)&&oF(r)&&!jl(r),aF=r=>Er(r)&&r.target?op(r.target)?r.target.checked:r.target.value:r,Xie=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,lF=(r,e)=>r.has(Xie(e)),Qie=r=>{const e=r.constructor&&r.constructor.prototype;return Er(e)&&e.hasOwnProperty("isPrototypeOf")},eS=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function In(r){let e;const t=Array.isArray(r);if(r instanceof Date)e=new Date(r);else if(r instanceof Set)e=new Set(r);else if(!(eS&&(r instanceof Blob||r instanceof FileList))&&(t||Er(r)))if(e=t?[]:{},!t&&!Qie(r))e=r;else for(const n in r)r.hasOwnProperty(n)&&(e[n]=In(r[n]));else return r;return e}var My=r=>Array.isArray(r)?r.filter(Boolean):[],wr=r=>r===void 0,Fe=(r,e,t)=>{if(!e||!Er(r))return t;const n=My(e.split(/[,[\].]+?/)).reduce((s,i)=>xn(s)?s:s[i],r);return wr(n)||n===r?wr(r[e])?t:r[e]:n},ws=r=>typeof r=="boolean",tS=r=>/^\w*$/.test(r),cF=r=>My(r.replace(/["|']|\]/g,"").split(/\.|\[/)),Vt=(r,e,t)=>{let n=-1;const s=tS(e)?[e]:cF(e),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=t;if(n!==o){const d=r[a];l=Er(d)||Array.isArray(d)?d:isNaN(+s[n+1])?{}:[]}if(a==="__proto__")return;r[a]=l,r=r[a]}return r};const R0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Hs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},io={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},uF=be.createContext(null),Dy=()=>be.useContext(uF),eoe=r=>{const{children:e,...t}=r;return be.createElement(uF.Provider,{value:t},e)};var dF=(r,e,t,n=!0)=>{const s={defaultValues:e._defaultValues};for(const i in r)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Hs.all&&(e._proxyFormState[o]=!n||Hs.all),t&&(t[o]=!0),r[o]}});return s},Ln=r=>Er(r)&&!Object.keys(r).length,hF=(r,e,t,n)=>{t(r);const{name:s,...i}=r;return Ln(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!n||Hs.all))},Fh=r=>Array.isArray(r)?r:[r],fF=(r,e,t)=>!r||!e||r===e||Fh(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n)));function rS(r){const e=be.useRef(r);e.current=r,be.useEffect(()=>{const t=!r.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[r.disabled])}function toe(r){const e=Dy(),{control:t=e.control,disabled:n,name:s,exact:i}=r||{},[o,a]=be.useState(t._formState),l=be.useRef(!0),d=be.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=be.useRef(s);return u.current=s,rS({disabled:n,next:f=>l.current&&fF(u.current,f.name,i)&&hF(f,d.current,t._updateFormState)&&a({...t._formState,...f}),subject:t._subjects.state}),be.useEffect(()=>(l.current=!0,d.current.isValid&&t._updateValid(!0),()=>{l.current=!1}),[t]),dF(o,t,d.current,!1)}var Ni=r=>typeof r=="string",pF=(r,e,t,n,s)=>Ni(r)?(n&&e.watch.add(r),Fe(t,r,s)):Array.isArray(r)?r.map(i=>(n&&e.watch.add(i),Fe(t,i))):(n&&(e.watchAll=!0),t);function roe(r){const e=Dy(),{control:t=e.control,name:n,defaultValue:s,disabled:i,exact:o}=r||{},a=be.useRef(n);a.current=n,rS({disabled:i,subject:t._subjects.values,next:u=>{fF(a.current,u.name,o)&&d(In(pF(a.current,t._names,u.values||t._formValues,!1,s)))}});const[l,d]=be.useState(t._getWatch(n,s));return be.useEffect(()=>t._removeUnmounted()),l}function noe(r){const e=Dy(),{name:t,disabled:n,control:s=e.control,shouldUnregister:i}=r,o=lF(s._names.array,t),a=roe({control:s,name:t,defaultValue:Fe(s._formValues,t,Fe(s._defaultValues,t,r.defaultValue)),exact:!0}),l=toe({control:s,name:t,exact:!0}),d=be.useRef(s.register(t,{...r.rules,value:a,...ws(r.disabled)?{disabled:r.disabled}:{}}));return be.useEffect(()=>{const u=s._options.shouldUnregister||i,f=(p,m)=>{const v=Fe(s._fields,p);v&&v._f&&(v._f.mount=m)};if(f(t,!0),u){const p=In(Fe(s._options.defaultValues,t));Vt(s._defaultValues,t,p),wr(Fe(s._formValues,t))&&Vt(s._formValues,t,p)}return()=>{(o?u&&!s._state.action:u)?s.unregister(t):f(t,!1)}},[t,s,o,i]),be.useEffect(()=>{Fe(s._fields,t)&&s._updateDisabledField({disabled:n,fields:s._fields,name:t,value:Fe(s._fields,t)._f.value})},[n,t,s]),{field:{name:t,value:a,...ws(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:be.useCallback(u=>d.current.onChange({target:{value:aF(u),name:t},type:R0.CHANGE}),[t]),onBlur:be.useCallback(()=>d.current.onBlur({target:{value:Fe(s._formValues,t),name:t},type:R0.BLUR}),[t,s]),ref:be.useCallback(u=>{const f=Fe(s._fields,t);f&&u&&(f._f.ref={focus:()=>u.focus(),select:()=>u.select(),setCustomValidity:p=>u.setCustomValidity(p),reportValidity:()=>u.reportValidity()})},[s._fields,t])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Fe(l.errors,t)},isDirty:{enumerable:!0,get:()=>!!Fe(l.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!Fe(l.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!Fe(l.validatingFields,t)},error:{enumerable:!0,get:()=>Fe(l.errors,t)}})}}const soe=r=>r.render(noe(r));var mF=(r,e,t,n,s)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:s||!0}}:{},Aj=r=>({isOnSubmit:!r||r===Hs.onSubmit,isOnBlur:r===Hs.onBlur,isOnChange:r===Hs.onChange,isOnAll:r===Hs.all,isOnTouch:r===Hs.onTouched}),Tj=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const Bh=(r,e,t,n)=>{for(const s of t||Object.keys(r)){const i=Fe(r,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(Bh(a,e))break}else if(Er(a)&&Bh(a,e))break}}};var ioe=(r,e,t)=>{const n=Fh(Fe(r,t));return Vt(n,"root",e[t]),Vt(r,t,n),r},nS=r=>r.type==="file",fo=r=>typeof r=="function",O0=r=>{if(!eS)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ag=r=>Ni(r),sS=r=>r.type==="radio",M0=r=>r instanceof RegExp;const Nj={value:!1,isValid:!1},jj={value:!0,isValid:!0};var gF=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!wr(r[0].attributes.value)?wr(r[0].value)||r[0].value===""?jj:{value:r[0].value,isValid:!0}:jj:Nj}return Nj};const Pj={isValid:!1,value:null};var yF=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Pj):Pj;function Rj(r,e,t="validate"){if(Ag(r)||Array.isArray(r)&&r.every(Ag)||ws(r)&&!r)return{type:t,message:Ag(r)?r:"",ref:e}}var Gc=r=>Er(r)&&!M0(r)?r:{value:r,message:""},Oj=async(r,e,t,n,s)=>{const{ref:i,refs:o,required:a,maxLength:l,minLength:d,min:u,max:f,pattern:p,validate:m,name:v,valueAsNumber:w,mount:x,disabled:_}=r._f,C=Fe(e,v);if(!x||_)return{};const A=o?o[0]:i,T=R=>{n&&A.reportValidity&&(A.setCustomValidity(ws(R)?"":R||""),A.reportValidity())},P={},O=sS(i),z=op(i),M=O||z,D=(w||nS(i))&&wr(i.value)&&wr(C)||O0(i)&&i.value===""||C===""||Array.isArray(C)&&!C.length,H=mF.bind(null,v,t,P),Z=(R,U,k,W=io.maxLength,B=io.minLength)=>{const I=R?U:k;P[v]={type:R?W:B,message:I,ref:i,...H(R?W:B,I)}};if(s?!Array.isArray(C)||!C.length:a&&(!M&&(D||xn(C))||ws(C)&&!C||z&&!gF(o).isValid||O&&!yF(o).isValid)){const{value:R,message:U}=Ag(a)?{value:!!a,message:a}:Gc(a);if(R&&(P[v]={type:io.required,message:U,ref:A,...H(io.required,U)},!t))return T(U),P}if(!D&&(!xn(u)||!xn(f))){let R,U;const k=Gc(f),W=Gc(u);if(!xn(C)&&!isNaN(C)){const B=i.valueAsNumber||C&&+C;xn(k.value)||(R=B>k.value),xn(W.value)||(U=B<W.value)}else{const B=i.valueAsDate||new Date(C),I=X=>new Date(new Date().toDateString()+" "+X),G=i.type=="time",V=i.type=="week";Ni(k.value)&&C&&(R=G?I(C)>I(k.value):V?C>k.value:B>new Date(k.value)),Ni(W.value)&&C&&(U=G?I(C)<I(W.value):V?C<W.value:B<new Date(W.value))}if((R||U)&&(Z(!!R,k.message,W.message,io.max,io.min),!t))return T(P[v].message),P}if((l||d)&&!D&&(Ni(C)||s&&Array.isArray(C))){const R=Gc(l),U=Gc(d),k=!xn(R.value)&&C.length>+R.value,W=!xn(U.value)&&C.length<+U.value;if((k||W)&&(Z(k,R.message,U.message),!t))return T(P[v].message),P}if(p&&!D&&Ni(C)){const{value:R,message:U}=Gc(p);if(M0(R)&&!C.match(R)&&(P[v]={type:io.pattern,message:U,ref:i,...H(io.pattern,U)},!t))return T(U),P}if(m){if(fo(m)){const R=await m(C,e),U=Rj(R,A);if(U&&(P[v]={...U,...H(io.validate,U.message)},!t))return T(U.message),P}else if(Er(m)){let R={};for(const U in m){if(!Ln(R)&&!t)break;const k=Rj(await m[U](C,e),A,U);k&&(R={...k,...H(U,k.message)},T(k.message),t&&(P[v]=R))}if(!Ln(R)&&(P[v]={ref:A,...R},!t))return P}}return T(!0),P};function ooe(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=wr(r)?n++:r[e[n++]];return r}function aoe(r){for(const e in r)if(r.hasOwnProperty(e)&&!wr(r[e]))return!1;return!0}function Dr(r,e){const t=Array.isArray(e)?e:tS(e)?[e]:cF(e),n=t.length===1?r:ooe(r,t),s=t.length-1,i=t[s];return n&&delete n[i],s!==0&&(Er(n)&&Ln(n)||Array.isArray(n)&&aoe(n))&&Dr(r,t.slice(0,-1)),r}var Ox=()=>{let r=[];return{get observers(){return r},next:s=>{for(const i of r)i.next&&i.next(s)},subscribe:s=>(r.push(s),{unsubscribe:()=>{r=r.filter(i=>i!==s)}}),unsubscribe:()=>{r=[]}}},I1=r=>xn(r)||!oF(r);function pa(r,e){if(I1(r)||I1(e))return r===e;if(jl(r)&&jl(e))return r.getTime()===e.getTime();const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t){const i=r[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(jl(i)&&jl(o)||Er(i)&&Er(o)||Array.isArray(i)&&Array.isArray(o)?!pa(i,o):i!==o)return!1}}return!0}var vF=r=>r.type==="select-multiple",loe=r=>sS(r)||op(r),Mx=r=>O0(r)&&r.isConnected,wF=r=>{for(const e in r)if(fo(r[e]))return!0;return!1};function D0(r,e={}){const t=Array.isArray(r);if(Er(r)||t)for(const n in r)Array.isArray(r[n])||Er(r[n])&&!wF(r[n])?(e[n]=Array.isArray(r[n])?[]:{},D0(r[n],e[n])):xn(r[n])||(e[n]=!0);return e}function xF(r,e,t){const n=Array.isArray(r);if(Er(r)||n)for(const s in r)Array.isArray(r[s])||Er(r[s])&&!wF(r[s])?wr(e)||I1(t[s])?t[s]=Array.isArray(r[s])?D0(r[s],[]):{...D0(r[s])}:xF(r[s],xn(e)?{}:e[s],t[s]):t[s]=!pa(r[s],e[s]);return t}var dh=(r,e)=>xF(r,e,D0(e)),bF=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>wr(r)?r:e?r===""?NaN:r&&+r:t&&Ni(r)?new Date(r):n?n(r):r;function Dx(r){const e=r.ref;if(!(r.refs?r.refs.every(t=>t.disabled):e.disabled))return nS(e)?e.files:sS(e)?yF(r.refs).value:vF(e)?[...e.selectedOptions].map(({value:t})=>t):op(e)?gF(r.refs).value:bF(wr(e.value)?r.ref.value:e.value,r)}var coe=(r,e,t,n)=>{const s={};for(const i of r){const o=Fe(e,i);o&&Vt(s,i,o._f)}return{criteriaMode:t,names:[...r],fields:s,shouldUseNativeValidation:n}},hh=r=>wr(r)?r:M0(r)?r.source:Er(r)?M0(r.value)?r.value.source:r.value:r;const Mj="AsyncFunction";var uoe=r=>(!r||!r.validate)&&!!(fo(r.validate)&&r.validate.constructor.name===Mj||Er(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===Mj)),doe=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate);function Dj(r,e,t){const n=Fe(r,t);if(n||tS(t))return{error:n,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=Fe(e,i),a=Fe(r,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:t}}var hoe=(r,e,t,n,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||r):(t?n.isOnBlur:s.isOnBlur)?!r:(t?n.isOnChange:s.isOnChange)?r:!0,foe=(r,e)=>!My(Fe(r,e)).length&&Dr(r,e);const poe={mode:Hs.onSubmit,reValidateMode:Hs.onChange,shouldFocusError:!0};function moe(r={}){let e={...poe,...r},t={submitCount:0,isDirty:!1,isLoading:fo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=Er(e.defaultValues)||Er(e.values)?In(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:In(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={values:Ox(),array:Ox(),state:Ox()},p=Aj(e.mode),m=Aj(e.reValidateMode),v=e.criteriaMode===Hs.all,w=N=>L=>{clearTimeout(d),d=setTimeout(N,L)},x=async N=>{if(!r.disabled&&(u.isValid||N)){const L=e.resolver?Ln((await M()).errors):await H(n,!0);L!==t.isValid&&f.state.next({isValid:L})}},_=(N,L)=>{!r.disabled&&(u.isValidating||u.validatingFields)&&((N||Array.from(a.mount)).forEach(J=>{J&&(L?Vt(t.validatingFields,J,L):Dr(t.validatingFields,J))}),f.state.next({validatingFields:t.validatingFields,isValidating:!Ln(t.validatingFields)}))},C=(N,L=[],J,ne,Q=!0,ie=!0)=>{if(ne&&J&&!r.disabled){if(o.action=!0,ie&&Array.isArray(Fe(n,N))){const le=J(Fe(n,N),ne.argA,ne.argB);Q&&Vt(n,N,le)}if(ie&&Array.isArray(Fe(t.errors,N))){const le=J(Fe(t.errors,N),ne.argA,ne.argB);Q&&Vt(t.errors,N,le),foe(t.errors,N)}if(u.touchedFields&&ie&&Array.isArray(Fe(t.touchedFields,N))){const le=J(Fe(t.touchedFields,N),ne.argA,ne.argB);Q&&Vt(t.touchedFields,N,le)}u.dirtyFields&&(t.dirtyFields=dh(s,i)),f.state.next({name:N,isDirty:R(N,L),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Vt(i,N,L)},A=(N,L)=>{Vt(t.errors,N,L),f.state.next({errors:t.errors})},T=N=>{t.errors=N,f.state.next({errors:t.errors,isValid:!1})},P=(N,L,J,ne)=>{const Q=Fe(n,N);if(Q){const ie=Fe(i,N,wr(J)?Fe(s,N):J);wr(ie)||ne&&ne.defaultChecked||L?Vt(i,N,L?ie:Dx(Q._f)):W(N,ie),o.mount&&x()}},O=(N,L,J,ne,Q)=>{let ie=!1,le=!1;const de={name:N};if(!r.disabled){const ke=!!(Fe(n,N)&&Fe(n,N)._f&&Fe(n,N)._f.disabled);if(!J||ne){u.isDirty&&(le=t.isDirty,t.isDirty=de.isDirty=R(),ie=le!==de.isDirty);const Te=ke||pa(Fe(s,N),L);le=!!(!ke&&Fe(t.dirtyFields,N)),Te||ke?Dr(t.dirtyFields,N):Vt(t.dirtyFields,N,!0),de.dirtyFields=t.dirtyFields,ie=ie||u.dirtyFields&&le!==!Te}if(J){const Te=Fe(t.touchedFields,N);Te||(Vt(t.touchedFields,N,J),de.touchedFields=t.touchedFields,ie=ie||u.touchedFields&&Te!==J)}ie&&Q&&f.state.next(de)}return ie?de:{}},z=(N,L,J,ne)=>{const Q=Fe(t.errors,N),ie=u.isValid&&ws(L)&&t.isValid!==L;if(r.delayError&&J?(l=w(()=>A(N,J)),l(r.delayError)):(clearTimeout(d),l=null,J?Vt(t.errors,N,J):Dr(t.errors,N)),(J?!pa(Q,J):Q)||!Ln(ne)||ie){const le={...ne,...ie&&ws(L)?{isValid:L}:{},errors:t.errors,name:N};t={...t,...le},f.state.next(le)}},M=async N=>{_(N,!0);const L=await e.resolver(i,e.context,coe(N||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return _(N),L},D=async N=>{const{errors:L}=await M(N);if(N)for(const J of N){const ne=Fe(L,J);ne?Vt(t.errors,J,ne):Dr(t.errors,J)}else t.errors=L;return L},H=async(N,L,J={valid:!0})=>{for(const ne in N){const Q=N[ne];if(Q){const{_f:ie,...le}=Q;if(ie){const de=a.array.has(ie.name),ke=Q._f&&uoe(Q._f);ke&&u.validatingFields&&_([ne],!0);const Te=await Oj(Q,i,v,e.shouldUseNativeValidation&&!L,de);if(ke&&u.validatingFields&&_([ne]),Te[ie.name]&&(J.valid=!1,L))break;!L&&(Fe(Te,ie.name)?de?ioe(t.errors,Te,ie.name):Vt(t.errors,ie.name,Te[ie.name]):Dr(t.errors,ie.name))}!Ln(le)&&await H(le,L,J)}}return J.valid},Z=()=>{for(const N of a.unMount){const L=Fe(n,N);L&&(L._f.refs?L._f.refs.every(J=>!Mx(J)):!Mx(L._f.ref))&&ye(N)}a.unMount=new Set},R=(N,L)=>!r.disabled&&(N&&L&&Vt(i,N,L),!pa(F(),s)),U=(N,L,J)=>pF(N,a,{...o.mount?i:wr(L)?s:Ni(N)?{[N]:L}:L},J,L),k=N=>My(Fe(o.mount?i:s,N,r.shouldUnregister?Fe(s,N,[]):[])),W=(N,L,J={})=>{const ne=Fe(n,N);let Q=L;if(ne){const ie=ne._f;ie&&(!ie.disabled&&Vt(i,N,bF(L,ie)),Q=O0(ie.ref)&&xn(L)?"":L,vF(ie.ref)?[...ie.ref.options].forEach(le=>le.selected=Q.includes(le.value)):ie.refs?op(ie.ref)?ie.refs.length>1?ie.refs.forEach(le=>(!le.defaultChecked||!le.disabled)&&(le.checked=Array.isArray(Q)?!!Q.find(de=>de===le.value):Q===le.value)):ie.refs[0]&&(ie.refs[0].checked=!!Q):ie.refs.forEach(le=>le.checked=le.value===Q):nS(ie.ref)?ie.ref.value="":(ie.ref.value=Q,ie.ref.type||f.values.next({name:N,values:{...i}})))}(J.shouldDirty||J.shouldTouch)&&O(N,Q,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&X(N)},B=(N,L,J)=>{for(const ne in L){const Q=L[ne],ie=`${N}.${ne}`,le=Fe(n,ie);(a.array.has(N)||Er(Q)||le&&!le._f)&&!jl(Q)?B(ie,Q,J):W(ie,Q,J)}},I=(N,L,J={})=>{const ne=Fe(n,N),Q=a.array.has(N),ie=In(L);Vt(i,N,ie),Q?(f.array.next({name:N,values:{...i}}),(u.isDirty||u.dirtyFields)&&J.shouldDirty&&f.state.next({name:N,dirtyFields:dh(s,i),isDirty:R(N,ie)})):ne&&!ne._f&&!xn(ie)?B(N,ie,J):W(N,ie,J),Tj(N,a)&&f.state.next({...t}),f.values.next({name:o.mount?N:void 0,values:{...i}})},G=async N=>{o.mount=!0;const L=N.target;let J=L.name,ne=!0;const Q=Fe(n,J),ie=()=>L.type?Dx(Q._f):aF(N),le=de=>{ne=Number.isNaN(de)||jl(de)&&isNaN(de.getTime())||pa(de,Fe(i,J,de))};if(Q){let de,ke;const Te=ie(),De=N.type===R0.BLUR||N.type===R0.FOCUS_OUT,ot=!doe(Q._f)&&!e.resolver&&!Fe(t.errors,J)&&!Q._f.deps||hoe(De,Fe(t.touchedFields,J),t.isSubmitted,m,p),yt=Tj(J,a,De);Vt(i,J,Te),De?(Q._f.onBlur&&Q._f.onBlur(N),l&&l(0)):Q._f.onChange&&Q._f.onChange(N);const St=O(J,Te,De,!1),zt=!Ln(St)||yt;if(!De&&f.values.next({name:J,type:N.type,values:{...i}}),ot)return u.isValid&&(r.mode==="onBlur"?De&&x():x()),zt&&f.state.next({name:J,...yt?{}:St});if(!De&&yt&&f.state.next({...t}),e.resolver){const{errors:gt}=await M([J]);if(le(Te),ne){const Gt=Dj(t.errors,n,J),nr=Dj(gt,n,Gt.name||J);de=nr.error,J=nr.name,ke=Ln(gt)}}else _([J],!0),de=(await Oj(Q,i,v,e.shouldUseNativeValidation))[J],_([J]),le(Te),ne&&(de?ke=!1:u.isValid&&(ke=await H(n,!0)));ne&&(Q._f.deps&&X(Q._f.deps),z(J,ke,de,St))}},V=(N,L)=>{if(Fe(t.errors,L)&&N.focus)return N.focus(),1},X=async(N,L={})=>{let J,ne;const Q=Fh(N);if(e.resolver){const ie=await D(wr(N)?N:Q);J=Ln(ie),ne=N?!Q.some(le=>Fe(ie,le)):J}else N?(ne=(await Promise.all(Q.map(async ie=>{const le=Fe(n,ie);return await H(le&&le._f?{[ie]:le}:le)}))).every(Boolean),!(!ne&&!t.isValid)&&x()):ne=J=await H(n);return f.state.next({...!Ni(N)||u.isValid&&J!==t.isValid?{}:{name:N},...e.resolver||!N?{isValid:J}:{},errors:t.errors}),L.shouldFocus&&!ne&&Bh(n,V,N?Q:a.mount),ne},F=N=>{const L={...o.mount?i:s};return wr(N)?L:Ni(N)?Fe(L,N):N.map(J=>Fe(L,J))},q=(N,L)=>({invalid:!!Fe((L||t).errors,N),isDirty:!!Fe((L||t).dirtyFields,N),error:Fe((L||t).errors,N),isValidating:!!Fe(t.validatingFields,N),isTouched:!!Fe((L||t).touchedFields,N)}),oe=N=>{N&&Fh(N).forEach(L=>Dr(t.errors,L)),f.state.next({errors:N?t.errors:{}})},re=(N,L,J)=>{const ne=(Fe(n,N,{_f:{}})._f||{}).ref,Q=Fe(t.errors,N)||{},{ref:ie,message:le,type:de,...ke}=Q;Vt(t.errors,N,{...ke,...L,ref:ne}),f.state.next({name:N,errors:t.errors,isValid:!1}),J&&J.shouldFocus&&ne&&ne.focus&&ne.focus()},ee=(N,L)=>fo(N)?f.values.subscribe({next:J=>N(U(void 0,L),J)}):U(N,L,!0),ye=(N,L={})=>{for(const J of N?Fh(N):a.mount)a.mount.delete(J),a.array.delete(J),L.keepValue||(Dr(n,J),Dr(i,J)),!L.keepError&&Dr(t.errors,J),!L.keepDirty&&Dr(t.dirtyFields,J),!L.keepTouched&&Dr(t.touchedFields,J),!L.keepIsValidating&&Dr(t.validatingFields,J),!e.shouldUnregister&&!L.keepDefaultValue&&Dr(s,J);f.values.next({values:{...i}}),f.state.next({...t,...L.keepDirty?{isDirty:R()}:{}}),!L.keepIsValid&&x()},ve=({disabled:N,name:L,field:J,fields:ne,value:Q})=>{if(ws(N)&&o.mount||N){const ie=N?void 0:wr(Q)?Dx(J?J._f:Fe(ne,L)._f):Q;Vt(i,L,ie),O(L,ie,!1,!1,!0)}},he=(N,L={})=>{let J=Fe(n,N);const ne=ws(L.disabled)||ws(r.disabled);return Vt(n,N,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:N}},name:N,mount:!0,...L}}),a.mount.add(N),J?ve({field:J,disabled:ws(L.disabled)?L.disabled:r.disabled,name:N,value:L.value}):P(N,!0,L.value),{...ne?{disabled:L.disabled||r.disabled}:{},...e.progressive?{required:!!L.required,min:hh(L.min),max:hh(L.max),minLength:hh(L.minLength),maxLength:hh(L.maxLength),pattern:hh(L.pattern)}:{},name:N,onChange:G,onBlur:G,ref:Q=>{if(Q){he(N,L),J=Fe(n,N);const ie=wr(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,le=loe(ie),de=J._f.refs||[];if(le?de.find(ke=>ke===ie):ie===J._f.ref)return;Vt(n,N,{_f:{...J._f,...le?{refs:[...de.filter(Mx),ie,...Array.isArray(Fe(s,N))?[{}]:[]],ref:{type:ie.type,name:N}}:{ref:ie}}}),P(N,!1,void 0,ie)}else J=Fe(n,N,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||L.shouldUnregister)&&!(lF(a.array,N)&&o.action)&&a.unMount.add(N)}}},xe=()=>e.shouldFocusError&&Bh(n,V,a.mount),Ce=N=>{ws(N)&&(f.state.next({disabled:N}),Bh(n,(L,J)=>{const ne=Fe(n,J);ne&&(L.disabled=ne._f.disabled||N,Array.isArray(ne._f.refs)&&ne._f.refs.forEach(Q=>{Q.disabled=ne._f.disabled||N}))},0,!1))},ue=(N,L)=>async J=>{let ne;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let Q=In(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:ie,values:le}=await M();t.errors=ie,Q=le}else await H(n);if(Dr(t.errors,"root"),Ln(t.errors)){f.state.next({errors:{}});try{await N(Q,J)}catch(ie){ne=ie}}else L&&await L({...t.errors},J),xe(),setTimeout(xe);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ln(t.errors)&&!ne,submitCount:t.submitCount+1,errors:t.errors}),ne)throw ne},_e=(N,L={})=>{Fe(n,N)&&(wr(L.defaultValue)?I(N,In(Fe(s,N))):(I(N,L.defaultValue),Vt(s,N,In(L.defaultValue))),L.keepTouched||Dr(t.touchedFields,N),L.keepDirty||(Dr(t.dirtyFields,N),t.isDirty=L.defaultValue?R(N,In(Fe(s,N))):R()),L.keepError||(Dr(t.errors,N),u.isValid&&x()),f.state.next({...t}))},Ie=(N,L={})=>{const J=N?In(N):s,ne=In(J),Q=Ln(N),ie=Q?s:ne;if(L.keepDefaultValues||(s=J),!L.keepValues){if(L.keepDirtyValues){const le=new Set([...a.mount,...Object.keys(dh(s,i))]);for(const de of Array.from(le))Fe(t.dirtyFields,de)?Vt(ie,de,Fe(i,de)):I(de,Fe(ie,de))}else{if(eS&&wr(N))for(const le of a.mount){const de=Fe(n,le);if(de&&de._f){const ke=Array.isArray(de._f.refs)?de._f.refs[0]:de._f.ref;if(O0(ke)){const Te=ke.closest("form");if(Te){Te.reset();break}}}}n={}}i=r.shouldUnregister?L.keepDefaultValues?In(s):{}:In(ie),f.array.next({values:{...ie}}),f.values.next({values:{...ie}})}a={mount:L.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!L.keepIsValid||!!L.keepDirtyValues,o.watch=!!r.shouldUnregister,f.state.next({submitCount:L.keepSubmitCount?t.submitCount:0,isDirty:Q?!1:L.keepDirty?t.isDirty:!!(L.keepDefaultValues&&!pa(N,s)),isSubmitted:L.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:Q?{}:L.keepDirtyValues?L.keepDefaultValues&&i?dh(s,i):t.dirtyFields:L.keepDefaultValues&&N?dh(s,N):L.keepDirty?t.dirtyFields:{},touchedFields:L.keepTouched?t.touchedFields:{},errors:L.keepErrors?t.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},$=(N,L)=>Ie(fo(N)?N(i):N,L);return{control:{register:he,unregister:ye,getFieldState:q,handleSubmit:ue,setError:re,_executeSchema:M,_getWatch:U,_getDirty:R,_updateValid:x,_removeUnmounted:Z,_updateFieldArray:C,_updateDisabledField:ve,_getFieldArray:k,_reset:Ie,_resetDefaultValues:()=>fo(e.defaultValues)&&e.defaultValues().then(N=>{$(N,e.resetOptions),f.state.next({isLoading:!1})}),_updateFormState:N=>{t={...t,...N}},_disableForm:Ce,_subjects:f,_proxyFormState:u,_setErrors:T,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(N){o=N},get _defaultValues(){return s},get _names(){return a},set _names(N){a=N},get _formState(){return t},set _formState(N){t=N},get _options(){return e},set _options(N){e={...e,...N}}},trigger:X,register:he,handleSubmit:ue,watch:ee,setValue:I,getValues:F,reset:$,resetField:_e,clearErrors:oe,unregister:ye,setError:re,setFocus:(N,L={})=>{const J=Fe(n,N),ne=J&&J._f;if(ne){const Q=ne.refs?ne.refs[0]:ne.ref;Q.focus&&(Q.focus(),L.shouldSelect&&Q.select())}},getFieldState:q}}function goe(r={}){const e=be.useRef(),t=be.useRef(),[n,s]=be.useState({isDirty:!1,isValidating:!1,isLoading:fo(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,defaultValues:fo(r.defaultValues)?void 0:r.defaultValues});e.current||(e.current={...moe(r),formState:n});const i=e.current.control;return i._options=r,rS({subject:i._subjects.state,next:o=>{hF(o,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),be.useEffect(()=>i._disableForm(r.disabled),[i,r.disabled]),be.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),be.useEffect(()=>{r.values&&!pa(r.values,t.current)?(i._reset(r.values,i._options.resetOptions),t.current=r.values,s(o=>({...o}))):i._resetDefaultValues()},[r.values,i]),be.useEffect(()=>{r.errors&&i._setErrors(r.errors)},[r.errors,i]),be.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),be.useEffect(()=>{r.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[r.shouldUnregister,i]),be.useEffect(()=>{e.current&&(e.current.watch=e.current.watch.bind({}))},[n]),e.current.formState=dF(n,i),e.current}const Ij=(r,e,t)=>{if(r&&"reportValidity"in r){const n=Fe(t,e);r.setCustomValidity(n&&n.message||""),r.reportValidity()}},_F=(r,e)=>{for(const t in e.fields){const n=e.fields[t];n&&n.ref&&"reportValidity"in n.ref?Ij(n.ref,t,r):n.refs&&n.refs.forEach(s=>Ij(s,t,r))}},yoe=(r,e)=>{e.shouldUseNativeValidation&&_F(r,e);const t={};for(const n in r){const s=Fe(e.fields,n),i=Object.assign(r[n]||{},{ref:s&&s.ref});if(voe(e.names||Object.keys(r),n)){const o=Object.assign({},Fe(t,n));Vt(o,"root",i),Vt(t,n,o)}else Vt(t,n,i)}return t},voe=(r,e)=>r.some(t=>t.startsWith(e+"."));var woe=function(r,e){for(var t={};r.length;){var n=r[0],s=n.code,i=n.message,o=n.path.join(".");if(!t[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return r.push(f)})}),e){var l=t[o].types,d=l&&l[n.code];t[o]=mF(o,e,t,s,d?[].concat(d,n.message):n.message)}r.shift()}return t},xoe=function(r,e,t){return t===void 0&&(t={}),function(n,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(d){return i.shouldUseNativeValidation&&_F({},i),{errors:{},values:t.raw?n:d}})}catch(d){return a(d)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:yoe(woe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const boe=eoe,kF=S.createContext({}),Lj=({...r})=>g.jsx(kF.Provider,{value:{name:r.name},children:g.jsx(soe,{...r})}),Iy=()=>{const r=S.useContext(kF),e=S.useContext(SF),{getFieldState:t,formState:n}=Dy(),s=t(r.name,n);if(!r)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:r.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},SF=S.createContext({}),L1=S.forwardRef(({className:r,...e},t)=>{const n=S.useId();return g.jsx(SF.Provider,{value:{id:n},children:g.jsx("div",{ref:t,className:Ye("space-y-2",r),...e})})});L1.displayName="FormItem";const F1=S.forwardRef(({className:r,...e},t)=>{const{error:n,formItemId:s}=Iy();return g.jsx(bs,{ref:t,className:Ye(n&&"text-destructive",r),htmlFor:s,...e})});F1.displayName="FormLabel";const B1=S.forwardRef(({...r},e)=>{const{error:t,formItemId:n,formDescriptionId:s,formMessageId:i}=Iy();return g.jsx(Mi,{ref:e,id:n,"aria-describedby":t?`${s} ${i}`:`${s}`,"aria-invalid":!!t,...r})});B1.displayName="FormControl";const _oe=S.forwardRef(({className:r,...e},t)=>{const{formDescriptionId:n}=Iy();return g.jsx("p",{ref:t,id:n,className:Ye("text-sm text-muted-foreground",r),...e})});_oe.displayName="FormDescription";const $1=S.forwardRef(({className:r,children:e,...t},n)=>{const{error:s,formMessageId:i}=Iy(),o=s?String(s==null?void 0:s.message):e;return o?g.jsx("p",{ref:n,id:i,className:Ye("text-sm font-medium text-destructive",r),...t,children:o}):null});$1.displayName="FormMessage";const koe=xr.object({password:xr.string().min(8,"Password must be at least 8 characters").max(64,"Password cannot exceed 64 characters"),confirmPassword:xr.string()}).refine(r=>r.password===r.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function Soe(){const r=si(),{toast:e}=qn(),[t,n]=S.useState(!1),[s,i]=S.useState(!1),[o,a]=S.useState(null),{user:l,isLoading:d}=An(),u=goe({resolver:xoe(koe),defaultValues:{password:"",confirmPassword:""}});if(!l&&!d)return r("/signin"),null;async function f(p){n(!0),a(null);try{const{error:m}=await Nr.auth.updateUser({password:p.password});if(m)throw m;i(!0),e({title:"Password changed successfully",description:"Your password has been updated. Redirecting to dashboard..."}),setTimeout(()=>{r("/dashboard")},3e3)}catch(m){console.error("Error changing password:",m),a(m.message||"Failed to update your password. Please try again."),e({title:"Password change failed",description:m.message||"Failed to update your password. Please try again.",variant:"destructive"})}finally{n(!1)}}return g.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 px-4",children:g.jsxs(It,{className:"w-full max-w-md",children:[g.jsxs(PR,{className:"space-y-1",children:[g.jsx(RR,{className:"text-2xl font-bold text-center",children:"Change Password"}),g.jsx(OR,{className:"text-center",children:"Enter your new password below"})]}),g.jsxs(MR,{children:[o&&g.jsxs(N0,{variant:"destructive",className:"mb-4",children:[g.jsx(G1,{className:"h-4 w-4"}),g.jsx(j0,{children:"Error"}),g.jsx(P0,{children:o})]}),s?g.jsx("div",{className:"py-4",children:g.jsxs(N0,{className:"bg-green-50 border-green-500 text-green-700",children:[g.jsx(bB,{className:"h-4 w-4 text-green-500"}),g.jsx(j0,{children:"Success!"}),g.jsx(P0,{children:"Your password has been changed successfully. You will be redirected to your dashboard shortly."})]})}):g.jsx(boe,{...u,children:g.jsxs("form",{onSubmit:u.handleSubmit(f),className:"space-y-4",children:[g.jsx(Lj,{control:u.control,name:"password",render:({field:p})=>g.jsxs(L1,{children:[g.jsx(F1,{children:"New Password"}),g.jsx(B1,{children:g.jsx(_n,{type:"password",placeholder:"",disabled:t,...p})}),g.jsx($1,{})]})}),g.jsx(Lj,{control:u.control,name:"confirmPassword",render:({field:p})=>g.jsxs(L1,{children:[g.jsx(F1,{children:"Confirm New Password"}),g.jsx(B1,{children:g.jsx(_n,{type:"password",placeholder:"",disabled:t,...p})}),g.jsx($1,{})]})}),g.jsx(tt,{type:"submit",className:"w-full",disabled:t||!!o,children:t?"Updating Password...":"Update Password"})]})})]}),g.jsx(DR,{className:"flex justify-center",children:g.jsx(tt,{variant:"link",onClick:()=>r("/dashboard"),className:"px-0",children:"Back to Dashboard"})})]})})}const Coe=new Gz({defaultOptions:{queries:{staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}}}),Eoe=()=>g.jsx(KU,{children:g.jsx(yV,{children:g.jsx(Jz,{client:Coe,children:g.jsx(Cz,{children:g.jsxs(vV,{children:[g.jsx(b3,{}),g.jsx(Q3,{}),g.jsxs($U,{children:[g.jsx(ms,{path:"/",element:g.jsx(p_,{to:"/landing",replace:!0})}),g.jsx(ms,{path:"/landing",element:g.jsx(bV,{})}),g.jsx(ms,{path:"/signin",element:g.jsx(qie,{})}),g.jsx(ms,{path:"/register",element:g.jsx(Gie,{})}),g.jsx(ms,{path:"/dashboard",element:g.jsx(VK,{})}),g.jsx(ms,{path:"/editor/:projectId/:projectName?",element:g.jsx(Cie,{})}),g.jsx(ms,{path:"/profile",element:g.jsx(Die,{})}),g.jsx(ms,{path:"/auth/callback",element:g.jsx(Jie,{})}),g.jsx(ms,{path:"/join/:token",element:g.jsx(Zie,{})}),g.jsx(ms,{path:"/reset-password",element:g.jsx(Soe,{})}),g.jsx(ms,{path:"*",element:g.jsx(Eie,{})})]})]})})})})});b6.createRoot(document.getElementById("root")).render(g.jsx(S3,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:g.jsx(Eoe,{})}));export{UJ as $,Xa as A,eX as B,ho as C,Ht as D,ht as E,Je as F,So as G,yae as H,Joe as I,Zoe as J,pae as K,vae as L,$n as M,xae as N,eae as O,uy as P,tae as Q,Vl as R,js as S,Vn as T,Qoe as U,Qr as V,nc as W,_ae as X,bae as Y,gae as Z,wae as _,Qt as a,oI as a0,Hn as a1,DJ as a2,Nt as a3,Lr as a4,gr as a5,eZ as a6,ze as a7,s1 as a8,uZ as a9,QX as aA,Gj as aB,wZ as aa,fae as ab,dae as ac,hae as ad,mae as ae,uae as af,oZ as ag,iZ as ah,aae as ai,lae as aj,BZ as ak,I0 as al,Pae as am,Rae as an,Iae as ao,Oae as ap,Mae as aq,Dae as ar,Tk as as,sc as at,Nae as au,jae as av,so as aw,La as ax,vy as ay,dy as az,Oe as b,ld as c,$D as d,ZK as e,Koe as f,sae as g,Wt as h,kn as i,nae as j,$t as k,rI as l,qs as m,VY as n,os as o,Iu as p,cr as q,Yoe as r,hN as s,Lt as t,lk as u,EJ as v,rae as w,iae as x,oae as y,Xoe as z};
